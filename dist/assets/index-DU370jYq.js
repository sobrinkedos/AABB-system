(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();function Cv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function LN(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var s=t.default;if(typeof s=="function"){var n=function i(){return this instanceof i?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};n.prototype=s.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var l=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,l.get?l:{enumerable:!0,get:function(){return t[i]}})}),n}var Ph={exports:{}},To={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ey;function BN(){if(ey)return To;ey=1;var t=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function n(i,l,c){var u=null;if(c!==void 0&&(u=""+c),l.key!==void 0&&(u=""+l.key),"key"in l){c={};for(var h in l)h!=="key"&&(c[h]=l[h])}else c=l;return l=c.ref,{$$typeof:t,type:i,key:u,ref:l!==void 0?l:null,props:c}}return To.Fragment=s,To.jsx=n,To.jsxs=n,To}var ty;function $N(){return ty||(ty=1,Ph.exports=BN()),Ph.exports}var e=$N(),zh={exports:{}},Fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sy;function VN(){if(sy)return Fe;sy=1;var t=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function v(A){return A===null||typeof A!="object"?null:(A=y&&A[y]||A["@@iterator"],typeof A=="function"?A:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,_={};function C(A,q,L){this.props=A,this.context=q,this.refs=_,this.updater=L||j}C.prototype.isReactComponent={},C.prototype.setState=function(A,q){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,q,"setState")},C.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function R(){}R.prototype=C.prototype;function S(A,q,L){this.props=A,this.context=q,this.refs=_,this.updater=L||j}var k=S.prototype=new R;k.constructor=S,N(k,C.prototype),k.isPureReactComponent=!0;var E=Array.isArray,w={H:null,A:null,T:null,S:null,V:null},M=Object.prototype.hasOwnProperty;function z(A,q,L,W,oe,me){return L=me.ref,{$$typeof:t,type:A,key:q,ref:L!==void 0?L:null,props:me}}function U(A,q){return z(A.type,q,void 0,void 0,void 0,A.props)}function H(A){return typeof A=="object"&&A!==null&&A.$$typeof===t}function V(A){var q={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(L){return q[L]})}var Q=/\/+/g;function X(A,q){return typeof A=="object"&&A!==null&&A.key!=null?V(""+A.key):q.toString(36)}function re(){}function pe(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(re,re):(A.status="pending",A.then(function(q){A.status==="pending"&&(A.status="fulfilled",A.value=q)},function(q){A.status==="pending"&&(A.status="rejected",A.reason=q)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function $(A,q,L,W,oe){var me=typeof A;(me==="undefined"||me==="boolean")&&(A=null);var fe=!1;if(A===null)fe=!0;else switch(me){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(A.$$typeof){case t:case s:fe=!0;break;case g:return fe=A._init,$(fe(A._payload),q,L,W,oe)}}if(fe)return oe=oe(A),fe=W===""?"."+X(A,0):W,E(oe)?(L="",fe!=null&&(L=fe.replace(Q,"$&/")+"/"),$(oe,q,L,"",function(Ee){return Ee})):oe!=null&&(H(oe)&&(oe=U(oe,L+(oe.key==null||A&&A.key===oe.key?"":(""+oe.key).replace(Q,"$&/")+"/")+fe)),q.push(oe)),1;fe=0;var ie=W===""?".":W+":";if(E(A))for(var de=0;de<A.length;de++)W=A[de],me=ie+X(W,de),fe+=$(W,q,L,me,oe);else if(de=v(A),typeof de=="function")for(A=de.call(A),de=0;!(W=A.next()).done;)W=W.value,me=ie+X(W,de++),fe+=$(W,q,L,me,oe);else if(me==="object"){if(typeof A.then=="function")return $(pe(A),q,L,W,oe);throw q=String(A),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return fe}function D(A,q,L){if(A==null)return A;var W=[],oe=0;return $(A,W,"","",function(me){return q.call(L,me,oe++)}),W}function P(A){if(A._status===-1){var q=A._result;q=q(),q.then(function(L){(A._status===0||A._status===-1)&&(A._status=1,A._result=L)},function(L){(A._status===0||A._status===-1)&&(A._status=2,A._result=L)}),A._status===-1&&(A._status=0,A._result=q)}if(A._status===1)return A._result.default;throw A._result}var B=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function K(){}return Fe.Children={map:D,forEach:function(A,q,L){D(A,function(){q.apply(this,arguments)},L)},count:function(A){var q=0;return D(A,function(){q++}),q},toArray:function(A){return D(A,function(q){return q})||[]},only:function(A){if(!H(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},Fe.Component=C,Fe.Fragment=n,Fe.Profiler=l,Fe.PureComponent=S,Fe.StrictMode=i,Fe.Suspense=f,Fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,Fe.__COMPILER_RUNTIME={__proto__:null,c:function(A){return w.H.useMemoCache(A)}},Fe.cache=function(A){return function(){return A.apply(null,arguments)}},Fe.cloneElement=function(A,q,L){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var W=N({},A.props),oe=A.key,me=void 0;if(q!=null)for(fe in q.ref!==void 0&&(me=void 0),q.key!==void 0&&(oe=""+q.key),q)!M.call(q,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&q.ref===void 0||(W[fe]=q[fe]);var fe=arguments.length-2;if(fe===1)W.children=L;else if(1<fe){for(var ie=Array(fe),de=0;de<fe;de++)ie[de]=arguments[de+2];W.children=ie}return z(A.type,oe,void 0,void 0,me,W)},Fe.createContext=function(A){return A={$$typeof:u,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:c,_context:A},A},Fe.createElement=function(A,q,L){var W,oe={},me=null;if(q!=null)for(W in q.key!==void 0&&(me=""+q.key),q)M.call(q,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(oe[W]=q[W]);var fe=arguments.length-2;if(fe===1)oe.children=L;else if(1<fe){for(var ie=Array(fe),de=0;de<fe;de++)ie[de]=arguments[de+2];oe.children=ie}if(A&&A.defaultProps)for(W in fe=A.defaultProps,fe)oe[W]===void 0&&(oe[W]=fe[W]);return z(A,me,void 0,void 0,null,oe)},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(A){return{$$typeof:h,render:A}},Fe.isValidElement=H,Fe.lazy=function(A){return{$$typeof:g,_payload:{_status:-1,_result:A},_init:P}},Fe.memo=function(A,q){return{$$typeof:p,type:A,compare:q===void 0?null:q}},Fe.startTransition=function(A){var q=w.T,L={};w.T=L;try{var W=A(),oe=w.S;oe!==null&&oe(L,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(K,B)}catch(me){B(me)}finally{w.T=q}},Fe.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},Fe.use=function(A){return w.H.use(A)},Fe.useActionState=function(A,q,L){return w.H.useActionState(A,q,L)},Fe.useCallback=function(A,q){return w.H.useCallback(A,q)},Fe.useContext=function(A){return w.H.useContext(A)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(A,q){return w.H.useDeferredValue(A,q)},Fe.useEffect=function(A,q,L){var W=w.H;if(typeof L=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return W.useEffect(A,q)},Fe.useId=function(){return w.H.useId()},Fe.useImperativeHandle=function(A,q,L){return w.H.useImperativeHandle(A,q,L)},Fe.useInsertionEffect=function(A,q){return w.H.useInsertionEffect(A,q)},Fe.useLayoutEffect=function(A,q){return w.H.useLayoutEffect(A,q)},Fe.useMemo=function(A,q){return w.H.useMemo(A,q)},Fe.useOptimistic=function(A,q){return w.H.useOptimistic(A,q)},Fe.useReducer=function(A,q,L){return w.H.useReducer(A,q,L)},Fe.useRef=function(A){return w.H.useRef(A)},Fe.useState=function(A){return w.H.useState(A)},Fe.useSyncExternalStore=function(A,q,L){return w.H.useSyncExternalStore(A,q,L)},Fe.useTransition=function(){return w.H.useTransition()},Fe.version="19.1.0",Fe}var ay;function of(){return ay||(ay=1,zh.exports=VN()),zh.exports}var b=of();const Ke=Cv(b);var Lh={exports:{}},Eo={},Bh={exports:{}},$h={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ny;function UN(){return ny||(ny=1,function(t){function s(D,P){var B=D.length;D.push(P);e:for(;0<B;){var K=B-1>>>1,A=D[K];if(0<l(A,P))D[K]=P,D[B]=A,B=K;else break e}}function n(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var P=D[0],B=D.pop();if(B!==P){D[0]=B;e:for(var K=0,A=D.length,q=A>>>1;K<q;){var L=2*(K+1)-1,W=D[L],oe=L+1,me=D[oe];if(0>l(W,B))oe<A&&0>l(me,W)?(D[K]=me,D[oe]=B,K=oe):(D[K]=W,D[L]=B,K=L);else if(oe<A&&0>l(me,B))D[K]=me,D[oe]=B,K=oe;else break e}}return P}function l(D,P){var B=D.sortIndex-P.sortIndex;return B!==0?B:D.id-P.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var u=Date,h=u.now();t.unstable_now=function(){return u.now()-h}}var f=[],p=[],g=1,y=null,v=3,j=!1,N=!1,_=!1,C=!1,R=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function E(D){for(var P=n(p);P!==null;){if(P.callback===null)i(p);else if(P.startTime<=D)i(p),P.sortIndex=P.expirationTime,s(f,P);else break;P=n(p)}}function w(D){if(_=!1,E(D),!N)if(n(f)!==null)N=!0,M||(M=!0,X());else{var P=n(p);P!==null&&$(w,P.startTime-D)}}var M=!1,z=-1,U=5,H=-1;function V(){return C?!0:!(t.unstable_now()-H<U)}function Q(){if(C=!1,M){var D=t.unstable_now();H=D;var P=!0;try{e:{N=!1,_&&(_=!1,S(z),z=-1),j=!0;var B=v;try{t:{for(E(D),y=n(f);y!==null&&!(y.expirationTime>D&&V());){var K=y.callback;if(typeof K=="function"){y.callback=null,v=y.priorityLevel;var A=K(y.expirationTime<=D);if(D=t.unstable_now(),typeof A=="function"){y.callback=A,E(D),P=!0;break t}y===n(f)&&i(f),E(D)}else i(f);y=n(f)}if(y!==null)P=!0;else{var q=n(p);q!==null&&$(w,q.startTime-D),P=!1}}break e}finally{y=null,v=B,j=!1}P=void 0}}finally{P?X():M=!1}}}var X;if(typeof k=="function")X=function(){k(Q)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,pe=re.port2;re.port1.onmessage=Q,X=function(){pe.postMessage(null)}}else X=function(){R(Q,0)};function $(D,P){z=R(function(){D(t.unstable_now())},P)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(D){switch(v){case 1:case 2:case 3:var P=3;break;default:P=v}var B=v;v=P;try{return D()}finally{v=B}},t.unstable_requestPaint=function(){C=!0},t.unstable_runWithPriority=function(D,P){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var B=v;v=D;try{return P()}finally{v=B}},t.unstable_scheduleCallback=function(D,P,B){var K=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?K+B:K):B=K,D){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=B+A,D={id:g++,callback:P,priorityLevel:D,startTime:B,expirationTime:A,sortIndex:-1},B>K?(D.sortIndex=B,s(p,D),n(f)===null&&D===n(p)&&(_?(S(z),z=-1):_=!0,$(w,B-K))):(D.sortIndex=A,s(f,D),N||j||(N=!0,M||(M=!0,X()))),D},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(D){var P=v;return function(){var B=v;v=P;try{return D.apply(this,arguments)}finally{v=B}}}}($h)),$h}var ry;function qN(){return ry||(ry=1,Bh.exports=UN()),Bh.exports}var Vh={exports:{}},ts={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iy;function FN(){if(iy)return ts;iy=1;var t=of();function s(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(s(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(f,p,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:y==null?null:""+y,children:f,containerInfo:p,implementation:g}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return ts.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ts.createPortal=function(f,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(s(299));return c(f,p,null,g)},ts.flushSync=function(f){var p=u.T,g=i.p;try{if(u.T=null,i.p=2,f)return f()}finally{u.T=p,i.p=g,i.d.f()}},ts.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(f,p))},ts.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},ts.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var g=p.as,y=h(g,p.crossOrigin),v=typeof p.integrity=="string"?p.integrity:void 0,j=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?i.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:j}):g==="script"&&i.d.X(f,{crossOrigin:y,integrity:v,fetchPriority:j,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},ts.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=h(p.as,p.crossOrigin);i.d.M(f,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(f)},ts.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,y=h(g,p.crossOrigin);i.d.L(f,g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},ts.preloadModule=function(f,p){if(typeof f=="string")if(p){var g=h(p.as,p.crossOrigin);i.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(f)},ts.requestFormReset=function(f){i.d.r(f)},ts.unstable_batchedUpdates=function(f,p){return f(p)},ts.useFormState=function(f,p,g){return u.H.useFormState(f,p,g)},ts.useFormStatus=function(){return u.H.useHostTransitionStatus()},ts.version="19.1.0",ts}var oy;function IN(){if(oy)return Vh.exports;oy=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(s){console.error(s)}}return t(),Vh.exports=FN(),Vh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ly;function HN(){if(ly)return Eo;ly=1;var t=qN(),s=of(),n=IN();function i(a){var r="https://react.dev/errors/"+a;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+a+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function c(a){var r=a,o=a;if(a.alternate)for(;r.return;)r=r.return;else{a=r;do r=a,(r.flags&4098)!==0&&(o=r.return),a=r.return;while(a)}return r.tag===3?o:null}function u(a){if(a.tag===13){var r=a.memoizedState;if(r===null&&(a=a.alternate,a!==null&&(r=a.memoizedState)),r!==null)return r.dehydrated}return null}function h(a){if(c(a)!==a)throw Error(i(188))}function f(a){var r=a.alternate;if(!r){if(r=c(a),r===null)throw Error(i(188));return r!==a?null:a}for(var o=a,d=r;;){var m=o.return;if(m===null)break;var x=m.alternate;if(x===null){if(d=m.return,d!==null){o=d;continue}break}if(m.child===x.child){for(x=m.child;x;){if(x===o)return h(m),a;if(x===d)return h(m),r;x=x.sibling}throw Error(i(188))}if(o.return!==d.return)o=m,d=x;else{for(var T=!1,O=m.child;O;){if(O===o){T=!0,o=m,d=x;break}if(O===d){T=!0,d=m,o=x;break}O=O.sibling}if(!T){for(O=x.child;O;){if(O===o){T=!0,o=x,d=m;break}if(O===d){T=!0,d=x,o=m;break}O=O.sibling}if(!T)throw Error(i(189))}}if(o.alternate!==d)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?a:r}function p(a){var r=a.tag;if(r===5||r===26||r===27||r===6)return a;for(a=a.child;a!==null;){if(r=p(a),r!==null)return r;a=a.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),k=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function X(a){return a===null||typeof a!="object"?null:(a=Q&&a[Q]||a["@@iterator"],typeof a=="function"?a:null)}var re=Symbol.for("react.client.reference");function pe(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===re?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case N:return"Fragment";case C:return"Profiler";case _:return"StrictMode";case w:return"Suspense";case M:return"SuspenseList";case H:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case j:return"Portal";case k:return(a.displayName||"Context")+".Provider";case S:return(a._context.displayName||"Context")+".Consumer";case E:var r=a.render;return a=a.displayName,a||(a=r.displayName||r.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case z:return r=a.displayName||null,r!==null?r:pe(a.type)||"Memo";case U:r=a._payload,a=a._init;try{return pe(a(r))}catch{}}return null}var $=Array.isArray,D=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B={pending:!1,data:null,method:null,action:null},K=[],A=-1;function q(a){return{current:a}}function L(a){0>A||(a.current=K[A],K[A]=null,A--)}function W(a,r){A++,K[A]=a.current,a.current=r}var oe=q(null),me=q(null),fe=q(null),ie=q(null);function de(a,r){switch(W(fe,r),W(me,a),W(oe,null),r.nodeType){case 9:case 11:a=(a=r.documentElement)&&(a=a.namespaceURI)?Ex(a):0;break;default:if(a=r.tagName,r=r.namespaceURI)r=Ex(r),a=Ax(r,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}L(oe),W(oe,a)}function Ee(){L(oe),L(me),L(fe)}function Ue(a){a.memoizedState!==null&&W(ie,a);var r=oe.current,o=Ax(r,a.type);r!==o&&(W(me,a),W(oe,o))}function je(a){me.current===a&&(L(oe),L(me)),ie.current===a&&(L(ie),wo._currentValue=B)}var Be=Object.prototype.hasOwnProperty,De=t.unstable_scheduleCallback,Je=t.unstable_cancelCallback,$t=t.unstable_shouldYield,ke=t.unstable_requestPaint,$e=t.unstable_now,Nt=t.unstable_getCurrentPriorityLevel,ds=t.unstable_ImmediatePriority,I=t.unstable_UserBlockingPriority,ee=t.unstable_NormalPriority,le=t.unstable_LowPriority,be=t.unstable_IdlePriority,ye=t.log,ge=t.unstable_setDisableYieldValue,we=null,Re=null;function qe(a){if(typeof ye=="function"&&ge(a),Re&&typeof Re.setStrictMode=="function")try{Re.setStrictMode(we,a)}catch{}}var tt=Math.clz32?Math.clz32:Z,xe=Math.log,We=Math.LN2;function Z(a){return a>>>=0,a===0?32:31-(xe(a)/We|0)|0}var Ae=256,Pe=4194304;function rt(a){var r=a&42;if(r!==0)return r;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Yt(a,r,o){var d=a.pendingLanes;if(d===0)return 0;var m=0,x=a.suspendedLanes,T=a.pingedLanes;a=a.warmLanes;var O=d&134217727;return O!==0?(d=O&~x,d!==0?m=rt(d):(T&=O,T!==0?m=rt(T):o||(o=O&~a,o!==0&&(m=rt(o))))):(O=d&~x,O!==0?m=rt(O):T!==0?m=rt(T):o||(o=d&~a,o!==0&&(m=rt(o)))),m===0?0:r!==0&&r!==m&&(r&x)===0&&(x=m&-m,o=r&-r,x>=o||x===32&&(o&4194048)!==0)?r:m}function ns(a,r){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&r)===0}function Js(a,r){switch(a){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jn(){var a=Ae;return Ae<<=1,(Ae&4194048)===0&&(Ae=256),a}function Mi(){var a=Pe;return Pe<<=1,(Pe&62914560)===0&&(Pe=4194304),a}function or(a){for(var r=[],o=0;31>o;o++)r.push(a);return r}function Ba(a,r){a.pendingLanes|=r,r!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function ml(a,r,o,d,m,x){var T=a.pendingLanes;a.pendingLanes=o,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=o,a.entangledLanes&=o,a.errorRecoveryDisabledLanes&=o,a.shellSuspendCounter=0;var O=a.entanglements,F=a.expirationTimes,te=a.hiddenUpdates;for(o=T&~o;0<o;){var ce=31-tt(o),he=1<<ce;O[ce]=0,F[ce]=-1;var se=te[ce];if(se!==null)for(te[ce]=null,ce=0;ce<se.length;ce++){var ne=se[ce];ne!==null&&(ne.lane&=-536870913)}o&=~he}d!==0&&fl(a,d,0),x!==0&&m===0&&a.tag!==0&&(a.suspendedLanes|=x&~(T&~r))}function fl(a,r,o){a.pendingLanes|=r,a.suspendedLanes&=~r;var d=31-tt(r);a.entangledLanes|=r,a.entanglements[d]=a.entanglements[d]|1073741824|o&4194090}function Sd(a,r){var o=a.entangledLanes|=r;for(a=a.entanglements;o;){var d=31-tt(o),m=1<<d;m&r|a[d]&r&&(a[d]|=r),o&=~m}}function wn(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Cd(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function p0(){var a=P.p;return a!==0?a:(a=window.event,a===void 0?32:Xx(a.type))}function C1(a,r){var o=P.p;try{return P.p=a,r()}finally{P.p=o}}var $a=Math.random().toString(36).slice(2),Jt="__reactFiber$"+$a,us="__reactProps$"+$a,lr="__reactContainer$"+$a,Td="__reactEvents$"+$a,T1="__reactListeners$"+$a,E1="__reactHandles$"+$a,g0="__reactResources$"+$a,Di="__reactMarker$"+$a;function Ed(a){delete a[Jt],delete a[us],delete a[Td],delete a[T1],delete a[E1]}function cr(a){var r=a[Jt];if(r)return r;for(var o=a.parentNode;o;){if(r=o[lr]||o[Jt]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(a=Ox(a);a!==null;){if(o=a[Jt])return o;a=Ox(a)}return r}a=o,o=a.parentNode}return null}function dr(a){if(a=a[Jt]||a[lr]){var r=a.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return a}return null}function Oi(a){var r=a.tag;if(r===5||r===26||r===27||r===6)return a.stateNode;throw Error(i(33))}function ur(a){var r=a[g0];return r||(r=a[g0]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Vt(a){a[Di]=!0}var x0=new Set,y0={};function _n(a,r){hr(a,r),hr(a+"Capture",r)}function hr(a,r){for(y0[a]=r,a=0;a<r.length;a++)x0.add(r[a])}var A1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),b0={},v0={};function k1(a){return Be.call(v0,a)?!0:Be.call(b0,a)?!1:A1.test(a)?v0[a]=!0:(b0[a]=!0,!1)}function pl(a,r,o){if(k1(r))if(o===null)a.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":a.removeAttribute(r);return;case"boolean":var d=r.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){a.removeAttribute(r);return}}a.setAttribute(r,""+o)}}function gl(a,r,o){if(o===null)a.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(r);return}a.setAttribute(r,""+o)}}function fa(a,r,o,d){if(d===null)a.removeAttribute(o);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttributeNS(r,o,""+d)}}var Ad,j0;function mr(a){if(Ad===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);Ad=r&&r[1]||"",j0=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ad+a+j0}var kd=!1;function Md(a,r){if(!a||kd)return"";kd=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(r){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(ne){var se=ne}Reflect.construct(a,[],he)}else{try{he.call()}catch(ne){se=ne}a.call(he.prototype)}}else{try{throw Error()}catch(ne){se=ne}(he=a())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(ne){if(ne&&se&&typeof ne.stack=="string")return[ne.stack,se.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=d.DetermineComponentFrameRoot(),T=x[0],O=x[1];if(T&&O){var F=T.split(`
`),te=O.split(`
`);for(m=d=0;d<F.length&&!F[d].includes("DetermineComponentFrameRoot");)d++;for(;m<te.length&&!te[m].includes("DetermineComponentFrameRoot");)m++;if(d===F.length||m===te.length)for(d=F.length-1,m=te.length-1;1<=d&&0<=m&&F[d]!==te[m];)m--;for(;1<=d&&0<=m;d--,m--)if(F[d]!==te[m]){if(d!==1||m!==1)do if(d--,m--,0>m||F[d]!==te[m]){var ce=`
`+F[d].replace(" at new "," at ");return a.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",a.displayName)),ce}while(1<=d&&0<=m);break}}}finally{kd=!1,Error.prepareStackTrace=o}return(o=a?a.displayName||a.name:"")?mr(o):""}function M1(a){switch(a.tag){case 26:case 27:case 5:return mr(a.type);case 16:return mr("Lazy");case 13:return mr("Suspense");case 19:return mr("SuspenseList");case 0:case 15:return Md(a.type,!1);case 11:return Md(a.type.render,!1);case 1:return Md(a.type,!0);case 31:return mr("Activity");default:return""}}function w0(a){try{var r="";do r+=M1(a),a=a.return;while(a);return r}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function As(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function _0(a){var r=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function D1(a){var r=_0(a)?"checked":"value",o=Object.getOwnPropertyDescriptor(a.constructor.prototype,r),d=""+a[r];if(!a.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var m=o.get,x=o.set;return Object.defineProperty(a,r,{configurable:!0,get:function(){return m.call(this)},set:function(T){d=""+T,x.call(this,T)}}),Object.defineProperty(a,r,{enumerable:o.enumerable}),{getValue:function(){return d},setValue:function(T){d=""+T},stopTracking:function(){a._valueTracker=null,delete a[r]}}}}function xl(a){a._valueTracker||(a._valueTracker=D1(a))}function N0(a){if(!a)return!1;var r=a._valueTracker;if(!r)return!0;var o=r.getValue(),d="";return a&&(d=_0(a)?a.checked?"true":"false":a.value),a=d,a!==o?(r.setValue(a),!0):!1}function yl(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var O1=/[\n"\\]/g;function ks(a){return a.replace(O1,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Dd(a,r,o,d,m,x,T,O){a.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?a.type=T:a.removeAttribute("type"),r!=null?T==="number"?(r===0&&a.value===""||a.value!=r)&&(a.value=""+As(r)):a.value!==""+As(r)&&(a.value=""+As(r)):T!=="submit"&&T!=="reset"||a.removeAttribute("value"),r!=null?Od(a,T,As(r)):o!=null?Od(a,T,As(o)):d!=null&&a.removeAttribute("value"),m==null&&x!=null&&(a.defaultChecked=!!x),m!=null&&(a.checked=m&&typeof m!="function"&&typeof m!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?a.name=""+As(O):a.removeAttribute("name")}function S0(a,r,o,d,m,x,T,O){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(a.type=x),r!=null||o!=null){if(!(x!=="submit"&&x!=="reset"||r!=null))return;o=o!=null?""+As(o):"",r=r!=null?""+As(r):o,O||r===a.value||(a.value=r),a.defaultValue=r}d=d??m,d=typeof d!="function"&&typeof d!="symbol"&&!!d,a.checked=O?a.checked:!!d,a.defaultChecked=!!d,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(a.name=T)}function Od(a,r,o){r==="number"&&yl(a.ownerDocument)===a||a.defaultValue===""+o||(a.defaultValue=""+o)}function fr(a,r,o,d){if(a=a.options,r){r={};for(var m=0;m<o.length;m++)r["$"+o[m]]=!0;for(o=0;o<a.length;o++)m=r.hasOwnProperty("$"+a[o].value),a[o].selected!==m&&(a[o].selected=m),m&&d&&(a[o].defaultSelected=!0)}else{for(o=""+As(o),r=null,m=0;m<a.length;m++){if(a[m].value===o){a[m].selected=!0,d&&(a[m].defaultSelected=!0);return}r!==null||a[m].disabled||(r=a[m])}r!==null&&(r.selected=!0)}}function C0(a,r,o){if(r!=null&&(r=""+As(r),r!==a.value&&(a.value=r),o==null)){a.defaultValue!==r&&(a.defaultValue=r);return}a.defaultValue=o!=null?""+As(o):""}function T0(a,r,o,d){if(r==null){if(d!=null){if(o!=null)throw Error(i(92));if($(d)){if(1<d.length)throw Error(i(93));d=d[0]}o=d}o==null&&(o=""),r=o}o=As(r),a.defaultValue=o,d=a.textContent,d===o&&d!==""&&d!==null&&(a.value=d)}function pr(a,r){if(r){var o=a.firstChild;if(o&&o===a.lastChild&&o.nodeType===3){o.nodeValue=r;return}}a.textContent=r}var R1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function E0(a,r,o){var d=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?d?a.setProperty(r,""):r==="float"?a.cssFloat="":a[r]="":d?a.setProperty(r,o):typeof o!="number"||o===0||R1.has(r)?r==="float"?a.cssFloat=o:a[r]=(""+o).trim():a[r]=o+"px"}function A0(a,r,o){if(r!=null&&typeof r!="object")throw Error(i(62));if(a=a.style,o!=null){for(var d in o)!o.hasOwnProperty(d)||r!=null&&r.hasOwnProperty(d)||(d.indexOf("--")===0?a.setProperty(d,""):d==="float"?a.cssFloat="":a[d]="");for(var m in r)d=r[m],r.hasOwnProperty(m)&&o[m]!==d&&E0(a,m,d)}else for(var x in r)r.hasOwnProperty(x)&&E0(a,x,r[x])}function Rd(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var P1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),z1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function bl(a){return z1.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var Pd=null;function zd(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var gr=null,xr=null;function k0(a){var r=dr(a);if(r&&(a=r.stateNode)){var o=a[us]||null;e:switch(a=r.stateNode,r.type){case"input":if(Dd(a,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=a;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+ks(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var d=o[r];if(d!==a&&d.form===a.form){var m=d[us]||null;if(!m)throw Error(i(90));Dd(d,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(r=0;r<o.length;r++)d=o[r],d.form===a.form&&N0(d)}break e;case"textarea":C0(a,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&fr(a,!!o.multiple,r,!1)}}}var Ld=!1;function M0(a,r,o){if(Ld)return a(r,o);Ld=!0;try{var d=a(r);return d}finally{if(Ld=!1,(gr!==null||xr!==null)&&(nc(),gr&&(r=gr,a=xr,xr=gr=null,k0(r),a)))for(r=0;r<a.length;r++)k0(a[r])}}function Ri(a,r){var o=a.stateNode;if(o===null)return null;var d=o[us]||null;if(d===null)return null;o=d[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(a=a.type,d=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!d;break e;default:a=!1}if(a)return null;if(o&&typeof o!="function")throw Error(i(231,r,typeof o));return o}var pa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bd=!1;if(pa)try{var Pi={};Object.defineProperty(Pi,"passive",{get:function(){Bd=!0}}),window.addEventListener("test",Pi,Pi),window.removeEventListener("test",Pi,Pi)}catch{Bd=!1}var Va=null,$d=null,vl=null;function D0(){if(vl)return vl;var a,r=$d,o=r.length,d,m="value"in Va?Va.value:Va.textContent,x=m.length;for(a=0;a<o&&r[a]===m[a];a++);var T=o-a;for(d=1;d<=T&&r[o-d]===m[x-d];d++);return vl=m.slice(a,1<d?1-d:void 0)}function jl(a){var r=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&r===13&&(a=13)):a=r,a===10&&(a=13),32<=a||a===13?a:0}function wl(){return!0}function O0(){return!1}function hs(a){function r(o,d,m,x,T){this._reactName=o,this._targetInst=m,this.type=d,this.nativeEvent=x,this.target=T,this.currentTarget=null;for(var O in a)a.hasOwnProperty(O)&&(o=a[O],this[O]=o?o(x):x[O]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?wl:O0,this.isPropagationStopped=O0,this}return g(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=wl)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=wl)},persist:function(){},isPersistent:wl}),r}var Nn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_l=hs(Nn),zi=g({},Nn,{view:0,detail:0}),L1=hs(zi),Vd,Ud,Li,Nl=g({},zi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fd,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Li&&(Li&&a.type==="mousemove"?(Vd=a.screenX-Li.screenX,Ud=a.screenY-Li.screenY):Ud=Vd=0,Li=a),Vd)},movementY:function(a){return"movementY"in a?a.movementY:Ud}}),R0=hs(Nl),B1=g({},Nl,{dataTransfer:0}),$1=hs(B1),V1=g({},zi,{relatedTarget:0}),qd=hs(V1),U1=g({},Nn,{animationName:0,elapsedTime:0,pseudoElement:0}),q1=hs(U1),F1=g({},Nn,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),I1=hs(F1),H1=g({},Nn,{data:0}),P0=hs(H1),G1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Y1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},X1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function K1(a){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(a):(a=X1[a])?!!r[a]:!1}function Fd(){return K1}var W1=g({},zi,{key:function(a){if(a.key){var r=G1[a.key]||a.key;if(r!=="Unidentified")return r}return a.type==="keypress"?(a=jl(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Y1[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fd,charCode:function(a){return a.type==="keypress"?jl(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?jl(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Q1=hs(W1),Z1=g({},Nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),z0=hs(Z1),J1=g({},zi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fd}),e_=hs(J1),t_=g({},Nn,{propertyName:0,elapsedTime:0,pseudoElement:0}),s_=hs(t_),a_=g({},Nl,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),n_=hs(a_),r_=g({},Nn,{newState:0,oldState:0}),i_=hs(r_),o_=[9,13,27,32],Id=pa&&"CompositionEvent"in window,Bi=null;pa&&"documentMode"in document&&(Bi=document.documentMode);var l_=pa&&"TextEvent"in window&&!Bi,L0=pa&&(!Id||Bi&&8<Bi&&11>=Bi),B0=" ",$0=!1;function V0(a,r){switch(a){case"keyup":return o_.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function U0(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var yr=!1;function c_(a,r){switch(a){case"compositionend":return U0(r);case"keypress":return r.which!==32?null:($0=!0,B0);case"textInput":return a=r.data,a===B0&&$0?null:a;default:return null}}function d_(a,r){if(yr)return a==="compositionend"||!Id&&V0(a,r)?(a=D0(),vl=$d=Va=null,yr=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return L0&&r.locale!=="ko"?null:r.data;default:return null}}var u_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function q0(a){var r=a&&a.nodeName&&a.nodeName.toLowerCase();return r==="input"?!!u_[a.type]:r==="textarea"}function F0(a,r,o,d){gr?xr?xr.push(d):xr=[d]:gr=d,r=dc(r,"onChange"),0<r.length&&(o=new _l("onChange","change",null,o,d),a.push({event:o,listeners:r}))}var $i=null,Vi=null;function h_(a){_x(a,0)}function Sl(a){var r=Oi(a);if(N0(r))return a}function I0(a,r){if(a==="change")return r}var H0=!1;if(pa){var Hd;if(pa){var Gd="oninput"in document;if(!Gd){var G0=document.createElement("div");G0.setAttribute("oninput","return;"),Gd=typeof G0.oninput=="function"}Hd=Gd}else Hd=!1;H0=Hd&&(!document.documentMode||9<document.documentMode)}function Y0(){$i&&($i.detachEvent("onpropertychange",X0),Vi=$i=null)}function X0(a){if(a.propertyName==="value"&&Sl(Vi)){var r=[];F0(r,Vi,a,zd(a)),M0(h_,r)}}function m_(a,r,o){a==="focusin"?(Y0(),$i=r,Vi=o,$i.attachEvent("onpropertychange",X0)):a==="focusout"&&Y0()}function f_(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Sl(Vi)}function p_(a,r){if(a==="click")return Sl(r)}function g_(a,r){if(a==="input"||a==="change")return Sl(r)}function x_(a,r){return a===r&&(a!==0||1/a===1/r)||a!==a&&r!==r}var vs=typeof Object.is=="function"?Object.is:x_;function Ui(a,r){if(vs(a,r))return!0;if(typeof a!="object"||a===null||typeof r!="object"||r===null)return!1;var o=Object.keys(a),d=Object.keys(r);if(o.length!==d.length)return!1;for(d=0;d<o.length;d++){var m=o[d];if(!Be.call(r,m)||!vs(a[m],r[m]))return!1}return!0}function K0(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function W0(a,r){var o=K0(a);a=0;for(var d;o;){if(o.nodeType===3){if(d=a+o.textContent.length,a<=r&&d>=r)return{node:o,offset:r-a};a=d}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=K0(o)}}function Q0(a,r){return a&&r?a===r?!0:a&&a.nodeType===3?!1:r&&r.nodeType===3?Q0(a,r.parentNode):"contains"in a?a.contains(r):a.compareDocumentPosition?!!(a.compareDocumentPosition(r)&16):!1:!1}function Z0(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var r=yl(a.document);r instanceof a.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)a=r.contentWindow;else break;r=yl(a.document)}return r}function Yd(a){var r=a&&a.nodeName&&a.nodeName.toLowerCase();return r&&(r==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||r==="textarea"||a.contentEditable==="true")}var y_=pa&&"documentMode"in document&&11>=document.documentMode,br=null,Xd=null,qi=null,Kd=!1;function J0(a,r,o){var d=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Kd||br==null||br!==yl(d)||(d=br,"selectionStart"in d&&Yd(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),qi&&Ui(qi,d)||(qi=d,d=dc(Xd,"onSelect"),0<d.length&&(r=new _l("onSelect","select",null,r,o),a.push({event:r,listeners:d}),r.target=br)))}function Sn(a,r){var o={};return o[a.toLowerCase()]=r.toLowerCase(),o["Webkit"+a]="webkit"+r,o["Moz"+a]="moz"+r,o}var vr={animationend:Sn("Animation","AnimationEnd"),animationiteration:Sn("Animation","AnimationIteration"),animationstart:Sn("Animation","AnimationStart"),transitionrun:Sn("Transition","TransitionRun"),transitionstart:Sn("Transition","TransitionStart"),transitioncancel:Sn("Transition","TransitionCancel"),transitionend:Sn("Transition","TransitionEnd")},Wd={},ep={};pa&&(ep=document.createElement("div").style,"AnimationEvent"in window||(delete vr.animationend.animation,delete vr.animationiteration.animation,delete vr.animationstart.animation),"TransitionEvent"in window||delete vr.transitionend.transition);function Cn(a){if(Wd[a])return Wd[a];if(!vr[a])return a;var r=vr[a],o;for(o in r)if(r.hasOwnProperty(o)&&o in ep)return Wd[a]=r[o];return a}var tp=Cn("animationend"),sp=Cn("animationiteration"),ap=Cn("animationstart"),b_=Cn("transitionrun"),v_=Cn("transitionstart"),j_=Cn("transitioncancel"),np=Cn("transitionend"),rp=new Map,Qd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qd.push("scrollEnd");function Us(a,r){rp.set(a,r),_n(r,[a])}var ip=new WeakMap;function Ms(a,r){if(typeof a=="object"&&a!==null){var o=ip.get(a);return o!==void 0?o:(r={value:a,source:r,stack:w0(r)},ip.set(a,r),r)}return{value:a,source:r,stack:w0(r)}}var Ds=[],jr=0,Zd=0;function Cl(){for(var a=jr,r=Zd=jr=0;r<a;){var o=Ds[r];Ds[r++]=null;var d=Ds[r];Ds[r++]=null;var m=Ds[r];Ds[r++]=null;var x=Ds[r];if(Ds[r++]=null,d!==null&&m!==null){var T=d.pending;T===null?m.next=m:(m.next=T.next,T.next=m),d.pending=m}x!==0&&op(o,m,x)}}function Tl(a,r,o,d){Ds[jr++]=a,Ds[jr++]=r,Ds[jr++]=o,Ds[jr++]=d,Zd|=d,a.lanes|=d,a=a.alternate,a!==null&&(a.lanes|=d)}function Jd(a,r,o,d){return Tl(a,r,o,d),El(a)}function wr(a,r){return Tl(a,null,null,r),El(a)}function op(a,r,o){a.lanes|=o;var d=a.alternate;d!==null&&(d.lanes|=o);for(var m=!1,x=a.return;x!==null;)x.childLanes|=o,d=x.alternate,d!==null&&(d.childLanes|=o),x.tag===22&&(a=x.stateNode,a===null||a._visibility&1||(m=!0)),a=x,x=x.return;return a.tag===3?(x=a.stateNode,m&&r!==null&&(m=31-tt(o),a=x.hiddenUpdates,d=a[m],d===null?a[m]=[r]:d.push(r),r.lane=o|536870912),x):null}function El(a){if(50<fo)throw fo=0,rh=null,Error(i(185));for(var r=a.return;r!==null;)a=r,r=a.return;return a.tag===3?a.stateNode:null}var _r={};function w_(a,r,o,d){this.tag=a,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function js(a,r,o,d){return new w_(a,r,o,d)}function eu(a){return a=a.prototype,!(!a||!a.isReactComponent)}function ga(a,r){var o=a.alternate;return o===null?(o=js(a.tag,r,a.key,a.mode),o.elementType=a.elementType,o.type=a.type,o.stateNode=a.stateNode,o.alternate=a,a.alternate=o):(o.pendingProps=r,o.type=a.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=a.flags&65011712,o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,r=a.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=a.sibling,o.index=a.index,o.ref=a.ref,o.refCleanup=a.refCleanup,o}function lp(a,r){a.flags&=65011714;var o=a.alternate;return o===null?(a.childLanes=0,a.lanes=r,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,r=o.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a}function Al(a,r,o,d,m,x){var T=0;if(d=a,typeof a=="function")eu(a)&&(T=1);else if(typeof a=="string")T=NN(a,o,oe.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case H:return a=js(31,o,r,m),a.elementType=H,a.lanes=x,a;case N:return Tn(o.children,m,x,r);case _:T=8,m|=24;break;case C:return a=js(12,o,r,m|2),a.elementType=C,a.lanes=x,a;case w:return a=js(13,o,r,m),a.elementType=w,a.lanes=x,a;case M:return a=js(19,o,r,m),a.elementType=M,a.lanes=x,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case R:case k:T=10;break e;case S:T=9;break e;case E:T=11;break e;case z:T=14;break e;case U:T=16,d=null;break e}T=29,o=Error(i(130,a===null?"null":typeof a,"")),d=null}return r=js(T,o,r,m),r.elementType=a,r.type=d,r.lanes=x,r}function Tn(a,r,o,d){return a=js(7,a,d,r),a.lanes=o,a}function tu(a,r,o){return a=js(6,a,null,r),a.lanes=o,a}function su(a,r,o){return r=js(4,a.children!==null?a.children:[],a.key,r),r.lanes=o,r.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},r}var Nr=[],Sr=0,kl=null,Ml=0,Os=[],Rs=0,En=null,xa=1,ya="";function An(a,r){Nr[Sr++]=Ml,Nr[Sr++]=kl,kl=a,Ml=r}function cp(a,r,o){Os[Rs++]=xa,Os[Rs++]=ya,Os[Rs++]=En,En=a;var d=xa;a=ya;var m=32-tt(d)-1;d&=~(1<<m),o+=1;var x=32-tt(r)+m;if(30<x){var T=m-m%5;x=(d&(1<<T)-1).toString(32),d>>=T,m-=T,xa=1<<32-tt(r)+m|o<<m|d,ya=x+a}else xa=1<<x|o<<m|d,ya=a}function au(a){a.return!==null&&(An(a,1),cp(a,1,0))}function nu(a){for(;a===kl;)kl=Nr[--Sr],Nr[Sr]=null,Ml=Nr[--Sr],Nr[Sr]=null;for(;a===En;)En=Os[--Rs],Os[Rs]=null,ya=Os[--Rs],Os[Rs]=null,xa=Os[--Rs],Os[Rs]=null}var rs=null,vt=null,et=!1,kn=null,ea=!1,ru=Error(i(519));function Mn(a){var r=Error(i(418,""));throw Hi(Ms(r,a)),ru}function dp(a){var r=a.stateNode,o=a.type,d=a.memoizedProps;switch(r[Jt]=a,r[us]=d,o){case"dialog":Ye("cancel",r),Ye("close",r);break;case"iframe":case"object":case"embed":Ye("load",r);break;case"video":case"audio":for(o=0;o<go.length;o++)Ye(go[o],r);break;case"source":Ye("error",r);break;case"img":case"image":case"link":Ye("error",r),Ye("load",r);break;case"details":Ye("toggle",r);break;case"input":Ye("invalid",r),S0(r,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),xl(r);break;case"select":Ye("invalid",r);break;case"textarea":Ye("invalid",r),T0(r,d.value,d.defaultValue,d.children),xl(r)}o=d.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||d.suppressHydrationWarning===!0||Tx(r.textContent,o)?(d.popover!=null&&(Ye("beforetoggle",r),Ye("toggle",r)),d.onScroll!=null&&Ye("scroll",r),d.onScrollEnd!=null&&Ye("scrollend",r),d.onClick!=null&&(r.onclick=uc),r=!0):r=!1,r||Mn(a)}function up(a){for(rs=a.return;rs;)switch(rs.tag){case 5:case 13:ea=!1;return;case 27:case 3:ea=!0;return;default:rs=rs.return}}function Fi(a){if(a!==rs)return!1;if(!et)return up(a),et=!0,!1;var r=a.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=a.type,o=!(o!=="form"&&o!=="button")||jh(a.type,a.memoizedProps)),o=!o),o&&vt&&Mn(a),up(a),r===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(317));e:{for(a=a.nextSibling,r=0;a;){if(a.nodeType===8)if(o=a.data,o==="/$"){if(r===0){vt=Fs(a.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++;a=a.nextSibling}vt=null}}else r===27?(r=vt,sn(a.type)?(a=Sh,Sh=null,vt=a):vt=r):vt=rs?Fs(a.stateNode.nextSibling):null;return!0}function Ii(){vt=rs=null,et=!1}function hp(){var a=kn;return a!==null&&(ps===null?ps=a:ps.push.apply(ps,a),kn=null),a}function Hi(a){kn===null?kn=[a]:kn.push(a)}var iu=q(null),Dn=null,ba=null;function Ua(a,r,o){W(iu,r._currentValue),r._currentValue=o}function va(a){a._currentValue=iu.current,L(iu)}function ou(a,r,o){for(;a!==null;){var d=a.alternate;if((a.childLanes&r)!==r?(a.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),a===o)break;a=a.return}}function lu(a,r,o,d){var m=a.child;for(m!==null&&(m.return=a);m!==null;){var x=m.dependencies;if(x!==null){var T=m.child;x=x.firstContext;e:for(;x!==null;){var O=x;x=m;for(var F=0;F<r.length;F++)if(O.context===r[F]){x.lanes|=o,O=x.alternate,O!==null&&(O.lanes|=o),ou(x.return,o,a),d||(T=null);break e}x=O.next}}else if(m.tag===18){if(T=m.return,T===null)throw Error(i(341));T.lanes|=o,x=T.alternate,x!==null&&(x.lanes|=o),ou(T,o,a),T=null}else T=m.child;if(T!==null)T.return=m;else for(T=m;T!==null;){if(T===a){T=null;break}if(m=T.sibling,m!==null){m.return=T.return,T=m;break}T=T.return}m=T}}function Gi(a,r,o,d){a=null;for(var m=r,x=!1;m!==null;){if(!x){if((m.flags&524288)!==0)x=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var T=m.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var O=m.type;vs(m.pendingProps.value,T.value)||(a!==null?a.push(O):a=[O])}}else if(m===ie.current){if(T=m.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(a!==null?a.push(wo):a=[wo])}m=m.return}a!==null&&lu(r,a,o,d),r.flags|=262144}function Dl(a){for(a=a.firstContext;a!==null;){if(!vs(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function On(a){Dn=a,ba=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function es(a){return mp(Dn,a)}function Ol(a,r){return Dn===null&&On(a),mp(a,r)}function mp(a,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},ba===null){if(a===null)throw Error(i(308));ba=r,a.dependencies={lanes:0,firstContext:r},a.flags|=524288}else ba=ba.next=r;return o}var __=typeof AbortController<"u"?AbortController:function(){var a=[],r=this.signal={aborted:!1,addEventListener:function(o,d){a.push(d)}};this.abort=function(){r.aborted=!0,a.forEach(function(o){return o()})}},N_=t.unstable_scheduleCallback,S_=t.unstable_NormalPriority,Rt={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cu(){return{controller:new __,data:new Map,refCount:0}}function Yi(a){a.refCount--,a.refCount===0&&N_(S_,function(){a.controller.abort()})}var Xi=null,du=0,Cr=0,Tr=null;function C_(a,r){if(Xi===null){var o=Xi=[];du=0,Cr=hh(),Tr={status:"pending",value:void 0,then:function(d){o.push(d)}}}return du++,r.then(fp,fp),r}function fp(){if(--du===0&&Xi!==null){Tr!==null&&(Tr.status="fulfilled");var a=Xi;Xi=null,Cr=0,Tr=null;for(var r=0;r<a.length;r++)(0,a[r])()}}function T_(a,r){var o=[],d={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return a.then(function(){d.status="fulfilled",d.value=r;for(var m=0;m<o.length;m++)(0,o[m])(r)},function(m){for(d.status="rejected",d.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),d}var pp=D.S;D.S=function(a,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&C_(a,r),pp!==null&&pp(a,r)};var Rn=q(null);function uu(){var a=Rn.current;return a!==null?a:ut.pooledCache}function Rl(a,r){r===null?W(Rn,Rn.current):W(Rn,r.pool)}function gp(){var a=uu();return a===null?null:{parent:Rt._currentValue,pool:a}}var Ki=Error(i(460)),xp=Error(i(474)),Pl=Error(i(542)),hu={then:function(){}};function yp(a){return a=a.status,a==="fulfilled"||a==="rejected"}function zl(){}function bp(a,r,o){switch(o=a[o],o===void 0?a.push(r):o!==r&&(r.then(zl,zl),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw a=r.reason,jp(a),a;default:if(typeof r.status=="string")r.then(zl,zl);else{if(a=ut,a!==null&&100<a.shellSuspendCounter)throw Error(i(482));a=r,a.status="pending",a.then(function(d){if(r.status==="pending"){var m=r;m.status="fulfilled",m.value=d}},function(d){if(r.status==="pending"){var m=r;m.status="rejected",m.reason=d}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw a=r.reason,jp(a),a}throw Wi=r,Ki}}var Wi=null;function vp(){if(Wi===null)throw Error(i(459));var a=Wi;return Wi=null,a}function jp(a){if(a===Ki||a===Pl)throw Error(i(483))}var qa=!1;function mu(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fu(a,r){a=a.updateQueue,r.updateQueue===a&&(r.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Fa(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Ia(a,r,o){var d=a.updateQueue;if(d===null)return null;if(d=d.shared,(st&2)!==0){var m=d.pending;return m===null?r.next=r:(r.next=m.next,m.next=r),d.pending=r,r=El(a),op(a,null,o),r}return Tl(a,d,r,o),El(a)}function Qi(a,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var d=r.lanes;d&=a.pendingLanes,o|=d,r.lanes=o,Sd(a,o)}}function pu(a,r){var o=a.updateQueue,d=a.alternate;if(d!==null&&(d=d.updateQueue,o===d)){var m=null,x=null;if(o=o.firstBaseUpdate,o!==null){do{var T={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};x===null?m=x=T:x=x.next=T,o=o.next}while(o!==null);x===null?m=x=r:x=x.next=r}else m=x=r;o={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:x,shared:d.shared,callbacks:d.callbacks},a.updateQueue=o;return}a=o.lastBaseUpdate,a===null?o.firstBaseUpdate=r:a.next=r,o.lastBaseUpdate=r}var gu=!1;function Zi(){if(gu){var a=Tr;if(a!==null)throw a}}function Ji(a,r,o,d){gu=!1;var m=a.updateQueue;qa=!1;var x=m.firstBaseUpdate,T=m.lastBaseUpdate,O=m.shared.pending;if(O!==null){m.shared.pending=null;var F=O,te=F.next;F.next=null,T===null?x=te:T.next=te,T=F;var ce=a.alternate;ce!==null&&(ce=ce.updateQueue,O=ce.lastBaseUpdate,O!==T&&(O===null?ce.firstBaseUpdate=te:O.next=te,ce.lastBaseUpdate=F))}if(x!==null){var he=m.baseState;T=0,ce=te=F=null,O=x;do{var se=O.lane&-536870913,ne=se!==O.lane;if(ne?(Qe&se)===se:(d&se)===se){se!==0&&se===Cr&&(gu=!0),ce!==null&&(ce=ce.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var ze=a,Me=O;se=r;var lt=o;switch(Me.tag){case 1:if(ze=Me.payload,typeof ze=="function"){he=ze.call(lt,he,se);break e}he=ze;break e;case 3:ze.flags=ze.flags&-65537|128;case 0:if(ze=Me.payload,se=typeof ze=="function"?ze.call(lt,he,se):ze,se==null)break e;he=g({},he,se);break e;case 2:qa=!0}}se=O.callback,se!==null&&(a.flags|=64,ne&&(a.flags|=8192),ne=m.callbacks,ne===null?m.callbacks=[se]:ne.push(se))}else ne={lane:se,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ce===null?(te=ce=ne,F=he):ce=ce.next=ne,T|=se;if(O=O.next,O===null){if(O=m.shared.pending,O===null)break;ne=O,O=ne.next,ne.next=null,m.lastBaseUpdate=ne,m.shared.pending=null}}while(!0);ce===null&&(F=he),m.baseState=F,m.firstBaseUpdate=te,m.lastBaseUpdate=ce,x===null&&(m.shared.lanes=0),Za|=T,a.lanes=T,a.memoizedState=he}}function wp(a,r){if(typeof a!="function")throw Error(i(191,a));a.call(r)}function _p(a,r){var o=a.callbacks;if(o!==null)for(a.callbacks=null,a=0;a<o.length;a++)wp(o[a],r)}var Er=q(null),Ll=q(0);function Np(a,r){a=Ta,W(Ll,a),W(Er,r),Ta=a|r.baseLanes}function xu(){W(Ll,Ta),W(Er,Er.current)}function yu(){Ta=Ll.current,L(Er),L(Ll)}var Ha=0,Ie=null,it=null,kt=null,Bl=!1,Ar=!1,Pn=!1,$l=0,eo=0,kr=null,E_=0;function St(){throw Error(i(321))}function bu(a,r){if(r===null)return!1;for(var o=0;o<r.length&&o<a.length;o++)if(!vs(a[o],r[o]))return!1;return!0}function vu(a,r,o,d,m,x){return Ha=x,Ie=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,D.H=a===null||a.memoizedState===null?og:lg,Pn=!1,x=o(d,m),Pn=!1,Ar&&(x=Cp(r,o,d,m)),Sp(a),x}function Sp(a){D.H=Hl;var r=it!==null&&it.next!==null;if(Ha=0,kt=it=Ie=null,Bl=!1,eo=0,kr=null,r)throw Error(i(300));a===null||Ut||(a=a.dependencies,a!==null&&Dl(a)&&(Ut=!0))}function Cp(a,r,o,d){Ie=a;var m=0;do{if(Ar&&(kr=null),eo=0,Ar=!1,25<=m)throw Error(i(301));if(m+=1,kt=it=null,a.updateQueue!=null){var x=a.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}D.H=P_,x=r(o,d)}while(Ar);return x}function A_(){var a=D.H,r=a.useState()[0];return r=typeof r.then=="function"?to(r):r,a=a.useState()[0],(it!==null?it.memoizedState:null)!==a&&(Ie.flags|=1024),r}function ju(){var a=$l!==0;return $l=0,a}function wu(a,r,o){r.updateQueue=a.updateQueue,r.flags&=-2053,a.lanes&=~o}function _u(a){if(Bl){for(a=a.memoizedState;a!==null;){var r=a.queue;r!==null&&(r.pending=null),a=a.next}Bl=!1}Ha=0,kt=it=Ie=null,Ar=!1,eo=$l=0,kr=null}function ms(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?Ie.memoizedState=kt=a:kt=kt.next=a,kt}function Mt(){if(it===null){var a=Ie.alternate;a=a!==null?a.memoizedState:null}else a=it.next;var r=kt===null?Ie.memoizedState:kt.next;if(r!==null)kt=r,it=a;else{if(a===null)throw Ie.alternate===null?Error(i(467)):Error(i(310));it=a,a={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},kt===null?Ie.memoizedState=kt=a:kt=kt.next=a}return kt}function Nu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function to(a){var r=eo;return eo+=1,kr===null&&(kr=[]),a=bp(kr,a,r),r=Ie,(kt===null?r.memoizedState:kt.next)===null&&(r=r.alternate,D.H=r===null||r.memoizedState===null?og:lg),a}function Vl(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return to(a);if(a.$$typeof===k)return es(a)}throw Error(i(438,String(a)))}function Su(a){var r=null,o=Ie.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var d=Ie.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(r={data:d.data.map(function(m){return m.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=Nu(),Ie.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(a),d=0;d<a;d++)o[d]=V;return r.index++,o}function ja(a,r){return typeof r=="function"?r(a):r}function Ul(a){var r=Mt();return Cu(r,it,a)}function Cu(a,r,o){var d=a.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=o;var m=a.baseQueue,x=d.pending;if(x!==null){if(m!==null){var T=m.next;m.next=x.next,x.next=T}r.baseQueue=m=x,d.pending=null}if(x=a.baseState,m===null)a.memoizedState=x;else{r=m.next;var O=T=null,F=null,te=r,ce=!1;do{var he=te.lane&-536870913;if(he!==te.lane?(Qe&he)===he:(Ha&he)===he){var se=te.revertLane;if(se===0)F!==null&&(F=F.next={lane:0,revertLane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),he===Cr&&(ce=!0);else if((Ha&se)===se){te=te.next,se===Cr&&(ce=!0);continue}else he={lane:0,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},F===null?(O=F=he,T=x):F=F.next=he,Ie.lanes|=se,Za|=se;he=te.action,Pn&&o(x,he),x=te.hasEagerState?te.eagerState:o(x,he)}else se={lane:he,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},F===null?(O=F=se,T=x):F=F.next=se,Ie.lanes|=he,Za|=he;te=te.next}while(te!==null&&te!==r);if(F===null?T=x:F.next=O,!vs(x,a.memoizedState)&&(Ut=!0,ce&&(o=Tr,o!==null)))throw o;a.memoizedState=x,a.baseState=T,a.baseQueue=F,d.lastRenderedState=x}return m===null&&(d.lanes=0),[a.memoizedState,d.dispatch]}function Tu(a){var r=Mt(),o=r.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=a;var d=o.dispatch,m=o.pending,x=r.memoizedState;if(m!==null){o.pending=null;var T=m=m.next;do x=a(x,T.action),T=T.next;while(T!==m);vs(x,r.memoizedState)||(Ut=!0),r.memoizedState=x,r.baseQueue===null&&(r.baseState=x),o.lastRenderedState=x}return[x,d]}function Tp(a,r,o){var d=Ie,m=Mt(),x=et;if(x){if(o===void 0)throw Error(i(407));o=o()}else o=r();var T=!vs((it||m).memoizedState,o);T&&(m.memoizedState=o,Ut=!0),m=m.queue;var O=kp.bind(null,d,m,a);if(so(2048,8,O,[a]),m.getSnapshot!==r||T||kt!==null&&kt.memoizedState.tag&1){if(d.flags|=2048,Mr(9,ql(),Ap.bind(null,d,m,o,r),null),ut===null)throw Error(i(349));x||(Ha&124)!==0||Ep(d,r,o)}return o}function Ep(a,r,o){a.flags|=16384,a={getSnapshot:r,value:o},r=Ie.updateQueue,r===null?(r=Nu(),Ie.updateQueue=r,r.stores=[a]):(o=r.stores,o===null?r.stores=[a]:o.push(a))}function Ap(a,r,o,d){r.value=o,r.getSnapshot=d,Mp(r)&&Dp(a)}function kp(a,r,o){return o(function(){Mp(r)&&Dp(a)})}function Mp(a){var r=a.getSnapshot;a=a.value;try{var o=r();return!vs(a,o)}catch{return!0}}function Dp(a){var r=wr(a,2);r!==null&&Cs(r,a,2)}function Eu(a){var r=ms();if(typeof a=="function"){var o=a;if(a=o(),Pn){qe(!0);try{o()}finally{qe(!1)}}}return r.memoizedState=r.baseState=a,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:a},r}function Op(a,r,o,d){return a.baseState=o,Cu(a,it,typeof d=="function"?d:ja)}function k_(a,r,o,d,m){if(Il(a))throw Error(i(485));if(a=r.action,a!==null){var x={payload:m,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){x.listeners.push(T)}};D.T!==null?o(!0):x.isTransition=!1,d(x),o=r.pending,o===null?(x.next=r.pending=x,Rp(r,x)):(x.next=o.next,r.pending=o.next=x)}}function Rp(a,r){var o=r.action,d=r.payload,m=a.state;if(r.isTransition){var x=D.T,T={};D.T=T;try{var O=o(m,d),F=D.S;F!==null&&F(T,O),Pp(a,r,O)}catch(te){Au(a,r,te)}finally{D.T=x}}else try{x=o(m,d),Pp(a,r,x)}catch(te){Au(a,r,te)}}function Pp(a,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(d){zp(a,r,d)},function(d){return Au(a,r,d)}):zp(a,r,o)}function zp(a,r,o){r.status="fulfilled",r.value=o,Lp(r),a.state=o,r=a.pending,r!==null&&(o=r.next,o===r?a.pending=null:(o=o.next,r.next=o,Rp(a,o)))}function Au(a,r,o){var d=a.pending;if(a.pending=null,d!==null){d=d.next;do r.status="rejected",r.reason=o,Lp(r),r=r.next;while(r!==d)}a.action=null}function Lp(a){a=a.listeners;for(var r=0;r<a.length;r++)(0,a[r])()}function Bp(a,r){return r}function $p(a,r){if(et){var o=ut.formState;if(o!==null){e:{var d=Ie;if(et){if(vt){t:{for(var m=vt,x=ea;m.nodeType!==8;){if(!x){m=null;break t}if(m=Fs(m.nextSibling),m===null){m=null;break t}}x=m.data,m=x==="F!"||x==="F"?m:null}if(m){vt=Fs(m.nextSibling),d=m.data==="F!";break e}}Mn(d)}d=!1}d&&(r=o[0])}}return o=ms(),o.memoizedState=o.baseState=r,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bp,lastRenderedState:r},o.queue=d,o=ng.bind(null,Ie,d),d.dispatch=o,d=Eu(!1),x=Ru.bind(null,Ie,!1,d.queue),d=ms(),m={state:r,dispatch:null,action:a,pending:null},d.queue=m,o=k_.bind(null,Ie,m,x,o),m.dispatch=o,d.memoizedState=a,[r,o,!1]}function Vp(a){var r=Mt();return Up(r,it,a)}function Up(a,r,o){if(r=Cu(a,r,Bp)[0],a=Ul(ja)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var d=to(r)}catch(T){throw T===Ki?Pl:T}else d=r;r=Mt();var m=r.queue,x=m.dispatch;return o!==r.memoizedState&&(Ie.flags|=2048,Mr(9,ql(),M_.bind(null,m,o),null)),[d,x,a]}function M_(a,r){a.action=r}function qp(a){var r=Mt(),o=it;if(o!==null)return Up(r,o,a);Mt(),r=r.memoizedState,o=Mt();var d=o.queue.dispatch;return o.memoizedState=a,[r,d,!1]}function Mr(a,r,o,d){return a={tag:a,create:o,deps:d,inst:r,next:null},r=Ie.updateQueue,r===null&&(r=Nu(),Ie.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=a.next=a:(d=o.next,o.next=a,a.next=d,r.lastEffect=a),a}function ql(){return{destroy:void 0,resource:void 0}}function Fp(){return Mt().memoizedState}function Fl(a,r,o,d){var m=ms();d=d===void 0?null:d,Ie.flags|=a,m.memoizedState=Mr(1|r,ql(),o,d)}function so(a,r,o,d){var m=Mt();d=d===void 0?null:d;var x=m.memoizedState.inst;it!==null&&d!==null&&bu(d,it.memoizedState.deps)?m.memoizedState=Mr(r,x,o,d):(Ie.flags|=a,m.memoizedState=Mr(1|r,x,o,d))}function Ip(a,r){Fl(8390656,8,a,r)}function Hp(a,r){so(2048,8,a,r)}function Gp(a,r){return so(4,2,a,r)}function Yp(a,r){return so(4,4,a,r)}function Xp(a,r){if(typeof r=="function"){a=a();var o=r(a);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return a=a(),r.current=a,function(){r.current=null}}function Kp(a,r,o){o=o!=null?o.concat([a]):null,so(4,4,Xp.bind(null,r,a),o)}function ku(){}function Wp(a,r){var o=Mt();r=r===void 0?null:r;var d=o.memoizedState;return r!==null&&bu(r,d[1])?d[0]:(o.memoizedState=[a,r],a)}function Qp(a,r){var o=Mt();r=r===void 0?null:r;var d=o.memoizedState;if(r!==null&&bu(r,d[1]))return d[0];if(d=a(),Pn){qe(!0);try{a()}finally{qe(!1)}}return o.memoizedState=[d,r],d}function Mu(a,r,o){return o===void 0||(Ha&1073741824)!==0?a.memoizedState=r:(a.memoizedState=o,a=ex(),Ie.lanes|=a,Za|=a,o)}function Zp(a,r,o,d){return vs(o,r)?o:Er.current!==null?(a=Mu(a,o,d),vs(a,r)||(Ut=!0),a):(Ha&42)===0?(Ut=!0,a.memoizedState=o):(a=ex(),Ie.lanes|=a,Za|=a,r)}function Jp(a,r,o,d,m){var x=P.p;P.p=x!==0&&8>x?x:8;var T=D.T,O={};D.T=O,Ru(a,!1,r,o);try{var F=m(),te=D.S;if(te!==null&&te(O,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var ce=T_(F,d);ao(a,r,ce,Ss(a))}else ao(a,r,d,Ss(a))}catch(he){ao(a,r,{then:function(){},status:"rejected",reason:he},Ss())}finally{P.p=x,D.T=T}}function D_(){}function Du(a,r,o,d){if(a.tag!==5)throw Error(i(476));var m=eg(a).queue;Jp(a,m,r,B,o===null?D_:function(){return tg(a),o(d)})}function eg(a){var r=a.memoizedState;if(r!==null)return r;r={memoizedState:B,baseState:B,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:B},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:o},next:null},a.memoizedState=r,a=a.alternate,a!==null&&(a.memoizedState=r),r}function tg(a){var r=eg(a).next.queue;ao(a,r,{},Ss())}function Ou(){return es(wo)}function sg(){return Mt().memoizedState}function ag(){return Mt().memoizedState}function O_(a){for(var r=a.return;r!==null;){switch(r.tag){case 24:case 3:var o=Ss();a=Fa(o);var d=Ia(r,a,o);d!==null&&(Cs(d,r,o),Qi(d,r,o)),r={cache:cu()},a.payload=r;return}r=r.return}}function R_(a,r,o){var d=Ss();o={lane:d,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Il(a)?rg(r,o):(o=Jd(a,r,o,d),o!==null&&(Cs(o,a,d),ig(o,r,d)))}function ng(a,r,o){var d=Ss();ao(a,r,o,d)}function ao(a,r,o,d){var m={lane:d,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Il(a))rg(r,m);else{var x=a.alternate;if(a.lanes===0&&(x===null||x.lanes===0)&&(x=r.lastRenderedReducer,x!==null))try{var T=r.lastRenderedState,O=x(T,o);if(m.hasEagerState=!0,m.eagerState=O,vs(O,T))return Tl(a,r,m,0),ut===null&&Cl(),!1}catch{}finally{}if(o=Jd(a,r,m,d),o!==null)return Cs(o,a,d),ig(o,r,d),!0}return!1}function Ru(a,r,o,d){if(d={lane:2,revertLane:hh(),action:d,hasEagerState:!1,eagerState:null,next:null},Il(a)){if(r)throw Error(i(479))}else r=Jd(a,o,d,2),r!==null&&Cs(r,a,2)}function Il(a){var r=a.alternate;return a===Ie||r!==null&&r===Ie}function rg(a,r){Ar=Bl=!0;var o=a.pending;o===null?r.next=r:(r.next=o.next,o.next=r),a.pending=r}function ig(a,r,o){if((o&4194048)!==0){var d=r.lanes;d&=a.pendingLanes,o|=d,r.lanes=o,Sd(a,o)}}var Hl={readContext:es,use:Vl,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St,useHostTransitionStatus:St,useFormState:St,useActionState:St,useOptimistic:St,useMemoCache:St,useCacheRefresh:St},og={readContext:es,use:Vl,useCallback:function(a,r){return ms().memoizedState=[a,r===void 0?null:r],a},useContext:es,useEffect:Ip,useImperativeHandle:function(a,r,o){o=o!=null?o.concat([a]):null,Fl(4194308,4,Xp.bind(null,r,a),o)},useLayoutEffect:function(a,r){return Fl(4194308,4,a,r)},useInsertionEffect:function(a,r){Fl(4,2,a,r)},useMemo:function(a,r){var o=ms();r=r===void 0?null:r;var d=a();if(Pn){qe(!0);try{a()}finally{qe(!1)}}return o.memoizedState=[d,r],d},useReducer:function(a,r,o){var d=ms();if(o!==void 0){var m=o(r);if(Pn){qe(!0);try{o(r)}finally{qe(!1)}}}else m=r;return d.memoizedState=d.baseState=m,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:m},d.queue=a,a=a.dispatch=R_.bind(null,Ie,a),[d.memoizedState,a]},useRef:function(a){var r=ms();return a={current:a},r.memoizedState=a},useState:function(a){a=Eu(a);var r=a.queue,o=ng.bind(null,Ie,r);return r.dispatch=o,[a.memoizedState,o]},useDebugValue:ku,useDeferredValue:function(a,r){var o=ms();return Mu(o,a,r)},useTransition:function(){var a=Eu(!1);return a=Jp.bind(null,Ie,a.queue,!0,!1),ms().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,r,o){var d=Ie,m=ms();if(et){if(o===void 0)throw Error(i(407));o=o()}else{if(o=r(),ut===null)throw Error(i(349));(Qe&124)!==0||Ep(d,r,o)}m.memoizedState=o;var x={value:o,getSnapshot:r};return m.queue=x,Ip(kp.bind(null,d,x,a),[a]),d.flags|=2048,Mr(9,ql(),Ap.bind(null,d,x,o,r),null),o},useId:function(){var a=ms(),r=ut.identifierPrefix;if(et){var o=ya,d=xa;o=(d&~(1<<32-tt(d)-1)).toString(32)+o,r="«"+r+"R"+o,o=$l++,0<o&&(r+="H"+o.toString(32)),r+="»"}else o=E_++,r="«"+r+"r"+o.toString(32)+"»";return a.memoizedState=r},useHostTransitionStatus:Ou,useFormState:$p,useActionState:$p,useOptimistic:function(a){var r=ms();r.memoizedState=r.baseState=a;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=Ru.bind(null,Ie,!0,o),o.dispatch=r,[a,r]},useMemoCache:Su,useCacheRefresh:function(){return ms().memoizedState=O_.bind(null,Ie)}},lg={readContext:es,use:Vl,useCallback:Wp,useContext:es,useEffect:Hp,useImperativeHandle:Kp,useInsertionEffect:Gp,useLayoutEffect:Yp,useMemo:Qp,useReducer:Ul,useRef:Fp,useState:function(){return Ul(ja)},useDebugValue:ku,useDeferredValue:function(a,r){var o=Mt();return Zp(o,it.memoizedState,a,r)},useTransition:function(){var a=Ul(ja)[0],r=Mt().memoizedState;return[typeof a=="boolean"?a:to(a),r]},useSyncExternalStore:Tp,useId:sg,useHostTransitionStatus:Ou,useFormState:Vp,useActionState:Vp,useOptimistic:function(a,r){var o=Mt();return Op(o,it,a,r)},useMemoCache:Su,useCacheRefresh:ag},P_={readContext:es,use:Vl,useCallback:Wp,useContext:es,useEffect:Hp,useImperativeHandle:Kp,useInsertionEffect:Gp,useLayoutEffect:Yp,useMemo:Qp,useReducer:Tu,useRef:Fp,useState:function(){return Tu(ja)},useDebugValue:ku,useDeferredValue:function(a,r){var o=Mt();return it===null?Mu(o,a,r):Zp(o,it.memoizedState,a,r)},useTransition:function(){var a=Tu(ja)[0],r=Mt().memoizedState;return[typeof a=="boolean"?a:to(a),r]},useSyncExternalStore:Tp,useId:sg,useHostTransitionStatus:Ou,useFormState:qp,useActionState:qp,useOptimistic:function(a,r){var o=Mt();return it!==null?Op(o,it,a,r):(o.baseState=a,[a,o.queue.dispatch])},useMemoCache:Su,useCacheRefresh:ag},Dr=null,no=0;function Gl(a){var r=no;return no+=1,Dr===null&&(Dr=[]),bp(Dr,a,r)}function ro(a,r){r=r.props.ref,a.ref=r!==void 0?r:null}function Yl(a,r){throw r.$$typeof===y?Error(i(525)):(a=Object.prototype.toString.call(r),Error(i(31,a==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":a)))}function cg(a){var r=a._init;return r(a._payload)}function dg(a){function r(Y,G){if(a){var J=Y.deletions;J===null?(Y.deletions=[G],Y.flags|=16):J.push(G)}}function o(Y,G){if(!a)return null;for(;G!==null;)r(Y,G),G=G.sibling;return null}function d(Y){for(var G=new Map;Y!==null;)Y.key!==null?G.set(Y.key,Y):G.set(Y.index,Y),Y=Y.sibling;return G}function m(Y,G){return Y=ga(Y,G),Y.index=0,Y.sibling=null,Y}function x(Y,G,J){return Y.index=J,a?(J=Y.alternate,J!==null?(J=J.index,J<G?(Y.flags|=67108866,G):J):(Y.flags|=67108866,G)):(Y.flags|=1048576,G)}function T(Y){return a&&Y.alternate===null&&(Y.flags|=67108866),Y}function O(Y,G,J,ue){return G===null||G.tag!==6?(G=tu(J,Y.mode,ue),G.return=Y,G):(G=m(G,J),G.return=Y,G)}function F(Y,G,J,ue){var _e=J.type;return _e===N?ce(Y,G,J.props.children,ue,J.key):G!==null&&(G.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===U&&cg(_e)===G.type)?(G=m(G,J.props),ro(G,J),G.return=Y,G):(G=Al(J.type,J.key,J.props,null,Y.mode,ue),ro(G,J),G.return=Y,G)}function te(Y,G,J,ue){return G===null||G.tag!==4||G.stateNode.containerInfo!==J.containerInfo||G.stateNode.implementation!==J.implementation?(G=su(J,Y.mode,ue),G.return=Y,G):(G=m(G,J.children||[]),G.return=Y,G)}function ce(Y,G,J,ue,_e){return G===null||G.tag!==7?(G=Tn(J,Y.mode,ue,_e),G.return=Y,G):(G=m(G,J),G.return=Y,G)}function he(Y,G,J){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=tu(""+G,Y.mode,J),G.return=Y,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case v:return J=Al(G.type,G.key,G.props,null,Y.mode,J),ro(J,G),J.return=Y,J;case j:return G=su(G,Y.mode,J),G.return=Y,G;case U:var ue=G._init;return G=ue(G._payload),he(Y,G,J)}if($(G)||X(G))return G=Tn(G,Y.mode,J,null),G.return=Y,G;if(typeof G.then=="function")return he(Y,Gl(G),J);if(G.$$typeof===k)return he(Y,Ol(Y,G),J);Yl(Y,G)}return null}function se(Y,G,J,ue){var _e=G!==null?G.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return _e!==null?null:O(Y,G,""+J,ue);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case v:return J.key===_e?F(Y,G,J,ue):null;case j:return J.key===_e?te(Y,G,J,ue):null;case U:return _e=J._init,J=_e(J._payload),se(Y,G,J,ue)}if($(J)||X(J))return _e!==null?null:ce(Y,G,J,ue,null);if(typeof J.then=="function")return se(Y,G,Gl(J),ue);if(J.$$typeof===k)return se(Y,G,Ol(Y,J),ue);Yl(Y,J)}return null}function ne(Y,G,J,ue,_e){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return Y=Y.get(J)||null,O(G,Y,""+ue,_e);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case v:return Y=Y.get(ue.key===null?J:ue.key)||null,F(G,Y,ue,_e);case j:return Y=Y.get(ue.key===null?J:ue.key)||null,te(G,Y,ue,_e);case U:var He=ue._init;return ue=He(ue._payload),ne(Y,G,J,ue,_e)}if($(ue)||X(ue))return Y=Y.get(J)||null,ce(G,Y,ue,_e,null);if(typeof ue.then=="function")return ne(Y,G,J,Gl(ue),_e);if(ue.$$typeof===k)return ne(Y,G,J,Ol(G,ue),_e);Yl(G,ue)}return null}function ze(Y,G,J,ue){for(var _e=null,He=null,Ce=G,Oe=G=0,Ft=null;Ce!==null&&Oe<J.length;Oe++){Ce.index>Oe?(Ft=Ce,Ce=null):Ft=Ce.sibling;var Ze=se(Y,Ce,J[Oe],ue);if(Ze===null){Ce===null&&(Ce=Ft);break}a&&Ce&&Ze.alternate===null&&r(Y,Ce),G=x(Ze,G,Oe),He===null?_e=Ze:He.sibling=Ze,He=Ze,Ce=Ft}if(Oe===J.length)return o(Y,Ce),et&&An(Y,Oe),_e;if(Ce===null){for(;Oe<J.length;Oe++)Ce=he(Y,J[Oe],ue),Ce!==null&&(G=x(Ce,G,Oe),He===null?_e=Ce:He.sibling=Ce,He=Ce);return et&&An(Y,Oe),_e}for(Ce=d(Ce);Oe<J.length;Oe++)Ft=ne(Ce,Y,Oe,J[Oe],ue),Ft!==null&&(a&&Ft.alternate!==null&&Ce.delete(Ft.key===null?Oe:Ft.key),G=x(Ft,G,Oe),He===null?_e=Ft:He.sibling=Ft,He=Ft);return a&&Ce.forEach(function(ln){return r(Y,ln)}),et&&An(Y,Oe),_e}function Me(Y,G,J,ue){if(J==null)throw Error(i(151));for(var _e=null,He=null,Ce=G,Oe=G=0,Ft=null,Ze=J.next();Ce!==null&&!Ze.done;Oe++,Ze=J.next()){Ce.index>Oe?(Ft=Ce,Ce=null):Ft=Ce.sibling;var ln=se(Y,Ce,Ze.value,ue);if(ln===null){Ce===null&&(Ce=Ft);break}a&&Ce&&ln.alternate===null&&r(Y,Ce),G=x(ln,G,Oe),He===null?_e=ln:He.sibling=ln,He=ln,Ce=Ft}if(Ze.done)return o(Y,Ce),et&&An(Y,Oe),_e;if(Ce===null){for(;!Ze.done;Oe++,Ze=J.next())Ze=he(Y,Ze.value,ue),Ze!==null&&(G=x(Ze,G,Oe),He===null?_e=Ze:He.sibling=Ze,He=Ze);return et&&An(Y,Oe),_e}for(Ce=d(Ce);!Ze.done;Oe++,Ze=J.next())Ze=ne(Ce,Y,Oe,Ze.value,ue),Ze!==null&&(a&&Ze.alternate!==null&&Ce.delete(Ze.key===null?Oe:Ze.key),G=x(Ze,G,Oe),He===null?_e=Ze:He.sibling=Ze,He=Ze);return a&&Ce.forEach(function(zN){return r(Y,zN)}),et&&An(Y,Oe),_e}function lt(Y,G,J,ue){if(typeof J=="object"&&J!==null&&J.type===N&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case v:e:{for(var _e=J.key;G!==null;){if(G.key===_e){if(_e=J.type,_e===N){if(G.tag===7){o(Y,G.sibling),ue=m(G,J.props.children),ue.return=Y,Y=ue;break e}}else if(G.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===U&&cg(_e)===G.type){o(Y,G.sibling),ue=m(G,J.props),ro(ue,J),ue.return=Y,Y=ue;break e}o(Y,G);break}else r(Y,G);G=G.sibling}J.type===N?(ue=Tn(J.props.children,Y.mode,ue,J.key),ue.return=Y,Y=ue):(ue=Al(J.type,J.key,J.props,null,Y.mode,ue),ro(ue,J),ue.return=Y,Y=ue)}return T(Y);case j:e:{for(_e=J.key;G!==null;){if(G.key===_e)if(G.tag===4&&G.stateNode.containerInfo===J.containerInfo&&G.stateNode.implementation===J.implementation){o(Y,G.sibling),ue=m(G,J.children||[]),ue.return=Y,Y=ue;break e}else{o(Y,G);break}else r(Y,G);G=G.sibling}ue=su(J,Y.mode,ue),ue.return=Y,Y=ue}return T(Y);case U:return _e=J._init,J=_e(J._payload),lt(Y,G,J,ue)}if($(J))return ze(Y,G,J,ue);if(X(J)){if(_e=X(J),typeof _e!="function")throw Error(i(150));return J=_e.call(J),Me(Y,G,J,ue)}if(typeof J.then=="function")return lt(Y,G,Gl(J),ue);if(J.$$typeof===k)return lt(Y,G,Ol(Y,J),ue);Yl(Y,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,G!==null&&G.tag===6?(o(Y,G.sibling),ue=m(G,J),ue.return=Y,Y=ue):(o(Y,G),ue=tu(J,Y.mode,ue),ue.return=Y,Y=ue),T(Y)):o(Y,G)}return function(Y,G,J,ue){try{no=0;var _e=lt(Y,G,J,ue);return Dr=null,_e}catch(Ce){if(Ce===Ki||Ce===Pl)throw Ce;var He=js(29,Ce,null,Y.mode);return He.lanes=ue,He.return=Y,He}finally{}}}var Or=dg(!0),ug=dg(!1),Ps=q(null),ta=null;function Ga(a){var r=a.alternate;W(Pt,Pt.current&1),W(Ps,a),ta===null&&(r===null||Er.current!==null||r.memoizedState!==null)&&(ta=a)}function hg(a){if(a.tag===22){if(W(Pt,Pt.current),W(Ps,a),ta===null){var r=a.alternate;r!==null&&r.memoizedState!==null&&(ta=a)}}else Ya()}function Ya(){W(Pt,Pt.current),W(Ps,Ps.current)}function wa(a){L(Ps),ta===a&&(ta=null),L(Pt)}var Pt=q(0);function Xl(a){for(var r=a;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Nh(o)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break;for(;r.sibling===null;){if(r.return===null||r.return===a)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function Pu(a,r,o,d){r=a.memoizedState,o=o(d,r),o=o==null?r:g({},r,o),a.memoizedState=o,a.lanes===0&&(a.updateQueue.baseState=o)}var zu={enqueueSetState:function(a,r,o){a=a._reactInternals;var d=Ss(),m=Fa(d);m.payload=r,o!=null&&(m.callback=o),r=Ia(a,m,d),r!==null&&(Cs(r,a,d),Qi(r,a,d))},enqueueReplaceState:function(a,r,o){a=a._reactInternals;var d=Ss(),m=Fa(d);m.tag=1,m.payload=r,o!=null&&(m.callback=o),r=Ia(a,m,d),r!==null&&(Cs(r,a,d),Qi(r,a,d))},enqueueForceUpdate:function(a,r){a=a._reactInternals;var o=Ss(),d=Fa(o);d.tag=2,r!=null&&(d.callback=r),r=Ia(a,d,o),r!==null&&(Cs(r,a,o),Qi(r,a,o))}};function mg(a,r,o,d,m,x,T){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(d,x,T):r.prototype&&r.prototype.isPureReactComponent?!Ui(o,d)||!Ui(m,x):!0}function fg(a,r,o,d){a=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,d),r.state!==a&&zu.enqueueReplaceState(r,r.state,null)}function zn(a,r){var o=r;if("ref"in r){o={};for(var d in r)d!=="ref"&&(o[d]=r[d])}if(a=a.defaultProps){o===r&&(o=g({},o));for(var m in a)o[m]===void 0&&(o[m]=a[m])}return o}var Kl=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function pg(a){Kl(a)}function gg(a){console.error(a)}function xg(a){Kl(a)}function Wl(a,r){try{var o=a.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(d){setTimeout(function(){throw d})}}function yg(a,r,o){try{var d=a.onCaughtError;d(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Lu(a,r,o){return o=Fa(o),o.tag=3,o.payload={element:null},o.callback=function(){Wl(a,r)},o}function bg(a){return a=Fa(a),a.tag=3,a}function vg(a,r,o,d){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var x=d.value;a.payload=function(){return m(x)},a.callback=function(){yg(r,o,d)}}var T=o.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(a.callback=function(){yg(r,o,d),typeof m!="function"&&(Ja===null?Ja=new Set([this]):Ja.add(this));var O=d.stack;this.componentDidCatch(d.value,{componentStack:O!==null?O:""})})}function z_(a,r,o,d,m){if(o.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(r=o.alternate,r!==null&&Gi(r,o,m,!0),o=Ps.current,o!==null){switch(o.tag){case 13:return ta===null?oh():o.alternate===null&&jt===0&&(jt=3),o.flags&=-257,o.flags|=65536,o.lanes=m,d===hu?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([d]):r.add(d),ch(a,d,m)),!1;case 22:return o.flags|=65536,d===hu?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([d])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([d]):o.add(d)),ch(a,d,m)),!1}throw Error(i(435,o.tag))}return ch(a,d,m),oh(),!1}if(et)return r=Ps.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=m,d!==ru&&(a=Error(i(422),{cause:d}),Hi(Ms(a,o)))):(d!==ru&&(r=Error(i(423),{cause:d}),Hi(Ms(r,o))),a=a.current.alternate,a.flags|=65536,m&=-m,a.lanes|=m,d=Ms(d,o),m=Lu(a.stateNode,d,m),pu(a,m),jt!==4&&(jt=2)),!1;var x=Error(i(520),{cause:d});if(x=Ms(x,o),mo===null?mo=[x]:mo.push(x),jt!==4&&(jt=2),r===null)return!0;d=Ms(d,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,a=m&-m,o.lanes|=a,a=Lu(o.stateNode,d,a),pu(o,a),!1;case 1:if(r=o.type,x=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ja===null||!Ja.has(x))))return o.flags|=65536,m&=-m,o.lanes|=m,m=bg(m),vg(m,a,o,d),pu(o,m),!1}o=o.return}while(o!==null);return!1}var jg=Error(i(461)),Ut=!1;function Xt(a,r,o,d){r.child=a===null?ug(r,null,o,d):Or(r,a.child,o,d)}function wg(a,r,o,d,m){o=o.render;var x=r.ref;if("ref"in d){var T={};for(var O in d)O!=="ref"&&(T[O]=d[O])}else T=d;return On(r),d=vu(a,r,o,T,x,m),O=ju(),a!==null&&!Ut?(wu(a,r,m),_a(a,r,m)):(et&&O&&au(r),r.flags|=1,Xt(a,r,d,m),r.child)}function _g(a,r,o,d,m){if(a===null){var x=o.type;return typeof x=="function"&&!eu(x)&&x.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=x,Ng(a,r,x,d,m)):(a=Al(o.type,null,d,r,r.mode,m),a.ref=r.ref,a.return=r,r.child=a)}if(x=a.child,!Hu(a,m)){var T=x.memoizedProps;if(o=o.compare,o=o!==null?o:Ui,o(T,d)&&a.ref===r.ref)return _a(a,r,m)}return r.flags|=1,a=ga(x,d),a.ref=r.ref,a.return=r,r.child=a}function Ng(a,r,o,d,m){if(a!==null){var x=a.memoizedProps;if(Ui(x,d)&&a.ref===r.ref)if(Ut=!1,r.pendingProps=d=x,Hu(a,m))(a.flags&131072)!==0&&(Ut=!0);else return r.lanes=a.lanes,_a(a,r,m)}return Bu(a,r,o,d,m)}function Sg(a,r,o){var d=r.pendingProps,m=d.children,x=a!==null?a.memoizedState:null;if(d.mode==="hidden"){if((r.flags&128)!==0){if(d=x!==null?x.baseLanes|o:o,a!==null){for(m=r.child=a.child,x=0;m!==null;)x=x|m.lanes|m.childLanes,m=m.sibling;r.childLanes=x&~d}else r.childLanes=0,r.child=null;return Cg(a,r,d,o)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},a!==null&&Rl(r,x!==null?x.cachePool:null),x!==null?Np(r,x):xu(),hg(r);else return r.lanes=r.childLanes=536870912,Cg(a,r,x!==null?x.baseLanes|o:o,o)}else x!==null?(Rl(r,x.cachePool),Np(r,x),Ya(),r.memoizedState=null):(a!==null&&Rl(r,null),xu(),Ya());return Xt(a,r,m,o),r.child}function Cg(a,r,o,d){var m=uu();return m=m===null?null:{parent:Rt._currentValue,pool:m},r.memoizedState={baseLanes:o,cachePool:m},a!==null&&Rl(r,null),xu(),hg(r),a!==null&&Gi(a,r,d,!0),null}function Ql(a,r){var o=r.ref;if(o===null)a!==null&&a.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(a===null||a.ref!==o)&&(r.flags|=4194816)}}function Bu(a,r,o,d,m){return On(r),o=vu(a,r,o,d,void 0,m),d=ju(),a!==null&&!Ut?(wu(a,r,m),_a(a,r,m)):(et&&d&&au(r),r.flags|=1,Xt(a,r,o,m),r.child)}function Tg(a,r,o,d,m,x){return On(r),r.updateQueue=null,o=Cp(r,d,o,m),Sp(a),d=ju(),a!==null&&!Ut?(wu(a,r,x),_a(a,r,x)):(et&&d&&au(r),r.flags|=1,Xt(a,r,o,x),r.child)}function Eg(a,r,o,d,m){if(On(r),r.stateNode===null){var x=_r,T=o.contextType;typeof T=="object"&&T!==null&&(x=es(T)),x=new o(d,x),r.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=zu,r.stateNode=x,x._reactInternals=r,x=r.stateNode,x.props=d,x.state=r.memoizedState,x.refs={},mu(r),T=o.contextType,x.context=typeof T=="object"&&T!==null?es(T):_r,x.state=r.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(Pu(r,o,T,d),x.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(T=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),T!==x.state&&zu.enqueueReplaceState(x,x.state,null),Ji(r,d,x,m),Zi(),x.state=r.memoizedState),typeof x.componentDidMount=="function"&&(r.flags|=4194308),d=!0}else if(a===null){x=r.stateNode;var O=r.memoizedProps,F=zn(o,O);x.props=F;var te=x.context,ce=o.contextType;T=_r,typeof ce=="object"&&ce!==null&&(T=es(ce));var he=o.getDerivedStateFromProps;ce=typeof he=="function"||typeof x.getSnapshotBeforeUpdate=="function",O=r.pendingProps!==O,ce||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(O||te!==T)&&fg(r,x,d,T),qa=!1;var se=r.memoizedState;x.state=se,Ji(r,d,x,m),Zi(),te=r.memoizedState,O||se!==te||qa?(typeof he=="function"&&(Pu(r,o,he,d),te=r.memoizedState),(F=qa||mg(r,o,F,d,se,te,T))?(ce||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(r.flags|=4194308)):(typeof x.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=te),x.props=d,x.state=te,x.context=T,d=F):(typeof x.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{x=r.stateNode,fu(a,r),T=r.memoizedProps,ce=zn(o,T),x.props=ce,he=r.pendingProps,se=x.context,te=o.contextType,F=_r,typeof te=="object"&&te!==null&&(F=es(te)),O=o.getDerivedStateFromProps,(te=typeof O=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(T!==he||se!==F)&&fg(r,x,d,F),qa=!1,se=r.memoizedState,x.state=se,Ji(r,d,x,m),Zi();var ne=r.memoizedState;T!==he||se!==ne||qa||a!==null&&a.dependencies!==null&&Dl(a.dependencies)?(typeof O=="function"&&(Pu(r,o,O,d),ne=r.memoizedState),(ce=qa||mg(r,o,ce,d,se,ne,F)||a!==null&&a.dependencies!==null&&Dl(a.dependencies))?(te||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(d,ne,F),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(d,ne,F)),typeof x.componentDidUpdate=="function"&&(r.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof x.componentDidUpdate!="function"||T===a.memoizedProps&&se===a.memoizedState||(r.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||T===a.memoizedProps&&se===a.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=ne),x.props=d,x.state=ne,x.context=F,d=ce):(typeof x.componentDidUpdate!="function"||T===a.memoizedProps&&se===a.memoizedState||(r.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||T===a.memoizedProps&&se===a.memoizedState||(r.flags|=1024),d=!1)}return x=d,Ql(a,r),d=(r.flags&128)!==0,x||d?(x=r.stateNode,o=d&&typeof o.getDerivedStateFromError!="function"?null:x.render(),r.flags|=1,a!==null&&d?(r.child=Or(r,a.child,null,m),r.child=Or(r,null,o,m)):Xt(a,r,o,m),r.memoizedState=x.state,a=r.child):a=_a(a,r,m),a}function Ag(a,r,o,d){return Ii(),r.flags|=256,Xt(a,r,o,d),r.child}var $u={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vu(a){return{baseLanes:a,cachePool:gp()}}function Uu(a,r,o){return a=a!==null?a.childLanes&~o:0,r&&(a|=zs),a}function kg(a,r,o){var d=r.pendingProps,m=!1,x=(r.flags&128)!==0,T;if((T=x)||(T=a!==null&&a.memoizedState===null?!1:(Pt.current&2)!==0),T&&(m=!0,r.flags&=-129),T=(r.flags&32)!==0,r.flags&=-33,a===null){if(et){if(m?Ga(r):Ya(),et){var O=vt,F;if(F=O){e:{for(F=O,O=ea;F.nodeType!==8;){if(!O){O=null;break e}if(F=Fs(F.nextSibling),F===null){O=null;break e}}O=F}O!==null?(r.memoizedState={dehydrated:O,treeContext:En!==null?{id:xa,overflow:ya}:null,retryLane:536870912,hydrationErrors:null},F=js(18,null,null,0),F.stateNode=O,F.return=r,r.child=F,rs=r,vt=null,F=!0):F=!1}F||Mn(r)}if(O=r.memoizedState,O!==null&&(O=O.dehydrated,O!==null))return Nh(O)?r.lanes=32:r.lanes=536870912,null;wa(r)}return O=d.children,d=d.fallback,m?(Ya(),m=r.mode,O=Zl({mode:"hidden",children:O},m),d=Tn(d,m,o,null),O.return=r,d.return=r,O.sibling=d,r.child=O,m=r.child,m.memoizedState=Vu(o),m.childLanes=Uu(a,T,o),r.memoizedState=$u,d):(Ga(r),qu(r,O))}if(F=a.memoizedState,F!==null&&(O=F.dehydrated,O!==null)){if(x)r.flags&256?(Ga(r),r.flags&=-257,r=Fu(a,r,o)):r.memoizedState!==null?(Ya(),r.child=a.child,r.flags|=128,r=null):(Ya(),m=d.fallback,O=r.mode,d=Zl({mode:"visible",children:d.children},O),m=Tn(m,O,o,null),m.flags|=2,d.return=r,m.return=r,d.sibling=m,r.child=d,Or(r,a.child,null,o),d=r.child,d.memoizedState=Vu(o),d.childLanes=Uu(a,T,o),r.memoizedState=$u,r=m);else if(Ga(r),Nh(O)){if(T=O.nextSibling&&O.nextSibling.dataset,T)var te=T.dgst;T=te,d=Error(i(419)),d.stack="",d.digest=T,Hi({value:d,source:null,stack:null}),r=Fu(a,r,o)}else if(Ut||Gi(a,r,o,!1),T=(o&a.childLanes)!==0,Ut||T){if(T=ut,T!==null&&(d=o&-o,d=(d&42)!==0?1:wn(d),d=(d&(T.suspendedLanes|o))!==0?0:d,d!==0&&d!==F.retryLane))throw F.retryLane=d,wr(a,d),Cs(T,a,d),jg;O.data==="$?"||oh(),r=Fu(a,r,o)}else O.data==="$?"?(r.flags|=192,r.child=a.child,r=null):(a=F.treeContext,vt=Fs(O.nextSibling),rs=r,et=!0,kn=null,ea=!1,a!==null&&(Os[Rs++]=xa,Os[Rs++]=ya,Os[Rs++]=En,xa=a.id,ya=a.overflow,En=r),r=qu(r,d.children),r.flags|=4096);return r}return m?(Ya(),m=d.fallback,O=r.mode,F=a.child,te=F.sibling,d=ga(F,{mode:"hidden",children:d.children}),d.subtreeFlags=F.subtreeFlags&65011712,te!==null?m=ga(te,m):(m=Tn(m,O,o,null),m.flags|=2),m.return=r,d.return=r,d.sibling=m,r.child=d,d=m,m=r.child,O=a.child.memoizedState,O===null?O=Vu(o):(F=O.cachePool,F!==null?(te=Rt._currentValue,F=F.parent!==te?{parent:te,pool:te}:F):F=gp(),O={baseLanes:O.baseLanes|o,cachePool:F}),m.memoizedState=O,m.childLanes=Uu(a,T,o),r.memoizedState=$u,d):(Ga(r),o=a.child,a=o.sibling,o=ga(o,{mode:"visible",children:d.children}),o.return=r,o.sibling=null,a!==null&&(T=r.deletions,T===null?(r.deletions=[a],r.flags|=16):T.push(a)),r.child=o,r.memoizedState=null,o)}function qu(a,r){return r=Zl({mode:"visible",children:r},a.mode),r.return=a,a.child=r}function Zl(a,r){return a=js(22,a,null,r),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function Fu(a,r,o){return Or(r,a.child,null,o),a=qu(r,r.pendingProps.children),a.flags|=2,r.memoizedState=null,a}function Mg(a,r,o){a.lanes|=r;var d=a.alternate;d!==null&&(d.lanes|=r),ou(a.return,r,o)}function Iu(a,r,o,d,m){var x=a.memoizedState;x===null?a.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:o,tailMode:m}:(x.isBackwards=r,x.rendering=null,x.renderingStartTime=0,x.last=d,x.tail=o,x.tailMode=m)}function Dg(a,r,o){var d=r.pendingProps,m=d.revealOrder,x=d.tail;if(Xt(a,r,d.children,o),d=Pt.current,(d&2)!==0)d=d&1|2,r.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=r.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Mg(a,o,r);else if(a.tag===19)Mg(a,o,r);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}d&=1}switch(W(Pt,d),m){case"forwards":for(o=r.child,m=null;o!==null;)a=o.alternate,a!==null&&Xl(a)===null&&(m=o),o=o.sibling;o=m,o===null?(m=r.child,r.child=null):(m=o.sibling,o.sibling=null),Iu(r,!1,m,o,x);break;case"backwards":for(o=null,m=r.child,r.child=null;m!==null;){if(a=m.alternate,a!==null&&Xl(a)===null){r.child=m;break}a=m.sibling,m.sibling=o,o=m,m=a}Iu(r,!0,o,null,x);break;case"together":Iu(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function _a(a,r,o){if(a!==null&&(r.dependencies=a.dependencies),Za|=r.lanes,(o&r.childLanes)===0)if(a!==null){if(Gi(a,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(a!==null&&r.child!==a.child)throw Error(i(153));if(r.child!==null){for(a=r.child,o=ga(a,a.pendingProps),r.child=o,o.return=r;a.sibling!==null;)a=a.sibling,o=o.sibling=ga(a,a.pendingProps),o.return=r;o.sibling=null}return r.child}function Hu(a,r){return(a.lanes&r)!==0?!0:(a=a.dependencies,!!(a!==null&&Dl(a)))}function L_(a,r,o){switch(r.tag){case 3:de(r,r.stateNode.containerInfo),Ua(r,Rt,a.memoizedState.cache),Ii();break;case 27:case 5:Ue(r);break;case 4:de(r,r.stateNode.containerInfo);break;case 10:Ua(r,r.type,r.memoizedProps.value);break;case 13:var d=r.memoizedState;if(d!==null)return d.dehydrated!==null?(Ga(r),r.flags|=128,null):(o&r.child.childLanes)!==0?kg(a,r,o):(Ga(r),a=_a(a,r,o),a!==null?a.sibling:null);Ga(r);break;case 19:var m=(a.flags&128)!==0;if(d=(o&r.childLanes)!==0,d||(Gi(a,r,o,!1),d=(o&r.childLanes)!==0),m){if(d)return Dg(a,r,o);r.flags|=128}if(m=r.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),W(Pt,Pt.current),d)break;return null;case 22:case 23:return r.lanes=0,Sg(a,r,o);case 24:Ua(r,Rt,a.memoizedState.cache)}return _a(a,r,o)}function Og(a,r,o){if(a!==null)if(a.memoizedProps!==r.pendingProps)Ut=!0;else{if(!Hu(a,o)&&(r.flags&128)===0)return Ut=!1,L_(a,r,o);Ut=(a.flags&131072)!==0}else Ut=!1,et&&(r.flags&1048576)!==0&&cp(r,Ml,r.index);switch(r.lanes=0,r.tag){case 16:e:{a=r.pendingProps;var d=r.elementType,m=d._init;if(d=m(d._payload),r.type=d,typeof d=="function")eu(d)?(a=zn(d,a),r.tag=1,r=Eg(null,r,d,a,o)):(r.tag=0,r=Bu(null,r,d,a,o));else{if(d!=null){if(m=d.$$typeof,m===E){r.tag=11,r=wg(null,r,d,a,o);break e}else if(m===z){r.tag=14,r=_g(null,r,d,a,o);break e}}throw r=pe(d)||d,Error(i(306,r,""))}}return r;case 0:return Bu(a,r,r.type,r.pendingProps,o);case 1:return d=r.type,m=zn(d,r.pendingProps),Eg(a,r,d,m,o);case 3:e:{if(de(r,r.stateNode.containerInfo),a===null)throw Error(i(387));d=r.pendingProps;var x=r.memoizedState;m=x.element,fu(a,r),Ji(r,d,null,o);var T=r.memoizedState;if(d=T.cache,Ua(r,Rt,d),d!==x.cache&&lu(r,[Rt],o,!0),Zi(),d=T.element,x.isDehydrated)if(x={element:d,isDehydrated:!1,cache:T.cache},r.updateQueue.baseState=x,r.memoizedState=x,r.flags&256){r=Ag(a,r,d,o);break e}else if(d!==m){m=Ms(Error(i(424)),r),Hi(m),r=Ag(a,r,d,o);break e}else{switch(a=r.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(vt=Fs(a.firstChild),rs=r,et=!0,kn=null,ea=!0,o=ug(r,null,d,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Ii(),d===m){r=_a(a,r,o);break e}Xt(a,r,d,o)}r=r.child}return r;case 26:return Ql(a,r),a===null?(o=Lx(r.type,null,r.pendingProps,null))?r.memoizedState=o:et||(o=r.type,a=r.pendingProps,d=hc(fe.current).createElement(o),d[Jt]=r,d[us]=a,Wt(d,o,a),Vt(d),r.stateNode=d):r.memoizedState=Lx(r.type,a.memoizedProps,r.pendingProps,a.memoizedState),null;case 27:return Ue(r),a===null&&et&&(d=r.stateNode=Rx(r.type,r.pendingProps,fe.current),rs=r,ea=!0,m=vt,sn(r.type)?(Sh=m,vt=Fs(d.firstChild)):vt=m),Xt(a,r,r.pendingProps.children,o),Ql(a,r),a===null&&(r.flags|=4194304),r.child;case 5:return a===null&&et&&((m=d=vt)&&(d=uN(d,r.type,r.pendingProps,ea),d!==null?(r.stateNode=d,rs=r,vt=Fs(d.firstChild),ea=!1,m=!0):m=!1),m||Mn(r)),Ue(r),m=r.type,x=r.pendingProps,T=a!==null?a.memoizedProps:null,d=x.children,jh(m,x)?d=null:T!==null&&jh(m,T)&&(r.flags|=32),r.memoizedState!==null&&(m=vu(a,r,A_,null,null,o),wo._currentValue=m),Ql(a,r),Xt(a,r,d,o),r.child;case 6:return a===null&&et&&((a=o=vt)&&(o=hN(o,r.pendingProps,ea),o!==null?(r.stateNode=o,rs=r,vt=null,a=!0):a=!1),a||Mn(r)),null;case 13:return kg(a,r,o);case 4:return de(r,r.stateNode.containerInfo),d=r.pendingProps,a===null?r.child=Or(r,null,d,o):Xt(a,r,d,o),r.child;case 11:return wg(a,r,r.type,r.pendingProps,o);case 7:return Xt(a,r,r.pendingProps,o),r.child;case 8:return Xt(a,r,r.pendingProps.children,o),r.child;case 12:return Xt(a,r,r.pendingProps.children,o),r.child;case 10:return d=r.pendingProps,Ua(r,r.type,d.value),Xt(a,r,d.children,o),r.child;case 9:return m=r.type._context,d=r.pendingProps.children,On(r),m=es(m),d=d(m),r.flags|=1,Xt(a,r,d,o),r.child;case 14:return _g(a,r,r.type,r.pendingProps,o);case 15:return Ng(a,r,r.type,r.pendingProps,o);case 19:return Dg(a,r,o);case 31:return d=r.pendingProps,o=r.mode,d={mode:d.mode,children:d.children},a===null?(o=Zl(d,o),o.ref=r.ref,r.child=o,o.return=r,r=o):(o=ga(a.child,d),o.ref=r.ref,r.child=o,o.return=r,r=o),r;case 22:return Sg(a,r,o);case 24:return On(r),d=es(Rt),a===null?(m=uu(),m===null&&(m=ut,x=cu(),m.pooledCache=x,x.refCount++,x!==null&&(m.pooledCacheLanes|=o),m=x),r.memoizedState={parent:d,cache:m},mu(r),Ua(r,Rt,m)):((a.lanes&o)!==0&&(fu(a,r),Ji(r,null,null,o),Zi()),m=a.memoizedState,x=r.memoizedState,m.parent!==d?(m={parent:d,cache:d},r.memoizedState=m,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=m),Ua(r,Rt,d)):(d=x.cache,Ua(r,Rt,d),d!==m.cache&&lu(r,[Rt],o,!0))),Xt(a,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Na(a){a.flags|=4}function Rg(a,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!qx(r)){if(r=Ps.current,r!==null&&((Qe&4194048)===Qe?ta!==null:(Qe&62914560)!==Qe&&(Qe&536870912)===0||r!==ta))throw Wi=hu,xp;a.flags|=8192}}function Jl(a,r){r!==null&&(a.flags|=4),a.flags&16384&&(r=a.tag!==22?Mi():536870912,a.lanes|=r,Lr|=r)}function io(a,r){if(!et)switch(a.tailMode){case"hidden":r=a.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?a.tail=null:o.sibling=null;break;case"collapsed":o=a.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?r||a.tail===null?a.tail=null:a.tail.sibling=null:d.sibling=null}}function xt(a){var r=a.alternate!==null&&a.alternate.child===a.child,o=0,d=0;if(r)for(var m=a.child;m!==null;)o|=m.lanes|m.childLanes,d|=m.subtreeFlags&65011712,d|=m.flags&65011712,m.return=a,m=m.sibling;else for(m=a.child;m!==null;)o|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=a,m=m.sibling;return a.subtreeFlags|=d,a.childLanes=o,r}function B_(a,r,o){var d=r.pendingProps;switch(nu(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(r),null;case 1:return xt(r),null;case 3:return o=r.stateNode,d=null,a!==null&&(d=a.memoizedState.cache),r.memoizedState.cache!==d&&(r.flags|=2048),va(Rt),Ee(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(a===null||a.child===null)&&(Fi(r)?Na(r):a===null||a.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,hp())),xt(r),null;case 26:return o=r.memoizedState,a===null?(Na(r),o!==null?(xt(r),Rg(r,o)):(xt(r),r.flags&=-16777217)):o?o!==a.memoizedState?(Na(r),xt(r),Rg(r,o)):(xt(r),r.flags&=-16777217):(a.memoizedProps!==d&&Na(r),xt(r),r.flags&=-16777217),null;case 27:je(r),o=fe.current;var m=r.type;if(a!==null&&r.stateNode!=null)a.memoizedProps!==d&&Na(r);else{if(!d){if(r.stateNode===null)throw Error(i(166));return xt(r),null}a=oe.current,Fi(r)?dp(r):(a=Rx(m,d,o),r.stateNode=a,Na(r))}return xt(r),null;case 5:if(je(r),o=r.type,a!==null&&r.stateNode!=null)a.memoizedProps!==d&&Na(r);else{if(!d){if(r.stateNode===null)throw Error(i(166));return xt(r),null}if(a=oe.current,Fi(r))dp(r);else{switch(m=hc(fe.current),a){case 1:a=m.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:a=m.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":a=m.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":a=m.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":a=m.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof d.is=="string"?m.createElement("select",{is:d.is}):m.createElement("select"),d.multiple?a.multiple=!0:d.size&&(a.size=d.size);break;default:a=typeof d.is=="string"?m.createElement(o,{is:d.is}):m.createElement(o)}}a[Jt]=r,a[us]=d;e:for(m=r.child;m!==null;){if(m.tag===5||m.tag===6)a.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===r)break e;for(;m.sibling===null;){if(m.return===null||m.return===r)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}r.stateNode=a;e:switch(Wt(a,o,d),o){case"button":case"input":case"select":case"textarea":a=!!d.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Na(r)}}return xt(r),r.flags&=-16777217,null;case 6:if(a&&r.stateNode!=null)a.memoizedProps!==d&&Na(r);else{if(typeof d!="string"&&r.stateNode===null)throw Error(i(166));if(a=fe.current,Fi(r)){if(a=r.stateNode,o=r.memoizedProps,d=null,m=rs,m!==null)switch(m.tag){case 27:case 5:d=m.memoizedProps}a[Jt]=r,a=!!(a.nodeValue===o||d!==null&&d.suppressHydrationWarning===!0||Tx(a.nodeValue,o)),a||Mn(r)}else a=hc(a).createTextNode(d),a[Jt]=r,r.stateNode=a}return xt(r),null;case 13:if(d=r.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(m=Fi(r),d!==null&&d.dehydrated!==null){if(a===null){if(!m)throw Error(i(318));if(m=r.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[Jt]=r}else Ii(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;xt(r),m=!1}else m=hp(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=m),m=!0;if(!m)return r.flags&256?(wa(r),r):(wa(r),null)}if(wa(r),(r.flags&128)!==0)return r.lanes=o,r;if(o=d!==null,a=a!==null&&a.memoizedState!==null,o){d=r.child,m=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(m=d.alternate.memoizedState.cachePool.pool);var x=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(x=d.memoizedState.cachePool.pool),x!==m&&(d.flags|=2048)}return o!==a&&o&&(r.child.flags|=8192),Jl(r,r.updateQueue),xt(r),null;case 4:return Ee(),a===null&&gh(r.stateNode.containerInfo),xt(r),null;case 10:return va(r.type),xt(r),null;case 19:if(L(Pt),m=r.memoizedState,m===null)return xt(r),null;if(d=(r.flags&128)!==0,x=m.rendering,x===null)if(d)io(m,!1);else{if(jt!==0||a!==null&&(a.flags&128)!==0)for(a=r.child;a!==null;){if(x=Xl(a),x!==null){for(r.flags|=128,io(m,!1),a=x.updateQueue,r.updateQueue=a,Jl(r,a),r.subtreeFlags=0,a=o,o=r.child;o!==null;)lp(o,a),o=o.sibling;return W(Pt,Pt.current&1|2),r.child}a=a.sibling}m.tail!==null&&$e()>sc&&(r.flags|=128,d=!0,io(m,!1),r.lanes=4194304)}else{if(!d)if(a=Xl(x),a!==null){if(r.flags|=128,d=!0,a=a.updateQueue,r.updateQueue=a,Jl(r,a),io(m,!0),m.tail===null&&m.tailMode==="hidden"&&!x.alternate&&!et)return xt(r),null}else 2*$e()-m.renderingStartTime>sc&&o!==536870912&&(r.flags|=128,d=!0,io(m,!1),r.lanes=4194304);m.isBackwards?(x.sibling=r.child,r.child=x):(a=m.last,a!==null?a.sibling=x:r.child=x,m.last=x)}return m.tail!==null?(r=m.tail,m.rendering=r,m.tail=r.sibling,m.renderingStartTime=$e(),r.sibling=null,a=Pt.current,W(Pt,d?a&1|2:a&1),r):(xt(r),null);case 22:case 23:return wa(r),yu(),d=r.memoizedState!==null,a!==null?a.memoizedState!==null!==d&&(r.flags|=8192):d&&(r.flags|=8192),d?(o&536870912)!==0&&(r.flags&128)===0&&(xt(r),r.subtreeFlags&6&&(r.flags|=8192)):xt(r),o=r.updateQueue,o!==null&&Jl(r,o.retryQueue),o=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(o=a.memoizedState.cachePool.pool),d=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),d!==o&&(r.flags|=2048),a!==null&&L(Rn),null;case 24:return o=null,a!==null&&(o=a.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),va(Rt),xt(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function $_(a,r){switch(nu(r),r.tag){case 1:return a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 3:return va(Rt),Ee(),a=r.flags,(a&65536)!==0&&(a&128)===0?(r.flags=a&-65537|128,r):null;case 26:case 27:case 5:return je(r),null;case 13:if(wa(r),a=r.memoizedState,a!==null&&a.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Ii()}return a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 19:return L(Pt),null;case 4:return Ee(),null;case 10:return va(r.type),null;case 22:case 23:return wa(r),yu(),a!==null&&L(Rn),a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 24:return va(Rt),null;case 25:return null;default:return null}}function Pg(a,r){switch(nu(r),r.tag){case 3:va(Rt),Ee();break;case 26:case 27:case 5:je(r);break;case 4:Ee();break;case 13:wa(r);break;case 19:L(Pt);break;case 10:va(r.type);break;case 22:case 23:wa(r),yu(),a!==null&&L(Rn);break;case 24:va(Rt)}}function oo(a,r){try{var o=r.updateQueue,d=o!==null?o.lastEffect:null;if(d!==null){var m=d.next;o=m;do{if((o.tag&a)===a){d=void 0;var x=o.create,T=o.inst;d=x(),T.destroy=d}o=o.next}while(o!==m)}}catch(O){ct(r,r.return,O)}}function Xa(a,r,o){try{var d=r.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var x=m.next;d=x;do{if((d.tag&a)===a){var T=d.inst,O=T.destroy;if(O!==void 0){T.destroy=void 0,m=r;var F=o,te=O;try{te()}catch(ce){ct(m,F,ce)}}}d=d.next}while(d!==x)}}catch(ce){ct(r,r.return,ce)}}function zg(a){var r=a.updateQueue;if(r!==null){var o=a.stateNode;try{_p(r,o)}catch(d){ct(a,a.return,d)}}}function Lg(a,r,o){o.props=zn(a.type,a.memoizedProps),o.state=a.memoizedState;try{o.componentWillUnmount()}catch(d){ct(a,r,d)}}function lo(a,r){try{var o=a.ref;if(o!==null){switch(a.tag){case 26:case 27:case 5:var d=a.stateNode;break;case 30:d=a.stateNode;break;default:d=a.stateNode}typeof o=="function"?a.refCleanup=o(d):o.current=d}}catch(m){ct(a,r,m)}}function sa(a,r){var o=a.ref,d=a.refCleanup;if(o!==null)if(typeof d=="function")try{d()}catch(m){ct(a,r,m)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){ct(a,r,m)}else o.current=null}function Bg(a){var r=a.type,o=a.memoizedProps,d=a.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&d.focus();break e;case"img":o.src?d.src=o.src:o.srcSet&&(d.srcset=o.srcSet)}}catch(m){ct(a,a.return,m)}}function Gu(a,r,o){try{var d=a.stateNode;iN(d,a.type,o,r),d[us]=r}catch(m){ct(a,a.return,m)}}function $g(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&sn(a.type)||a.tag===4}function Yu(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||$g(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&sn(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Xu(a,r,o){var d=a.tag;if(d===5||d===6)a=a.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(a,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(a),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=uc));else if(d!==4&&(d===27&&sn(a.type)&&(o=a.stateNode,r=null),a=a.child,a!==null))for(Xu(a,r,o),a=a.sibling;a!==null;)Xu(a,r,o),a=a.sibling}function ec(a,r,o){var d=a.tag;if(d===5||d===6)a=a.stateNode,r?o.insertBefore(a,r):o.appendChild(a);else if(d!==4&&(d===27&&sn(a.type)&&(o=a.stateNode),a=a.child,a!==null))for(ec(a,r,o),a=a.sibling;a!==null;)ec(a,r,o),a=a.sibling}function Vg(a){var r=a.stateNode,o=a.memoizedProps;try{for(var d=a.type,m=r.attributes;m.length;)r.removeAttributeNode(m[0]);Wt(r,d,o),r[Jt]=a,r[us]=o}catch(x){ct(a,a.return,x)}}var Sa=!1,Ct=!1,Ku=!1,Ug=typeof WeakSet=="function"?WeakSet:Set,qt=null;function V_(a,r){if(a=a.containerInfo,bh=yc,a=Z0(a),Yd(a)){if("selectionStart"in a)var o={start:a.selectionStart,end:a.selectionEnd};else e:{o=(o=a.ownerDocument)&&o.defaultView||window;var d=o.getSelection&&o.getSelection();if(d&&d.rangeCount!==0){o=d.anchorNode;var m=d.anchorOffset,x=d.focusNode;d=d.focusOffset;try{o.nodeType,x.nodeType}catch{o=null;break e}var T=0,O=-1,F=-1,te=0,ce=0,he=a,se=null;t:for(;;){for(var ne;he!==o||m!==0&&he.nodeType!==3||(O=T+m),he!==x||d!==0&&he.nodeType!==3||(F=T+d),he.nodeType===3&&(T+=he.nodeValue.length),(ne=he.firstChild)!==null;)se=he,he=ne;for(;;){if(he===a)break t;if(se===o&&++te===m&&(O=T),se===x&&++ce===d&&(F=T),(ne=he.nextSibling)!==null)break;he=se,se=he.parentNode}he=ne}o=O===-1||F===-1?null:{start:O,end:F}}else o=null}o=o||{start:0,end:0}}else o=null;for(vh={focusedElem:a,selectionRange:o},yc=!1,qt=r;qt!==null;)if(r=qt,a=r.child,(r.subtreeFlags&1024)!==0&&a!==null)a.return=r,qt=a;else for(;qt!==null;){switch(r=qt,x=r.alternate,a=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&x!==null){a=void 0,o=r,m=x.memoizedProps,x=x.memoizedState,d=o.stateNode;try{var ze=zn(o.type,m,o.elementType===o.type);a=d.getSnapshotBeforeUpdate(ze,x),d.__reactInternalSnapshotBeforeUpdate=a}catch(Me){ct(o,o.return,Me)}}break;case 3:if((a&1024)!==0){if(a=r.stateNode.containerInfo,o=a.nodeType,o===9)_h(a);else if(o===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":_h(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(i(163))}if(a=r.sibling,a!==null){a.return=r.return,qt=a;break}qt=r.return}}function qg(a,r,o){var d=o.flags;switch(o.tag){case 0:case 11:case 15:Ka(a,o),d&4&&oo(5,o);break;case 1:if(Ka(a,o),d&4)if(a=o.stateNode,r===null)try{a.componentDidMount()}catch(T){ct(o,o.return,T)}else{var m=zn(o.type,r.memoizedProps);r=r.memoizedState;try{a.componentDidUpdate(m,r,a.__reactInternalSnapshotBeforeUpdate)}catch(T){ct(o,o.return,T)}}d&64&&zg(o),d&512&&lo(o,o.return);break;case 3:if(Ka(a,o),d&64&&(a=o.updateQueue,a!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{_p(a,r)}catch(T){ct(o,o.return,T)}}break;case 27:r===null&&d&4&&Vg(o);case 26:case 5:Ka(a,o),r===null&&d&4&&Bg(o),d&512&&lo(o,o.return);break;case 12:Ka(a,o);break;case 13:Ka(a,o),d&4&&Hg(a,o),d&64&&(a=o.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(o=K_.bind(null,o),mN(a,o))));break;case 22:if(d=o.memoizedState!==null||Sa,!d){r=r!==null&&r.memoizedState!==null||Ct,m=Sa;var x=Ct;Sa=d,(Ct=r)&&!x?Wa(a,o,(o.subtreeFlags&8772)!==0):Ka(a,o),Sa=m,Ct=x}break;case 30:break;default:Ka(a,o)}}function Fg(a){var r=a.alternate;r!==null&&(a.alternate=null,Fg(r)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(r=a.stateNode,r!==null&&Ed(r)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var ft=null,fs=!1;function Ca(a,r,o){for(o=o.child;o!==null;)Ig(a,r,o),o=o.sibling}function Ig(a,r,o){if(Re&&typeof Re.onCommitFiberUnmount=="function")try{Re.onCommitFiberUnmount(we,o)}catch{}switch(o.tag){case 26:Ct||sa(o,r),Ca(a,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Ct||sa(o,r);var d=ft,m=fs;sn(o.type)&&(ft=o.stateNode,fs=!1),Ca(a,r,o),yo(o.stateNode),ft=d,fs=m;break;case 5:Ct||sa(o,r);case 6:if(d=ft,m=fs,ft=null,Ca(a,r,o),ft=d,fs=m,ft!==null)if(fs)try{(ft.nodeType===9?ft.body:ft.nodeName==="HTML"?ft.ownerDocument.body:ft).removeChild(o.stateNode)}catch(x){ct(o,r,x)}else try{ft.removeChild(o.stateNode)}catch(x){ct(o,r,x)}break;case 18:ft!==null&&(fs?(a=ft,Dx(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,o.stateNode),Co(a)):Dx(ft,o.stateNode));break;case 4:d=ft,m=fs,ft=o.stateNode.containerInfo,fs=!0,Ca(a,r,o),ft=d,fs=m;break;case 0:case 11:case 14:case 15:Ct||Xa(2,o,r),Ct||Xa(4,o,r),Ca(a,r,o);break;case 1:Ct||(sa(o,r),d=o.stateNode,typeof d.componentWillUnmount=="function"&&Lg(o,r,d)),Ca(a,r,o);break;case 21:Ca(a,r,o);break;case 22:Ct=(d=Ct)||o.memoizedState!==null,Ca(a,r,o),Ct=d;break;default:Ca(a,r,o)}}function Hg(a,r){if(r.memoizedState===null&&(a=r.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Co(a)}catch(o){ct(r,r.return,o)}}function U_(a){switch(a.tag){case 13:case 19:var r=a.stateNode;return r===null&&(r=a.stateNode=new Ug),r;case 22:return a=a.stateNode,r=a._retryCache,r===null&&(r=a._retryCache=new Ug),r;default:throw Error(i(435,a.tag))}}function Wu(a,r){var o=U_(a);r.forEach(function(d){var m=W_.bind(null,a,d);o.has(d)||(o.add(d),d.then(m,m))})}function ws(a,r){var o=r.deletions;if(o!==null)for(var d=0;d<o.length;d++){var m=o[d],x=a,T=r,O=T;e:for(;O!==null;){switch(O.tag){case 27:if(sn(O.type)){ft=O.stateNode,fs=!1;break e}break;case 5:ft=O.stateNode,fs=!1;break e;case 3:case 4:ft=O.stateNode.containerInfo,fs=!0;break e}O=O.return}if(ft===null)throw Error(i(160));Ig(x,T,m),ft=null,fs=!1,x=m.alternate,x!==null&&(x.return=null),m.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Gg(r,a),r=r.sibling}var qs=null;function Gg(a,r){var o=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:ws(r,a),_s(a),d&4&&(Xa(3,a,a.return),oo(3,a),Xa(5,a,a.return));break;case 1:ws(r,a),_s(a),d&512&&(Ct||o===null||sa(o,o.return)),d&64&&Sa&&(a=a.updateQueue,a!==null&&(d=a.callbacks,d!==null&&(o=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=o===null?d:o.concat(d))));break;case 26:var m=qs;if(ws(r,a),_s(a),d&512&&(Ct||o===null||sa(o,o.return)),d&4){var x=o!==null?o.memoizedState:null;if(d=a.memoizedState,o===null)if(d===null)if(a.stateNode===null){e:{d=a.type,o=a.memoizedProps,m=m.ownerDocument||m;t:switch(d){case"title":x=m.getElementsByTagName("title")[0],(!x||x[Di]||x[Jt]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=m.createElement(d),m.head.insertBefore(x,m.querySelector("head > title"))),Wt(x,d,o),x[Jt]=a,Vt(x),d=x;break e;case"link":var T=Vx("link","href",m).get(d+(o.href||""));if(T){for(var O=0;O<T.length;O++)if(x=T[O],x.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&x.getAttribute("rel")===(o.rel==null?null:o.rel)&&x.getAttribute("title")===(o.title==null?null:o.title)&&x.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){T.splice(O,1);break t}}x=m.createElement(d),Wt(x,d,o),m.head.appendChild(x);break;case"meta":if(T=Vx("meta","content",m).get(d+(o.content||""))){for(O=0;O<T.length;O++)if(x=T[O],x.getAttribute("content")===(o.content==null?null:""+o.content)&&x.getAttribute("name")===(o.name==null?null:o.name)&&x.getAttribute("property")===(o.property==null?null:o.property)&&x.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&x.getAttribute("charset")===(o.charSet==null?null:o.charSet)){T.splice(O,1);break t}}x=m.createElement(d),Wt(x,d,o),m.head.appendChild(x);break;default:throw Error(i(468,d))}x[Jt]=a,Vt(x),d=x}a.stateNode=d}else Ux(m,a.type,a.stateNode);else a.stateNode=$x(m,d,a.memoizedProps);else x!==d?(x===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):x.count--,d===null?Ux(m,a.type,a.stateNode):$x(m,d,a.memoizedProps)):d===null&&a.stateNode!==null&&Gu(a,a.memoizedProps,o.memoizedProps)}break;case 27:ws(r,a),_s(a),d&512&&(Ct||o===null||sa(o,o.return)),o!==null&&d&4&&Gu(a,a.memoizedProps,o.memoizedProps);break;case 5:if(ws(r,a),_s(a),d&512&&(Ct||o===null||sa(o,o.return)),a.flags&32){m=a.stateNode;try{pr(m,"")}catch(ne){ct(a,a.return,ne)}}d&4&&a.stateNode!=null&&(m=a.memoizedProps,Gu(a,m,o!==null?o.memoizedProps:m)),d&1024&&(Ku=!0);break;case 6:if(ws(r,a),_s(a),d&4){if(a.stateNode===null)throw Error(i(162));d=a.memoizedProps,o=a.stateNode;try{o.nodeValue=d}catch(ne){ct(a,a.return,ne)}}break;case 3:if(pc=null,m=qs,qs=mc(r.containerInfo),ws(r,a),qs=m,_s(a),d&4&&o!==null&&o.memoizedState.isDehydrated)try{Co(r.containerInfo)}catch(ne){ct(a,a.return,ne)}Ku&&(Ku=!1,Yg(a));break;case 4:d=qs,qs=mc(a.stateNode.containerInfo),ws(r,a),_s(a),qs=d;break;case 12:ws(r,a),_s(a);break;case 13:ws(r,a),_s(a),a.child.flags&8192&&a.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(sh=$e()),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,Wu(a,d)));break;case 22:m=a.memoizedState!==null;var F=o!==null&&o.memoizedState!==null,te=Sa,ce=Ct;if(Sa=te||m,Ct=ce||F,ws(r,a),Ct=ce,Sa=te,_s(a),d&8192)e:for(r=a.stateNode,r._visibility=m?r._visibility&-2:r._visibility|1,m&&(o===null||F||Sa||Ct||Ln(a)),o=null,r=a;;){if(r.tag===5||r.tag===26){if(o===null){F=o=r;try{if(x=F.stateNode,m)T=x.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{O=F.stateNode;var he=F.memoizedProps.style,se=he!=null&&he.hasOwnProperty("display")?he.display:null;O.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(ne){ct(F,F.return,ne)}}}else if(r.tag===6){if(o===null){F=r;try{F.stateNode.nodeValue=m?"":F.memoizedProps}catch(ne){ct(F,F.return,ne)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===a)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}d&4&&(d=a.updateQueue,d!==null&&(o=d.retryQueue,o!==null&&(d.retryQueue=null,Wu(a,o))));break;case 19:ws(r,a),_s(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,Wu(a,d)));break;case 30:break;case 21:break;default:ws(r,a),_s(a)}}function _s(a){var r=a.flags;if(r&2){try{for(var o,d=a.return;d!==null;){if($g(d)){o=d;break}d=d.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var m=o.stateNode,x=Yu(a);ec(a,x,m);break;case 5:var T=o.stateNode;o.flags&32&&(pr(T,""),o.flags&=-33);var O=Yu(a);ec(a,O,T);break;case 3:case 4:var F=o.stateNode.containerInfo,te=Yu(a);Xu(a,te,F);break;default:throw Error(i(161))}}catch(ce){ct(a,a.return,ce)}a.flags&=-3}r&4096&&(a.flags&=-4097)}function Yg(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var r=a;Yg(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),a=a.sibling}}function Ka(a,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)qg(a,r.alternate,r),r=r.sibling}function Ln(a){for(a=a.child;a!==null;){var r=a;switch(r.tag){case 0:case 11:case 14:case 15:Xa(4,r,r.return),Ln(r);break;case 1:sa(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&Lg(r,r.return,o),Ln(r);break;case 27:yo(r.stateNode);case 26:case 5:sa(r,r.return),Ln(r);break;case 22:r.memoizedState===null&&Ln(r);break;case 30:Ln(r);break;default:Ln(r)}a=a.sibling}}function Wa(a,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var d=r.alternate,m=a,x=r,T=x.flags;switch(x.tag){case 0:case 11:case 15:Wa(m,x,o),oo(4,x);break;case 1:if(Wa(m,x,o),d=x,m=d.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(te){ct(d,d.return,te)}if(d=x,m=d.updateQueue,m!==null){var O=d.stateNode;try{var F=m.shared.hiddenCallbacks;if(F!==null)for(m.shared.hiddenCallbacks=null,m=0;m<F.length;m++)wp(F[m],O)}catch(te){ct(d,d.return,te)}}o&&T&64&&zg(x),lo(x,x.return);break;case 27:Vg(x);case 26:case 5:Wa(m,x,o),o&&d===null&&T&4&&Bg(x),lo(x,x.return);break;case 12:Wa(m,x,o);break;case 13:Wa(m,x,o),o&&T&4&&Hg(m,x);break;case 22:x.memoizedState===null&&Wa(m,x,o),lo(x,x.return);break;case 30:break;default:Wa(m,x,o)}r=r.sibling}}function Qu(a,r){var o=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(o=a.memoizedState.cachePool.pool),a=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),a!==o&&(a!=null&&a.refCount++,o!=null&&Yi(o))}function Zu(a,r){a=null,r.alternate!==null&&(a=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==a&&(r.refCount++,a!=null&&Yi(a))}function aa(a,r,o,d){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Xg(a,r,o,d),r=r.sibling}function Xg(a,r,o,d){var m=r.flags;switch(r.tag){case 0:case 11:case 15:aa(a,r,o,d),m&2048&&oo(9,r);break;case 1:aa(a,r,o,d);break;case 3:aa(a,r,o,d),m&2048&&(a=null,r.alternate!==null&&(a=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==a&&(r.refCount++,a!=null&&Yi(a)));break;case 12:if(m&2048){aa(a,r,o,d),a=r.stateNode;try{var x=r.memoizedProps,T=x.id,O=x.onPostCommit;typeof O=="function"&&O(T,r.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(F){ct(r,r.return,F)}}else aa(a,r,o,d);break;case 13:aa(a,r,o,d);break;case 23:break;case 22:x=r.stateNode,T=r.alternate,r.memoizedState!==null?x._visibility&2?aa(a,r,o,d):co(a,r):x._visibility&2?aa(a,r,o,d):(x._visibility|=2,Rr(a,r,o,d,(r.subtreeFlags&10256)!==0)),m&2048&&Qu(T,r);break;case 24:aa(a,r,o,d),m&2048&&Zu(r.alternate,r);break;default:aa(a,r,o,d)}}function Rr(a,r,o,d,m){for(m=m&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var x=a,T=r,O=o,F=d,te=T.flags;switch(T.tag){case 0:case 11:case 15:Rr(x,T,O,F,m),oo(8,T);break;case 23:break;case 22:var ce=T.stateNode;T.memoizedState!==null?ce._visibility&2?Rr(x,T,O,F,m):co(x,T):(ce._visibility|=2,Rr(x,T,O,F,m)),m&&te&2048&&Qu(T.alternate,T);break;case 24:Rr(x,T,O,F,m),m&&te&2048&&Zu(T.alternate,T);break;default:Rr(x,T,O,F,m)}r=r.sibling}}function co(a,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=a,d=r,m=d.flags;switch(d.tag){case 22:co(o,d),m&2048&&Qu(d.alternate,d);break;case 24:co(o,d),m&2048&&Zu(d.alternate,d);break;default:co(o,d)}r=r.sibling}}var uo=8192;function Pr(a){if(a.subtreeFlags&uo)for(a=a.child;a!==null;)Kg(a),a=a.sibling}function Kg(a){switch(a.tag){case 26:Pr(a),a.flags&uo&&a.memoizedState!==null&&CN(qs,a.memoizedState,a.memoizedProps);break;case 5:Pr(a);break;case 3:case 4:var r=qs;qs=mc(a.stateNode.containerInfo),Pr(a),qs=r;break;case 22:a.memoizedState===null&&(r=a.alternate,r!==null&&r.memoizedState!==null?(r=uo,uo=16777216,Pr(a),uo=r):Pr(a));break;default:Pr(a)}}function Wg(a){var r=a.alternate;if(r!==null&&(a=r.child,a!==null)){r.child=null;do r=a.sibling,a.sibling=null,a=r;while(a!==null)}}function ho(a){var r=a.deletions;if((a.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var d=r[o];qt=d,Zg(d,a)}Wg(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Qg(a),a=a.sibling}function Qg(a){switch(a.tag){case 0:case 11:case 15:ho(a),a.flags&2048&&Xa(9,a,a.return);break;case 3:ho(a);break;case 12:ho(a);break;case 22:var r=a.stateNode;a.memoizedState!==null&&r._visibility&2&&(a.return===null||a.return.tag!==13)?(r._visibility&=-3,tc(a)):ho(a);break;default:ho(a)}}function tc(a){var r=a.deletions;if((a.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var d=r[o];qt=d,Zg(d,a)}Wg(a)}for(a=a.child;a!==null;){switch(r=a,r.tag){case 0:case 11:case 15:Xa(8,r,r.return),tc(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,tc(r));break;default:tc(r)}a=a.sibling}}function Zg(a,r){for(;qt!==null;){var o=qt;switch(o.tag){case 0:case 11:case 15:Xa(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var d=o.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Yi(o.memoizedState.cache)}if(d=o.child,d!==null)d.return=o,qt=d;else e:for(o=a;qt!==null;){d=qt;var m=d.sibling,x=d.return;if(Fg(d),d===o){qt=null;break e}if(m!==null){m.return=x,qt=m;break e}qt=x}}}var q_={getCacheForType:function(a){var r=es(Rt),o=r.data.get(a);return o===void 0&&(o=a(),r.data.set(a,o)),o}},F_=typeof WeakMap=="function"?WeakMap:Map,st=0,ut=null,Ge=null,Qe=0,at=0,Ns=null,Qa=!1,zr=!1,Ju=!1,Ta=0,jt=0,Za=0,Bn=0,eh=0,zs=0,Lr=0,mo=null,ps=null,th=!1,sh=0,sc=1/0,ac=null,Ja=null,Kt=0,en=null,Br=null,$r=0,ah=0,nh=null,Jg=null,fo=0,rh=null;function Ss(){if((st&2)!==0&&Qe!==0)return Qe&-Qe;if(D.T!==null){var a=Cr;return a!==0?a:hh()}return p0()}function ex(){zs===0&&(zs=(Qe&536870912)===0||et?jn():536870912);var a=Ps.current;return a!==null&&(a.flags|=32),zs}function Cs(a,r,o){(a===ut&&(at===2||at===9)||a.cancelPendingCommit!==null)&&(Vr(a,0),tn(a,Qe,zs,!1)),Ba(a,o),((st&2)===0||a!==ut)&&(a===ut&&((st&2)===0&&(Bn|=o),jt===4&&tn(a,Qe,zs,!1)),na(a))}function tx(a,r,o){if((st&6)!==0)throw Error(i(327));var d=!o&&(r&124)===0&&(r&a.expiredLanes)===0||ns(a,r),m=d?G_(a,r):lh(a,r,!0),x=d;do{if(m===0){zr&&!d&&tn(a,r,0,!1);break}else{if(o=a.current.alternate,x&&!I_(o)){m=lh(a,r,!1),x=!1;continue}if(m===2){if(x=r,a.errorRecoveryDisabledLanes&x)var T=0;else T=a.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){r=T;e:{var O=a;m=mo;var F=O.current.memoizedState.isDehydrated;if(F&&(Vr(O,T).flags|=256),T=lh(O,T,!1),T!==2){if(Ju&&!F){O.errorRecoveryDisabledLanes|=x,Bn|=x,m=4;break e}x=ps,ps=m,x!==null&&(ps===null?ps=x:ps.push.apply(ps,x))}m=T}if(x=!1,m!==2)continue}}if(m===1){Vr(a,0),tn(a,r,0,!0);break}e:{switch(d=a,x=m,x){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:tn(d,r,zs,!Qa);break e;case 2:ps=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(m=sh+300-$e(),10<m)){if(tn(d,r,zs,!Qa),Yt(d,0,!0)!==0)break e;d.timeoutHandle=kx(sx.bind(null,d,o,ps,ac,th,r,zs,Bn,Lr,Qa,x,2,-0,0),m);break e}sx(d,o,ps,ac,th,r,zs,Bn,Lr,Qa,x,0,-0,0)}}break}while(!0);na(a)}function sx(a,r,o,d,m,x,T,O,F,te,ce,he,se,ne){if(a.timeoutHandle=-1,he=r.subtreeFlags,(he&8192||(he&16785408)===16785408)&&(jo={stylesheets:null,count:0,unsuspend:SN},Kg(r),he=TN(),he!==null)){a.cancelPendingCommit=he(cx.bind(null,a,r,x,o,d,m,T,O,F,ce,1,se,ne)),tn(a,x,T,!te);return}cx(a,r,x,o,d,m,T,O,F)}function I_(a){for(var r=a;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var d=0;d<o.length;d++){var m=o[d],x=m.getSnapshot;m=m.value;try{if(!vs(x(),m))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===a)break;for(;r.sibling===null;){if(r.return===null||r.return===a)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function tn(a,r,o,d){r&=~eh,r&=~Bn,a.suspendedLanes|=r,a.pingedLanes&=~r,d&&(a.warmLanes|=r),d=a.expirationTimes;for(var m=r;0<m;){var x=31-tt(m),T=1<<x;d[x]=-1,m&=~T}o!==0&&fl(a,o,r)}function nc(){return(st&6)===0?(po(0),!1):!0}function ih(){if(Ge!==null){if(at===0)var a=Ge.return;else a=Ge,ba=Dn=null,_u(a),Dr=null,no=0,a=Ge;for(;a!==null;)Pg(a.alternate,a),a=a.return;Ge=null}}function Vr(a,r){var o=a.timeoutHandle;o!==-1&&(a.timeoutHandle=-1,lN(o)),o=a.cancelPendingCommit,o!==null&&(a.cancelPendingCommit=null,o()),ih(),ut=a,Ge=o=ga(a.current,null),Qe=r,at=0,Ns=null,Qa=!1,zr=ns(a,r),Ju=!1,Lr=zs=eh=Bn=Za=jt=0,ps=mo=null,th=!1,(r&8)!==0&&(r|=r&32);var d=a.entangledLanes;if(d!==0)for(a=a.entanglements,d&=r;0<d;){var m=31-tt(d),x=1<<m;r|=a[m],d&=~x}return Ta=r,Cl(),o}function ax(a,r){Ie=null,D.H=Hl,r===Ki||r===Pl?(r=vp(),at=3):r===xp?(r=vp(),at=4):at=r===jg?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Ns=r,Ge===null&&(jt=1,Wl(a,Ms(r,a.current)))}function nx(){var a=D.H;return D.H=Hl,a===null?Hl:a}function rx(){var a=D.A;return D.A=q_,a}function oh(){jt=4,Qa||(Qe&4194048)!==Qe&&Ps.current!==null||(zr=!0),(Za&134217727)===0&&(Bn&134217727)===0||ut===null||tn(ut,Qe,zs,!1)}function lh(a,r,o){var d=st;st|=2;var m=nx(),x=rx();(ut!==a||Qe!==r)&&(ac=null,Vr(a,r)),r=!1;var T=jt;e:do try{if(at!==0&&Ge!==null){var O=Ge,F=Ns;switch(at){case 8:ih(),T=6;break e;case 3:case 2:case 9:case 6:Ps.current===null&&(r=!0);var te=at;if(at=0,Ns=null,Ur(a,O,F,te),o&&zr){T=0;break e}break;default:te=at,at=0,Ns=null,Ur(a,O,F,te)}}H_(),T=jt;break}catch(ce){ax(a,ce)}while(!0);return r&&a.shellSuspendCounter++,ba=Dn=null,st=d,D.H=m,D.A=x,Ge===null&&(ut=null,Qe=0,Cl()),T}function H_(){for(;Ge!==null;)ix(Ge)}function G_(a,r){var o=st;st|=2;var d=nx(),m=rx();ut!==a||Qe!==r?(ac=null,sc=$e()+500,Vr(a,r)):zr=ns(a,r);e:do try{if(at!==0&&Ge!==null){r=Ge;var x=Ns;t:switch(at){case 1:at=0,Ns=null,Ur(a,r,x,1);break;case 2:case 9:if(yp(x)){at=0,Ns=null,ox(r);break}r=function(){at!==2&&at!==9||ut!==a||(at=7),na(a)},x.then(r,r);break e;case 3:at=7;break e;case 4:at=5;break e;case 7:yp(x)?(at=0,Ns=null,ox(r)):(at=0,Ns=null,Ur(a,r,x,7));break;case 5:var T=null;switch(Ge.tag){case 26:T=Ge.memoizedState;case 5:case 27:var O=Ge;if(!T||qx(T)){at=0,Ns=null;var F=O.sibling;if(F!==null)Ge=F;else{var te=O.return;te!==null?(Ge=te,rc(te)):Ge=null}break t}}at=0,Ns=null,Ur(a,r,x,5);break;case 6:at=0,Ns=null,Ur(a,r,x,6);break;case 8:ih(),jt=6;break e;default:throw Error(i(462))}}Y_();break}catch(ce){ax(a,ce)}while(!0);return ba=Dn=null,D.H=d,D.A=m,st=o,Ge!==null?0:(ut=null,Qe=0,Cl(),jt)}function Y_(){for(;Ge!==null&&!$t();)ix(Ge)}function ix(a){var r=Og(a.alternate,a,Ta);a.memoizedProps=a.pendingProps,r===null?rc(a):Ge=r}function ox(a){var r=a,o=r.alternate;switch(r.tag){case 15:case 0:r=Tg(o,r,r.pendingProps,r.type,void 0,Qe);break;case 11:r=Tg(o,r,r.pendingProps,r.type.render,r.ref,Qe);break;case 5:_u(r);default:Pg(o,r),r=Ge=lp(r,Ta),r=Og(o,r,Ta)}a.memoizedProps=a.pendingProps,r===null?rc(a):Ge=r}function Ur(a,r,o,d){ba=Dn=null,_u(r),Dr=null,no=0;var m=r.return;try{if(z_(a,m,r,o,Qe)){jt=1,Wl(a,Ms(o,a.current)),Ge=null;return}}catch(x){if(m!==null)throw Ge=m,x;jt=1,Wl(a,Ms(o,a.current)),Ge=null;return}r.flags&32768?(et||d===1?a=!0:zr||(Qe&536870912)!==0?a=!1:(Qa=a=!0,(d===2||d===9||d===3||d===6)&&(d=Ps.current,d!==null&&d.tag===13&&(d.flags|=16384))),lx(r,a)):rc(r)}function rc(a){var r=a;do{if((r.flags&32768)!==0){lx(r,Qa);return}a=r.return;var o=B_(r.alternate,r,Ta);if(o!==null){Ge=o;return}if(r=r.sibling,r!==null){Ge=r;return}Ge=r=a}while(r!==null);jt===0&&(jt=5)}function lx(a,r){do{var o=$_(a.alternate,a);if(o!==null){o.flags&=32767,Ge=o;return}if(o=a.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(a=a.sibling,a!==null)){Ge=a;return}Ge=a=o}while(a!==null);jt=6,Ge=null}function cx(a,r,o,d,m,x,T,O,F){a.cancelPendingCommit=null;do ic();while(Kt!==0);if((st&6)!==0)throw Error(i(327));if(r!==null){if(r===a.current)throw Error(i(177));if(x=r.lanes|r.childLanes,x|=Zd,ml(a,o,x,T,O,F),a===ut&&(Ge=ut=null,Qe=0),Br=r,en=a,$r=o,ah=x,nh=m,Jg=d,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,Q_(ee,function(){return fx(),null})):(a.callbackNode=null,a.callbackPriority=0),d=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||d){d=D.T,D.T=null,m=P.p,P.p=2,T=st,st|=4;try{V_(a,r,o)}finally{st=T,P.p=m,D.T=d}}Kt=1,dx(),ux(),hx()}}function dx(){if(Kt===1){Kt=0;var a=en,r=Br,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=D.T,D.T=null;var d=P.p;P.p=2;var m=st;st|=4;try{Gg(r,a);var x=vh,T=Z0(a.containerInfo),O=x.focusedElem,F=x.selectionRange;if(T!==O&&O&&O.ownerDocument&&Q0(O.ownerDocument.documentElement,O)){if(F!==null&&Yd(O)){var te=F.start,ce=F.end;if(ce===void 0&&(ce=te),"selectionStart"in O)O.selectionStart=te,O.selectionEnd=Math.min(ce,O.value.length);else{var he=O.ownerDocument||document,se=he&&he.defaultView||window;if(se.getSelection){var ne=se.getSelection(),ze=O.textContent.length,Me=Math.min(F.start,ze),lt=F.end===void 0?Me:Math.min(F.end,ze);!ne.extend&&Me>lt&&(T=lt,lt=Me,Me=T);var Y=W0(O,Me),G=W0(O,lt);if(Y&&G&&(ne.rangeCount!==1||ne.anchorNode!==Y.node||ne.anchorOffset!==Y.offset||ne.focusNode!==G.node||ne.focusOffset!==G.offset)){var J=he.createRange();J.setStart(Y.node,Y.offset),ne.removeAllRanges(),Me>lt?(ne.addRange(J),ne.extend(G.node,G.offset)):(J.setEnd(G.node,G.offset),ne.addRange(J))}}}}for(he=[],ne=O;ne=ne.parentNode;)ne.nodeType===1&&he.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<he.length;O++){var ue=he[O];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}yc=!!bh,vh=bh=null}finally{st=m,P.p=d,D.T=o}}a.current=r,Kt=2}}function ux(){if(Kt===2){Kt=0;var a=en,r=Br,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=D.T,D.T=null;var d=P.p;P.p=2;var m=st;st|=4;try{qg(a,r.alternate,r)}finally{st=m,P.p=d,D.T=o}}Kt=3}}function hx(){if(Kt===4||Kt===3){Kt=0,ke();var a=en,r=Br,o=$r,d=Jg;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Kt=5:(Kt=0,Br=en=null,mx(a,a.pendingLanes));var m=a.pendingLanes;if(m===0&&(Ja=null),Cd(o),r=r.stateNode,Re&&typeof Re.onCommitFiberRoot=="function")try{Re.onCommitFiberRoot(we,r,void 0,(r.current.flags&128)===128)}catch{}if(d!==null){r=D.T,m=P.p,P.p=2,D.T=null;try{for(var x=a.onRecoverableError,T=0;T<d.length;T++){var O=d[T];x(O.value,{componentStack:O.stack})}}finally{D.T=r,P.p=m}}($r&3)!==0&&ic(),na(a),m=a.pendingLanes,(o&4194090)!==0&&(m&42)!==0?a===rh?fo++:(fo=0,rh=a):fo=0,po(0)}}function mx(a,r){(a.pooledCacheLanes&=r)===0&&(r=a.pooledCache,r!=null&&(a.pooledCache=null,Yi(r)))}function ic(a){return dx(),ux(),hx(),fx()}function fx(){if(Kt!==5)return!1;var a=en,r=ah;ah=0;var o=Cd($r),d=D.T,m=P.p;try{P.p=32>o?32:o,D.T=null,o=nh,nh=null;var x=en,T=$r;if(Kt=0,Br=en=null,$r=0,(st&6)!==0)throw Error(i(331));var O=st;if(st|=4,Qg(x.current),Xg(x,x.current,T,o),st=O,po(0,!1),Re&&typeof Re.onPostCommitFiberRoot=="function")try{Re.onPostCommitFiberRoot(we,x)}catch{}return!0}finally{P.p=m,D.T=d,mx(a,r)}}function px(a,r,o){r=Ms(o,r),r=Lu(a.stateNode,r,2),a=Ia(a,r,2),a!==null&&(Ba(a,2),na(a))}function ct(a,r,o){if(a.tag===3)px(a,a,o);else for(;r!==null;){if(r.tag===3){px(r,a,o);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ja===null||!Ja.has(d))){a=Ms(o,a),o=bg(2),d=Ia(r,o,2),d!==null&&(vg(o,d,r,a),Ba(d,2),na(d));break}}r=r.return}}function ch(a,r,o){var d=a.pingCache;if(d===null){d=a.pingCache=new F_;var m=new Set;d.set(r,m)}else m=d.get(r),m===void 0&&(m=new Set,d.set(r,m));m.has(o)||(Ju=!0,m.add(o),a=X_.bind(null,a,r,o),r.then(a,a))}function X_(a,r,o){var d=a.pingCache;d!==null&&d.delete(r),a.pingedLanes|=a.suspendedLanes&o,a.warmLanes&=~o,ut===a&&(Qe&o)===o&&(jt===4||jt===3&&(Qe&62914560)===Qe&&300>$e()-sh?(st&2)===0&&Vr(a,0):eh|=o,Lr===Qe&&(Lr=0)),na(a)}function gx(a,r){r===0&&(r=Mi()),a=wr(a,r),a!==null&&(Ba(a,r),na(a))}function K_(a){var r=a.memoizedState,o=0;r!==null&&(o=r.retryLane),gx(a,o)}function W_(a,r){var o=0;switch(a.tag){case 13:var d=a.stateNode,m=a.memoizedState;m!==null&&(o=m.retryLane);break;case 19:d=a.stateNode;break;case 22:d=a.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(r),gx(a,o)}function Q_(a,r){return De(a,r)}var oc=null,qr=null,dh=!1,lc=!1,uh=!1,$n=0;function na(a){a!==qr&&a.next===null&&(qr===null?oc=qr=a:qr=qr.next=a),lc=!0,dh||(dh=!0,J_())}function po(a,r){if(!uh&&lc){uh=!0;do for(var o=!1,d=oc;d!==null;){if(a!==0){var m=d.pendingLanes;if(m===0)var x=0;else{var T=d.suspendedLanes,O=d.pingedLanes;x=(1<<31-tt(42|a)+1)-1,x&=m&~(T&~O),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(o=!0,vx(d,x))}else x=Qe,x=Yt(d,d===ut?x:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(x&3)===0||ns(d,x)||(o=!0,vx(d,x));d=d.next}while(o);uh=!1}}function Z_(){xx()}function xx(){lc=dh=!1;var a=0;$n!==0&&(oN()&&(a=$n),$n=0);for(var r=$e(),o=null,d=oc;d!==null;){var m=d.next,x=yx(d,r);x===0?(d.next=null,o===null?oc=m:o.next=m,m===null&&(qr=o)):(o=d,(a!==0||(x&3)!==0)&&(lc=!0)),d=m}po(a)}function yx(a,r){for(var o=a.suspendedLanes,d=a.pingedLanes,m=a.expirationTimes,x=a.pendingLanes&-62914561;0<x;){var T=31-tt(x),O=1<<T,F=m[T];F===-1?((O&o)===0||(O&d)!==0)&&(m[T]=Js(O,r)):F<=r&&(a.expiredLanes|=O),x&=~O}if(r=ut,o=Qe,o=Yt(a,a===r?o:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d=a.callbackNode,o===0||a===r&&(at===2||at===9)||a.cancelPendingCommit!==null)return d!==null&&d!==null&&Je(d),a.callbackNode=null,a.callbackPriority=0;if((o&3)===0||ns(a,o)){if(r=o&-o,r===a.callbackPriority)return r;switch(d!==null&&Je(d),Cd(o)){case 2:case 8:o=I;break;case 32:o=ee;break;case 268435456:o=be;break;default:o=ee}return d=bx.bind(null,a),o=De(o,d),a.callbackPriority=r,a.callbackNode=o,r}return d!==null&&d!==null&&Je(d),a.callbackPriority=2,a.callbackNode=null,2}function bx(a,r){if(Kt!==0&&Kt!==5)return a.callbackNode=null,a.callbackPriority=0,null;var o=a.callbackNode;if(ic()&&a.callbackNode!==o)return null;var d=Qe;return d=Yt(a,a===ut?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d===0?null:(tx(a,d,r),yx(a,$e()),a.callbackNode!=null&&a.callbackNode===o?bx.bind(null,a):null)}function vx(a,r){if(ic())return null;tx(a,r,!0)}function J_(){cN(function(){(st&6)!==0?De(ds,Z_):xx()})}function hh(){return $n===0&&($n=jn()),$n}function jx(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:bl(""+a)}function wx(a,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,a.id&&o.setAttribute("form",a.id),r.parentNode.insertBefore(o,r),a=new FormData(a),o.parentNode.removeChild(o),a}function eN(a,r,o,d,m){if(r==="submit"&&o&&o.stateNode===m){var x=jx((m[us]||null).action),T=d.submitter;T&&(r=(r=T[us]||null)?jx(r.formAction):T.getAttribute("formAction"),r!==null&&(x=r,T=null));var O=new _l("action","action",null,d,m);a.push({event:O,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if($n!==0){var F=T?wx(m,T):new FormData(m);Du(o,{pending:!0,data:F,method:m.method,action:x},null,F)}}else typeof x=="function"&&(O.preventDefault(),F=T?wx(m,T):new FormData(m),Du(o,{pending:!0,data:F,method:m.method,action:x},x,F))},currentTarget:m}]})}}for(var mh=0;mh<Qd.length;mh++){var fh=Qd[mh],tN=fh.toLowerCase(),sN=fh[0].toUpperCase()+fh.slice(1);Us(tN,"on"+sN)}Us(tp,"onAnimationEnd"),Us(sp,"onAnimationIteration"),Us(ap,"onAnimationStart"),Us("dblclick","onDoubleClick"),Us("focusin","onFocus"),Us("focusout","onBlur"),Us(b_,"onTransitionRun"),Us(v_,"onTransitionStart"),Us(j_,"onTransitionCancel"),Us(np,"onTransitionEnd"),hr("onMouseEnter",["mouseout","mouseover"]),hr("onMouseLeave",["mouseout","mouseover"]),hr("onPointerEnter",["pointerout","pointerover"]),hr("onPointerLeave",["pointerout","pointerover"]),_n("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_n("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_n("onBeforeInput",["compositionend","keypress","textInput","paste"]),_n("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_n("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_n("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var go="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(go));function _x(a,r){r=(r&4)!==0;for(var o=0;o<a.length;o++){var d=a[o],m=d.event;d=d.listeners;e:{var x=void 0;if(r)for(var T=d.length-1;0<=T;T--){var O=d[T],F=O.instance,te=O.currentTarget;if(O=O.listener,F!==x&&m.isPropagationStopped())break e;x=O,m.currentTarget=te;try{x(m)}catch(ce){Kl(ce)}m.currentTarget=null,x=F}else for(T=0;T<d.length;T++){if(O=d[T],F=O.instance,te=O.currentTarget,O=O.listener,F!==x&&m.isPropagationStopped())break e;x=O,m.currentTarget=te;try{x(m)}catch(ce){Kl(ce)}m.currentTarget=null,x=F}}}}function Ye(a,r){var o=r[Td];o===void 0&&(o=r[Td]=new Set);var d=a+"__bubble";o.has(d)||(Nx(r,a,2,!1),o.add(d))}function ph(a,r,o){var d=0;r&&(d|=4),Nx(o,a,d,r)}var cc="_reactListening"+Math.random().toString(36).slice(2);function gh(a){if(!a[cc]){a[cc]=!0,x0.forEach(function(o){o!=="selectionchange"&&(aN.has(o)||ph(o,!1,a),ph(o,!0,a))});var r=a.nodeType===9?a:a.ownerDocument;r===null||r[cc]||(r[cc]=!0,ph("selectionchange",!1,r))}}function Nx(a,r,o,d){switch(Xx(r)){case 2:var m=kN;break;case 8:m=MN;break;default:m=kh}o=m.bind(null,r,o,a),m=void 0,!Bd||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(m=!0),d?m!==void 0?a.addEventListener(r,o,{capture:!0,passive:m}):a.addEventListener(r,o,!0):m!==void 0?a.addEventListener(r,o,{passive:m}):a.addEventListener(r,o,!1)}function xh(a,r,o,d,m){var x=d;if((r&1)===0&&(r&2)===0&&d!==null)e:for(;;){if(d===null)return;var T=d.tag;if(T===3||T===4){var O=d.stateNode.containerInfo;if(O===m)break;if(T===4)for(T=d.return;T!==null;){var F=T.tag;if((F===3||F===4)&&T.stateNode.containerInfo===m)return;T=T.return}for(;O!==null;){if(T=cr(O),T===null)return;if(F=T.tag,F===5||F===6||F===26||F===27){d=x=T;continue e}O=O.parentNode}}d=d.return}M0(function(){var te=x,ce=zd(o),he=[];e:{var se=rp.get(a);if(se!==void 0){var ne=_l,ze=a;switch(a){case"keypress":if(jl(o)===0)break e;case"keydown":case"keyup":ne=Q1;break;case"focusin":ze="focus",ne=qd;break;case"focusout":ze="blur",ne=qd;break;case"beforeblur":case"afterblur":ne=qd;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=R0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=$1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=e_;break;case tp:case sp:case ap:ne=q1;break;case np:ne=s_;break;case"scroll":case"scrollend":ne=L1;break;case"wheel":ne=n_;break;case"copy":case"cut":case"paste":ne=I1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=z0;break;case"toggle":case"beforetoggle":ne=i_}var Me=(r&4)!==0,lt=!Me&&(a==="scroll"||a==="scrollend"),Y=Me?se!==null?se+"Capture":null:se;Me=[];for(var G=te,J;G!==null;){var ue=G;if(J=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||J===null||Y===null||(ue=Ri(G,Y),ue!=null&&Me.push(xo(G,ue,J))),lt)break;G=G.return}0<Me.length&&(se=new ne(se,ze,null,o,ce),he.push({event:se,listeners:Me}))}}if((r&7)===0){e:{if(se=a==="mouseover"||a==="pointerover",ne=a==="mouseout"||a==="pointerout",se&&o!==Pd&&(ze=o.relatedTarget||o.fromElement)&&(cr(ze)||ze[lr]))break e;if((ne||se)&&(se=ce.window===ce?ce:(se=ce.ownerDocument)?se.defaultView||se.parentWindow:window,ne?(ze=o.relatedTarget||o.toElement,ne=te,ze=ze?cr(ze):null,ze!==null&&(lt=c(ze),Me=ze.tag,ze!==lt||Me!==5&&Me!==27&&Me!==6)&&(ze=null)):(ne=null,ze=te),ne!==ze)){if(Me=R0,ue="onMouseLeave",Y="onMouseEnter",G="mouse",(a==="pointerout"||a==="pointerover")&&(Me=z0,ue="onPointerLeave",Y="onPointerEnter",G="pointer"),lt=ne==null?se:Oi(ne),J=ze==null?se:Oi(ze),se=new Me(ue,G+"leave",ne,o,ce),se.target=lt,se.relatedTarget=J,ue=null,cr(ce)===te&&(Me=new Me(Y,G+"enter",ze,o,ce),Me.target=J,Me.relatedTarget=lt,ue=Me),lt=ue,ne&&ze)t:{for(Me=ne,Y=ze,G=0,J=Me;J;J=Fr(J))G++;for(J=0,ue=Y;ue;ue=Fr(ue))J++;for(;0<G-J;)Me=Fr(Me),G--;for(;0<J-G;)Y=Fr(Y),J--;for(;G--;){if(Me===Y||Y!==null&&Me===Y.alternate)break t;Me=Fr(Me),Y=Fr(Y)}Me=null}else Me=null;ne!==null&&Sx(he,se,ne,Me,!1),ze!==null&&lt!==null&&Sx(he,lt,ze,Me,!0)}}e:{if(se=te?Oi(te):window,ne=se.nodeName&&se.nodeName.toLowerCase(),ne==="select"||ne==="input"&&se.type==="file")var _e=I0;else if(q0(se))if(H0)_e=g_;else{_e=f_;var He=m_}else ne=se.nodeName,!ne||ne.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?te&&Rd(te.elementType)&&(_e=I0):_e=p_;if(_e&&(_e=_e(a,te))){F0(he,_e,o,ce);break e}He&&He(a,se,te),a==="focusout"&&te&&se.type==="number"&&te.memoizedProps.value!=null&&Od(se,"number",se.value)}switch(He=te?Oi(te):window,a){case"focusin":(q0(He)||He.contentEditable==="true")&&(br=He,Xd=te,qi=null);break;case"focusout":qi=Xd=br=null;break;case"mousedown":Kd=!0;break;case"contextmenu":case"mouseup":case"dragend":Kd=!1,J0(he,o,ce);break;case"selectionchange":if(y_)break;case"keydown":case"keyup":J0(he,o,ce)}var Ce;if(Id)e:{switch(a){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else yr?V0(a,o)&&(Oe="onCompositionEnd"):a==="keydown"&&o.keyCode===229&&(Oe="onCompositionStart");Oe&&(L0&&o.locale!=="ko"&&(yr||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&yr&&(Ce=D0()):(Va=ce,$d="value"in Va?Va.value:Va.textContent,yr=!0)),He=dc(te,Oe),0<He.length&&(Oe=new P0(Oe,a,null,o,ce),he.push({event:Oe,listeners:He}),Ce?Oe.data=Ce:(Ce=U0(o),Ce!==null&&(Oe.data=Ce)))),(Ce=l_?c_(a,o):d_(a,o))&&(Oe=dc(te,"onBeforeInput"),0<Oe.length&&(He=new P0("onBeforeInput","beforeinput",null,o,ce),he.push({event:He,listeners:Oe}),He.data=Ce)),eN(he,a,te,o,ce)}_x(he,r)})}function xo(a,r,o){return{instance:a,listener:r,currentTarget:o}}function dc(a,r){for(var o=r+"Capture",d=[];a!==null;){var m=a,x=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||x===null||(m=Ri(a,o),m!=null&&d.unshift(xo(a,m,x)),m=Ri(a,r),m!=null&&d.push(xo(a,m,x))),a.tag===3)return d;a=a.return}return[]}function Fr(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function Sx(a,r,o,d,m){for(var x=r._reactName,T=[];o!==null&&o!==d;){var O=o,F=O.alternate,te=O.stateNode;if(O=O.tag,F!==null&&F===d)break;O!==5&&O!==26&&O!==27||te===null||(F=te,m?(te=Ri(o,x),te!=null&&T.unshift(xo(o,te,F))):m||(te=Ri(o,x),te!=null&&T.push(xo(o,te,F)))),o=o.return}T.length!==0&&a.push({event:r,listeners:T})}var nN=/\r\n?/g,rN=/\u0000|\uFFFD/g;function Cx(a){return(typeof a=="string"?a:""+a).replace(nN,`
`).replace(rN,"")}function Tx(a,r){return r=Cx(r),Cx(a)===r}function uc(){}function ot(a,r,o,d,m,x){switch(o){case"children":typeof d=="string"?r==="body"||r==="textarea"&&d===""||pr(a,d):(typeof d=="number"||typeof d=="bigint")&&r!=="body"&&pr(a,""+d);break;case"className":gl(a,"class",d);break;case"tabIndex":gl(a,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":gl(a,o,d);break;case"style":A0(a,d,x);break;case"data":if(r!=="object"){gl(a,"data",d);break}case"src":case"href":if(d===""&&(r!=="a"||o!=="href")){a.removeAttribute(o);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(o);break}d=bl(""+d),a.setAttribute(o,d);break;case"action":case"formAction":if(typeof d=="function"){a.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(o==="formAction"?(r!=="input"&&ot(a,r,"name",m.name,m,null),ot(a,r,"formEncType",m.formEncType,m,null),ot(a,r,"formMethod",m.formMethod,m,null),ot(a,r,"formTarget",m.formTarget,m,null)):(ot(a,r,"encType",m.encType,m,null),ot(a,r,"method",m.method,m,null),ot(a,r,"target",m.target,m,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(o);break}d=bl(""+d),a.setAttribute(o,d);break;case"onClick":d!=null&&(a.onclick=uc);break;case"onScroll":d!=null&&Ye("scroll",a);break;case"onScrollEnd":d!=null&&Ye("scrollend",a);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(o=d.__html,o!=null){if(m.children!=null)throw Error(i(60));a.innerHTML=o}}break;case"multiple":a.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":a.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){a.removeAttribute("xlink:href");break}o=bl(""+d),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(o,""+d):a.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(o,""):a.removeAttribute(o);break;case"capture":case"download":d===!0?a.setAttribute(o,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(o,d):a.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?a.setAttribute(o,d):a.removeAttribute(o);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?a.removeAttribute(o):a.setAttribute(o,d);break;case"popover":Ye("beforetoggle",a),Ye("toggle",a),pl(a,"popover",d);break;case"xlinkActuate":fa(a,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":fa(a,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":fa(a,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":fa(a,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":fa(a,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":fa(a,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":fa(a,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":fa(a,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":fa(a,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":pl(a,"is",d);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=P1.get(o)||o,pl(a,o,d))}}function yh(a,r,o,d,m,x){switch(o){case"style":A0(a,d,x);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(o=d.__html,o!=null){if(m.children!=null)throw Error(i(60));a.innerHTML=o}}break;case"children":typeof d=="string"?pr(a,d):(typeof d=="number"||typeof d=="bigint")&&pr(a,""+d);break;case"onScroll":d!=null&&Ye("scroll",a);break;case"onScrollEnd":d!=null&&Ye("scrollend",a);break;case"onClick":d!=null&&(a.onclick=uc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!y0.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),r=o.slice(2,m?o.length-7:void 0),x=a[us]||null,x=x!=null?x[o]:null,typeof x=="function"&&a.removeEventListener(r,x,m),typeof d=="function")){typeof x!="function"&&x!==null&&(o in a?a[o]=null:a.hasAttribute(o)&&a.removeAttribute(o)),a.addEventListener(r,d,m);break e}o in a?a[o]=d:d===!0?a.setAttribute(o,""):pl(a,o,d)}}}function Wt(a,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",a),Ye("load",a);var d=!1,m=!1,x;for(x in o)if(o.hasOwnProperty(x)){var T=o[x];if(T!=null)switch(x){case"src":d=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:ot(a,r,x,T,o,null)}}m&&ot(a,r,"srcSet",o.srcSet,o,null),d&&ot(a,r,"src",o.src,o,null);return;case"input":Ye("invalid",a);var O=x=T=m=null,F=null,te=null;for(d in o)if(o.hasOwnProperty(d)){var ce=o[d];if(ce!=null)switch(d){case"name":m=ce;break;case"type":T=ce;break;case"checked":F=ce;break;case"defaultChecked":te=ce;break;case"value":x=ce;break;case"defaultValue":O=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(i(137,r));break;default:ot(a,r,d,ce,o,null)}}S0(a,x,O,F,te,T,m,!1),xl(a);return;case"select":Ye("invalid",a),d=T=x=null;for(m in o)if(o.hasOwnProperty(m)&&(O=o[m],O!=null))switch(m){case"value":x=O;break;case"defaultValue":T=O;break;case"multiple":d=O;default:ot(a,r,m,O,o,null)}r=x,o=T,a.multiple=!!d,r!=null?fr(a,!!d,r,!1):o!=null&&fr(a,!!d,o,!0);return;case"textarea":Ye("invalid",a),x=m=d=null;for(T in o)if(o.hasOwnProperty(T)&&(O=o[T],O!=null))switch(T){case"value":d=O;break;case"defaultValue":m=O;break;case"children":x=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(i(91));break;default:ot(a,r,T,O,o,null)}T0(a,d,m,x),xl(a);return;case"option":for(F in o)if(o.hasOwnProperty(F)&&(d=o[F],d!=null))switch(F){case"selected":a.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:ot(a,r,F,d,o,null)}return;case"dialog":Ye("beforetoggle",a),Ye("toggle",a),Ye("cancel",a),Ye("close",a);break;case"iframe":case"object":Ye("load",a);break;case"video":case"audio":for(d=0;d<go.length;d++)Ye(go[d],a);break;case"image":Ye("error",a),Ye("load",a);break;case"details":Ye("toggle",a);break;case"embed":case"source":case"link":Ye("error",a),Ye("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in o)if(o.hasOwnProperty(te)&&(d=o[te],d!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:ot(a,r,te,d,o,null)}return;default:if(Rd(r)){for(ce in o)o.hasOwnProperty(ce)&&(d=o[ce],d!==void 0&&yh(a,r,ce,d,o,void 0));return}}for(O in o)o.hasOwnProperty(O)&&(d=o[O],d!=null&&ot(a,r,O,d,o,null))}function iN(a,r,o,d){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,x=null,T=null,O=null,F=null,te=null,ce=null;for(ne in o){var he=o[ne];if(o.hasOwnProperty(ne)&&he!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":F=he;default:d.hasOwnProperty(ne)||ot(a,r,ne,null,d,he)}}for(var se in d){var ne=d[se];if(he=o[se],d.hasOwnProperty(se)&&(ne!=null||he!=null))switch(se){case"type":x=ne;break;case"name":m=ne;break;case"checked":te=ne;break;case"defaultChecked":ce=ne;break;case"value":T=ne;break;case"defaultValue":O=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,r));break;default:ne!==he&&ot(a,r,se,ne,d,he)}}Dd(a,T,O,F,te,ce,x,m);return;case"select":ne=T=O=se=null;for(x in o)if(F=o[x],o.hasOwnProperty(x)&&F!=null)switch(x){case"value":break;case"multiple":ne=F;default:d.hasOwnProperty(x)||ot(a,r,x,null,d,F)}for(m in d)if(x=d[m],F=o[m],d.hasOwnProperty(m)&&(x!=null||F!=null))switch(m){case"value":se=x;break;case"defaultValue":O=x;break;case"multiple":T=x;default:x!==F&&ot(a,r,m,x,d,F)}r=O,o=T,d=ne,se!=null?fr(a,!!o,se,!1):!!d!=!!o&&(r!=null?fr(a,!!o,r,!0):fr(a,!!o,o?[]:"",!1));return;case"textarea":ne=se=null;for(O in o)if(m=o[O],o.hasOwnProperty(O)&&m!=null&&!d.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:ot(a,r,O,null,d,m)}for(T in d)if(m=d[T],x=o[T],d.hasOwnProperty(T)&&(m!=null||x!=null))switch(T){case"value":se=m;break;case"defaultValue":ne=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(i(91));break;default:m!==x&&ot(a,r,T,m,d,x)}C0(a,se,ne);return;case"option":for(var ze in o)if(se=o[ze],o.hasOwnProperty(ze)&&se!=null&&!d.hasOwnProperty(ze))switch(ze){case"selected":a.selected=!1;break;default:ot(a,r,ze,null,d,se)}for(F in d)if(se=d[F],ne=o[F],d.hasOwnProperty(F)&&se!==ne&&(se!=null||ne!=null))switch(F){case"selected":a.selected=se&&typeof se!="function"&&typeof se!="symbol";break;default:ot(a,r,F,se,d,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Me in o)se=o[Me],o.hasOwnProperty(Me)&&se!=null&&!d.hasOwnProperty(Me)&&ot(a,r,Me,null,d,se);for(te in d)if(se=d[te],ne=o[te],d.hasOwnProperty(te)&&se!==ne&&(se!=null||ne!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(i(137,r));break;default:ot(a,r,te,se,d,ne)}return;default:if(Rd(r)){for(var lt in o)se=o[lt],o.hasOwnProperty(lt)&&se!==void 0&&!d.hasOwnProperty(lt)&&yh(a,r,lt,void 0,d,se);for(ce in d)se=d[ce],ne=o[ce],!d.hasOwnProperty(ce)||se===ne||se===void 0&&ne===void 0||yh(a,r,ce,se,d,ne);return}}for(var Y in o)se=o[Y],o.hasOwnProperty(Y)&&se!=null&&!d.hasOwnProperty(Y)&&ot(a,r,Y,null,d,se);for(he in d)se=d[he],ne=o[he],!d.hasOwnProperty(he)||se===ne||se==null&&ne==null||ot(a,r,he,se,d,ne)}var bh=null,vh=null;function hc(a){return a.nodeType===9?a:a.ownerDocument}function Ex(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ax(a,r){if(a===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&r==="foreignObject"?0:a}function jh(a,r){return a==="textarea"||a==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var wh=null;function oN(){var a=window.event;return a&&a.type==="popstate"?a===wh?!1:(wh=a,!0):(wh=null,!1)}var kx=typeof setTimeout=="function"?setTimeout:void 0,lN=typeof clearTimeout=="function"?clearTimeout:void 0,Mx=typeof Promise=="function"?Promise:void 0,cN=typeof queueMicrotask=="function"?queueMicrotask:typeof Mx<"u"?function(a){return Mx.resolve(null).then(a).catch(dN)}:kx;function dN(a){setTimeout(function(){throw a})}function sn(a){return a==="head"}function Dx(a,r){var o=r,d=0,m=0;do{var x=o.nextSibling;if(a.removeChild(o),x&&x.nodeType===8)if(o=x.data,o==="/$"){if(0<d&&8>d){o=d;var T=a.ownerDocument;if(o&1&&yo(T.documentElement),o&2&&yo(T.body),o&4)for(o=T.head,yo(o),T=o.firstChild;T;){var O=T.nextSibling,F=T.nodeName;T[Di]||F==="SCRIPT"||F==="STYLE"||F==="LINK"&&T.rel.toLowerCase()==="stylesheet"||o.removeChild(T),T=O}}if(m===0){a.removeChild(x),Co(r);return}m--}else o==="$"||o==="$?"||o==="$!"?m++:d=o.charCodeAt(0)-48;else d=0;o=x}while(o);Co(r)}function _h(a){var r=a.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":_h(o),Ed(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}a.removeChild(o)}}function uN(a,r,o,d){for(;a.nodeType===1;){var m=o;if(a.nodeName.toLowerCase()!==r.toLowerCase()){if(!d&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(d){if(!a[Di])switch(r){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(x=a.getAttribute("rel"),x==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(x!==m.rel||a.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||a.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||a.getAttribute("title")!==(m.title==null?null:m.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(x=a.getAttribute("src"),(x!==(m.src==null?null:m.src)||a.getAttribute("type")!==(m.type==null?null:m.type)||a.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&x&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(r==="input"&&a.type==="hidden"){var x=m.name==null?null:""+m.name;if(m.type==="hidden"&&a.getAttribute("name")===x)return a}else return a;if(a=Fs(a.nextSibling),a===null)break}return null}function hN(a,r,o){if(r==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!o||(a=Fs(a.nextSibling),a===null))return null;return a}function Nh(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function mN(a,r){var o=a.ownerDocument;if(a.data!=="$?"||o.readyState==="complete")r();else{var d=function(){r(),o.removeEventListener("DOMContentLoaded",d)};o.addEventListener("DOMContentLoaded",d),a._reactRetry=d}}function Fs(a){for(;a!=null;a=a.nextSibling){var r=a.nodeType;if(r===1||r===3)break;if(r===8){if(r=a.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return a}var Sh=null;function Ox(a){a=a.previousSibling;for(var r=0;a;){if(a.nodeType===8){var o=a.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return a;r--}else o==="/$"&&r++}a=a.previousSibling}return null}function Rx(a,r,o){switch(r=hc(o),a){case"html":if(a=r.documentElement,!a)throw Error(i(452));return a;case"head":if(a=r.head,!a)throw Error(i(453));return a;case"body":if(a=r.body,!a)throw Error(i(454));return a;default:throw Error(i(451))}}function yo(a){for(var r=a.attributes;r.length;)a.removeAttributeNode(r[0]);Ed(a)}var Ls=new Map,Px=new Set;function mc(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Ea=P.d;P.d={f:fN,r:pN,D:gN,C:xN,L:yN,m:bN,X:jN,S:vN,M:wN};function fN(){var a=Ea.f(),r=nc();return a||r}function pN(a){var r=dr(a);r!==null&&r.tag===5&&r.type==="form"?tg(r):Ea.r(a)}var Ir=typeof document>"u"?null:document;function zx(a,r,o){var d=Ir;if(d&&typeof r=="string"&&r){var m=ks(r);m='link[rel="'+a+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),Px.has(m)||(Px.add(m),a={rel:a,crossOrigin:o,href:r},d.querySelector(m)===null&&(r=d.createElement("link"),Wt(r,"link",a),Vt(r),d.head.appendChild(r)))}}function gN(a){Ea.D(a),zx("dns-prefetch",a,null)}function xN(a,r){Ea.C(a,r),zx("preconnect",a,r)}function yN(a,r,o){Ea.L(a,r,o);var d=Ir;if(d&&a&&r){var m='link[rel="preload"][as="'+ks(r)+'"]';r==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+ks(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+ks(o.imageSizes)+'"]')):m+='[href="'+ks(a)+'"]';var x=m;switch(r){case"style":x=Hr(a);break;case"script":x=Gr(a)}Ls.has(x)||(a=g({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:a,as:r},o),Ls.set(x,a),d.querySelector(m)!==null||r==="style"&&d.querySelector(bo(x))||r==="script"&&d.querySelector(vo(x))||(r=d.createElement("link"),Wt(r,"link",a),Vt(r),d.head.appendChild(r)))}}function bN(a,r){Ea.m(a,r);var o=Ir;if(o&&a){var d=r&&typeof r.as=="string"?r.as:"script",m='link[rel="modulepreload"][as="'+ks(d)+'"][href="'+ks(a)+'"]',x=m;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=Gr(a)}if(!Ls.has(x)&&(a=g({rel:"modulepreload",href:a},r),Ls.set(x,a),o.querySelector(m)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(vo(x)))return}d=o.createElement("link"),Wt(d,"link",a),Vt(d),o.head.appendChild(d)}}}function vN(a,r,o){Ea.S(a,r,o);var d=Ir;if(d&&a){var m=ur(d).hoistableStyles,x=Hr(a);r=r||"default";var T=m.get(x);if(!T){var O={loading:0,preload:null};if(T=d.querySelector(bo(x)))O.loading=5;else{a=g({rel:"stylesheet",href:a,"data-precedence":r},o),(o=Ls.get(x))&&Ch(a,o);var F=T=d.createElement("link");Vt(F),Wt(F,"link",a),F._p=new Promise(function(te,ce){F.onload=te,F.onerror=ce}),F.addEventListener("load",function(){O.loading|=1}),F.addEventListener("error",function(){O.loading|=2}),O.loading|=4,fc(T,r,d)}T={type:"stylesheet",instance:T,count:1,state:O},m.set(x,T)}}}function jN(a,r){Ea.X(a,r);var o=Ir;if(o&&a){var d=ur(o).hoistableScripts,m=Gr(a),x=d.get(m);x||(x=o.querySelector(vo(m)),x||(a=g({src:a,async:!0},r),(r=Ls.get(m))&&Th(a,r),x=o.createElement("script"),Vt(x),Wt(x,"link",a),o.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},d.set(m,x))}}function wN(a,r){Ea.M(a,r);var o=Ir;if(o&&a){var d=ur(o).hoistableScripts,m=Gr(a),x=d.get(m);x||(x=o.querySelector(vo(m)),x||(a=g({src:a,async:!0,type:"module"},r),(r=Ls.get(m))&&Th(a,r),x=o.createElement("script"),Vt(x),Wt(x,"link",a),o.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},d.set(m,x))}}function Lx(a,r,o,d){var m=(m=fe.current)?mc(m):null;if(!m)throw Error(i(446));switch(a){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=Hr(o.href),o=ur(m).hoistableStyles,d=o.get(r),d||(d={type:"style",instance:null,count:0,state:null},o.set(r,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){a=Hr(o.href);var x=ur(m).hoistableStyles,T=x.get(a);if(T||(m=m.ownerDocument||m,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(a,T),(x=m.querySelector(bo(a)))&&!x._p&&(T.instance=x,T.state.loading=5),Ls.has(a)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Ls.set(a,o),x||_N(m,a,o,T.state))),r&&d===null)throw Error(i(528,""));return T}if(r&&d!==null)throw Error(i(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Gr(o),o=ur(m).hoistableScripts,d=o.get(r),d||(d={type:"script",instance:null,count:0,state:null},o.set(r,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,a))}}function Hr(a){return'href="'+ks(a)+'"'}function bo(a){return'link[rel="stylesheet"]['+a+"]"}function Bx(a){return g({},a,{"data-precedence":a.precedence,precedence:null})}function _N(a,r,o,d){a.querySelector('link[rel="preload"][as="style"]['+r+"]")?d.loading=1:(r=a.createElement("link"),d.preload=r,r.addEventListener("load",function(){return d.loading|=1}),r.addEventListener("error",function(){return d.loading|=2}),Wt(r,"link",o),Vt(r),a.head.appendChild(r))}function Gr(a){return'[src="'+ks(a)+'"]'}function vo(a){return"script[async]"+a}function $x(a,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var d=a.querySelector('style[data-href~="'+ks(o.href)+'"]');if(d)return r.instance=d,Vt(d),d;var m=g({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return d=(a.ownerDocument||a).createElement("style"),Vt(d),Wt(d,"style",m),fc(d,o.precedence,a),r.instance=d;case"stylesheet":m=Hr(o.href);var x=a.querySelector(bo(m));if(x)return r.state.loading|=4,r.instance=x,Vt(x),x;d=Bx(o),(m=Ls.get(m))&&Ch(d,m),x=(a.ownerDocument||a).createElement("link"),Vt(x);var T=x;return T._p=new Promise(function(O,F){T.onload=O,T.onerror=F}),Wt(x,"link",d),r.state.loading|=4,fc(x,o.precedence,a),r.instance=x;case"script":return x=Gr(o.src),(m=a.querySelector(vo(x)))?(r.instance=m,Vt(m),m):(d=o,(m=Ls.get(x))&&(d=g({},o),Th(d,m)),a=a.ownerDocument||a,m=a.createElement("script"),Vt(m),Wt(m,"link",d),a.head.appendChild(m),r.instance=m);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(d=r.instance,r.state.loading|=4,fc(d,o.precedence,a));return r.instance}function fc(a,r,o){for(var d=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=d.length?d[d.length-1]:null,x=m,T=0;T<d.length;T++){var O=d[T];if(O.dataset.precedence===r)x=O;else if(x!==m)break}x?x.parentNode.insertBefore(a,x.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(a,r.firstChild))}function Ch(a,r){a.crossOrigin==null&&(a.crossOrigin=r.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=r.referrerPolicy),a.title==null&&(a.title=r.title)}function Th(a,r){a.crossOrigin==null&&(a.crossOrigin=r.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=r.referrerPolicy),a.integrity==null&&(a.integrity=r.integrity)}var pc=null;function Vx(a,r,o){if(pc===null){var d=new Map,m=pc=new Map;m.set(o,d)}else m=pc,d=m.get(o),d||(d=new Map,m.set(o,d));if(d.has(a))return d;for(d.set(a,null),o=o.getElementsByTagName(a),m=0;m<o.length;m++){var x=o[m];if(!(x[Di]||x[Jt]||a==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var T=x.getAttribute(r)||"";T=a+T;var O=d.get(T);O?O.push(x):d.set(T,[x])}}return d}function Ux(a,r,o){a=a.ownerDocument||a,a.head.insertBefore(o,r==="title"?a.querySelector("head > title"):null)}function NN(a,r,o){if(o===1||r.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return a=r.disabled,typeof r.precedence=="string"&&a==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function qx(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var jo=null;function SN(){}function CN(a,r,o){if(jo===null)throw Error(i(475));var d=jo;if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var m=Hr(o.href),x=a.querySelector(bo(m));if(x){a=x._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(d.count++,d=gc.bind(d),a.then(d,d)),r.state.loading|=4,r.instance=x,Vt(x);return}x=a.ownerDocument||a,o=Bx(o),(m=Ls.get(m))&&Ch(o,m),x=x.createElement("link"),Vt(x);var T=x;T._p=new Promise(function(O,F){T.onload=O,T.onerror=F}),Wt(x,"link",o),r.instance=x}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(r,a),(a=r.state.preload)&&(r.state.loading&3)===0&&(d.count++,r=gc.bind(d),a.addEventListener("load",r),a.addEventListener("error",r))}}function TN(){if(jo===null)throw Error(i(475));var a=jo;return a.stylesheets&&a.count===0&&Eh(a,a.stylesheets),0<a.count?function(r){var o=setTimeout(function(){if(a.stylesheets&&Eh(a,a.stylesheets),a.unsuspend){var d=a.unsuspend;a.unsuspend=null,d()}},6e4);return a.unsuspend=r,function(){a.unsuspend=null,clearTimeout(o)}}:null}function gc(){if(this.count--,this.count===0){if(this.stylesheets)Eh(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var xc=null;function Eh(a,r){a.stylesheets=null,a.unsuspend!==null&&(a.count++,xc=new Map,r.forEach(EN,a),xc=null,gc.call(a))}function EN(a,r){if(!(r.state.loading&4)){var o=xc.get(a);if(o)var d=o.get(null);else{o=new Map,xc.set(a,o);for(var m=a.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<m.length;x++){var T=m[x];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(o.set(T.dataset.precedence,T),d=T)}d&&o.set(null,d)}m=r.instance,T=m.getAttribute("data-precedence"),x=o.get(T)||d,x===d&&o.set(null,m),o.set(T,m),this.count++,d=gc.bind(this),m.addEventListener("load",d),m.addEventListener("error",d),x?x.parentNode.insertBefore(m,x.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(m,a.firstChild)),r.state.loading|=4}}var wo={$$typeof:k,Provider:null,Consumer:null,_currentValue:B,_currentValue2:B,_threadCount:0};function AN(a,r,o,d,m,x,T,O){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=or(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=or(0),this.hiddenUpdates=or(null),this.identifierPrefix=d,this.onUncaughtError=m,this.onCaughtError=x,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function Fx(a,r,o,d,m,x,T,O,F,te,ce,he){return a=new AN(a,r,o,T,O,F,te,he),r=1,x===!0&&(r|=24),x=js(3,null,null,r),a.current=x,x.stateNode=a,r=cu(),r.refCount++,a.pooledCache=r,r.refCount++,x.memoizedState={element:d,isDehydrated:o,cache:r},mu(x),a}function Ix(a){return a?(a=_r,a):_r}function Hx(a,r,o,d,m,x){m=Ix(m),d.context===null?d.context=m:d.pendingContext=m,d=Fa(r),d.payload={element:o},x=x===void 0?null:x,x!==null&&(d.callback=x),o=Ia(a,d,r),o!==null&&(Cs(o,a,r),Qi(o,a,r))}function Gx(a,r){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var o=a.retryLane;a.retryLane=o!==0&&o<r?o:r}}function Ah(a,r){Gx(a,r),(a=a.alternate)&&Gx(a,r)}function Yx(a){if(a.tag===13){var r=wr(a,67108864);r!==null&&Cs(r,a,67108864),Ah(a,67108864)}}var yc=!0;function kN(a,r,o,d){var m=D.T;D.T=null;var x=P.p;try{P.p=2,kh(a,r,o,d)}finally{P.p=x,D.T=m}}function MN(a,r,o,d){var m=D.T;D.T=null;var x=P.p;try{P.p=8,kh(a,r,o,d)}finally{P.p=x,D.T=m}}function kh(a,r,o,d){if(yc){var m=Mh(d);if(m===null)xh(a,r,d,bc,o),Kx(a,d);else if(ON(m,a,r,o,d))d.stopPropagation();else if(Kx(a,d),r&4&&-1<DN.indexOf(a)){for(;m!==null;){var x=dr(m);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var T=rt(x.pendingLanes);if(T!==0){var O=x;for(O.pendingLanes|=2,O.entangledLanes|=2;T;){var F=1<<31-tt(T);O.entanglements[1]|=F,T&=~F}na(x),(st&6)===0&&(sc=$e()+500,po(0))}}break;case 13:O=wr(x,2),O!==null&&Cs(O,x,2),nc(),Ah(x,2)}if(x=Mh(d),x===null&&xh(a,r,d,bc,o),x===m)break;m=x}m!==null&&d.stopPropagation()}else xh(a,r,d,null,o)}}function Mh(a){return a=zd(a),Dh(a)}var bc=null;function Dh(a){if(bc=null,a=cr(a),a!==null){var r=c(a);if(r===null)a=null;else{var o=r.tag;if(o===13){if(a=u(r),a!==null)return a;a=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;a=null}else r!==a&&(a=null)}}return bc=a,null}function Xx(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Nt()){case ds:return 2;case I:return 8;case ee:case le:return 32;case be:return 268435456;default:return 32}default:return 32}}var Oh=!1,an=null,nn=null,rn=null,_o=new Map,No=new Map,on=[],DN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Kx(a,r){switch(a){case"focusin":case"focusout":an=null;break;case"dragenter":case"dragleave":nn=null;break;case"mouseover":case"mouseout":rn=null;break;case"pointerover":case"pointerout":_o.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":No.delete(r.pointerId)}}function So(a,r,o,d,m,x){return a===null||a.nativeEvent!==x?(a={blockedOn:r,domEventName:o,eventSystemFlags:d,nativeEvent:x,targetContainers:[m]},r!==null&&(r=dr(r),r!==null&&Yx(r)),a):(a.eventSystemFlags|=d,r=a.targetContainers,m!==null&&r.indexOf(m)===-1&&r.push(m),a)}function ON(a,r,o,d,m){switch(r){case"focusin":return an=So(an,a,r,o,d,m),!0;case"dragenter":return nn=So(nn,a,r,o,d,m),!0;case"mouseover":return rn=So(rn,a,r,o,d,m),!0;case"pointerover":var x=m.pointerId;return _o.set(x,So(_o.get(x)||null,a,r,o,d,m)),!0;case"gotpointercapture":return x=m.pointerId,No.set(x,So(No.get(x)||null,a,r,o,d,m)),!0}return!1}function Wx(a){var r=cr(a.target);if(r!==null){var o=c(r);if(o!==null){if(r=o.tag,r===13){if(r=u(o),r!==null){a.blockedOn=r,C1(a.priority,function(){if(o.tag===13){var d=Ss();d=wn(d);var m=wr(o,d);m!==null&&Cs(m,o,d),Ah(o,d)}});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){a.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}a.blockedOn=null}function vc(a){if(a.blockedOn!==null)return!1;for(var r=a.targetContainers;0<r.length;){var o=Mh(a.nativeEvent);if(o===null){o=a.nativeEvent;var d=new o.constructor(o.type,o);Pd=d,o.target.dispatchEvent(d),Pd=null}else return r=dr(o),r!==null&&Yx(r),a.blockedOn=o,!1;r.shift()}return!0}function Qx(a,r,o){vc(a)&&o.delete(r)}function RN(){Oh=!1,an!==null&&vc(an)&&(an=null),nn!==null&&vc(nn)&&(nn=null),rn!==null&&vc(rn)&&(rn=null),_o.forEach(Qx),No.forEach(Qx)}function jc(a,r){a.blockedOn===r&&(a.blockedOn=null,Oh||(Oh=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,RN)))}var wc=null;function Zx(a){wc!==a&&(wc=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){wc===a&&(wc=null);for(var r=0;r<a.length;r+=3){var o=a[r],d=a[r+1],m=a[r+2];if(typeof d!="function"){if(Dh(d||o)===null)continue;break}var x=dr(o);x!==null&&(a.splice(r,3),r-=3,Du(x,{pending:!0,data:m,method:o.method,action:d},d,m))}}))}function Co(a){function r(F){return jc(F,a)}an!==null&&jc(an,a),nn!==null&&jc(nn,a),rn!==null&&jc(rn,a),_o.forEach(r),No.forEach(r);for(var o=0;o<on.length;o++){var d=on[o];d.blockedOn===a&&(d.blockedOn=null)}for(;0<on.length&&(o=on[0],o.blockedOn===null);)Wx(o),o.blockedOn===null&&on.shift();if(o=(a.ownerDocument||a).$$reactFormReplay,o!=null)for(d=0;d<o.length;d+=3){var m=o[d],x=o[d+1],T=m[us]||null;if(typeof x=="function")T||Zx(o);else if(T){var O=null;if(x&&x.hasAttribute("formAction")){if(m=x,T=x[us]||null)O=T.formAction;else if(Dh(m)!==null)continue}else O=T.action;typeof O=="function"?o[d+1]=O:(o.splice(d,3),d-=3),Zx(o)}}}function Rh(a){this._internalRoot=a}_c.prototype.render=Rh.prototype.render=function(a){var r=this._internalRoot;if(r===null)throw Error(i(409));var o=r.current,d=Ss();Hx(o,d,a,r,null,null)},_c.prototype.unmount=Rh.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var r=a.containerInfo;Hx(a.current,2,null,a,null,null),nc(),r[lr]=null}};function _c(a){this._internalRoot=a}_c.prototype.unstable_scheduleHydration=function(a){if(a){var r=p0();a={blockedOn:null,target:a,priority:r};for(var o=0;o<on.length&&r!==0&&r<on[o].priority;o++);on.splice(o,0,a),o===0&&Wx(a)}};var Jx=s.version;if(Jx!=="19.1.0")throw Error(i(527,Jx,"19.1.0"));P.findDOMNode=function(a){var r=a._reactInternals;if(r===void 0)throw typeof a.render=="function"?Error(i(188)):(a=Object.keys(a).join(","),Error(i(268,a)));return a=f(r),a=a!==null?p(a):null,a=a===null?null:a.stateNode,a};var PN={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nc.isDisabled&&Nc.supportsFiber)try{we=Nc.inject(PN),Re=Nc}catch{}}return Eo.createRoot=function(a,r){if(!l(a))throw Error(i(299));var o=!1,d="",m=pg,x=gg,T=xg,O=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(x=r.onCaughtError),r.onRecoverableError!==void 0&&(T=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(O=r.unstable_transitionCallbacks)),r=Fx(a,1,!1,null,null,o,d,m,x,T,O,null),a[lr]=r.current,gh(a),new Rh(r)},Eo.hydrateRoot=function(a,r,o){if(!l(a))throw Error(i(299));var d=!1,m="",x=pg,T=gg,O=xg,F=null,te=null;return o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(x=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(O=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(F=o.unstable_transitionCallbacks),o.formState!==void 0&&(te=o.formState)),r=Fx(a,1,!0,r,o??null,d,m,x,T,O,F,te),r.context=Ix(null),o=r.current,d=Ss(),d=wn(d),m=Fa(d),m.callback=null,Ia(o,m,d),o=d,r.current.lanes=o,Ba(r,o),na(r),a[lr]=r.current,gh(a),new _c(r)},Eo.version="19.1.0",Eo}var cy;function GN(){if(cy)return Lh.exports;cy=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(s){console.error(s)}}return t(),Lh.exports=HN(),Lh.exports}var YN=GN();/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var dy="popstate";function XN(t={}){function s(i,l){let{pathname:c,search:u,hash:h}=i.location;return bm("",{pathname:c,search:u,hash:h},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(i,l){return typeof l=="string"?l:Go(l)}return WN(s,n,null,t)}function gt(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function Ks(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function KN(){return Math.random().toString(36).substring(2,10)}function uy(t,s){return{usr:t.state,key:t.key,idx:s}}function bm(t,s,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof s=="string"?_i(s):s,state:n,key:s&&s.key||i||KN()}}function Go({pathname:t="/",search:s="",hash:n=""}){return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function _i(t){let s={};if(t){let n=t.indexOf("#");n>=0&&(s.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(s.search=t.substring(i),t=t.substring(0,i)),t&&(s.pathname=t)}return s}function WN(t,s,n,i={}){let{window:l=document.defaultView,v5Compat:c=!1}=i,u=l.history,h="POP",f=null,p=g();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function g(){return(u.state||{idx:null}).idx}function y(){h="POP";let C=g(),R=C==null?null:C-p;p=C,f&&f({action:h,location:_.location,delta:R})}function v(C,R){h="PUSH";let S=bm(_.location,C,R);p=g()+1;let k=uy(S,p),E=_.createHref(S);try{u.pushState(k,"",E)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;l.location.assign(E)}c&&f&&f({action:h,location:_.location,delta:1})}function j(C,R){h="REPLACE";let S=bm(_.location,C,R);p=g();let k=uy(S,p),E=_.createHref(S);u.replaceState(k,"",E),c&&f&&f({action:h,location:_.location,delta:0})}function N(C){return QN(C)}let _={get action(){return h},get location(){return t(l,u)},listen(C){if(f)throw new Error("A history only accepts one active listener");return l.addEventListener(dy,y),f=C,()=>{l.removeEventListener(dy,y),f=null}},createHref(C){return s(l,C)},createURL:N,encodeLocation(C){let R=N(C);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:v,replace:j,go(C){return u.go(C)}};return _}function QN(t,s=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),gt(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:Go(t);return i=i.replace(/ $/,"%20"),!s&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function Tv(t,s,n="/"){return ZN(t,s,n,!1)}function ZN(t,s,n,i){let l=typeof s=="string"?_i(s):s,c=Ra(l.pathname||"/",n);if(c==null)return null;let u=Ev(t);JN(u);let h=null;for(let f=0;h==null&&f<u.length;++f){let p=d2(c);h=l2(u[f],p,i)}return h}function Ev(t,s=[],n=[],i="",l=!1){let c=(u,h,f=l,p)=>{let g={relativePath:p===void 0?u.path||"":p,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(i)&&f)return;gt(g.relativePath.startsWith(i),`Absolute route path "${g.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(i.length)}let y=Oa([i,g.relativePath]),v=n.concat(g);u.children&&u.children.length>0&&(gt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),Ev(u.children,s,v,y,f)),!(u.path==null&&!u.index)&&s.push({path:y,score:i2(y,u.index),routesMeta:v})};return t.forEach((u,h)=>{var f;if(u.path===""||!((f=u.path)!=null&&f.includes("?")))c(u,h);else for(let p of Av(u.path))c(u,h,!0,p)}),s}function Av(t){let s=t.split("/");if(s.length===0)return[];let[n,...i]=s,l=n.endsWith("?"),c=n.replace(/\?$/,"");if(i.length===0)return l?[c,""]:[c];let u=Av(i.join("/")),h=[];return h.push(...u.map(f=>f===""?c:[c,f].join("/"))),l&&h.push(...u),h.map(f=>t.startsWith("/")&&f===""?"/":f)}function JN(t){t.sort((s,n)=>s.score!==n.score?n.score-s.score:o2(s.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var e2=/^:[\w-]+$/,t2=3,s2=2,a2=1,n2=10,r2=-2,hy=t=>t==="*";function i2(t,s){let n=t.split("/"),i=n.length;return n.some(hy)&&(i+=r2),s&&(i+=s2),n.filter(l=>!hy(l)).reduce((l,c)=>l+(e2.test(c)?t2:c===""?a2:n2),i)}function o2(t,s){return t.length===s.length&&t.slice(0,-1).every((i,l)=>i===s[l])?t[t.length-1]-s[s.length-1]:0}function l2(t,s,n=!1){let{routesMeta:i}=t,l={},c="/",u=[];for(let h=0;h<i.length;++h){let f=i[h],p=h===i.length-1,g=c==="/"?s:s.slice(c.length)||"/",y=Ic({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},g),v=f.route;if(!y&&p&&n&&!i[i.length-1].route.index&&(y=Ic({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},g)),!y)return null;Object.assign(l,y.params),u.push({params:l,pathname:Oa([c,y.pathname]),pathnameBase:f2(Oa([c,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(c=Oa([c,y.pathnameBase]))}return u}function Ic(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=c2(t.path,t.caseSensitive,t.end),l=s.match(n);if(!l)return null;let c=l[0],u=c.replace(/(.)\/+$/,"$1"),h=l.slice(1);return{params:i.reduce((p,{paramName:g,isOptional:y},v)=>{if(g==="*"){let N=h[v]||"";u=c.slice(0,c.length-N.length).replace(/(.)\/+$/,"$1")}const j=h[v];return y&&!j?p[g]=void 0:p[g]=(j||"").replace(/%2F/g,"/"),p},{}),pathname:c,pathnameBase:u,pattern:t}}function c2(t,s=!1,n=!0){Ks(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],l="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,f)=>(i.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),l+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":t!==""&&t!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,s?void 0:"i"),i]}function d2(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return Ks(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${s}).`),t}}function Ra(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let n=s.endsWith("/")?s.length-1:s.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function u2(t,s="/"){let{pathname:n,search:i="",hash:l=""}=typeof t=="string"?_i(t):t;return{pathname:n?n.startsWith("/")?n:h2(n,s):s,search:p2(i),hash:g2(l)}}function h2(t,s){let n=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function Uh(t,s,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${s}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function m2(t){return t.filter((s,n)=>n===0||s.route.path&&s.route.path.length>0)}function lf(t){let s=m2(t);return s.map((n,i)=>i===s.length-1?n.pathname:n.pathnameBase)}function cf(t,s,n,i=!1){let l;typeof t=="string"?l=_i(t):(l={...t},gt(!l.pathname||!l.pathname.includes("?"),Uh("?","pathname","search",l)),gt(!l.pathname||!l.pathname.includes("#"),Uh("#","pathname","hash",l)),gt(!l.search||!l.search.includes("#"),Uh("#","search","hash",l)));let c=t===""||l.pathname==="",u=c?"/":l.pathname,h;if(u==null)h=n;else{let y=s.length-1;if(!i&&u.startsWith("..")){let v=u.split("/");for(;v[0]==="..";)v.shift(),y-=1;l.pathname=v.join("/")}h=y>=0?s[y]:"/"}let f=u2(l,h),p=u&&u!=="/"&&u.endsWith("/"),g=(c||u===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(p||g)&&(f.pathname+="/"),f}var Oa=t=>t.join("/").replace(/\/\/+/g,"/"),f2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),p2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,g2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function x2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var kv=["POST","PUT","PATCH","DELETE"];new Set(kv);var y2=["GET",...kv];new Set(y2);var Ni=b.createContext(null);Ni.displayName="DataRouter";var ud=b.createContext(null);ud.displayName="DataRouterState";b.createContext(!1);var Mv=b.createContext({isTransitioning:!1});Mv.displayName="ViewTransition";var b2=b.createContext(new Map);b2.displayName="Fetchers";var v2=b.createContext(null);v2.displayName="Await";var Qs=b.createContext(null);Qs.displayName="Navigation";var sl=b.createContext(null);sl.displayName="Location";var Zs=b.createContext({outlet:null,matches:[],isDataRoute:!1});Zs.displayName="Route";var df=b.createContext(null);df.displayName="RouteError";function j2(t,{relative:s}={}){gt(Si(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=b.useContext(Qs),{hash:l,pathname:c,search:u}=al(t,{relative:s}),h=c;return n!=="/"&&(h=c==="/"?n:Oa([n,c])),i.createHref({pathname:h,search:u,hash:l})}function Si(){return b.useContext(sl)!=null}function yn(){return gt(Si(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(sl).location}var Dv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ov(t){b.useContext(Qs).static||b.useLayoutEffect(t)}function sr(){let{isDataRoute:t}=b.useContext(Zs);return t?z2():w2()}function w2(){gt(Si(),"useNavigate() may be used only in the context of a <Router> component.");let t=b.useContext(Ni),{basename:s,navigator:n}=b.useContext(Qs),{matches:i}=b.useContext(Zs),{pathname:l}=yn(),c=JSON.stringify(lf(i)),u=b.useRef(!1);return Ov(()=>{u.current=!0}),b.useCallback((f,p={})=>{if(Ks(u.current,Dv),!u.current)return;if(typeof f=="number"){n.go(f);return}let g=cf(f,JSON.parse(c),l,p.relative==="path");t==null&&s!=="/"&&(g.pathname=g.pathname==="/"?s:Oa([s,g.pathname])),(p.replace?n.replace:n.push)(g,p.state,p)},[s,n,c,l,t])}var _2=b.createContext(null);function N2(t){let s=b.useContext(Zs).outlet;return s&&b.createElement(_2.Provider,{value:t},s)}function al(t,{relative:s}={}){let{matches:n}=b.useContext(Zs),{pathname:i}=yn(),l=JSON.stringify(lf(n));return b.useMemo(()=>cf(t,JSON.parse(l),i,s==="path"),[t,l,i,s])}function S2(t,s){return Rv(t,s)}function Rv(t,s,n,i,l){var S;gt(Si(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=b.useContext(Qs),{matches:u}=b.useContext(Zs),h=u[u.length-1],f=h?h.params:{},p=h?h.pathname:"/",g=h?h.pathnameBase:"/",y=h&&h.route;{let k=y&&y.path||"";Pv(p,!y||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let v=yn(),j;if(s){let k=typeof s=="string"?_i(s):s;gt(g==="/"||((S=k.pathname)==null?void 0:S.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${k.pathname}" was given in the \`location\` prop.`),j=k}else j=v;let N=j.pathname||"/",_=N;if(g!=="/"){let k=g.replace(/^\//,"").split("/");_="/"+N.replace(/^\//,"").split("/").slice(k.length).join("/")}let C=Tv(t,{pathname:_});Ks(y||C!=null,`No routes matched location "${j.pathname}${j.search}${j.hash}" `),Ks(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${j.pathname}${j.search}${j.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let R=k2(C&&C.map(k=>Object.assign({},k,{params:Object.assign({},f,k.params),pathname:Oa([g,c.encodeLocation?c.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?g:Oa([g,c.encodeLocation?c.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),u,n,i,l);return s&&R?b.createElement(sl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...j},navigationType:"POP"}},R):R}function C2(){let t=P2(),s=x2(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:i},c={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",t),u=b.createElement(b.Fragment,null,b.createElement("p",null,"💿 Hey developer 👋"),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:c},"ErrorBoundary")," or"," ",b.createElement("code",{style:c},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},s),n?b.createElement("pre",{style:l},n):null,u)}var T2=b.createElement(C2,null),E2=class extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){this.props.unstable_onError?this.props.unstable_onError(t,s):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?b.createElement(Zs.Provider,{value:this.props.routeContext},b.createElement(df.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function A2({routeContext:t,match:s,children:n}){let i=b.useContext(Ni);return i&&i.static&&i.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=s.route.id),b.createElement(Zs.Provider,{value:t},n)}function k2(t,s=[],n=null,i=null,l=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(s.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let c=t,u=n==null?void 0:n.errors;if(u!=null){let p=c.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);gt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),c=c.slice(0,Math.min(c.length,p+1))}let h=!1,f=-1;if(n)for(let p=0;p<c.length;p++){let g=c[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=p),g.route.id){let{loaderData:y,errors:v}=n,j=g.route.loader&&!y.hasOwnProperty(g.route.id)&&(!v||v[g.route.id]===void 0);if(g.route.lazy||j){h=!0,f>=0?c=c.slice(0,f+1):c=[c[0]];break}}}return c.reduceRight((p,g,y)=>{let v,j=!1,N=null,_=null;n&&(v=u&&g.route.id?u[g.route.id]:void 0,N=g.route.errorElement||T2,h&&(f<0&&y===0?(Pv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),j=!0,_=null):f===y&&(j=!0,_=g.route.hydrateFallbackElement||null)));let C=s.concat(c.slice(0,y+1)),R=()=>{let S;return v?S=N:j?S=_:g.route.Component?S=b.createElement(g.route.Component,null):g.route.element?S=g.route.element:S=p,b.createElement(A2,{match:g,routeContext:{outlet:p,matches:C,isDataRoute:n!=null},children:S})};return n&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?b.createElement(E2,{location:n.location,revalidation:n.revalidation,component:N,error:v,children:R(),routeContext:{outlet:null,matches:C,isDataRoute:!0},unstable_onError:i}):R()},null)}function uf(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function M2(t){let s=b.useContext(Ni);return gt(s,uf(t)),s}function D2(t){let s=b.useContext(ud);return gt(s,uf(t)),s}function O2(t){let s=b.useContext(Zs);return gt(s,uf(t)),s}function hf(t){let s=O2(t),n=s.matches[s.matches.length-1];return gt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function R2(){return hf("useRouteId")}function P2(){var i;let t=b.useContext(df),s=D2("useRouteError"),n=hf("useRouteError");return t!==void 0?t:(i=s.errors)==null?void 0:i[n]}function z2(){let{router:t}=M2("useNavigate"),s=hf("useNavigate"),n=b.useRef(!1);return Ov(()=>{n.current=!0}),b.useCallback(async(l,c={})=>{Ks(n.current,Dv),n.current&&(typeof l=="number"?t.navigate(l):await t.navigate(l,{fromRouteId:s,...c}))},[t,s])}var my={};function Pv(t,s,n){!s&&!my[t]&&(my[t]=!0,Ks(!1,n))}b.memo(L2);function L2({routes:t,future:s,state:n,unstable_onError:i}){return Rv(t,void 0,n,i,s)}function mf({to:t,replace:s,state:n,relative:i}){gt(Si(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=b.useContext(Qs);Ks(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=b.useContext(Zs),{pathname:u}=yn(),h=sr(),f=cf(t,lf(c),u,i==="path"),p=JSON.stringify(f);return b.useEffect(()=>{h(JSON.parse(p),{replace:s,state:n,relative:i})},[h,p,i,s,n]),null}function B2(t){return N2(t.context)}function yt(t){gt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function $2({basename:t="/",children:s=null,location:n,navigationType:i="POP",navigator:l,static:c=!1}){gt(!Si(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=t.replace(/^\/*/,"/"),h=b.useMemo(()=>({basename:u,navigator:l,static:c,future:{}}),[u,l,c]);typeof n=="string"&&(n=_i(n));let{pathname:f="/",search:p="",hash:g="",state:y=null,key:v="default"}=n,j=b.useMemo(()=>{let N=Ra(f,u);return N==null?null:{location:{pathname:N,search:p,hash:g,state:y,key:v},navigationType:i}},[u,f,p,g,y,v,i]);return Ks(j!=null,`<Router basename="${u}"> is not able to match the URL "${f}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:b.createElement(Qs.Provider,{value:h},b.createElement(sl.Provider,{children:s,value:j}))}function zv({children:t,location:s}){return S2(vm(t),s)}function vm(t,s=[]){let n=[];return b.Children.forEach(t,(i,l)=>{if(!b.isValidElement(i))return;let c=[...s,l];if(i.type===b.Fragment){n.push.apply(n,vm(i.props.children,c));return}gt(i.type===yt,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||c.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=vm(i.props.children,c)),n.push(u)}),n}var Pc="get",zc="application/x-www-form-urlencoded";function hd(t){return t!=null&&typeof t.tagName=="string"}function V2(t){return hd(t)&&t.tagName.toLowerCase()==="button"}function U2(t){return hd(t)&&t.tagName.toLowerCase()==="form"}function q2(t){return hd(t)&&t.tagName.toLowerCase()==="input"}function F2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function I2(t,s){return t.button===0&&(!s||s==="_self")&&!F2(t)}var Sc=null;function H2(){if(Sc===null)try{new FormData(document.createElement("form"),0),Sc=!1}catch{Sc=!0}return Sc}var G2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function qh(t){return t!=null&&!G2.has(t)?(Ks(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${zc}"`),null):t}function Y2(t,s){let n,i,l,c,u;if(U2(t)){let h=t.getAttribute("action");i=h?Ra(h,s):null,n=t.getAttribute("method")||Pc,l=qh(t.getAttribute("enctype"))||zc,c=new FormData(t)}else if(V2(t)||q2(t)&&(t.type==="submit"||t.type==="image")){let h=t.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=t.getAttribute("formaction")||h.getAttribute("action");if(i=f?Ra(f,s):null,n=t.getAttribute("formmethod")||h.getAttribute("method")||Pc,l=qh(t.getAttribute("formenctype"))||qh(h.getAttribute("enctype"))||zc,c=new FormData(h,t),!H2()){let{name:p,type:g,value:y}=t;if(g==="image"){let v=p?`${p}.`:"";c.append(`${v}x`,"0"),c.append(`${v}y`,"0")}else p&&c.append(p,y)}}else{if(hd(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Pc,i=null,l=zc,u=t}return c&&l==="text/plain"&&(u=c,c=void 0),{action:i,method:n.toLowerCase(),encType:l,formData:c,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ff(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function X2(t,s,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${n}`:s&&Ra(i.pathname,s)==="/"?i.pathname=`${s.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function K2(t,s){if(t.id in s)return s[t.id];try{let n=await import(t.module);return s[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function W2(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Q2(t,s,n){let i=await Promise.all(t.map(async l=>{let c=s.routes[l.route.id];if(c){let u=await K2(c,n);return u.links?u.links():[]}return[]}));return tS(i.flat(1).filter(W2).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function fy(t,s,n,i,l,c){let u=(f,p)=>n[p]?f.route.id!==n[p].route.id:!0,h=(f,p)=>{var g;return n[p].pathname!==f.pathname||((g=n[p].route.path)==null?void 0:g.endsWith("*"))&&n[p].params["*"]!==f.params["*"]};return c==="assets"?s.filter((f,p)=>u(f,p)||h(f,p)):c==="data"?s.filter((f,p)=>{var y;let g=i.routes[f.route.id];if(!g||!g.hasLoader)return!1;if(u(f,p)||h(f,p))return!0;if(f.route.shouldRevalidate){let v=f.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:((y=n[0])==null?void 0:y.params)||{},nextUrl:new URL(t,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function Z2(t,s,{includeHydrateFallback:n}={}){return J2(t.map(i=>{let l=s.routes[i.route.id];if(!l)return[];let c=[l.module];return l.clientActionModule&&(c=c.concat(l.clientActionModule)),l.clientLoaderModule&&(c=c.concat(l.clientLoaderModule)),n&&l.hydrateFallbackModule&&(c=c.concat(l.hydrateFallbackModule)),l.imports&&(c=c.concat(l.imports)),c}).flat(1))}function J2(t){return[...new Set(t)]}function eS(t){let s={},n=Object.keys(t).sort();for(let i of n)s[i]=t[i];return s}function tS(t,s){let n=new Set;return new Set(s),t.reduce((i,l)=>{let c=JSON.stringify(eS(l));return n.has(c)||(n.add(c),i.push({key:c,link:l})),i},[])}function Lv(){let t=b.useContext(Ni);return ff(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function sS(){let t=b.useContext(ud);return ff(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var pf=b.createContext(void 0);pf.displayName="FrameworkContext";function Bv(){let t=b.useContext(pf);return ff(t,"You must render this element inside a <HydratedRouter> element"),t}function aS(t,s){let n=b.useContext(pf),[i,l]=b.useState(!1),[c,u]=b.useState(!1),{onFocus:h,onBlur:f,onMouseEnter:p,onMouseLeave:g,onTouchStart:y}=s,v=b.useRef(null);b.useEffect(()=>{if(t==="render"&&u(!0),t==="viewport"){let _=R=>{R.forEach(S=>{u(S.isIntersecting)})},C=new IntersectionObserver(_,{threshold:.5});return v.current&&C.observe(v.current),()=>{C.disconnect()}}},[t]),b.useEffect(()=>{if(i){let _=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(_)}}},[i]);let j=()=>{l(!0)},N=()=>{l(!1),u(!1)};return n?t!=="intent"?[c,v,{}]:[c,v,{onFocus:Ao(h,j),onBlur:Ao(f,N),onMouseEnter:Ao(p,j),onMouseLeave:Ao(g,N),onTouchStart:Ao(y,j)}]:[!1,v,{}]}function Ao(t,s){return n=>{t&&t(n),n.defaultPrevented||s(n)}}function nS({page:t,...s}){let{router:n}=Lv(),i=b.useMemo(()=>Tv(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?b.createElement(iS,{page:t,matches:i,...s}):null}function rS(t){let{manifest:s,routeModules:n}=Bv(),[i,l]=b.useState([]);return b.useEffect(()=>{let c=!1;return Q2(t,s,n).then(u=>{c||l(u)}),()=>{c=!0}},[t,s,n]),i}function iS({page:t,matches:s,...n}){let i=yn(),{manifest:l,routeModules:c}=Bv(),{basename:u}=Lv(),{loaderData:h,matches:f}=sS(),p=b.useMemo(()=>fy(t,s,f,l,i,"data"),[t,s,f,l,i]),g=b.useMemo(()=>fy(t,s,f,l,i,"assets"),[t,s,f,l,i]),y=b.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let N=new Set,_=!1;if(s.forEach(R=>{var k;let S=l.routes[R.route.id];!S||!S.hasLoader||(!p.some(E=>E.route.id===R.route.id)&&R.route.id in h&&((k=c[R.route.id])!=null&&k.shouldRevalidate)||S.hasClientLoader?_=!0:N.add(R.route.id))}),N.size===0)return[];let C=X2(t,u,"data");return _&&N.size>0&&C.searchParams.set("_routes",s.filter(R=>N.has(R.route.id)).map(R=>R.route.id).join(",")),[C.pathname+C.search]},[u,h,i,l,p,s,t,c]),v=b.useMemo(()=>Z2(g,l),[g,l]),j=rS(g);return b.createElement(b.Fragment,null,y.map(N=>b.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...n})),v.map(N=>b.createElement("link",{key:N,rel:"modulepreload",href:N,...n})),j.map(({key:N,link:_})=>b.createElement("link",{key:N,nonce:n.nonce,..._})))}function oS(...t){return s=>{t.forEach(n=>{typeof n=="function"?n(s):n!=null&&(n.current=s)})}}var $v=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{$v&&(window.__reactRouterVersion="7.8.2")}catch{}function lS({basename:t,children:s,window:n}){let i=b.useRef();i.current==null&&(i.current=XN({window:n,v5Compat:!0}));let l=i.current,[c,u]=b.useState({action:l.action,location:l.location}),h=b.useCallback(f=>{b.startTransition(()=>u(f))},[u]);return b.useLayoutEffect(()=>l.listen(h),[l,h]),b.createElement($2,{basename:t,children:s,location:c.location,navigationType:c.action,navigator:l})}var Vv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fn=b.forwardRef(function({onClick:s,discover:n="render",prefetch:i="none",relative:l,reloadDocument:c,replace:u,state:h,target:f,to:p,preventScrollReset:g,viewTransition:y,...v},j){let{basename:N}=b.useContext(Qs),_=typeof p=="string"&&Vv.test(p),C,R=!1;if(typeof p=="string"&&_&&(C=p,$v))try{let H=new URL(window.location.href),V=p.startsWith("//")?new URL(H.protocol+p):new URL(p),Q=Ra(V.pathname,N);V.origin===H.origin&&Q!=null?p=Q+V.search+V.hash:R=!0}catch{Ks(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=j2(p,{relative:l}),[k,E,w]=aS(i,v),M=uS(p,{replace:u,state:h,target:f,preventScrollReset:g,relative:l,viewTransition:y});function z(H){s&&s(H),H.defaultPrevented||M(H)}let U=b.createElement("a",{...v,...w,href:C||S,onClick:R||c?s:z,ref:oS(j,E),target:f,"data-discover":!_&&n==="render"?"true":void 0});return k&&!_?b.createElement(b.Fragment,null,U,b.createElement(nS,{page:S})):U});fn.displayName="Link";var Uv=b.forwardRef(function({"aria-current":s="page",caseSensitive:n=!1,className:i="",end:l=!1,style:c,to:u,viewTransition:h,children:f,...p},g){let y=al(u,{relative:p.relative}),v=yn(),j=b.useContext(ud),{navigator:N,basename:_}=b.useContext(Qs),C=j!=null&&gS(y)&&h===!0,R=N.encodeLocation?N.encodeLocation(y).pathname:y.pathname,S=v.pathname,k=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;n||(S=S.toLowerCase(),k=k?k.toLowerCase():null,R=R.toLowerCase()),k&&_&&(k=Ra(k,_)||k);const E=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let w=S===R||!l&&S.startsWith(R)&&S.charAt(E)==="/",M=k!=null&&(k===R||!l&&k.startsWith(R)&&k.charAt(R.length)==="/"),z={isActive:w,isPending:M,isTransitioning:C},U=w?s:void 0,H;typeof i=="function"?H=i(z):H=[i,w?"active":null,M?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let V=typeof c=="function"?c(z):c;return b.createElement(fn,{...p,"aria-current":U,className:H,ref:g,style:V,to:u,viewTransition:h},typeof f=="function"?f(z):f)});Uv.displayName="NavLink";var cS=b.forwardRef(({discover:t="render",fetcherKey:s,navigate:n,reloadDocument:i,replace:l,state:c,method:u=Pc,action:h,onSubmit:f,relative:p,preventScrollReset:g,viewTransition:y,...v},j)=>{let N=fS(),_=pS(h,{relative:p}),C=u.toLowerCase()==="get"?"get":"post",R=typeof h=="string"&&Vv.test(h),S=k=>{if(f&&f(k),k.defaultPrevented)return;k.preventDefault();let E=k.nativeEvent.submitter,w=(E==null?void 0:E.getAttribute("formmethod"))||u;N(E||k.currentTarget,{fetcherKey:s,method:w,navigate:n,replace:l,state:c,relative:p,preventScrollReset:g,viewTransition:y})};return b.createElement("form",{ref:j,method:C,action:_,onSubmit:i?f:S,...v,"data-discover":!R&&t==="render"?"true":void 0})});cS.displayName="Form";function dS(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qv(t){let s=b.useContext(Ni);return gt(s,dS(t)),s}function uS(t,{target:s,replace:n,state:i,preventScrollReset:l,relative:c,viewTransition:u}={}){let h=sr(),f=yn(),p=al(t,{relative:c});return b.useCallback(g=>{if(I2(g,s)){g.preventDefault();let y=n!==void 0?n:Go(f)===Go(p);h(t,{replace:y,state:i,preventScrollReset:l,relative:c,viewTransition:u})}},[f,h,p,n,i,s,t,l,c,u])}var hS=0,mS=()=>`__${String(++hS)}__`;function fS(){let{router:t}=qv("useSubmit"),{basename:s}=b.useContext(Qs),n=R2();return b.useCallback(async(i,l={})=>{let{action:c,method:u,encType:h,formData:f,body:p}=Y2(i,s);if(l.navigate===!1){let g=l.fetcherKey||mS();await t.fetch(g,n,l.action||c,{preventScrollReset:l.preventScrollReset,formData:f,body:p,formMethod:l.method||u,formEncType:l.encType||h,flushSync:l.flushSync})}else await t.navigate(l.action||c,{preventScrollReset:l.preventScrollReset,formData:f,body:p,formMethod:l.method||u,formEncType:l.encType||h,replace:l.replace,state:l.state,fromRouteId:n,flushSync:l.flushSync,viewTransition:l.viewTransition})},[t,s,n])}function pS(t,{relative:s}={}){let{basename:n}=b.useContext(Qs),i=b.useContext(Zs);gt(i,"useFormAction must be used inside a RouteContext");let[l]=i.matches.slice(-1),c={...al(t||".",{relative:s})},u=yn();if(t==null){c.search=u.search;let h=new URLSearchParams(c.search),f=h.getAll("index");if(f.some(g=>g==="")){h.delete("index"),f.filter(y=>y).forEach(y=>h.append("index",y));let g=h.toString();c.search=g?`?${g}`:""}}return(!t||t===".")&&l.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:Oa([n,c.pathname])),Go(c)}function gS(t,{relative:s}={}){let n=b.useContext(Mv);gt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=qv("useViewTransitionState"),l=al(t,{relative:s});if(!n.isTransitioning)return!1;let c=Ra(n.currentLocation.pathname,i)||n.currentLocation.pathname,u=Ra(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Ic(l.pathname,u)!=null||Ic(l.pathname,c)!=null}const xS="modulepreload",yS=function(t){return"/"+t},py={},Jn=function(s,n,i){let l=Promise.resolve();if(n&&n.length>0){let u=function(p){return Promise.all(p.map(g=>Promise.resolve(g).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),f=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));l=u(n.map(p=>{if(p=yS(p),p in py)return;py[p]=!0;const g=p.endsWith(".css"),y=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${y}`))return;const v=document.createElement("link");if(v.rel=g?"stylesheet":xS,g||(v.as="script"),v.crossOrigin="",v.href=p,f&&v.setAttribute("nonce",f),document.head.appendChild(v),g)return new Promise((j,N)=>{v.addEventListener("load",j),v.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${p}`)))})}))}function c(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return l.then(u=>{for(const h of u||[])h.status==="rejected"&&c(h.reason);return s().catch(c)})},bS=t=>{let s;return t?s=t:typeof fetch>"u"?s=(...n)=>Jn(async()=>{const{default:i}=await Promise.resolve().then(()=>Ci);return{default:i}},[]).then(({default:i})=>i(...n)):s=fetch,(...n)=>s(...n)};class gf extends Error{constructor(s,n="FunctionsError",i){super(s),this.name=n,this.context=i}}class vS extends gf{constructor(s){super("Failed to send a request to the Edge Function","FunctionsFetchError",s)}}class gy extends gf{constructor(s){super("Relay Error invoking the Edge Function","FunctionsRelayError",s)}}class xy extends gf{constructor(s){super("Edge Function returned a non-2xx status code","FunctionsHttpError",s)}}var jm;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(jm||(jm={}));var jS=function(t,s,n,i){function l(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(g){try{p(i.next(g))}catch(y){u(y)}}function f(g){try{p(i.throw(g))}catch(y){u(y)}}function p(g){g.done?c(g.value):l(g.value).then(h,f)}p((i=i.apply(t,s||[])).next())})};class wS{constructor(s,{headers:n={},customFetch:i,region:l=jm.Any}={}){this.url=s,this.headers=n,this.region=l,this.fetch=bS(i)}setAuth(s){this.headers.Authorization=`Bearer ${s}`}invoke(s,n={}){var i;return jS(this,void 0,void 0,function*(){try{const{headers:l,method:c,body:u}=n;let h={},{region:f}=n;f||(f=this.region);const p=new URL(`${this.url}/${s}`);f&&f!=="any"&&(h["x-region"]=f,p.searchParams.set("forceFunctionRegion",f));let g;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(h["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(h["Content-Type"]="application/json",g=JSON.stringify(u)));const y=yield this.fetch(p.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),l),body:g}).catch(_=>{throw new vS(_)}),v=y.headers.get("x-relay-error");if(v&&v==="true")throw new gy(y);if(!y.ok)throw new xy(y);let j=((i=y.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),N;return j==="application/json"?N=yield y.json():j==="application/octet-stream"?N=yield y.blob():j==="text/event-stream"?N=y:j==="multipart/form-data"?N=yield y.formData():N=yield y.text(),{data:N,error:null,response:y}}catch(l){return{data:null,error:l,response:l instanceof xy||l instanceof gy?l.context:void 0}}})}}var It={},Yr={},Xr={},Kr={},Wr={},Qr={},_S=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},yi=_S();const NS=yi.fetch,Fv=yi.fetch.bind(yi),Iv=yi.Headers,SS=yi.Request,CS=yi.Response,Ci=Object.freeze(Object.defineProperty({__proto__:null,Headers:Iv,Request:SS,Response:CS,default:Fv,fetch:NS},Symbol.toStringTag,{value:"Module"})),TS=LN(Ci);var Cc={},yy;function Hv(){if(yy)return Cc;yy=1,Object.defineProperty(Cc,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Cc.default=t,Cc}var by;function Gv(){if(by)return Qr;by=1;var t=Qr&&Qr.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Qr,"__esModule",{value:!0});const s=t(TS),n=t(Hv());class i{constructor(c){var u,h;this.shouldThrowOnError=!1,this.method=c.method,this.url=c.url,this.headers=new Headers(c.headers),this.schema=c.schema,this.body=c.body,this.shouldThrowOnError=(u=c.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=c.signal,this.isMaybeSingle=(h=c.isMaybeSingle)!==null&&h!==void 0?h:!1,c.fetch?this.fetch=c.fetch:typeof fetch>"u"?this.fetch=s.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(c,u){return this.headers=new Headers(this.headers),this.headers.set(c,u),this}then(c,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const h=this.fetch;let f=h(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var g,y,v,j;let N=null,_=null,C=null,R=p.status,S=p.statusText;if(p.ok){if(this.method!=="HEAD"){const M=await p.text();M===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((g=this.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?_=M:_=JSON.parse(M))}const E=(y=this.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),w=(v=p.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");E&&w&&w.length>1&&(C=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(N={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,C=null,R=406,S="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const E=await p.text();try{N=JSON.parse(E),Array.isArray(N)&&p.status===404&&(_=[],N=null,R=200,S="OK")}catch{p.status===404&&E===""?(R=204,S="No Content"):N={message:E}}if(N&&this.isMaybeSingle&&(!((j=N==null?void 0:N.details)===null||j===void 0)&&j.includes("0 rows"))&&(N=null,R=200,S="OK"),N&&this.shouldThrowOnError)throw new n.default(N)}return{error:N,data:_,count:C,status:R,statusText:S}});return this.shouldThrowOnError||(f=f.catch(p=>{var g,y,v;return{error:{message:`${(g=p==null?void 0:p.name)!==null&&g!==void 0?g:"FetchError"}: ${p==null?void 0:p.message}`,details:`${(y=p==null?void 0:p.stack)!==null&&y!==void 0?y:""}`,hint:"",code:`${(v=p==null?void 0:p.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),f.then(c,u)}returns(){return this}overrideTypes(){return this}}return Qr.default=i,Qr}var vy;function Yv(){if(vy)return Wr;vy=1;var t=Wr&&Wr.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Wr,"__esModule",{value:!0});const s=t(Gv());class n extends s.default{select(l){let c=!1;const u=(l??"*").split("").map(h=>/\s/.test(h)&&!c?"":(h==='"'&&(c=!c),h)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(l,{ascending:c=!0,nullsFirst:u,foreignTable:h,referencedTable:f=h}={}){const p=f?`${f}.order`:"order",g=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${g?`${g},`:""}${l}.${c?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:c,referencedTable:u=c}={}){const h=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(h,`${l}`),this}range(l,c,{foreignTable:u,referencedTable:h=u}={}){const f=typeof h>"u"?"offset":`${h}.offset`,p=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(f,`${l}`),this.url.searchParams.set(p,`${c-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:l=!1,verbose:c=!1,settings:u=!1,buffers:h=!1,wal:f=!1,format:p="text"}={}){var g;const y=[l?"analyze":null,c?"verbose":null,u?"settings":null,h?"buffers":null,f?"wal":null].filter(Boolean).join("|"),v=(g=this.headers.get("Accept"))!==null&&g!==void 0?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${v}"; options=${y};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(l){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${l}`),this}}return Wr.default=n,Wr}var jy;function xf(){if(jy)return Kr;jy=1;var t=Kr&&Kr.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Kr,"__esModule",{value:!0});const s=t(Yv());class n extends s.default{eq(l,c){return this.url.searchParams.append(l,`eq.${c}`),this}neq(l,c){return this.url.searchParams.append(l,`neq.${c}`),this}gt(l,c){return this.url.searchParams.append(l,`gt.${c}`),this}gte(l,c){return this.url.searchParams.append(l,`gte.${c}`),this}lt(l,c){return this.url.searchParams.append(l,`lt.${c}`),this}lte(l,c){return this.url.searchParams.append(l,`lte.${c}`),this}like(l,c){return this.url.searchParams.append(l,`like.${c}`),this}likeAllOf(l,c){return this.url.searchParams.append(l,`like(all).{${c.join(",")}}`),this}likeAnyOf(l,c){return this.url.searchParams.append(l,`like(any).{${c.join(",")}}`),this}ilike(l,c){return this.url.searchParams.append(l,`ilike.${c}`),this}ilikeAllOf(l,c){return this.url.searchParams.append(l,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(l,c){return this.url.searchParams.append(l,`ilike(any).{${c.join(",")}}`),this}is(l,c){return this.url.searchParams.append(l,`is.${c}`),this}in(l,c){const u=Array.from(new Set(c)).map(h=>typeof h=="string"&&new RegExp("[,()]").test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(l,`in.(${u})`),this}contains(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cs.{${c.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(c)}`),this}containedBy(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cd.{${c.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(c)}`),this}rangeGt(l,c){return this.url.searchParams.append(l,`sr.${c}`),this}rangeGte(l,c){return this.url.searchParams.append(l,`nxl.${c}`),this}rangeLt(l,c){return this.url.searchParams.append(l,`sl.${c}`),this}rangeLte(l,c){return this.url.searchParams.append(l,`nxr.${c}`),this}rangeAdjacent(l,c){return this.url.searchParams.append(l,`adj.${c}`),this}overlaps(l,c){return typeof c=="string"?this.url.searchParams.append(l,`ov.${c}`):this.url.searchParams.append(l,`ov.{${c.join(",")}}`),this}textSearch(l,c,{config:u,type:h}={}){let f="";h==="plain"?f="pl":h==="phrase"?f="ph":h==="websearch"&&(f="w");const p=u===void 0?"":`(${u})`;return this.url.searchParams.append(l,`${f}fts${p}.${c}`),this}match(l){return Object.entries(l).forEach(([c,u])=>{this.url.searchParams.append(c,`eq.${u}`)}),this}not(l,c,u){return this.url.searchParams.append(l,`not.${c}.${u}`),this}or(l,{foreignTable:c,referencedTable:u=c}={}){const h=u?`${u}.or`:"or";return this.url.searchParams.append(h,`(${l})`),this}filter(l,c,u){return this.url.searchParams.append(l,`${c}.${u}`),this}}return Kr.default=n,Kr}var wy;function Xv(){if(wy)return Xr;wy=1;var t=Xr&&Xr.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Xr,"__esModule",{value:!0});const s=t(xf());class n{constructor(l,{headers:c={},schema:u,fetch:h}){this.url=l,this.headers=new Headers(c),this.schema=u,this.fetch=h}select(l,{head:c=!1,count:u}={}){const h=c?"HEAD":"GET";let f=!1;const p=(l??"*").split("").map(g=>/\s/.test(g)&&!f?"":(g==='"'&&(f=!f),g)).join("");return this.url.searchParams.set("select",p),u&&this.headers.append("Prefer",`count=${u}`),new s.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(l,{count:c,defaultToNull:u=!0}={}){var h;const f="POST";if(c&&this.headers.append("Prefer",`count=${c}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const p=l.reduce((g,y)=>g.concat(Object.keys(y)),[]);if(p.length>0){const g=[...new Set(p)].map(y=>`"${y}"`);this.url.searchParams.set("columns",g.join(","))}}return new s.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}upsert(l,{onConflict:c,ignoreDuplicates:u=!1,count:h,defaultToNull:f=!0}={}){var p;const g="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),c!==void 0&&this.url.searchParams.set("on_conflict",c),h&&this.headers.append("Prefer",`count=${h}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const y=l.reduce((v,j)=>v.concat(Object.keys(j)),[]);if(y.length>0){const v=[...new Set(y)].map(j=>`"${j}"`);this.url.searchParams.set("columns",v.join(","))}}return new s.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(l,{count:c}={}){var u;const h="PATCH";return c&&this.headers.append("Prefer",`count=${c}`),new s.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:l}={}){var c;const u="DELETE";return l&&this.headers.append("Prefer",`count=${l}`),new s.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}}return Xr.default=n,Xr}var _y;function ES(){if(_y)return Yr;_y=1;var t=Yr&&Yr.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Yr,"__esModule",{value:!0});const s=t(Xv()),n=t(xf());class i{constructor(c,{headers:u={},schema:h,fetch:f}={}){this.url=c,this.headers=new Headers(u),this.schemaName=h,this.fetch=f}from(c){const u=new URL(`${this.url}/${c}`);return new s.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(c){return new i(this.url,{headers:this.headers,schema:c,fetch:this.fetch})}rpc(c,u={},{head:h=!1,get:f=!1,count:p}={}){var g;let y;const v=new URL(`${this.url}/rpc/${c}`);let j;h||f?(y=h?"HEAD":"GET",Object.entries(u).filter(([_,C])=>C!==void 0).map(([_,C])=>[_,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([_,C])=>{v.searchParams.append(_,C)})):(y="POST",j=u);const N=new Headers(this.headers);return p&&N.set("Prefer",`count=${p}`),new n.default({method:y,url:v,headers:N,schema:this.schemaName,body:j,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}}return Yr.default=i,Yr}var Ny;function AS(){if(Ny)return It;Ny=1;var t=It&&It.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(It,"__esModule",{value:!0}),It.PostgrestError=It.PostgrestBuilder=It.PostgrestTransformBuilder=It.PostgrestFilterBuilder=It.PostgrestQueryBuilder=It.PostgrestClient=void 0;const s=t(ES());It.PostgrestClient=s.default;const n=t(Xv());It.PostgrestQueryBuilder=n.default;const i=t(xf());It.PostgrestFilterBuilder=i.default;const l=t(Yv());It.PostgrestTransformBuilder=l.default;const c=t(Gv());It.PostgrestBuilder=c.default;const u=t(Hv());return It.PostgrestError=u.default,It.default={PostgrestClient:s.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:l.default,PostgrestBuilder:c.default,PostgrestError:u.default},It}var kS=AS();const MS=Cv(kS),{PostgrestClient:DS,PostgrestQueryBuilder:pO,PostgrestFilterBuilder:gO,PostgrestTransformBuilder:xO,PostgrestBuilder:yO,PostgrestError:bO}=MS;class OS{static detectEnvironment(){var s;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((s=navigator.userAgent)===null||s===void 0)&&s.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const s=this.detectEnvironment();if(s.constructor)return s.constructor;let n=s.error||"WebSocket not supported in this environment.";throw s.workaround&&(n+=`

Suggested solution: ${s.workaround}`),new Error(n)}static createWebSocket(s,n){const i=this.getWebSocketConstructor();return new i(s,n)}static isWebSocketSupported(){try{const s=this.detectEnvironment();return s.type==="native"||s.type==="ws"}catch{return!1}}}const RS="2.15.4",PS=`realtime-js/${RS}`,zS="1.0.0",wm=1e4,LS=1e3,BS=100;var zo;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(zo||(zo={}));var zt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(zt||(zt={}));var Gs;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Gs||(Gs={}));var _m;(function(t){t.websocket="websocket"})(_m||(_m={}));var Gn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Gn||(Gn={}));class $S{constructor(){this.HEADER_LENGTH=1}decode(s,n){return s.constructor===ArrayBuffer?n(this._binaryDecode(s)):n(typeof s=="string"?JSON.parse(s):{})}_binaryDecode(s){const n=new DataView(s),i=new TextDecoder;return this._decodeBroadcast(s,n,i)}_decodeBroadcast(s,n,i){const l=n.getUint8(1),c=n.getUint8(2);let u=this.HEADER_LENGTH+2;const h=i.decode(s.slice(u,u+l));u=u+l;const f=i.decode(s.slice(u,u+c));u=u+c;const p=JSON.parse(i.decode(s.slice(u,s.byteLength)));return{ref:null,topic:h,event:f,payload:p}}}let Kv=class{constructor(s,n){this.callback=s,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=s,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var ht;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ht||(ht={}));const Sy=(t,s,n={})=>{var i;const l=(i=n.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(s).reduce((c,u)=>(c[u]=VS(u,t,s,l),c),{})},VS=(t,s,n,i)=>{const l=s.find(h=>h.name===t),c=l==null?void 0:l.type,u=n[t];return c&&!i.includes(c)?Wv(c,u):Nm(u)},Wv=(t,s)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return IS(s,n)}switch(t){case ht.bool:return US(s);case ht.float4:case ht.float8:case ht.int2:case ht.int4:case ht.int8:case ht.numeric:case ht.oid:return qS(s);case ht.json:case ht.jsonb:return FS(s);case ht.timestamp:return HS(s);case ht.abstime:case ht.date:case ht.daterange:case ht.int4range:case ht.int8range:case ht.money:case ht.reltime:case ht.text:case ht.time:case ht.timestamptz:case ht.timetz:case ht.tsrange:case ht.tstzrange:return Nm(s);default:return Nm(s)}},Nm=t=>t,US=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},qS=t=>{if(typeof t=="string"){const s=parseFloat(t);if(!Number.isNaN(s))return s}return t},FS=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(s){return console.log(`JSON parse error: ${s}`),t}return t},IS=(t,s)=>{if(typeof t!="string")return t;const n=t.length-1,i=t[n];if(t[0]==="{"&&i==="}"){let c;const u=t.slice(1,n);try{c=JSON.parse("["+u+"]")}catch{c=u?u.split(","):[]}return c.map(h=>Wv(s,h))}return t},HS=t=>typeof t=="string"?t.replace(" ","T"):t,Qv=t=>{let s=t;return s=s.replace(/^ws/i,"http"),s=s.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),s.replace(/\/+$/,"")+"/api/broadcast"};class Fh{constructor(s,n,i={},l=wm){this.channel=s,this.event=n,this.payload=i,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(s){this.timeout=s,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(s){this.payload=Object.assign(Object.assign({},this.payload),s)}receive(s,n){var i;return this._hasReceived(s)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:s,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const s=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},s),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(s,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:s,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:s,response:n}){this.recHooks.filter(i=>i.status===s).forEach(i=>i.callback(n))}_hasReceived(s){return this.receivedResp&&this.receivedResp.status===s}}var Cy;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Cy||(Cy={}));class Lo{constructor(s,n){this.channel=s,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},l=>{const{onJoin:c,onLeave:u,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Lo.syncState(this.state,l,c,u),this.pendingDiffs.forEach(f=>{this.state=Lo.syncDiff(this.state,f,c,u)}),this.pendingDiffs=[],h()}),this.channel._on(i.diff,{},l=>{const{onJoin:c,onLeave:u,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=Lo.syncDiff(this.state,l,c,u),h())}),this.onJoin((l,c,u)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:c,newPresences:u})}),this.onLeave((l,c,u)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:c,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(s,n,i,l){const c=this.cloneDeep(s),u=this.transformState(n),h={},f={};return this.map(c,(p,g)=>{u[p]||(f[p]=g)}),this.map(u,(p,g)=>{const y=c[p];if(y){const v=g.map(C=>C.presence_ref),j=y.map(C=>C.presence_ref),N=g.filter(C=>j.indexOf(C.presence_ref)<0),_=y.filter(C=>v.indexOf(C.presence_ref)<0);N.length>0&&(h[p]=N),_.length>0&&(f[p]=_)}else h[p]=g}),this.syncDiff(c,{joins:h,leaves:f},i,l)}static syncDiff(s,n,i,l){const{joins:c,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),l||(l=()=>{}),this.map(c,(h,f)=>{var p;const g=(p=s[h])!==null&&p!==void 0?p:[];if(s[h]=this.cloneDeep(f),g.length>0){const y=s[h].map(j=>j.presence_ref),v=g.filter(j=>y.indexOf(j.presence_ref)<0);s[h].unshift(...v)}i(h,g,f)}),this.map(u,(h,f)=>{let p=s[h];if(!p)return;const g=f.map(y=>y.presence_ref);p=p.filter(y=>g.indexOf(y.presence_ref)<0),s[h]=p,l(h,p,f),p.length===0&&delete s[h]}),s}static map(s,n){return Object.getOwnPropertyNames(s).map(i=>n(i,s[i]))}static transformState(s){return s=this.cloneDeep(s),Object.getOwnPropertyNames(s).reduce((n,i)=>{const l=s[i];return"metas"in l?n[i]=l.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):n[i]=l,n},{})}static cloneDeep(s){return JSON.parse(JSON.stringify(s))}onJoin(s){this.caller.onJoin=s}onLeave(s){this.caller.onLeave=s}onSync(s){this.caller.onSync=s}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ty;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Ty||(Ty={}));var Bo;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Bo||(Bo={}));var Ma;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ma||(Ma={}));class yf{constructor(s,n={config:{}},i){this.topic=s,this.params=n,this.socket=i,this.bindings={},this.state=zt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=s.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Fh(this,Gs.join,this.params,this.timeout),this.rejoinTimer=new Kv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=zt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=zt.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Gs.reply,{},(l,c)=>{this._trigger(this._replyEventName(c),l)}),this.presence=new Lo(this),this.broadcastEndpointURL=Qv(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(s,n=this.timeout){var i,l,c;if(this.socket.isConnected()||this.socket.connect(),this.state==zt.closed){const{config:{broadcast:u,presence:h,private:f}}=this.params,p=(l=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(j=>j.filter))!==null&&l!==void 0?l:[],g=!!this.bindings[Bo.PRESENCE]&&this.bindings[Bo.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,y={},v={broadcast:u,presence:Object.assign(Object.assign({},h),{enabled:g}),postgres_changes:p,private:f};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(j=>s==null?void 0:s(Ma.CHANNEL_ERROR,j)),this._onClose(()=>s==null?void 0:s(Ma.CLOSED)),this.updateJoinPayload(Object.assign({config:v},y)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:j})=>{var N;if(this.socket.setAuth(),j===void 0){s==null||s(Ma.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,C=(N=_==null?void 0:_.length)!==null&&N!==void 0?N:0,R=[];for(let S=0;S<C;S++){const k=_[S],{filter:{event:E,schema:w,table:M,filter:z}}=k,U=j&&j[S];if(U&&U.event===E&&U.schema===w&&U.table===M&&U.filter===z)R.push(Object.assign(Object.assign({},k),{id:U.id}));else{this.unsubscribe(),this.state=zt.errored,s==null||s(Ma.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=R,s&&s(Ma.SUBSCRIBED);return}}).receive("error",j=>{this.state=zt.errored,s==null||s(Ma.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(j).join(", ")||"error")))}).receive("timeout",()=>{s==null||s(Ma.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(s,n={}){return await this.send({type:"presence",event:"track",payload:s},n.timeout||this.timeout)}async untrack(s={}){return await this.send({type:"presence",event:"untrack"},s)}on(s,n,i){return this.state===zt.joined&&s===Bo.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(s,n,i)}async send(s,n={}){var i,l;if(!this._canPush()&&s.type==="broadcast"){const{event:c,payload:u}=s,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:u,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((l=p.body)===null||l===void 0?void 0:l.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var u,h,f;const p=this._push(s.type,s,n.timeout||this.timeout);s.type==="broadcast"&&!(!((f=(h=(u=this.params)===null||u===void 0?void 0:u.config)===null||h===void 0?void 0:h.broadcast)===null||f===void 0)&&f.ack)&&c("ok"),p.receive("ok",()=>c("ok")),p.receive("error",()=>c("error")),p.receive("timeout",()=>c("timed out"))})}updateJoinPayload(s){this.joinPush.updatePayload(s)}unsubscribe(s=this.timeout){this.state=zt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Gs.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(l=>{i=new Fh(this,Gs.leave,{},s),i.receive("ok",()=>{n(),l("ok")}).receive("timeout",()=>{n(),l("timed out")}).receive("error",()=>{l("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(s=>s.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=zt.closed,this.bindings={}}async _fetchWithTimeout(s,n,i){const l=new AbortController,c=setTimeout(()=>l.abort(),i),u=await this.socket.fetch(s,Object.assign(Object.assign({},n),{signal:l.signal}));return clearTimeout(c),u}_push(s,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${s}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new Fh(this,s,n,i);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(s){if(s.startTimeout(),this.pushBuffer.push(s),this.pushBuffer.length>BS){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(s,n,i){return n}_isMember(s){return this.topic===s}_joinRef(){return this.joinPush.ref}_trigger(s,n,i){var l,c;const u=s.toLocaleLowerCase(),{close:h,error:f,leave:p,join:g}=Gs;if(i&&[h,f,p,g].indexOf(u)>=0&&i!==this._joinRef())return;let v=this._onMessage(u,n,i);if(n&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(j=>{var N,_,C;return((N=j.filter)===null||N===void 0?void 0:N.event)==="*"||((C=(_=j.filter)===null||_===void 0?void 0:_.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===u}).map(j=>j.callback(v,i)):(c=this.bindings[u])===null||c===void 0||c.filter(j=>{var N,_,C,R,S,k;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in j){const E=j.id,w=(N=j.filter)===null||N===void 0?void 0:N.event;return E&&((_=n.ids)===null||_===void 0?void 0:_.includes(E))&&(w==="*"||(w==null?void 0:w.toLocaleLowerCase())===((C=n.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const E=(S=(R=j==null?void 0:j.filter)===null||R===void 0?void 0:R.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return E==="*"||E===((k=n==null?void 0:n.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return j.type.toLocaleLowerCase()===u}).map(j=>{if(typeof v=="object"&&"ids"in v){const N=v.data,{schema:_,table:C,commit_timestamp:R,type:S,errors:k}=N;v=Object.assign(Object.assign({},{schema:_,table:C,commit_timestamp:R,eventType:S,new:{},old:{},errors:k}),this._getPayloadRecords(N))}j.callback(v,i)})}_isClosed(){return this.state===zt.closed}_isJoined(){return this.state===zt.joined}_isJoining(){return this.state===zt.joining}_isLeaving(){return this.state===zt.leaving}_replyEventName(s){return`chan_reply_${s}`}_on(s,n,i){const l=s.toLocaleLowerCase(),c={type:l,filter:n,callback:i};return this.bindings[l]?this.bindings[l].push(c):this.bindings[l]=[c],this}_off(s,n){const i=s.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(l=>{var c;return!(((c=l.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===i&&yf.isEqual(l.filter,n))})),this}static isEqual(s,n){if(Object.keys(s).length!==Object.keys(n).length)return!1;for(const i in s)if(s[i]!==n[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(s){this._on(Gs.close,{},s)}_onError(s){this._on(Gs.error,{},n=>s(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(s=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=zt.joining,this.joinPush.resend(s))}_getPayloadRecords(s){const n={new:{},old:{}};return(s.type==="INSERT"||s.type==="UPDATE")&&(n.new=Sy(s.columns,s.record)),(s.type==="UPDATE"||s.type==="DELETE")&&(n.old=Sy(s.columns,s.old_record)),n}}const Ih=()=>{},Tc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},GS=[1e3,2e3,5e3,1e4],YS=1e4,XS=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class KS{constructor(s,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=wm,this.transport=null,this.heartbeatIntervalMs=Tc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ih,this.ref=0,this.reconnectTimer=null,this.logger=Ih,this.conn=null,this.sendBuffer=[],this.serializer=new $S,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=l=>{let c;return l?c=l:typeof fetch>"u"?c=(...u)=>Jn(async()=>{const{default:h}=await Promise.resolve().then(()=>Ci);return{default:h}},void 0).then(({default:h})=>h(...u)).catch(h=>{throw new Error(`Failed to load @supabase/node-fetch: ${h.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):c=fetch,(...u)=>c(...u)},!(!((i=n==null?void 0:n.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${s}/${_m.websocket}`,this.httpEndpoint=Qv(s),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=OS.createWebSocket(this.endpointURL())}catch(s){this._setConnectionState("disconnected");const n=s.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:zS}))}disconnect(s,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},s?this.conn.close(s,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(s){const n=await s.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const s=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),s}log(s,n,i){this.logger(s,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case zo.connecting:return Gn.Connecting;case zo.open:return Gn.Open;case zo.closing:return Gn.Closing;default:return Gn.Closed}}isConnected(){return this.connectionState()===Gn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(s,n={config:{}}){const i=`realtime:${s}`,l=this.getChannels().find(c=>c.topic===i);if(l)return l;{const c=new yf(`realtime:${s}`,n,this);return this.channels.push(c),c}}push(s){const{topic:n,event:i,payload:l,ref:c}=s,u=()=>{this.encode(s,h=>{var f;(f=this.conn)===null||f===void 0||f.send(h)})};this.log("push",`${n} ${i} (${c})`,l),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(s=null){this._authPromise=this._performAuth(s);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var s;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(s=this.conn)===null||s===void 0||s.close(LS,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Tc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(s){this.heartbeatCallback=s}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(s=>s()),this.sendBuffer=[])}_makeRef(){let s=this.ref+1;return s===this.ref?this.ref=0:this.ref=s,this.ref.toString()}_leaveOpenTopic(s){let n=this.channels.find(i=>i.topic===s&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${s}"`),n.unsubscribe())}_remove(s){this.channels=this.channels.filter(n=>n.topic!==s.topic)}_onConnMessage(s){this.decode(s.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:l,payload:c,ref:u}=n,h=u?`(${u})`:"",f=c.status||"";this.log("receive",`${f} ${i} ${l} ${h}`.trim(),c),this.channels.filter(p=>p._isMember(i)).forEach(p=>p._trigger(l,c,u)),this._triggerStateCallbacks("message",n)})}_clearTimer(s){var n;s==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):s==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=s=>this._onConnError(s),this.conn.onmessage=s=>this._onConnMessage(s),this.conn.onclose=s=>this._onConnClose(s))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(s=>s.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const s=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(s),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(s){var n;this._setConnectionState("disconnected"),this.log("transport","close",s),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",s)}_onConnError(s){this._setConnectionState("disconnected"),this.log("transport",`${s}`),this._triggerChanError(),this._triggerStateCallbacks("error",s)}_triggerChanError(){this.channels.forEach(s=>s._trigger(Gs.error))}_appendParams(s,n){if(Object.keys(n).length===0)return s;const i=s.match(/\?/)?"&":"?",l=new URLSearchParams(n);return`${s}${i}${l}`}_workerObjectUrl(s){let n;if(s)n=s;else{const i=new Blob([XS],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(s,n=!1){this._connectionState=s,s==="connecting"?this._wasManualDisconnect=!1:s==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(s=null){let n;s?n=s:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const l={access_token:n,version:PS};n&&i.updateJoinPayload(l),i.joinedOnce&&i._isJoined()&&i._push(Gs.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(s="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${s}`,n)})}_triggerStateCallbacks(s,n){try{this.stateChangeCallbacks[s].forEach(i=>{try{i(n)}catch(l){this.log("error",`error in ${s} callback`,l)}})}catch(i){this.log("error",`error triggering ${s} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new Kv(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Tc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(s){var n,i,l,c,u,h,f,p,g;if(this.transport=(n=s==null?void 0:s.transport)!==null&&n!==void 0?n:null,this.timeout=(i=s==null?void 0:s.timeout)!==null&&i!==void 0?i:wm,this.heartbeatIntervalMs=(l=s==null?void 0:s.heartbeatIntervalMs)!==null&&l!==void 0?l:Tc.HEARTBEAT_INTERVAL,this.worker=(c=s==null?void 0:s.worker)!==null&&c!==void 0?c:!1,this.accessToken=(u=s==null?void 0:s.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(h=s==null?void 0:s.heartbeatCallback)!==null&&h!==void 0?h:Ih,s!=null&&s.params&&(this.params=s.params),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=s==null?void 0:s.reconnectAfterMs)!==null&&f!==void 0?f:y=>GS[y-1]||YS,this.encode=(p=s==null?void 0:s.encode)!==null&&p!==void 0?p:(y,v)=>v(JSON.stringify(y)),this.decode=(g=s==null?void 0:s.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=s==null?void 0:s.workerUrl}}}class bf extends Error{constructor(s){super(s),this.__isStorageError=!0,this.name="StorageError"}}function Bt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class WS extends bf{constructor(s,n,i){super(s),this.name="StorageApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Sm extends bf{constructor(s,n){super(s),this.name="StorageUnknownError",this.originalError=n}}var QS=function(t,s,n,i){function l(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(g){try{p(i.next(g))}catch(y){u(y)}}function f(g){try{p(i.throw(g))}catch(y){u(y)}}function p(g){g.done?c(g.value):l(g.value).then(h,f)}p((i=i.apply(t,s||[])).next())})};const Zv=t=>{let s;return t?s=t:typeof fetch>"u"?s=(...n)=>Jn(async()=>{const{default:i}=await Promise.resolve().then(()=>Ci);return{default:i}},void 0).then(({default:i})=>i(...n)):s=fetch,(...n)=>s(...n)},ZS=()=>QS(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Jn(()=>Promise.resolve().then(()=>Ci),void 0)).Response:Response}),Cm=t=>{if(Array.isArray(t))return t.map(n=>Cm(n));if(typeof t=="function"||t!==Object(t))return t;const s={};return Object.entries(t).forEach(([n,i])=>{const l=n.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));s[l]=Cm(i)}),s},JS=t=>{if(typeof t!="object"||t===null)return!1;const s=Object.getPrototypeOf(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var ar=function(t,s,n,i){function l(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(g){try{p(i.next(g))}catch(y){u(y)}}function f(g){try{p(i.throw(g))}catch(y){u(y)}}function p(g){g.done?c(g.value):l(g.value).then(h,f)}p((i=i.apply(t,s||[])).next())})};const Hh=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),eC=(t,s,n)=>ar(void 0,void 0,void 0,function*(){const i=yield ZS();t instanceof i&&!(n!=null&&n.noResolveJson)?t.json().then(l=>{const c=t.status||500,u=(l==null?void 0:l.statusCode)||c+"";s(new WS(Hh(l),c,u))}).catch(l=>{s(new Sm(Hh(l),l))}):s(new Sm(Hh(t),t))}),tC=(t,s,n,i)=>{const l={method:t,headers:(s==null?void 0:s.headers)||{}};return t==="GET"||!i?l:(JS(i)?(l.headers=Object.assign({"Content-Type":"application/json"},s==null?void 0:s.headers),l.body=JSON.stringify(i)):l.body=i,s!=null&&s.duplex&&(l.duplex=s.duplex),Object.assign(Object.assign({},l),n))};function nl(t,s,n,i,l,c){return ar(this,void 0,void 0,function*(){return new Promise((u,h)=>{t(n,tC(s,i,l,c)).then(f=>{if(!f.ok)throw f;return i!=null&&i.noResolveJson?f:f.json()}).then(f=>u(f)).catch(f=>eC(f,h,i))})})}function Hc(t,s,n,i){return ar(this,void 0,void 0,function*(){return nl(t,"GET",s,n,i)})}function ra(t,s,n,i,l){return ar(this,void 0,void 0,function*(){return nl(t,"POST",s,i,l,n)})}function Tm(t,s,n,i,l){return ar(this,void 0,void 0,function*(){return nl(t,"PUT",s,i,l,n)})}function sC(t,s,n,i){return ar(this,void 0,void 0,function*(){return nl(t,"HEAD",s,Object.assign(Object.assign({},n),{noResolveJson:!0}),i)})}function Jv(t,s,n,i,l){return ar(this,void 0,void 0,function*(){return nl(t,"DELETE",s,i,l,n)})}var is=function(t,s,n,i){function l(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(g){try{p(i.next(g))}catch(y){u(y)}}function f(g){try{p(i.throw(g))}catch(y){u(y)}}function p(g){g.done?c(g.value):l(g.value).then(h,f)}p((i=i.apply(t,s||[])).next())})};const aC={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ey={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class nC{constructor(s,n={},i,l){this.url=s,this.headers=n,this.bucketId=i,this.fetch=Zv(l)}uploadOrUpdate(s,n,i,l){return is(this,void 0,void 0,function*(){try{let c;const u=Object.assign(Object.assign({},Ey),l);let h=Object.assign(Object.assign({},this.headers),s==="POST"&&{"x-upsert":String(u.upsert)});const f=u.metadata;typeof Blob<"u"&&i instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),f&&c.append("metadata",this.encodeMetadata(f)),c.append("",i)):typeof FormData<"u"&&i instanceof FormData?(c=i,c.append("cacheControl",u.cacheControl),f&&c.append("metadata",this.encodeMetadata(f))):(c=i,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType,f&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(f)))),l!=null&&l.headers&&(h=Object.assign(Object.assign({},h),l.headers));const p=this._removeEmptyFolders(n),g=this._getFinalPath(p),y=yield(s=="PUT"?Tm:ra)(this.fetch,`${this.url}/object/${g}`,c,Object.assign({headers:h},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{data:{path:p,id:y.Id,fullPath:y.Key},error:null}}catch(c){if(Bt(c))return{data:null,error:c};throw c}})}upload(s,n,i){return is(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",s,n,i)})}uploadToSignedUrl(s,n,i,l){return is(this,void 0,void 0,function*(){const c=this._removeEmptyFolders(s),u=this._getFinalPath(c),h=new URL(this.url+`/object/upload/sign/${u}`);h.searchParams.set("token",n);try{let f;const p=Object.assign({upsert:Ey.upsert},l),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&i instanceof Blob?(f=new FormData,f.append("cacheControl",p.cacheControl),f.append("",i)):typeof FormData<"u"&&i instanceof FormData?(f=i,f.append("cacheControl",p.cacheControl)):(f=i,g["cache-control"]=`max-age=${p.cacheControl}`,g["content-type"]=p.contentType);const y=yield Tm(this.fetch,h.toString(),f,{headers:g});return{data:{path:c,fullPath:y.Key},error:null}}catch(f){if(Bt(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(s,n){return is(this,void 0,void 0,function*(){try{let i=this._getFinalPath(s);const l=Object.assign({},this.headers);n!=null&&n.upsert&&(l["x-upsert"]="true");const c=yield ra(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:l}),u=new URL(this.url+c.url),h=u.searchParams.get("token");if(!h)throw new bf("No token returned by API");return{data:{signedUrl:u.toString(),path:s,token:h},error:null}}catch(i){if(Bt(i))return{data:null,error:i};throw i}})}update(s,n,i){return is(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",s,n,i)})}move(s,n,i){return is(this,void 0,void 0,function*(){try{return{data:yield ra(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:s,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(l){if(Bt(l))return{data:null,error:l};throw l}})}copy(s,n,i){return is(this,void 0,void 0,function*(){try{return{data:{path:(yield ra(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:s,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if(Bt(l))return{data:null,error:l};throw l}})}createSignedUrl(s,n,i){return is(this,void 0,void 0,function*(){try{let l=this._getFinalPath(s),c=yield ra(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:n},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const u=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return c={signedUrl:encodeURI(`${this.url}${c.signedURL}${u}`)},{data:c,error:null}}catch(l){if(Bt(l))return{data:null,error:l};throw l}})}createSignedUrls(s,n,i){return is(this,void 0,void 0,function*(){try{const l=yield ra(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:s},{headers:this.headers}),c=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:l.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${c}`):null})),error:null}}catch(l){if(Bt(l))return{data:null,error:l};throw l}})}download(s,n){return is(this,void 0,void 0,function*(){const l=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),u=c?`?${c}`:"";try{const h=this._getFinalPath(s);return{data:yield(yield Hc(this.fetch,`${this.url}/${l}/${h}${u}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(h){if(Bt(h))return{data:null,error:h};throw h}})}info(s){return is(this,void 0,void 0,function*(){const n=this._getFinalPath(s);try{const i=yield Hc(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Cm(i),error:null}}catch(i){if(Bt(i))return{data:null,error:i};throw i}})}exists(s){return is(this,void 0,void 0,function*(){const n=this._getFinalPath(s);try{return yield sC(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(Bt(i)&&i instanceof Sm){const l=i.originalError;if([400,404].includes(l==null?void 0:l.status))return{data:!1,error:i}}throw i}})}getPublicUrl(s,n){const i=this._getFinalPath(s),l=[],c=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";c!==""&&l.push(c);const h=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",f=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});f!==""&&l.push(f);let p=l.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${i}${p}`)}}}remove(s){return is(this,void 0,void 0,function*(){try{return{data:yield Jv(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:s},{headers:this.headers}),error:null}}catch(n){if(Bt(n))return{data:null,error:n};throw n}})}list(s,n,i){return is(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},aC),n),{prefix:s||""});return{data:yield ra(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},i),error:null}}catch(l){if(Bt(l))return{data:null,error:l};throw l}})}listV2(s,n){return is(this,void 0,void 0,function*(){try{const i=Object.assign({},s);return{data:yield ra(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(Bt(i))return{data:null,error:i};throw i}})}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const n=[];return s.width&&n.push(`width=${s.width}`),s.height&&n.push(`height=${s.height}`),s.resize&&n.push(`resize=${s.resize}`),s.format&&n.push(`format=${s.format}`),s.quality&&n.push(`quality=${s.quality}`),n.join("&")}}const rC="2.11.0",iC={"X-Client-Info":`storage-js/${rC}`};var Zr=function(t,s,n,i){function l(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(g){try{p(i.next(g))}catch(y){u(y)}}function f(g){try{p(i.throw(g))}catch(y){u(y)}}function p(g){g.done?c(g.value):l(g.value).then(h,f)}p((i=i.apply(t,s||[])).next())})};class oC{constructor(s,n={},i,l){const c=new URL(s);l!=null&&l.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href,this.headers=Object.assign(Object.assign({},iC),n),this.fetch=Zv(i)}listBuckets(){return Zr(this,void 0,void 0,function*(){try{return{data:yield Hc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(s){if(Bt(s))return{data:null,error:s};throw s}})}getBucket(s){return Zr(this,void 0,void 0,function*(){try{return{data:yield Hc(this.fetch,`${this.url}/bucket/${s}`,{headers:this.headers}),error:null}}catch(n){if(Bt(n))return{data:null,error:n};throw n}})}createBucket(s,n={public:!1}){return Zr(this,void 0,void 0,function*(){try{return{data:yield ra(this.fetch,`${this.url}/bucket`,{id:s,name:s,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Bt(i))return{data:null,error:i};throw i}})}updateBucket(s,n){return Zr(this,void 0,void 0,function*(){try{return{data:yield Tm(this.fetch,`${this.url}/bucket/${s}`,{id:s,name:s,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Bt(i))return{data:null,error:i};throw i}})}emptyBucket(s){return Zr(this,void 0,void 0,function*(){try{return{data:yield ra(this.fetch,`${this.url}/bucket/${s}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Bt(n))return{data:null,error:n};throw n}})}deleteBucket(s){return Zr(this,void 0,void 0,function*(){try{return{data:yield Jv(this.fetch,`${this.url}/bucket/${s}`,{},{headers:this.headers}),error:null}}catch(n){if(Bt(n))return{data:null,error:n};throw n}})}}class lC extends oC{constructor(s,n={},i,l){super(s,n,i,l)}from(s){return new nC(this.url,this.headers,s,this.fetch)}}const cC="2.56.1";let Ro="";typeof Deno<"u"?Ro="deno":typeof document<"u"?Ro="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ro="react-native":Ro="node";const dC={"X-Client-Info":`supabase-js-${Ro}/${cC}`},uC={headers:dC},hC={schema:"public"},mC={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},fC={};var pC=function(t,s,n,i){function l(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(g){try{p(i.next(g))}catch(y){u(y)}}function f(g){try{p(i.throw(g))}catch(y){u(y)}}function p(g){g.done?c(g.value):l(g.value).then(h,f)}p((i=i.apply(t,s||[])).next())})};const gC=t=>{let s;return t?s=t:typeof fetch>"u"?s=Fv:s=fetch,(...n)=>s(...n)},xC=()=>typeof Headers>"u"?Iv:Headers,yC=(t,s,n)=>{const i=gC(n),l=xC();return(c,u)=>pC(void 0,void 0,void 0,function*(){var h;const f=(h=yield s())!==null&&h!==void 0?h:t;let p=new l(u==null?void 0:u.headers);return p.has("apikey")||p.set("apikey",t),p.has("Authorization")||p.set("Authorization",`Bearer ${f}`),i(c,Object.assign(Object.assign({},u),{headers:p}))})};var bC=function(t,s,n,i){function l(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(g){try{p(i.next(g))}catch(y){u(y)}}function f(g){try{p(i.throw(g))}catch(y){u(y)}}function p(g){g.done?c(g.value):l(g.value).then(h,f)}p((i=i.apply(t,s||[])).next())})};function vC(t){return t.endsWith("/")?t:t+"/"}function jC(t,s){var n,i;const{db:l,auth:c,realtime:u,global:h}=t,{db:f,auth:p,realtime:g,global:y}=s,v={db:Object.assign(Object.assign({},f),l),auth:Object.assign(Object.assign({},p),c),realtime:Object.assign(Object.assign({},g),u),storage:{},global:Object.assign(Object.assign(Object.assign({},y),h),{headers:Object.assign(Object.assign({},(n=y==null?void 0:y.headers)!==null&&n!==void 0?n:{}),(i=h==null?void 0:h.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>bC(this,void 0,void 0,function*(){return""})};return t.accessToken?v.accessToken=t.accessToken:delete v.accessToken,v}const ej="2.71.1",ci=30*1e3,Em=3,Gh=Em*ci,wC="http://localhost:9999",_C="supabase.auth.token",NC={"X-Client-Info":`gotrue-js/${ej}`},Am="X-Supabase-Api-Version",tj={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},SC=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,CC=10*60*1e3;class vf extends Error{constructor(s,n,i){super(s),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function Ve(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class TC extends vf{constructor(s,n,i){super(s,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function EC(t){return Ve(t)&&t.name==="AuthApiError"}class sj extends vf{constructor(s,n){super(s),this.name="AuthUnknownError",this.originalError=n}}class bn extends vf{constructor(s,n,i,l){super(s,i,l),this.name=n,this.status=i}}class hn extends bn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function AC(t){return Ve(t)&&t.name==="AuthSessionMissingError"}class Ec extends bn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ac extends bn{constructor(s){super(s,"AuthInvalidCredentialsError",400,void 0)}}class kc extends bn{constructor(s,n=null){super(s,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function kC(t){return Ve(t)&&t.name==="AuthImplicitGrantRedirectError"}class Ay extends bn{constructor(s,n=null){super(s,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class km extends bn{constructor(s,n){super(s,"AuthRetryableFetchError",n,void 0)}}function Yh(t){return Ve(t)&&t.name==="AuthRetryableFetchError"}class ky extends bn{constructor(s,n,i){super(s,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class Mm extends bn{constructor(s){super(s,"AuthInvalidJwtError",400,"invalid_jwt")}}const Gc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),My=` 	
\r=`.split(""),MC=(()=>{const t=new Array(128);for(let s=0;s<t.length;s+=1)t[s]=-1;for(let s=0;s<My.length;s+=1)t[My[s].charCodeAt(0)]=-2;for(let s=0;s<Gc.length;s+=1)t[Gc[s].charCodeAt(0)]=s;return t})();function Dy(t,s,n){if(t!==null)for(s.queue=s.queue<<8|t,s.queuedBits+=8;s.queuedBits>=6;){const i=s.queue>>s.queuedBits-6&63;n(Gc[i]),s.queuedBits-=6}else if(s.queuedBits>0)for(s.queue=s.queue<<6-s.queuedBits,s.queuedBits=6;s.queuedBits>=6;){const i=s.queue>>s.queuedBits-6&63;n(Gc[i]),s.queuedBits-=6}}function aj(t,s,n){const i=MC[t];if(i>-1)for(s.queue=s.queue<<6|i,s.queuedBits+=6;s.queuedBits>=8;)n(s.queue>>s.queuedBits-8&255),s.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Oy(t){const s=[],n=u=>{s.push(String.fromCodePoint(u))},i={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},c=u=>{RC(u,i,n)};for(let u=0;u<t.length;u+=1)aj(t.charCodeAt(u),l,c);return s.join("")}function DC(t,s){if(t<=127){s(t);return}else if(t<=2047){s(192|t>>6),s(128|t&63);return}else if(t<=65535){s(224|t>>12),s(128|t>>6&63),s(128|t&63);return}else if(t<=1114111){s(240|t>>18),s(128|t>>12&63),s(128|t>>6&63),s(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function OC(t,s){for(let n=0;n<t.length;n+=1){let i=t.charCodeAt(n);if(i>55295&&i<=56319){const l=(i-55296)*1024&65535;i=(t.charCodeAt(n+1)-56320&65535|l)+65536,n+=1}DC(i,s)}}function RC(t,s,n){if(s.utf8seq===0){if(t<=127){n(t);return}for(let i=1;i<6;i+=1)if((t>>7-i&1)===0){s.utf8seq=i;break}if(s.utf8seq===2)s.codepoint=t&31;else if(s.utf8seq===3)s.codepoint=t&15;else if(s.utf8seq===4)s.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");s.utf8seq-=1}else if(s.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");s.codepoint=s.codepoint<<6|t&63,s.utf8seq-=1,s.utf8seq===0&&n(s.codepoint)}}function PC(t){const s=[],n={queue:0,queuedBits:0},i=l=>{s.push(l)};for(let l=0;l<t.length;l+=1)aj(t.charCodeAt(l),n,i);return new Uint8Array(s)}function zC(t){const s=[];return OC(t,n=>s.push(n)),new Uint8Array(s)}function LC(t){const s=[],n={queue:0,queuedBits:0},i=l=>{s.push(l)};return t.forEach(l=>Dy(l,n,i)),Dy(null,n,i),s.join("")}function BC(t){return Math.round(Date.now()/1e3)+t}function $C(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const s=Math.random()*16|0;return(t=="x"?s:s&3|8).toString(16)})}const Is=()=>typeof window<"u"&&typeof document<"u",Vn={tested:!1,writable:!1},nj=()=>{if(!Is())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Vn.tested)return Vn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Vn.tested=!0,Vn.writable=!0}catch{Vn.tested=!0,Vn.writable=!1}return Vn.writable};function VC(t){const s={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((l,c)=>{s[c]=l})}catch{}return n.searchParams.forEach((i,l)=>{s[l]=i}),s}const rj=t=>{let s;return t?s=t:typeof fetch>"u"?s=(...n)=>Jn(async()=>{const{default:i}=await Promise.resolve().then(()=>Ci);return{default:i}},void 0).then(({default:i})=>i(...n)):s=fetch,(...n)=>s(...n)},UC=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",di=async(t,s,n)=>{await t.setItem(s,JSON.stringify(n))},Un=async(t,s)=>{const n=await t.getItem(s);if(!n)return null;try{return JSON.parse(n)}catch{return n}},cn=async(t,s)=>{await t.removeItem(s)};class md{constructor(){this.promise=new md.promiseConstructor((s,n)=>{this.resolve=s,this.reject=n})}}md.promiseConstructor=Promise;function Xh(t){const s=t.split(".");if(s.length!==3)throw new Mm("Invalid JWT structure");for(let i=0;i<s.length;i++)if(!SC.test(s[i]))throw new Mm("JWT not in base64url format");return{header:JSON.parse(Oy(s[0])),payload:JSON.parse(Oy(s[1])),signature:PC(s[2]),raw:{header:s[0],payload:s[1]}}}async function qC(t){return await new Promise(s=>{setTimeout(()=>s(null),t)})}function FC(t,s){return new Promise((i,l)=>{(async()=>{for(let c=0;c<1/0;c++)try{const u=await t(c);if(!s(c,null,u)){i(u);return}}catch(u){if(!s(c,u)){l(u);return}}})()})}function IC(t){return("0"+t.toString(16)).substr(-2)}function HC(){const s=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let l="";for(let c=0;c<56;c++)l+=n.charAt(Math.floor(Math.random()*i));return l}return crypto.getRandomValues(s),Array.from(s,IC).join("")}async function GC(t){const n=new TextEncoder().encode(t),i=await crypto.subtle.digest("SHA-256",n),l=new Uint8Array(i);return Array.from(l).map(c=>String.fromCharCode(c)).join("")}async function YC(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await GC(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Jr(t,s,n=!1){const i=HC();let l=i;n&&(l+="/PASSWORD_RECOVERY"),await di(t,`${s}-code-verifier`,l);const c=await YC(i);return[c,i===c?"plain":"s256"]}const XC=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function KC(t){const s=t.headers.get(Am);if(!s||!s.match(XC))return null;try{return new Date(`${s}T00:00:00.0Z`)}catch{return null}}function WC(t){if(!t)throw new Error("Missing exp claim");const s=Math.floor(Date.now()/1e3);if(t<=s)throw new Error("JWT has expired")}function QC(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ZC=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ei(t){if(!ZC.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Kh(){const t={};return new Proxy(t,{get:(s,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(s,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(s,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ry(t){return JSON.parse(JSON.stringify(t))}var JC=function(t,s){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&s.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(t);l<i.length;l++)s.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(t,i[l])&&(n[i[l]]=t[i[l]]);return n};const Fn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),eT=[502,503,504];async function Py(t){var s;if(!UC(t))throw new km(Fn(t),0);if(eT.includes(t.status))throw new km(Fn(t),t.status);let n;try{n=await t.json()}catch(c){throw new sj(Fn(c),c)}let i;const l=KC(t);if(l&&l.getTime()>=tj["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new ky(Fn(n),t.status,((s=n.weak_password)===null||s===void 0?void 0:s.reasons)||[]);if(i==="session_not_found")throw new hn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((c,u)=>c&&typeof u=="string",!0))throw new ky(Fn(n),t.status,n.weak_password.reasons);throw new TC(Fn(n),t.status||500,i)}const tT=(t,s,n,i)=>{const l={method:t,headers:(s==null?void 0:s.headers)||{}};return t==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},s==null?void 0:s.headers),l.body=JSON.stringify(i),Object.assign(Object.assign({},l),n))};async function Xe(t,s,n,i){var l;const c=Object.assign({},i==null?void 0:i.headers);c[Am]||(c[Am]=tj["2024-01-01"].name),i!=null&&i.jwt&&(c.Authorization=`Bearer ${i.jwt}`);const u=(l=i==null?void 0:i.query)!==null&&l!==void 0?l:{};i!=null&&i.redirectTo&&(u.redirect_to=i.redirectTo);const h=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",f=await sT(t,s,n+h,{headers:c,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(f):{data:Object.assign({},f),error:null}}async function sT(t,s,n,i,l,c){const u=tT(s,i,l,c);let h;try{h=await t(n,Object.assign({},u))}catch(f){throw console.error(f),new km(Fn(f),0)}if(h.ok||await Py(h),i!=null&&i.noResolveJson)return h;try{return await h.json()}catch(f){await Py(f)}}function ka(t){var s;let n=null;iT(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=BC(t.expires_in)));const i=(s=t.user)!==null&&s!==void 0?s:t;return{data:{session:n,user:i},error:null}}function zy(t){const s=ka(t);return!s.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(s.data.weak_password=t.weak_password),s}function pn(t){var s;return{data:{user:(s=t.user)!==null&&s!==void 0?s:t},error:null}}function aT(t){return{data:t,error:null}}function nT(t){const{action_link:s,email_otp:n,hashed_token:i,redirect_to:l,verification_type:c}=t,u=JC(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:s,email_otp:n,hashed_token:i,redirect_to:l,verification_type:c},f=Object.assign({},u);return{data:{properties:h,user:f},error:null}}function rT(t){return t}function iT(t){return t.access_token&&t.refresh_token&&t.expires_in}const Wh=["global","local","others"];var oT=function(t,s){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&s.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(t);l<i.length;l++)s.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(t,i[l])&&(n[i[l]]=t[i[l]]);return n};class lT{constructor({url:s="",headers:n={},fetch:i}){this.url=s,this.headers=n,this.fetch=rj(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(s,n=Wh[0]){if(Wh.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Wh.join(", ")}`);try{return await Xe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:s,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Ve(i))return{data:null,error:i};throw i}}async inviteUserByEmail(s,n={}){try{return await Xe(this.fetch,"POST",`${this.url}/invite`,{body:{email:s,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:pn})}catch(i){if(Ve(i))return{data:{user:null},error:i};throw i}}async generateLink(s){try{const{options:n}=s,i=oT(s,["options"]),l=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(l.new_email=i==null?void 0:i.newEmail,delete l.newEmail),await Xe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:nT,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ve(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(s){try{return await Xe(this.fetch,"POST",`${this.url}/admin/users`,{body:s,headers:this.headers,xform:pn})}catch(n){if(Ve(n))return{data:{user:null},error:n};throw n}}async listUsers(s){var n,i,l,c,u,h,f;try{const p={nextPage:null,lastPage:0,total:0},g=await Xe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=s==null?void 0:s.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(c=(l=s==null?void 0:s.perPage)===null||l===void 0?void 0:l.toString())!==null&&c!==void 0?c:""},xform:rT});if(g.error)throw g.error;const y=await g.json(),v=(u=g.headers.get("x-total-count"))!==null&&u!==void 0?u:0,j=(f=(h=g.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&f!==void 0?f:[];return j.length>0&&(j.forEach(N=>{const _=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(N.split(";")[1].split("=")[1]);p[`${C}Page`]=_}),p.total=parseInt(v)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(Ve(p))return{data:{users:[]},error:p};throw p}}async getUserById(s){ei(s);try{return await Xe(this.fetch,"GET",`${this.url}/admin/users/${s}`,{headers:this.headers,xform:pn})}catch(n){if(Ve(n))return{data:{user:null},error:n};throw n}}async updateUserById(s,n){ei(s);try{return await Xe(this.fetch,"PUT",`${this.url}/admin/users/${s}`,{body:n,headers:this.headers,xform:pn})}catch(i){if(Ve(i))return{data:{user:null},error:i};throw i}}async deleteUser(s,n=!1){ei(s);try{return await Xe(this.fetch,"DELETE",`${this.url}/admin/users/${s}`,{headers:this.headers,body:{should_soft_delete:n},xform:pn})}catch(i){if(Ve(i))return{data:{user:null},error:i};throw i}}async _listFactors(s){ei(s.userId);try{const{data:n,error:i}=await Xe(this.fetch,"GET",`${this.url}/admin/users/${s.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:n,error:i}}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _deleteFactor(s){ei(s.userId),ei(s.id);try{return{data:await Xe(this.fetch,"DELETE",`${this.url}/admin/users/${s.userId}/factors/${s.id}`,{headers:this.headers}),error:null}}catch(n){if(Ve(n))return{data:null,error:n};throw n}}}function Ly(t={}){return{getItem:s=>t[s]||null,setItem:(s,n)=>{t[s]=n},removeItem:s=>{delete t[s]}}}function cT(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ti={debug:!!(globalThis&&nj()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ij extends Error{constructor(s){super(s),this.isAcquireTimeout=!0}}class dT extends ij{}async function uT(t,s,n){ti.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,s);const i=new globalThis.AbortController;return s>0&&setTimeout(()=>{i.abort(),ti.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},s),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,s===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async l=>{if(l){ti.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,l.name);try{return await n()}finally{ti.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,l.name)}}else{if(s===0)throw ti.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new dT(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ti.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}cT();const hT={url:wC,storageKey:_C,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:NC,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function By(t,s,n){return await n()}const si={};class Yo{constructor(s){var n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Yo.nextInstanceID,Yo.nextInstanceID+=1,this.instanceID>0&&Is()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const l=Object.assign(Object.assign({},hT),s);if(this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.persistSession=l.persistSession,this.storageKey=l.storageKey,this.autoRefreshToken=l.autoRefreshToken,this.admin=new lT({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=rj(l.fetch),this.lock=l.lock||By,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,l.lock?this.lock=l.lock:Is()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=uT:this.lock=By,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:nj()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ly(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=Ly(this.memoryStorage)),Is()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}get jwks(){var s,n;return(n=(s=si[this.storageKey])===null||s===void 0?void 0:s.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(s){si[this.storageKey]=Object.assign(Object.assign({},si[this.storageKey]),{jwks:s})}get jwks_cached_at(){var s,n;return(n=(s=si[this.storageKey])===null||s===void 0?void 0:s.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(s){si[this.storageKey]=Object.assign(Object.assign({},si[this.storageKey]),{cachedAt:s})}_debug(...s){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ej}) ${new Date().toISOString()}`,...s),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var s;try{const n=VC(window.location.href);let i="none";if(this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce"),Is()&&this.detectSessionInUrl&&i!=="none"){const{data:l,error:c}=await this._getSessionFromURL(n,i);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),kC(c)){const f=(s=c.details)===null||s===void 0?void 0:s.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:u,redirectType:h}=l;return this._debug("#_initialize()","detected session in URL",u,"redirect type",h),await this._saveSession(u),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ve(n)?{error:n}:{error:new sj("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(s){var n,i,l;try{const c=await Xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=s==null?void 0:s.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(l=s==null?void 0:s.options)===null||l===void 0?void 0:l.captchaToken}},xform:ka}),{data:u,error:h}=c;if(h||!u)return{data:{user:null,session:null},error:h};const f=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(c){if(Ve(c))return{data:{user:null,session:null},error:c};throw c}}async signUp(s){var n,i,l;try{let c;if("email"in s){const{email:g,password:y,options:v}=s;let j=null,N=null;this.flowType==="pkce"&&([j,N]=await Jr(this.storage,this.storageKey)),c=await Xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:g,password:y,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:j,code_challenge_method:N},xform:ka})}else if("phone"in s){const{phone:g,password:y,options:v}=s;c=await Xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:y,data:(i=v==null?void 0:v.data)!==null&&i!==void 0?i:{},channel:(l=v==null?void 0:v.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:ka})}else throw new Ac("You must provide either an email or phone number and a password");const{data:u,error:h}=c;if(h||!u)return{data:{user:null,session:null},error:h};const f=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(c){if(Ve(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithPassword(s){try{let n;if("email"in s){const{email:c,password:u,options:h}=s;n=await Xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:zy})}else if("phone"in s){const{phone:c,password:u,options:h}=s;n=await Xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:zy})}else throw new Ac("You must provide either an email or phone number and a password");const{data:i,error:l}=n;return l?{data:{user:null,session:null},error:l}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Ec}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:l})}catch(n){if(Ve(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(s){var n,i,l,c;return await this._handleProviderSignIn(s.provider,{redirectTo:(n=s.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=s.options)===null||i===void 0?void 0:i.scopes,queryParams:(l=s.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(c=s.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(s){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(s))}async signInWithWeb3(s){const{chain:n}=s;if(n==="solana")return await this.signInWithSolana(s);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(s){var n,i,l,c,u,h,f,p,g,y,v,j;let N,_;if("message"in s)N=s.message,_=s.signature;else{const{chain:C,wallet:R,statement:S,options:k}=s;let E;if(Is())if(typeof R=="object")E=R;else{const M=window;if("solana"in M&&typeof M.solana=="object"&&("signIn"in M.solana&&typeof M.solana.signIn=="function"||"signMessage"in M.solana&&typeof M.solana.signMessage=="function"))E=M.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=R}const w=new URL((n=k==null?void 0:k.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in E&&E.signIn){const M=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},k==null?void 0:k.signInWithSolana),{version:"1",domain:w.host,uri:w.href}),S?{statement:S}:null));let z;if(Array.isArray(M)&&M[0]&&typeof M[0]=="object")z=M[0];else if(M&&typeof M=="object"&&"signedMessage"in M&&"signature"in M)z=M;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in z&&"signature"in z&&(typeof z.signedMessage=="string"||z.signedMessage instanceof Uint8Array)&&z.signature instanceof Uint8Array)N=typeof z.signedMessage=="string"?z.signedMessage:new TextDecoder().decode(z.signedMessage),_=z.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");N=[`${w.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...S?["",S,""]:[""],"Version: 1",`URI: ${w.href}`,`Issued At: ${(l=(i=k==null?void 0:k.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((c=k==null?void 0:k.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...!((u=k==null?void 0:k.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...!((h=k==null?void 0:k.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...!((f=k==null?void 0:k.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...!((p=k==null?void 0:k.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...!((y=(g=k==null?void 0:k.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||y===void 0)&&y.length?["Resources",...k.signInWithSolana.resources.map(z=>`- ${z}`)]:[]].join(`
`);const M=await E.signMessage(new TextEncoder().encode(N),"utf8");if(!M||!(M instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=M}}try{const{data:C,error:R}=await Xe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:N,signature:LC(_)},!((v=s.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(j=s.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:ka});if(R)throw R;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new Ec}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:R})}catch(C){if(Ve(C))return{data:{user:null,session:null},error:C};throw C}}async _exchangeCodeForSession(s){const n=await Un(this.storage,`${this.storageKey}-code-verifier`),[i,l]=(n??"").split("/");try{const{data:c,error:u}=await Xe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:s,code_verifier:i},xform:ka});if(await cn(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!c||!c.session||!c.user?{data:{user:null,session:null,redirectType:null},error:new Ec}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign(Object.assign({},c),{redirectType:l??null}),error:u})}catch(c){if(Ve(c))return{data:{user:null,session:null,redirectType:null},error:c};throw c}}async signInWithIdToken(s){try{const{options:n,provider:i,token:l,access_token:c,nonce:u}=s,h=await Xe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:l,access_token:c,nonce:u,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ka}),{data:f,error:p}=h;return p?{data:{user:null,session:null},error:p}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new Ec}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:p})}catch(n){if(Ve(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(s){var n,i,l,c,u;try{if("email"in s){const{email:h,options:f}=s;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await Jr(this.storage,this.storageKey));const{error:y}=await Xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},create_user:(i=f==null?void 0:f.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:g},redirectTo:f==null?void 0:f.emailRedirectTo});return{data:{user:null,session:null},error:y}}if("phone"in s){const{phone:h,options:f}=s,{data:p,error:g}=await Xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(l=f==null?void 0:f.data)!==null&&l!==void 0?l:{},create_user:(c=f==null?void 0:f.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},channel:(u=f==null?void 0:f.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:g}}throw new Ac("You must provide either an email or phone number.")}catch(h){if(Ve(h))return{data:{user:null,session:null},error:h};throw h}}async verifyOtp(s){var n,i;try{let l,c;"options"in s&&(l=(n=s.options)===null||n===void 0?void 0:n.redirectTo,c=(i=s.options)===null||i===void 0?void 0:i.captchaToken);const{data:u,error:h}=await Xe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},s),{gotrue_meta_security:{captcha_token:c}}),redirectTo:l,xform:ka});if(h)throw h;if(!u)throw new Error("An error occurred on token verification.");const f=u.session,p=u.user;return f!=null&&f.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(s.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(l){if(Ve(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithSSO(s){var n,i,l;try{let c=null,u=null;return this.flowType==="pkce"&&([c,u]=await Jr(this.storage,this.storageKey)),await Xe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in s?{provider_id:s.providerId}:null),"domain"in s?{domain:s.domain}:null),{redirect_to:(i=(n=s.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((l=s==null?void 0:s.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:s.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:u}),headers:this.headers,xform:aT})}catch(c){if(Ve(c))return{data:null,error:c};throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async s=>{const{data:{session:n},error:i}=s;if(i)throw i;if(!n)throw new hn;const{error:l}=await Xe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:l}})}catch(s){if(Ve(s))return{data:{user:null,session:null},error:s};throw s}}async resend(s){try{const n=`${this.url}/resend`;if("email"in s){const{email:i,type:l,options:c}=s,{error:u}=await Xe(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in s){const{phone:i,type:l,options:c}=s,{data:u,error:h}=await Xe(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h}}throw new Ac("You must provide either an email or phone number and a type")}catch(n){if(Ve(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(s,n){this._debug("#_acquireLock","begin",s);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,s,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(s){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await s(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let s=null;const n=await Un(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?s=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!s)return{data:{session:null},error:null};const i=s.expires_at?s.expires_at*1e3-Date.now()<Gh:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",s.expires_at),!i){if(this.userStorage){const u=await Un(this.userStorage,this.storageKey+"-user");u!=null&&u.user?s.user=u.user:s.user=Kh()}if(this.storage.isServer&&s.user){let u=this.suppressGetSessionWarning;s=new Proxy(s,{get:(f,p,g)=>(!u&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,p,g))})}return{data:{session:s},error:null}}const{session:l,error:c}=await this._callRefreshToken(s.refresh_token);return c?{data:{session:null},error:c}:{data:{session:l},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(s){return s?await this._getUser(s):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(s){try{return s?await Xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:s,xform:pn}):await this._useSession(async n=>{var i,l,c;const{data:u,error:h}=n;if(h)throw h;return!(!((i=u.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new hn}:await Xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(l=u.session)===null||l===void 0?void 0:l.access_token)!==null&&c!==void 0?c:void 0,xform:pn})})}catch(n){if(Ve(n))return AC(n)&&(await this._removeSession(),await cn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(s,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(s,n))}async _updateUser(s,n={}){try{return await this._useSession(async i=>{const{data:l,error:c}=i;if(c)throw c;if(!l.session)throw new hn;const u=l.session;let h=null,f=null;this.flowType==="pkce"&&s.email!=null&&([h,f]=await Jr(this.storage,this.storageKey));const{data:p,error:g}=await Xe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},s),{code_challenge:h,code_challenge_method:f}),jwt:u.access_token,xform:pn});if(g)throw g;return u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(i){if(Ve(i))return{data:{user:null},error:i};throw i}}async setSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(s))}async _setSession(s){try{if(!s.access_token||!s.refresh_token)throw new hn;const n=Date.now()/1e3;let i=n,l=!0,c=null;const{payload:u}=Xh(s.access_token);if(u.exp&&(i=u.exp,l=i<=n),l){const{session:h,error:f}=await this._callRefreshToken(s.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!h)return{data:{user:null,session:null},error:null};c=h}else{const{data:h,error:f}=await this._getUser(s.access_token);if(f)throw f;c={access_token:s.access_token,refresh_token:s.refresh_token,user:h.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return{data:{user:c.user,session:c},error:null}}catch(n){if(Ve(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(s))}async _refreshSession(s){try{return await this._useSession(async n=>{var i;if(!s){const{data:u,error:h}=n;if(h)throw h;s=(i=u.session)!==null&&i!==void 0?i:void 0}if(!(s!=null&&s.refresh_token))throw new hn;const{session:l,error:c}=await this._callRefreshToken(s.refresh_token);return c?{data:{user:null,session:null},error:c}:l?{data:{user:l.user,session:l},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Ve(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(s,n){try{if(!Is())throw new kc("No browser detected.");if(s.error||s.error_description||s.error_code)throw new kc(s.error_description||"Error in URL with unspecified error_description",{error:s.error||"unspecified_error",code:s.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Ay("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new kc("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!s.code)throw new Ay("No code detected.");const{data:S,error:k}=await this._exchangeCodeForSession(s.code);if(k)throw k;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:l,access_token:c,refresh_token:u,expires_in:h,expires_at:f,token_type:p}=s;if(!c||!h||!u||!p)throw new kc("No session defined in URL");const g=Math.round(Date.now()/1e3),y=parseInt(h);let v=g+y;f&&(v=parseInt(f));const j=v-g;j*1e3<=ci&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${j}s, should have been closer to ${y}s`);const N=v-y;g-N>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",N,v,g):g-N<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",N,v,g);const{data:_,error:C}=await this._getUser(c);if(C)throw C;const R={provider_token:i,provider_refresh_token:l,access_token:c,expires_in:y,expires_at:v,refresh_token:u,token_type:p,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:R,redirectType:s.type},error:null}}catch(i){if(Ve(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(s){return!!(s.access_token||s.error_description)}async _isPKCECallback(s){const n=await Un(this.storage,`${this.storageKey}-code-verifier`);return!!(s.code&&n)}async signOut(s={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(s))}async _signOut({scope:s}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:l,error:c}=n;if(c)return{error:c};const u=(i=l.session)===null||i===void 0?void 0:i.access_token;if(u){const{error:h}=await this.admin.signOut(u,s);if(h&&!(EC(h)&&(h.status===404||h.status===401||h.status===403)))return{error:h}}return s!=="others"&&(await this._removeSession(),await cn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(s){const n=$C(),i={id:n,callback:s,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(s){return await this._useSession(async n=>{var i,l;try{const{data:{session:c},error:u}=n;if(u)throw u;await((i=this.stateChangeEmitters.get(s))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",s,"session",c)}catch(c){await((l=this.stateChangeEmitters.get(s))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",s,"error",c),console.error(c)}})}async resetPasswordForEmail(s,n={}){let i=null,l=null;this.flowType==="pkce"&&([i,l]=await Jr(this.storage,this.storageKey,!0));try{return await Xe(this.fetch,"POST",`${this.url}/recover`,{body:{email:s,code_challenge:i,code_challenge_method:l,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(c){if(Ve(c))return{data:null,error:c};throw c}}async getUserIdentities(){var s;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(s=n.user.identities)!==null&&s!==void 0?s:[]},error:null}}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async linkIdentity(s){var n;try{const{data:i,error:l}=await this._useSession(async c=>{var u,h,f,p,g;const{data:y,error:v}=c;if(v)throw v;const j=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,s.provider,{redirectTo:(u=s.options)===null||u===void 0?void 0:u.redirectTo,scopes:(h=s.options)===null||h===void 0?void 0:h.scopes,queryParams:(f=s.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await Xe(this.fetch,"GET",j,{headers:this.headers,jwt:(g=(p=y.session)===null||p===void 0?void 0:p.access_token)!==null&&g!==void 0?g:void 0})});if(l)throw l;return Is()&&!(!((n=s.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),{data:{provider:s.provider,url:i==null?void 0:i.url},error:null}}catch(i){if(Ve(i))return{data:{provider:s.provider,url:null},error:i};throw i}}async unlinkIdentity(s){try{return await this._useSession(async n=>{var i,l;const{data:c,error:u}=n;if(u)throw u;return await Xe(this.fetch,"DELETE",`${this.url}/user/identities/${s.identity_id}`,{headers:this.headers,jwt:(l=(i=c.session)===null||i===void 0?void 0:i.access_token)!==null&&l!==void 0?l:void 0})})}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _refreshAccessToken(s){const n=`#_refreshAccessToken(${s.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await FC(async l=>(l>0&&await qC(200*Math.pow(2,l-1)),this._debug(n,"refreshing attempt",l),await Xe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:s},headers:this.headers,xform:ka})),(l,c)=>{const u=200*Math.pow(2,l);return c&&Yh(c)&&Date.now()+u-i<ci})}catch(i){if(this._debug(n,"error",i),Ve(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(n,"end")}}_isValidSession(s){return typeof s=="object"&&s!==null&&"access_token"in s&&"refresh_token"in s&&"expires_at"in s}async _handleProviderSignIn(s,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,s,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",s,"options",n,"url",i),Is()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:s,url:i},error:null}}async _recoverAndRefresh(){var s,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const l=await Un(this.storage,this.storageKey);if(l&&this.userStorage){let u=await Un(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:l.user},await di(this.userStorage,this.storageKey+"-user",u)),l.user=(s=u==null?void 0:u.user)!==null&&s!==void 0?s:Kh()}else if(l&&!l.user&&!l.user){const u=await Un(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(l.user=u.user,await cn(this.storage,this.storageKey+"-user"),await di(this.storage,this.storageKey,l)):l.user=Kh()}if(this._debug(i,"session from storage",l),!this._isValidSession(l)){this._debug(i,"session is not valid"),l!==null&&await this._removeSession();return}const c=((n=l.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Gh;if(this._debug(i,`session has${c?"":" not"} expired with margin of ${Gh}s`),c){if(this.autoRefreshToken&&l.refresh_token){const{error:u}=await this._callRefreshToken(l.refresh_token);u&&(console.error(u),Yh(u)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:h}=await this._getUser(l.access_token);!h&&(u!=null&&u.user)?(l.user=u.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(i,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(i,"error",l),console.error(l);return}finally{this._debug(i,"end")}}async _callRefreshToken(s){var n,i;if(!s)throw new hn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${s.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new md;const{data:c,error:u}=await this._refreshAccessToken(s);if(u)throw u;if(!c.session)throw new hn;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const h={session:c.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(c){if(this._debug(l,"error",c),Ve(c)){const u={session:null,error:c};return Yh(c)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(c),c}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(s,n,i=!0){const l=`#_notifyAllSubscribers(${s})`;this._debug(l,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:s,session:n});const c=[],u=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(s,n)}catch(f){c.push(f)}});if(await Promise.all(u),c.length>0){for(let h=0;h<c.length;h+=1)console.error(c[h]);throw c[0]}}finally{this._debug(l,"end")}}async _saveSession(s){this._debug("#_saveSession()",s),this.suppressGetSessionWarning=!0;const n=Object.assign({},s),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await di(this.userStorage,this.storageKey+"-user",{user:n.user});const l=Object.assign({},n);delete l.user;const c=Ry(l);await di(this.storage,this.storageKey,c)}else{const l=Ry(n);await di(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),await cn(this.storage,this.storageKey),await cn(this.storage,this.storageKey+"-code-verifier"),await cn(this.storage,this.storageKey+"-user"),this.userStorage&&await cn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const s=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{s&&Is()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",s)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const s=setInterval(()=>this._autoRefreshTokenTick(),ci);this.autoRefreshTicker=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const s=this.autoRefreshTicker;this.autoRefreshTicker=null,s&&clearInterval(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const s=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((i.expires_at*1e3-s)/ci);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${ci}ms, refresh threshold is ${Em} ticks`),l<=Em&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(s){if(s.isAcquireTimeout||s instanceof ij)this._debug("auto refresh token tick lock not available");else throw s}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Is()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(s){console.error("_handleVisibilityChange",s)}}async _onVisibilityChanged(s){const n=`#_onVisibilityChanged(${s})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),s||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(s,n,i){const l=[`provider=${encodeURIComponent(n)}`];if(i!=null&&i.redirectTo&&l.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&l.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[c,u]=await Jr(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(u)}`});l.push(h.toString())}if(i!=null&&i.queryParams){const c=new URLSearchParams(i.queryParams);l.push(c.toString())}return i!=null&&i.skipBrowserRedirect&&l.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${s}?${l.join("&")}`}async _unenroll(s){try{return await this._useSession(async n=>{var i;const{data:l,error:c}=n;return c?{data:null,error:c}:await Xe(this.fetch,"DELETE",`${this.url}/factors/${s.factorId}`,{headers:this.headers,jwt:(i=l==null?void 0:l.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _enroll(s){try{return await this._useSession(async n=>{var i,l;const{data:c,error:u}=n;if(u)return{data:null,error:u};const h=Object.assign({friendly_name:s.friendlyName,factor_type:s.factorType},s.factorType==="phone"?{phone:s.phone}:{issuer:s.issuer}),{data:f,error:p}=await Xe(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(i=c==null?void 0:c.session)===null||i===void 0?void 0:i.access_token});return p?{data:null,error:p}:(s.factorType==="totp"&&(!((l=f==null?void 0:f.totp)===null||l===void 0)&&l.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _verify(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:l,error:c}=n;if(c)return{data:null,error:c};const{data:u,error:h}=await Xe(this.fetch,"POST",`${this.url}/factors/${s.factorId}/verify`,{body:{code:s.code,challenge_id:s.challengeId},headers:this.headers,jwt:(i=l==null?void 0:l.session)===null||i===void 0?void 0:i.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:h})})}catch(n){if(Ve(n))return{data:null,error:n};throw n}})}async _challenge(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:l,error:c}=n;return c?{data:null,error:c}:await Xe(this.fetch,"POST",`${this.url}/factors/${s.factorId}/challenge`,{body:{channel:s.channel},headers:this.headers,jwt:(i=l==null?void 0:l.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(Ve(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(s){const{data:n,error:i}=await this._challenge({factorId:s.factorId});return i?{data:null,error:i}:await this._verify({factorId:s.factorId,challengeId:n.id,code:s.code})}async _listFactors(){const{data:{user:s},error:n}=await this.getUser();if(n)return{data:null,error:n};const i=(s==null?void 0:s.factors)||[],l=i.filter(u=>u.factor_type==="totp"&&u.status==="verified"),c=i.filter(u=>u.factor_type==="phone"&&u.status==="verified");return{data:{all:i,totp:l,phone:c},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async s=>{var n,i;const{data:{session:l},error:c}=s;if(c)return{data:null,error:c};if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=Xh(l.access_token);let h=null;u.aal&&(h=u.aal);let f=h;((i=(n=l.user.factors)===null||n===void 0?void 0:n.filter(y=>y.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(f="aal2");const g=u.amr||[];return{data:{currentLevel:h,nextLevel:f,currentAuthenticationMethods:g},error:null}}))}async fetchJwk(s,n={keys:[]}){let i=n.keys.find(h=>h.kid===s);if(i)return i;const l=Date.now();if(i=this.jwks.keys.find(h=>h.kid===s),i&&this.jwks_cached_at+CC>l)return i;const{data:c,error:u}=await Xe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=l,i=c.keys.find(h=>h.kid===s),!i)?null:i}async getClaims(s,n={}){try{let i=s;if(!i){const{data:j,error:N}=await this.getSession();if(N||!j.session)return{data:null,error:N};i=j.session.access_token}const{header:l,payload:c,signature:u,raw:{header:h,payload:f}}=Xh(i);n!=null&&n.allowExpired||WC(c.exp);const p=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!p){const{error:j}=await this.getUser(i);if(j)throw j;return{data:{claims:c,header:l,signature:u},error:null}}const g=QC(l.alg),y=await crypto.subtle.importKey("jwk",p,g,!0,["verify"]);if(!await crypto.subtle.verify(g,y,u,zC(`${h}.${f}`)))throw new Mm("Invalid JWT signature");return{data:{claims:c,header:l,signature:u},error:null}}catch(i){if(Ve(i))return{data:null,error:i};throw i}}}Yo.nextInstanceID=0;const mT=Yo;class fT extends mT{constructor(s){super(s)}}var pT=function(t,s,n,i){function l(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(g){try{p(i.next(g))}catch(y){u(y)}}function f(g){try{p(i.throw(g))}catch(y){u(y)}}function p(g){g.done?c(g.value):l(g.value).then(h,f)}p((i=i.apply(t,s||[])).next())})};class gT{constructor(s,n,i){var l,c,u;if(this.supabaseUrl=s,this.supabaseKey=n,!s)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const h=vC(s),f=new URL(h);this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const p=`sb-${f.hostname.split(".")[0]}-auth-token`,g={db:hC,realtime:fC,auth:Object.assign(Object.assign({},mC),{storageKey:p}),global:uC},y=jC(i??{},g);this.storageKey=(l=y.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(c=y.global.headers)!==null&&c!==void 0?c:{},y.accessToken?(this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(v,j)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(j)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=y.auth)!==null&&u!==void 0?u:{},this.headers,y.global.fetch),this.fetch=yC(n,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.rest=new DS(new URL("rest/v1",f).href,{headers:this.headers,schema:y.db.schema,fetch:this.fetch}),this.storage=new lC(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),y.accessToken||this._listenForAuthEvents()}get functions(){return new wS(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,n={},i={}){return this.rest.rpc(s,n,i)}channel(s,n={config:{}}){return this.realtime.channel(s,n)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var s,n;return pT(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(n=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:n,detectSessionInUrl:i,storage:l,storageKey:c,flowType:u,lock:h,debug:f},p,g){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new fT({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),p),storageKey:c,autoRefreshToken:s,persistSession:n,detectSessionInUrl:i,storage:l,flowType:u,lock:h,debug:f,fetch:g,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(s){return new KS(this.realtimeUrl.href,Object.assign(Object.assign({},s),{params:Object.assign({apikey:this.supabaseKey},s==null?void 0:s.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,i)=>{this._handleTokenChanged(n,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(s,n,i){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:s==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const xT=(t,s,n)=>new gT(t,s,n);function yT(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const s=t.match(/^v(\d+)\./);return s?parseInt(s[1],10)<=18:!1}yT()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const oj="https://wznycskqsavpmejwpksp.supabase.co",bT="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind6bnljc2txc2F2cG1landwa3NwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY2MzA2NjUsImV4cCI6MjA3MjIwNjY2NX0.uYXbBwQDo1pLeBrmtZnBR2M3a3_TsYDa637pcKSVC_8",Yc=oj.includes(".supabase.co");Yc||(console.warn("⚠️ Supabase credentials not configured. Using mock mode for development."),console.info("📝 To use real Supabase:"),console.info("1. Update .env.local with your Supabase credentials"),console.info("2. Get credentials from: https://supabase.com/dashboard"));const vT="https://mock.supabase.co",jT="mock-anon-key",ae=xT(Yc?oj:vT,Yc?bT:jT),ko=Yc,lj=b.createContext(void 0),as=()=>{const t=b.useContext(lj);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},wT=({children:t})=>{const[s,n]=b.useState(null),[i,l]=b.useState(null),[c,u]=b.useState(!0);b.useEffect(()=>{if(!ko){u(!1);return}ae.auth.getSession().then(({data:{session:y}})=>{l(y),u(!1)}).catch(y=>{console.warn("Erro ao verificar sessão, usando modo mock:",y),u(!1)});const{data:g}=ae.auth.onAuthStateChange((y,v)=>{l(v)});return()=>{g.subscription.unsubscribe()}},[]),b.useEffect(()=>{ko&&(i?(console.log("AuthContext: Sessão encontrada, buscando perfil:",i.user.id),ae.from("profiles").select("*").eq("id",i.user.id).single().then(({data:g,error:y})=>{if(console.log("AuthContext: Resultado da busca de perfil:",{profile:g,error:y}),y||!g)console.error("Perfil não encontrado ou erro na busca, deslogando.",y),ae.auth.signOut();else{const v={id:g.id,name:g.name||i.user.email||"Usuário",email:i.user.email,role:g.role,avatar:g.avatar_url||`https://api.dicebear.com/8.x/initials/svg?seed=${g.name||i.user.email}`};console.log("AuthContext: Usuário da aplicação criado:",v),n(v)}})):n(null))},[i]);const h=async(g,y)=>{if(!ko)return console.info("🔑 Usando autenticação mock para desenvolvimento"),g==="demo@clubmanager.com"&&y==="demo123456"?(n({id:"demo-user-id",name:"Usuário Demonstração",email:"demo@clubmanager.com",role:"admin",avatar:"https://api.dicebear.com/8.x/initials/svg?seed=Demo"}),{success:!0,error:null}):{success:!1,error:"Credenciais inválidas. Use: demo@clubmanager.com / demo123456"};try{const{error:v}=await ae.auth.signInWithPassword({email:g,password:y});return{success:!v,error:(v==null?void 0:v.message)||null}}catch(v){return console.error("Erro de conexão com Supabase:",v),{success:!1,error:"Erro de conexão. Verifique a configuração do Supabase."}}},f=async()=>h("demo@clubmanager.com","demo123456"),p=async()=>{if(!ko){n(null);return}await ae.auth.signOut()};return e.jsxs(lj.Provider,{value:{user:s,login:h,loginAsDemo:f,logout:p,isLoading:c},children:[!ko&&e.jsxs("div",{className:"fixed top-0 left-0 right-0 bg-yellow-500 text-black px-4 py-2 text-sm z-50",children:["⚠️ ",e.jsx("strong",{children:"Modo Desenvolvimento:"})," Supabase não configurado. Use: demo@clubmanager.com / demo123456"]}),c?e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-slate-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"mt-4 text-white font-semibold",children:"Carregando Sessão..."})]})}):t]})},Qh=t=>({id:t.id,name:t.name,categoryId:t.category_id||void 0,currentStock:t.current_stock,minStock:t.min_stock,unit:t.unit,lastUpdated:new Date(t.last_updated||t.created_at),supplier:t.supplier||void 0,cost:t.cost||0,availableForSale:t.available_for_sale||!1,image_url:t.image_url||void 0}),_T=t=>({id:t.id,name:t.name,description:t.description||void 0,color:t.color||"#6B7280",icon:t.icon||void 0,isActive:t.is_active||!0,createdAt:new Date(t.created_at),updatedAt:new Date(t.updated_at||t.created_at)}),Zh=t=>({id:t.id,name:t.name,email:t.email,phone:t.phone||"",avatar:t.avatar_url||`https://api.dicebear.com/8.x/initials/svg?seed=${t.name}`,status:t.status,joinDate:new Date(t.join_date),membershipType:t.membership_type||"basic"}),Jh=t=>{const s=t.item_type==="direct",n=t.inventory_items;return{id:t.id,name:s&&(n!=null&&n.name)?n.name:t.name,description:t.description||"",price:t.price,category:t.category,image_url:s&&(n!=null&&n.image_url)?n.image_url:t.image_url||void 0,available:t.available,preparation_time:t.preparation_time||void 0,item_type:t.item_type||"prepared",direct_inventory_item_id:t.direct_inventory_item_id||void 0}},$y=t=>({id:t.id,tableNumber:t.table_number||void 0,items:t.order_items.map(s=>({id:s.id.toString(),menuItemId:s.menu_item_id,quantity:s.quantity,price:s.price,notes:s.notes||void 0})),status:t.status,total:t.total,createdAt:new Date(t.created_at),updatedAt:new Date(t.updated_at||t.created_at),employeeId:t.employee_id||"",notes:t.notes||void 0}),cj=b.createContext(void 0),_t=()=>{const t=b.useContext(cj);if(t===void 0)throw new Error("useApp must be used within an AppProvider");return t},NT=({children:t})=>{const[s,n]=b.useState([]),[i,l]=b.useState([]),[c,u]=b.useState([]),[h,f]=b.useState([]),[p,g]=b.useState([]),[y,v]=b.useState([]);b.useEffect(()=>{(async()=>{const[B,K,A,q]=await Promise.all([ae.from("menu_items").select(`
          *,
          inventory_items!left(name, image_url)
        `).order("name"),ae.from("inventory_items").select("*").order("name"),ae.from("inventory_categories").select("*").eq("is_active",!0).order("name"),ae.from("members").select("*").order("name")]);B.data&&n(B.data.map(Jh)),K.data&&u(K.data.map(Qh)),A.data&&f(A.data.map(_T)),q.data&&g(q.data.map(Zh))})()},[]),b.useEffect(()=>{const P=async A=>{var W,oe;const{data:q,error:L}=await ae.from("orders").select("*, order_items(*)").order("created_at",{ascending:!1});if(L)console.error("Error fetching orders after realtime event:",L);else if(q){const me=q.map($y);l(me),A.eventType!=="INSERT"&&z(`Pedido #${(oe=(W=A.new)==null?void 0:W.id)==null?void 0:oe.slice(0,4)} atualizado para ${A.new.status}`)}},B=ae.channel("realtime-orders").on("postgres_changes",{event:"*",schema:"public",table:"orders"},P).subscribe();return(async()=>{const{data:A,error:q}=await ae.from("orders").select("*, order_items(*)").order("created_at",{ascending:!1});q?console.error("Error fetching initial orders:",q):A&&l(A.map($y))})(),()=>{ae.removeChannel(B)}},[]);const j=async P=>{console.log("=== addMenuItem INICIADO ==="),console.log("Dados recebidos:",P);const B={name:P.name,description:P.description||null,price:P.price,category:P.category,available:P.available,preparation_time:P.preparation_time||null,item_type:P.item_type||"prepared",direct_inventory_item_id:P.direct_inventory_item_id||null,image_url:P.image_url||null};console.log("Dados formatados para Supabase:",B);const{data:K,error:A}=await ae.from("menu_items").insert(B).select().single();if(console.log("Resposta do Supabase:"),console.log("- Data:",K),console.log("- Error:",A),A)throw console.error("=== ERRO NO SUPABASE ==="),console.error("Código do erro:",A.code),console.error("Mensagem do erro:",A.message),console.error("Detalhes do erro:",A.details),console.error("Hint do erro:",A.hint),A;K&&(console.log("Item inserido com sucesso, atualizando estado..."),n(q=>[Jh(K),...q].sort((L,W)=>L.name.localeCompare(W.name))),z(`Novo prato "${K.name}" adicionado ao cardápio!`),console.log("Estado atualizado com sucesso!")),console.log("=== addMenuItem FINALIZADO ===")},N=async P=>{const B={name:P.name,description:P.description,price:P.price,category:P.category,available:P.available,preparation_time:P.preparation_time,item_type:P.item_type||"prepared",direct_inventory_item_id:P.direct_inventory_item_id||null,image_url:P.image_url||null},{data:K,error:A}=await ae.from("menu_items").update(B).eq("id",P.id).select().single();if(A){console.error(A);return}K&&(n(q=>q.map(L=>L.id===K.id?Jh(K):L).sort((L,W)=>L.name.localeCompare(W.name))),z(`Prato "${K.name}" atualizado!`))},_=async P=>{const{error:B}=await ae.from("menu_items").delete().eq("id",P);if(B){console.error(B);return}n(K=>K.filter(A=>A.id!==P)),z("Prato removido do cardápio!")},C=async P=>{const{items:B,tableNumber:K,employeeId:A,notes:q,status:L}=P,W=B.reduce((Ee,Ue)=>Ee+Ue.price*Ue.quantity,0),oe={table_number:K,employee_id:A,notes:q,status:L,total:W},{data:me,error:fe}=await ae.from("orders").insert(oe).select().single();if(fe||!me){console.error("Error creating order:",fe);return}const ie=B.map(Ee=>({order_id:me.id,menu_item_id:Ee.menuItemId,quantity:Ee.quantity,price:Ee.price,notes:Ee.notes})),{error:de}=await ae.from("order_items").insert(ie);de?console.error("Error creating order items:",de):z(`Novo pedido #${me.id.slice(0,4)} criado!`)},R=async(P,B)=>{try{if(console.log("🔄 updateOrderStatus chamado:",{orderId:P,status:B}),P.startsWith("comanda-")){console.log("🍽️ Processando comanda com CommandManager");try{const{CommandManager:K}=await Jn(async()=>{const{CommandManager:W}=await import("./command-manager-DqW0SuL2.js");return{CommandManager:W}},[]),A=K.getInstance(),q=P.replace("comanda-","").split("-").slice(0,5).join("-");console.log("📋 Buscando comanda:",q);let L=await A.buscarComanda(q);if(L||(console.log("⚠️ Comanda não encontrada, criando uma de teste"),L=await A.criarComanda({funcionario_id:"user-demo",quantidade_pessoas:1,observacoes:`Comanda de teste para ${P}`}),await A.adicionarItem(L.id,{produto_id:"prod-001",nome_produto:"Hambúrguer Teste",quantidade:1,preco_unitario:25.9,observacoes:"Item de teste"}),L=await A.buscarComanda(L.id)),L!=null&&L.itens){const W=L.itens.filter(oe=>oe.status==="pendente"||oe.status==="preparando");console.log(`🔄 Atualizando ${W.length} itens da comanda`);for(const oe of W){let me;switch(B){case"pending":me="pendente";break;case"preparing":me="preparando";break;case"ready":me="pronto";break;case"delivered":me="entregue";break;default:me=B}await A.atualizarStatusItem(L.id,oe.id,me)}console.log("✅ Itens da comanda atualizados com sucesso!")}console.log("🔄 Atualizando também no Supabase para refletir na interface...");try{const{data:W,error:oe}=await ae.from("comanda_items").select("*").eq("comanda_id",q).in("status",["pending","preparing","ready"]);if(oe)console.warn("⚠️ Erro ao buscar itens no Supabase:",oe);else if(W&&W.length>0){const{error:me}=await ae.from("comanda_items").update({status:B}).eq("comanda_id",q).in("status",["pending","preparing","ready"]);me?console.warn("⚠️ Erro ao atualizar no Supabase:",me):console.log("✅ Supabase também atualizado!")}else console.log("ℹ️ Nenhum item encontrado no Supabase para atualizar")}catch(W){console.warn("⚠️ Erro na sincronização com Supabase:",W)}console.log("🔄 Atualizando estado local para feedback imediato..."),l(W=>W.map(oe=>oe.id===P?{...oe,status:B,updatedAt:new Date}:oe)),console.log("🔄 Recarregando pedidos do servidor..."),await pe(),await re(),console.log("✅ Processo completo finalizado!");return}catch(K){console.error("❌ Erro no CommandManager:",K),console.log("🔄 Continuando com lógica original...")}}if(P.startsWith("balcao-")){const K=P.replace("balcao-","");console.log("Atualizando pedido de balcão:",K);let A;switch(B){case"pending":A="paid";break;case"preparing":A="preparing";break;case"ready":A="ready";break;default:A=B}const{error:q}=await ae.from("balcao_orders").update({status:A,preparation_started_at:B==="preparing"?new Date().toISOString():void 0,preparation_completed_at:B==="ready"?new Date().toISOString():void 0}).eq("id",K);if(q)throw q;console.log("Pedido de balcão atualizado com sucesso")}else{console.log("🔄 Processando comanda com CommandManager");const{CommandManager:K}=await Jn(async()=>{const{CommandManager:oe}=await import("./command-manager-DqW0SuL2.js");return{CommandManager:oe}},[]),A=K.getInstance();let q,L;if(P.startsWith("comanda-")){const oe=P.replace("comanda-",""),me=oe.match(/^([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})-(.+)$/i);me?(q=me[1],L=me[2]):(q=oe,L="")}else{const oe=P.split("-");q=oe.slice(0,5).join("-"),L=oe.slice(5).join("-")}if(console.log("Decomposição do ID:",{orderId:P,realComandaId:q,timeKey:L}),!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(q))throw console.error("ID da comanda inválido:",q),new Error(`ID da comanda inválido: ${q}`);if(L){const oe=L.split("-");console.log("Partes do timeKey:",oe);const[me,fe,ie,de,Ee]=oe.map(Number);if(console.log("Valores parseados:",{year:me,month:fe,day:ie,hour:de,minute:Ee}),isNaN(me)||isNaN(fe)||isNaN(ie)||isNaN(de)||isNaN(Ee))throw console.error("❌ Valores de data inválidos:",{year:me,month:fe,day:ie,hour:de,minute:Ee}),new Error(`Valores de data inválidos no timeKey: ${L}`);const{data:Ue,error:je}=await ae.from("comanda_items").select("*").eq("comanda_id",q).in("status",["pending","preparing","ready"]);if(je)throw console.error("Erro na busca dos itens da comanda:",je),je;const Be=(Ue==null?void 0:Ue.filter(De=>{const Je=new Date(De.added_at),$t=`${Je.getFullYear()}-${Je.getMonth()}-${Je.getDate()}-${Je.getHours()}-${Je.getMinutes()}`;return L===$t}))||[];if(console.log("Itens encontrados para atualizar:",Be.length),Be.length>0){const De=Be.map($t=>$t.id);console.log("Atualizando itens:",De,"para status:",B);const{error:Je}=await ae.from("comanda_items").update({status:B}).in("id",De);if(Je)throw Je;console.log("Atualização realizada com sucesso")}else console.log("Nenhum item encontrado para atualizar")}else{const{data:oe,error:me}=await ae.from("comanda_items").select("*").eq("comanda_id",q).in("status",["pending","preparing","ready"]).order("added_at",{ascending:!1});if(me)throw console.error("Erro na busca dos itens da comanda:",me),me;if(oe&&oe.length>0){const fe=oe.map(de=>de.id);console.log("Atualizando todos os itens pendentes:",fe,"para status:",B);const{error:ie}=await ae.from("comanda_items").update({status:B}).in("id",fe);if(ie)throw ie;console.log("Atualização realizada com sucesso")}else console.log("Nenhum item encontrado para atualizar")}}await pe(),await re()}catch(K){console.error("Erro ao atualizar status do pedido:",K)}},S=async P=>{const B={name:P.name,category_id:P.categoryId,current_stock:P.currentStock,min_stock:P.minStock,unit:P.unit,cost:P.cost,supplier:P.supplier,available_for_sale:P.availableForSale||!1,image_url:P.image_url||null},{data:K,error:A}=await ae.from("inventory_items").insert(B).select().single();if(A){console.error(A);return}K&&u(q=>[Qh(K),...q].sort((L,W)=>L.name.localeCompare(W.name)))},k=async P=>{const B={name:P.name,category_id:P.categoryId,current_stock:P.currentStock,min_stock:P.minStock,unit:P.unit,cost:P.cost,supplier:P.supplier,available_for_sale:P.availableForSale||!1,image_url:P.image_url||null,last_updated:new Date().toISOString()},{data:K,error:A}=await ae.from("inventory_items").update(B).eq("id",P.id).select().single();if(A){console.error(A);return}K&&u(q=>q.map(L=>L.id===K.id?Qh(K):L).sort((L,W)=>L.name.localeCompare(W.name)))},E=async P=>{const{error:B}=await ae.from("inventory_items").delete().eq("id",P);if(B){console.error(B);return}u(K=>K.filter(A=>A.id!==P))},w=async P=>{const B={name:P.name,email:P.email,phone:P.phone,avatar_url:P.avatar,status:P.status,membership_type:P.membershipType},{data:K,error:A}=await ae.from("members").insert(B).select().single();if(A){console.error(A);return}K&&g(q=>[Zh(K),...q].sort((L,W)=>L.name.localeCompare(W.name)))},M=async P=>{const B={name:P.name,email:P.email,phone:P.phone,avatar_url:P.avatar,status:P.status,membership_type:P.membershipType},{data:K,error:A}=await ae.from("members").update(B).eq("id",P.id).select().single();if(A){console.error(A);return}K&&g(q=>q.map(L=>L.id===K.id?Zh(K):L).sort((L,W)=>L.name.localeCompare(W.name)))},z=P=>{v(B=>[P,...B].slice(0,10))},U=()=>v([]),[H,V]=b.useState([]),[Q,X]=b.useState([]),re=async()=>{try{const{data:P,error:B}=await ae.from("comanda_items").select(`
          *,
          comanda:comandas(
            id,
            table_id,
            customer_name,
            opened_at,
            status,
            table:bar_tables(number)
          ),
          menu_item:menu_items(
            *,
            inventory_items!left(name, image_url)
          )
        `).in("status",["pending","preparing","ready"]).order("added_at",{ascending:!0});if(B)throw B;const{data:K,error:A}=await ae.from("balcao_order_items").select(`
          *,
          balcao_order:balcao_orders!inner(
            id,
            order_number,
            customer_name,
            status,
            created_at
          ),
          menu_item:menu_items(
            *,
            inventory_items!left(name, image_url)
          )
        `).in("balcao_order.status",["paid","preparing","ready"]).order("created_at",{ascending:!0});if(A)throw A;const q=new Map;P==null||P.forEach(L=>{var de,Ee,Ue,je,Be,De,Je;const W=(de=L.comanda)==null?void 0:de.id;if(!W)return;const oe=new Date(L.added_at),me=`${oe.getUTCFullYear()}-${oe.getUTCMonth()}-${oe.getUTCDate()}-${oe.getUTCHours()}-${oe.getUTCMinutes()}`,fe=`comanda-${W}-${me}`;q.has(fe)||q.set(fe,{id:fe,tableNumber:(Ue=(Ee=L.comanda)==null?void 0:Ee.table)==null?void 0:Ue.number,items:[],status:L.status,total:0,createdAt:new Date(L.added_at),updatedAt:new Date(L.created_at),employeeId:"",notes:`Mesa ${(Be=(je=L.comanda)==null?void 0:je.table)==null?void 0:Be.number} - ${((De=L.comanda)==null?void 0:De.customer_name)||"Cliente"}`});const ie=q.get(fe);ie.items.push({id:L.id,menuItemId:L.menu_item_id,quantity:L.quantity,price:L.price,notes:L.notes,menuItem:L.menu_item?{id:L.menu_item.id,name:L.menu_item.item_type==="direct"&&((Je=L.menu_item.inventory_items)!=null&&Je.name)?L.menu_item.inventory_items.name:L.menu_item.name,category:L.menu_item.category,preparationTime:L.menu_item.preparation_time,item_type:L.menu_item.item_type}:void 0}),ie.total+=L.price*L.quantity}),K==null||K.forEach(L=>{var fe,ie;const W=(fe=L.balcao_order)==null?void 0:fe.id;if(!W)return;const oe=`balcao-${W}`;q.has(oe)||q.set(oe,{id:oe,tableNumber:"Balcão",items:[],status:L.balcao_order.status==="paid"?"pending":L.balcao_order.status==="preparing"?"preparing":"ready",total:0,createdAt:new Date(L.balcao_order.created_at),updatedAt:new Date(L.created_at),employeeId:"",notes:`Pedido Balcão #${L.balcao_order.order_number}${L.balcao_order.customer_name?` - ${L.balcao_order.customer_name}`:""}`});const me=q.get(oe);me.items.push({id:L.id,menuItemId:L.menu_item_id,quantity:L.quantity,price:L.unit_price,notes:L.notes,menuItem:L.menu_item?{id:L.menu_item.id,name:L.menu_item.item_type==="direct"&&((ie=L.menu_item.inventory_items)!=null&&ie.name)?L.menu_item.inventory_items.name:L.menu_item.name,category:L.menu_item.category,preparationTime:L.menu_item.preparation_time,item_type:L.menu_item.item_type}:void 0}),me.total+=L.unit_price*L.quantity}),X(Array.from(q.values()))}catch(P){console.error("Erro ao buscar pedidos do bar:",P)}},pe=async()=>{try{const{data:P,error:B}=await ae.from("comanda_items").select(`
          *,
          comanda:comandas(
            id,
            table_id,
            customer_name,
            opened_at,
            status,
            table:bar_tables(number)
          ),
          menu_item:menu_items!inner(*)
        `).in("status",["pending","preparing"]).neq("menu_item.item_type","direct").order("added_at",{ascending:!0});if(B)throw B;const{data:K,error:A}=await ae.from("balcao_order_items").select(`
          *,
          balcao_order:balcao_orders!inner(
            id,
            order_number,
            customer_name,
            status,
            created_at
          ),
          menu_item:menu_items!inner(*)
        `).in("balcao_order.status",["paid","preparing"]).neq("menu_item.item_type","direct").order("created_at",{ascending:!0});if(A)throw A;const q=new Map;P==null||P.forEach(L=>{var de,Ee,Ue,je,Be,De;const W=(de=L.comanda)==null?void 0:de.id;if(!W)return;const oe=new Date(L.added_at),me=`${oe.getUTCFullYear()}-${oe.getUTCMonth()}-${oe.getUTCDate()}-${oe.getUTCHours()}-${oe.getUTCMinutes()}`,fe=`comanda-${W}-${me}`;q.has(fe)||q.set(fe,{id:fe,tableNumber:(Ue=(Ee=L.comanda)==null?void 0:Ee.table)==null?void 0:Ue.number,items:[],status:L.status,total:0,createdAt:new Date(L.added_at),updatedAt:new Date(L.created_at),employeeId:"",notes:`Mesa ${(Be=(je=L.comanda)==null?void 0:je.table)==null?void 0:Be.number} - ${((De=L.comanda)==null?void 0:De.customer_name)||"Cliente"}`});const ie=q.get(fe);ie.items.push({id:L.id,menuItemId:L.menu_item_id,quantity:L.quantity,price:L.price,notes:L.notes,menuItem:L.menu_item?{id:L.menu_item.id,name:L.menu_item.name,category:L.menu_item.category,preparationTime:L.menu_item.preparation_time}:void 0}),ie.total+=L.price*L.quantity}),K==null||K.forEach(L=>{var fe;const W=(fe=L.balcao_order)==null?void 0:fe.id;if(!W)return;const oe=`balcao-${W}`;q.has(oe)||q.set(oe,{id:oe,tableNumber:"Balcão",items:[],status:L.balcao_order.status==="paid"?"pending":"preparing",total:0,createdAt:new Date(L.balcao_order.created_at),updatedAt:new Date(L.created_at),employeeId:"",notes:`Pedido Balcão #${L.balcao_order.order_number}${L.balcao_order.customer_name?` - ${L.balcao_order.customer_name}`:""}`});const me=q.get(oe);me.items.push({id:L.id,menuItemId:L.menu_item_id,quantity:L.quantity,price:L.unit_price,notes:L.notes,menuItem:L.menu_item?{id:L.menu_item.id,name:L.menu_item.name,category:L.menu_item.category,preparationTime:L.menu_item.preparation_time}:void 0}),me.total+=L.unit_price*L.quantity}),V(Array.from(q.values()))}catch(P){console.error("Erro ao buscar pedidos da cozinha:",P)}};b.useEffect(()=>{pe(),re();const P=ae.channel("kitchen-orders-realtime").on("postgres_changes",{event:"*",schema:"public",table:"comanda_items"},B=>{console.log("🔥 SUBSCRIPTION ATIVADA - comanda_items:",B),console.log("Event Type:",B.eventType),console.log("New data:",B.new),console.log("Old data:",B.old),setTimeout(()=>{console.log("🔄 Recarregando pedidos da cozinha e bar..."),pe(),re()},100),B.eventType==="INSERT"?console.log("✅ Novo item inserido na comanda"):B.eventType==="UPDATE"?console.log("🔄 Item da comanda atualizado"):B.eventType==="DELETE"&&console.log("🗑️ Item da comanda removido")}).on("postgres_changes",{event:"*",schema:"public",table:"comandas"},B=>{console.log("🔥 SUBSCRIPTION ATIVADA - comandas:",B),setTimeout(()=>{console.log("🔄 Recarregando pedidos da cozinha e bar (comandas)..."),pe(),re()},100)}).on("postgres_changes",{event:"*",schema:"public",table:"balcao_orders"},B=>{var K,A;console.log("🔥 SUBSCRIPTION ATIVADA - balcao_orders:",B),console.log("Event Type:",B.eventType),console.log("New data:",B.new),console.log("Old data:",B.old),B.eventType==="UPDATE"&&((K=B.old)==null?void 0:K.status)==="pending_payment"&&((A=B.new)==null?void 0:A.status)==="paid"&&(console.log("🎉 PEDIDO PAGO DETECTADO! Forçando atualização imediata..."),pe(),re()),setTimeout(()=>{console.log("🔄 Recarregando pedidos da cozinha e bar (balcão)..."),pe(),re()},1e3)}).on("postgres_changes",{event:"*",schema:"public",table:"balcao_order_items"},B=>{console.log("🔥 SUBSCRIPTION ATIVADA - balcao_order_items:",B),console.log("Event Type:",B.eventType),setTimeout(()=>{console.log("🔄 Recarregando pedidos da cozinha e bar (itens balcão)..."),pe(),re()},500)}).subscribe(B=>{console.log("📡 Status da subscription kitchen-orders:",B),B==="SUBSCRIBED"?console.log("✅ Subscription ativa e funcionando!"):B==="CHANNEL_ERROR"&&console.error("❌ Erro na subscription!")});return()=>{console.log("🔌 Desconectando subscription kitchen-orders"),P.unsubscribe()}},[]);const $=H.filter(P=>P.items.length>0),D=Q.filter(P=>P.items.length>0);return e.jsx(cj.Provider,{value:{menuItems:s,addMenuItem:j,updateMenuItem:N,removeMenuItem:_,orders:i,addOrder:C,updateOrderStatus:R,kitchenOrders:$,barOrders:D,refreshKitchenOrders:pe,refreshBarOrders:re,inventory:c,inventoryCategories:h,addInventoryItem:S,updateInventoryItem:k,removeInventoryItem:E,members:p,addMember:w,updateMember:M,notifications:y,addNotification:z,clearNotifications:U},children:t})},jf=b.createContext({});function wf(t){const s=b.useRef(null);return s.current===null&&(s.current=t()),s.current}const _f=typeof window<"u",dj=_f?b.useLayoutEffect:b.useEffect,fd=b.createContext(null);function Nf(t,s){t.indexOf(s)===-1&&t.push(s)}function Sf(t,s){const n=t.indexOf(s);n>-1&&t.splice(n,1)}const Pa=(t,s,n)=>n>s?s:n<t?t:n;let Cf=()=>{};const za={},uj=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function hj(t){return typeof t=="object"&&t!==null}const mj=t=>/^0[^.\s]+$/u.test(t);function Tf(t){let s;return()=>(s===void 0&&(s=t()),s)}const Vs=t=>t,ST=(t,s)=>n=>s(t(n)),rl=(...t)=>t.reduce(ST),Xo=(t,s,n)=>{const i=s-t;return i===0?1:(n-t)/i};class Ef{constructor(){this.subscriptions=[]}add(s){return Nf(this.subscriptions,s),()=>Sf(this.subscriptions,s)}notify(s,n,i){const l=this.subscriptions.length;if(l)if(l===1)this.subscriptions[0](s,n,i);else for(let c=0;c<l;c++){const u=this.subscriptions[c];u&&u(s,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ca=t=>t*1e3,da=t=>t/1e3;function fj(t,s){return s?t*(1e3/s):0}const pj=(t,s,n)=>(((1-3*n+3*s)*t+(3*n-6*s))*t+3*s)*t,CT=1e-7,TT=12;function ET(t,s,n,i,l){let c,u,h=0;do u=s+(n-s)/2,c=pj(u,i,l)-t,c>0?n=u:s=u;while(Math.abs(c)>CT&&++h<TT);return u}function il(t,s,n,i){if(t===s&&n===i)return Vs;const l=c=>ET(c,0,1,t,n);return c=>c===0||c===1?c:pj(l(c),s,i)}const gj=t=>s=>s<=.5?t(2*s)/2:(2-t(2*(1-s)))/2,xj=t=>s=>1-t(1-s),yj=il(.33,1.53,.69,.99),Af=xj(yj),bj=gj(Af),vj=t=>(t*=2)<1?.5*Af(t):.5*(2-Math.pow(2,-10*(t-1))),kf=t=>1-Math.sin(Math.acos(t)),jj=xj(kf),wj=gj(kf),AT=il(.42,0,1,1),kT=il(0,0,.58,1),_j=il(.42,0,.58,1),MT=t=>Array.isArray(t)&&typeof t[0]!="number",Nj=t=>Array.isArray(t)&&typeof t[0]=="number",DT={linear:Vs,easeIn:AT,easeInOut:_j,easeOut:kT,circIn:kf,circInOut:wj,circOut:jj,backIn:Af,backInOut:bj,backOut:yj,anticipate:vj},OT=t=>typeof t=="string",Vy=t=>{if(Nj(t)){Cf(t.length===4);const[s,n,i,l]=t;return il(s,n,i,l)}else if(OT(t))return DT[t];return t},Mc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function RT(t,s){let n=new Set,i=new Set,l=!1,c=!1;const u=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function f(g){u.has(g)&&(p.schedule(g),t()),g(h)}const p={schedule:(g,y=!1,v=!1)=>{const N=v&&l?n:i;return y&&u.add(g),N.has(g)||N.add(g),g},cancel:g=>{i.delete(g),u.delete(g)},process:g=>{if(h=g,l){c=!0;return}l=!0,[n,i]=[i,n],n.forEach(f),n.clear(),l=!1,c&&(c=!1,p.process(g))}};return p}const PT=40;function Sj(t,s){let n=!1,i=!0;const l={delta:0,timestamp:0,isProcessing:!1},c=()=>n=!0,u=Mc.reduce((k,E)=>(k[E]=RT(c),k),{}),{setup:h,read:f,resolveKeyframes:p,preUpdate:g,update:y,preRender:v,render:j,postRender:N}=u,_=()=>{const k=za.useManualTiming?l.timestamp:performance.now();n=!1,za.useManualTiming||(l.delta=i?1e3/60:Math.max(Math.min(k-l.timestamp,PT),1)),l.timestamp=k,l.isProcessing=!0,h.process(l),f.process(l),p.process(l),g.process(l),y.process(l),v.process(l),j.process(l),N.process(l),l.isProcessing=!1,n&&s&&(i=!1,t(_))},C=()=>{n=!0,i=!0,l.isProcessing||t(_)};return{schedule:Mc.reduce((k,E)=>{const w=u[E];return k[E]=(M,z=!1,U=!1)=>(n||C(),w.schedule(M,z,U)),k},{}),cancel:k=>{for(let E=0;E<Mc.length;E++)u[Mc[E]].cancel(k)},state:l,steps:u}}const{schedule:pt,cancel:gn,state:Qt,steps:em}=Sj(typeof requestAnimationFrame<"u"?requestAnimationFrame:Vs,!0);let Lc;function zT(){Lc=void 0}const ys={now:()=>(Lc===void 0&&ys.set(Qt.isProcessing||za.useManualTiming?Qt.timestamp:performance.now()),Lc),set:t=>{Lc=t,queueMicrotask(zT)}},Cj=t=>s=>typeof s=="string"&&s.startsWith(t),Mf=Cj("--"),LT=Cj("var(--"),Df=t=>LT(t)?BT.test(t.split("/*")[0].trim()):!1,BT=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ti={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ko={...Ti,transform:t=>Pa(0,1,t)},Dc={...Ti,default:1},$o=t=>Math.round(t*1e5)/1e5,Of=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function $T(t){return t==null}const VT=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Rf=(t,s)=>n=>!!(typeof n=="string"&&VT.test(n)&&n.startsWith(t)||s&&!$T(n)&&Object.prototype.hasOwnProperty.call(n,s)),Tj=(t,s,n)=>i=>{if(typeof i!="string")return i;const[l,c,u,h]=i.match(Of);return{[t]:parseFloat(l),[s]:parseFloat(c),[n]:parseFloat(u),alpha:h!==void 0?parseFloat(h):1}},UT=t=>Pa(0,255,t),tm={...Ti,transform:t=>Math.round(UT(t))},Yn={test:Rf("rgb","red"),parse:Tj("red","green","blue"),transform:({red:t,green:s,blue:n,alpha:i=1})=>"rgba("+tm.transform(t)+", "+tm.transform(s)+", "+tm.transform(n)+", "+$o(Ko.transform(i))+")"};function qT(t){let s="",n="",i="",l="";return t.length>5?(s=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),l=t.substring(7,9)):(s=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),l=t.substring(4,5),s+=s,n+=n,i+=i,l+=l),{red:parseInt(s,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:l?parseInt(l,16)/255:1}}const Dm={test:Rf("#"),parse:qT,transform:Yn.transform},ol=t=>({test:s=>typeof s=="string"&&s.endsWith(t)&&s.split(" ").length===1,parse:parseFloat,transform:s=>`${s}${t}`}),mn=ol("deg"),ua=ol("%"),Le=ol("px"),FT=ol("vh"),IT=ol("vw"),Uy={...ua,parse:t=>ua.parse(t)/100,transform:t=>ua.transform(t*100)},ui={test:Rf("hsl","hue"),parse:Tj("hue","saturation","lightness"),transform:({hue:t,saturation:s,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+ua.transform($o(s))+", "+ua.transform($o(n))+", "+$o(Ko.transform(i))+")"},Ot={test:t=>Yn.test(t)||Dm.test(t)||ui.test(t),parse:t=>Yn.test(t)?Yn.parse(t):ui.test(t)?ui.parse(t):Dm.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Yn.transform(t):ui.transform(t),getAnimatableNone:t=>{const s=Ot.parse(t);return s.alpha=0,Ot.transform(s)}},HT=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function GT(t){var s,n;return isNaN(t)&&typeof t=="string"&&(((s=t.match(Of))==null?void 0:s.length)||0)+(((n=t.match(HT))==null?void 0:n.length)||0)>0}const Ej="number",Aj="color",YT="var",XT="var(",qy="${}",KT=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Wo(t){const s=t.toString(),n=[],i={color:[],number:[],var:[]},l=[];let c=0;const h=s.replace(KT,f=>(Ot.test(f)?(i.color.push(c),l.push(Aj),n.push(Ot.parse(f))):f.startsWith(XT)?(i.var.push(c),l.push(YT),n.push(f)):(i.number.push(c),l.push(Ej),n.push(parseFloat(f))),++c,qy)).split(qy);return{values:n,split:h,indexes:i,types:l}}function kj(t){return Wo(t).values}function Mj(t){const{split:s,types:n}=Wo(t),i=s.length;return l=>{let c="";for(let u=0;u<i;u++)if(c+=s[u],l[u]!==void 0){const h=n[u];h===Ej?c+=$o(l[u]):h===Aj?c+=Ot.transform(l[u]):c+=l[u]}return c}}const WT=t=>typeof t=="number"?0:Ot.test(t)?Ot.getAnimatableNone(t):t;function QT(t){const s=kj(t);return Mj(t)(s.map(WT))}const xn={test:GT,parse:kj,createTransformer:Mj,getAnimatableNone:QT};function sm(t,s,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(s-t)*6*n:n<1/2?s:n<2/3?t+(s-t)*(2/3-n)*6:t}function ZT({hue:t,saturation:s,lightness:n,alpha:i}){t/=360,s/=100,n/=100;let l=0,c=0,u=0;if(!s)l=c=u=n;else{const h=n<.5?n*(1+s):n+s-n*s,f=2*n-h;l=sm(f,h,t+1/3),c=sm(f,h,t),u=sm(f,h,t-1/3)}return{red:Math.round(l*255),green:Math.round(c*255),blue:Math.round(u*255),alpha:i}}function Xc(t,s){return n=>n>0?s:t}const bt=(t,s,n)=>t+(s-t)*n,am=(t,s,n)=>{const i=t*t,l=n*(s*s-i)+i;return l<0?0:Math.sqrt(l)},JT=[Dm,Yn,ui],e4=t=>JT.find(s=>s.test(t));function Fy(t){const s=e4(t);if(!s)return!1;let n=s.parse(t);return s===ui&&(n=ZT(n)),n}const Iy=(t,s)=>{const n=Fy(t),i=Fy(s);if(!n||!i)return Xc(t,s);const l={...n};return c=>(l.red=am(n.red,i.red,c),l.green=am(n.green,i.green,c),l.blue=am(n.blue,i.blue,c),l.alpha=bt(n.alpha,i.alpha,c),Yn.transform(l))},Om=new Set(["none","hidden"]);function t4(t,s){return Om.has(t)?n=>n<=0?t:s:n=>n>=1?s:t}function s4(t,s){return n=>bt(t,s,n)}function Pf(t){return typeof t=="number"?s4:typeof t=="string"?Df(t)?Xc:Ot.test(t)?Iy:r4:Array.isArray(t)?Dj:typeof t=="object"?Ot.test(t)?Iy:a4:Xc}function Dj(t,s){const n=[...t],i=n.length,l=t.map((c,u)=>Pf(c)(c,s[u]));return c=>{for(let u=0;u<i;u++)n[u]=l[u](c);return n}}function a4(t,s){const n={...t,...s},i={};for(const l in n)t[l]!==void 0&&s[l]!==void 0&&(i[l]=Pf(t[l])(t[l],s[l]));return l=>{for(const c in i)n[c]=i[c](l);return n}}function n4(t,s){const n=[],i={color:0,var:0,number:0};for(let l=0;l<s.values.length;l++){const c=s.types[l],u=t.indexes[c][i[c]],h=t.values[u]??0;n[l]=h,i[c]++}return n}const r4=(t,s)=>{const n=xn.createTransformer(s),i=Wo(t),l=Wo(s);return i.indexes.var.length===l.indexes.var.length&&i.indexes.color.length===l.indexes.color.length&&i.indexes.number.length>=l.indexes.number.length?Om.has(t)&&!l.values.length||Om.has(s)&&!i.values.length?t4(t,s):rl(Dj(n4(i,l),l.values),n):Xc(t,s)};function Oj(t,s,n){return typeof t=="number"&&typeof s=="number"&&typeof n=="number"?bt(t,s,n):Pf(t)(t,s)}const i4=t=>{const s=({timestamp:n})=>t(n);return{start:(n=!0)=>pt.update(s,n),stop:()=>gn(s),now:()=>Qt.isProcessing?Qt.timestamp:ys.now()}},Rj=(t,s,n=10)=>{let i="";const l=Math.max(Math.round(s/n),2);for(let c=0;c<l;c++)i+=Math.round(t(c/(l-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Kc=2e4;function zf(t){let s=0;const n=50;let i=t.next(s);for(;!i.done&&s<Kc;)s+=n,i=t.next(s);return s>=Kc?1/0:s}function o4(t,s=100,n){const i=n({...t,keyframes:[0,s]}),l=Math.min(zf(i),Kc);return{type:"keyframes",ease:c=>i.next(l*c).value/s,duration:da(l)}}const l4=5;function Pj(t,s,n){const i=Math.max(s-l4,0);return fj(n-t(i),s-i)}const wt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},nm=.001;function c4({duration:t=wt.duration,bounce:s=wt.bounce,velocity:n=wt.velocity,mass:i=wt.mass}){let l,c,u=1-s;u=Pa(wt.minDamping,wt.maxDamping,u),t=Pa(wt.minDuration,wt.maxDuration,da(t)),u<1?(l=p=>{const g=p*u,y=g*t,v=g-n,j=Rm(p,u),N=Math.exp(-y);return nm-v/j*N},c=p=>{const y=p*u*t,v=y*n+n,j=Math.pow(u,2)*Math.pow(p,2)*t,N=Math.exp(-y),_=Rm(Math.pow(p,2),u);return(-l(p)+nm>0?-1:1)*((v-j)*N)/_}):(l=p=>{const g=Math.exp(-p*t),y=(p-n)*t+1;return-nm+g*y},c=p=>{const g=Math.exp(-p*t),y=(n-p)*(t*t);return g*y});const h=5/t,f=u4(l,c,h);if(t=ca(t),isNaN(f))return{stiffness:wt.stiffness,damping:wt.damping,duration:t};{const p=Math.pow(f,2)*i;return{stiffness:p,damping:u*2*Math.sqrt(i*p),duration:t}}}const d4=12;function u4(t,s,n){let i=n;for(let l=1;l<d4;l++)i=i-t(i)/s(i);return i}function Rm(t,s){return t*Math.sqrt(1-s*s)}const h4=["duration","bounce"],m4=["stiffness","damping","mass"];function Hy(t,s){return s.some(n=>t[n]!==void 0)}function f4(t){let s={velocity:wt.velocity,stiffness:wt.stiffness,damping:wt.damping,mass:wt.mass,isResolvedFromDuration:!1,...t};if(!Hy(t,m4)&&Hy(t,h4))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),l=i*i,c=2*Pa(.05,1,1-(t.bounce||0))*Math.sqrt(l);s={...s,mass:wt.mass,stiffness:l,damping:c}}else{const n=c4(t);s={...s,...n,mass:wt.mass},s.isResolvedFromDuration=!0}return s}function Wc(t=wt.visualDuration,s=wt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:s}:t;let{restSpeed:i,restDelta:l}=n;const c=n.keyframes[0],u=n.keyframes[n.keyframes.length-1],h={done:!1,value:c},{stiffness:f,damping:p,mass:g,duration:y,velocity:v,isResolvedFromDuration:j}=f4({...n,velocity:-da(n.velocity||0)}),N=v||0,_=p/(2*Math.sqrt(f*g)),C=u-c,R=da(Math.sqrt(f/g)),S=Math.abs(C)<5;i||(i=S?wt.restSpeed.granular:wt.restSpeed.default),l||(l=S?wt.restDelta.granular:wt.restDelta.default);let k;if(_<1){const w=Rm(R,_);k=M=>{const z=Math.exp(-_*R*M);return u-z*((N+_*R*C)/w*Math.sin(w*M)+C*Math.cos(w*M))}}else if(_===1)k=w=>u-Math.exp(-R*w)*(C+(N+R*C)*w);else{const w=R*Math.sqrt(_*_-1);k=M=>{const z=Math.exp(-_*R*M),U=Math.min(w*M,300);return u-z*((N+_*R*C)*Math.sinh(U)+w*C*Math.cosh(U))/w}}const E={calculatedDuration:j&&y||null,next:w=>{const M=k(w);if(j)h.done=w>=y;else{let z=w===0?N:0;_<1&&(z=w===0?ca(N):Pj(k,w,M));const U=Math.abs(z)<=i,H=Math.abs(u-M)<=l;h.done=U&&H}return h.value=h.done?u:M,h},toString:()=>{const w=Math.min(zf(E),Kc),M=Rj(z=>E.next(w*z).value,w,30);return w+"ms "+M},toTransition:()=>{}};return E}Wc.applyToOptions=t=>{const s=o4(t,100,Wc);return t.ease=s.ease,t.duration=ca(s.duration),t.type="keyframes",t};function Pm({keyframes:t,velocity:s=0,power:n=.8,timeConstant:i=325,bounceDamping:l=10,bounceStiffness:c=500,modifyTarget:u,min:h,max:f,restDelta:p=.5,restSpeed:g}){const y=t[0],v={done:!1,value:y},j=U=>h!==void 0&&U<h||f!==void 0&&U>f,N=U=>h===void 0?f:f===void 0||Math.abs(h-U)<Math.abs(f-U)?h:f;let _=n*s;const C=y+_,R=u===void 0?C:u(C);R!==C&&(_=R-y);const S=U=>-_*Math.exp(-U/i),k=U=>R+S(U),E=U=>{const H=S(U),V=k(U);v.done=Math.abs(H)<=p,v.value=v.done?R:V};let w,M;const z=U=>{j(v.value)&&(w=U,M=Wc({keyframes:[v.value,N(v.value)],velocity:Pj(k,U,v.value),damping:l,stiffness:c,restDelta:p,restSpeed:g}))};return z(0),{calculatedDuration:null,next:U=>{let H=!1;return!M&&w===void 0&&(H=!0,E(U),z(U)),w!==void 0&&U>=w?M.next(U-w):(!H&&E(U),v)}}}function p4(t,s,n){const i=[],l=n||za.mix||Oj,c=t.length-1;for(let u=0;u<c;u++){let h=l(t[u],t[u+1]);if(s){const f=Array.isArray(s)?s[u]||Vs:s;h=rl(f,h)}i.push(h)}return i}function g4(t,s,{clamp:n=!0,ease:i,mixer:l}={}){const c=t.length;if(Cf(c===s.length),c===1)return()=>s[0];if(c===2&&s[0]===s[1])return()=>s[1];const u=t[0]===t[1];t[0]>t[c-1]&&(t=[...t].reverse(),s=[...s].reverse());const h=p4(s,i,l),f=h.length,p=g=>{if(u&&g<t[0])return s[0];let y=0;if(f>1)for(;y<t.length-2&&!(g<t[y+1]);y++);const v=Xo(t[y],t[y+1],g);return h[y](v)};return n?g=>p(Pa(t[0],t[c-1],g)):p}function x4(t,s){const n=t[t.length-1];for(let i=1;i<=s;i++){const l=Xo(0,s,i);t.push(bt(n,1,l))}}function y4(t){const s=[0];return x4(s,t.length-1),s}function b4(t,s){return t.map(n=>n*s)}function v4(t,s){return t.map(()=>s||_j).splice(0,t.length-1)}function Vo({duration:t=300,keyframes:s,times:n,ease:i="easeInOut"}){const l=MT(i)?i.map(Vy):Vy(i),c={done:!1,value:s[0]},u=b4(n&&n.length===s.length?n:y4(s),t),h=g4(u,s,{ease:Array.isArray(l)?l:v4(s,l)});return{calculatedDuration:t,next:f=>(c.value=h(f),c.done=f>=t,c)}}const j4=t=>t!==null;function Lf(t,{repeat:s,repeatType:n="loop"},i,l=1){const c=t.filter(j4),h=l<0||s&&n!=="loop"&&s%2===1?0:c.length-1;return!h||i===void 0?c[h]:i}const w4={decay:Pm,inertia:Pm,tween:Vo,keyframes:Vo,spring:Wc};function zj(t){typeof t.type=="string"&&(t.type=w4[t.type])}class Bf{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(s=>{this.resolve=s})}notifyFinished(){this.resolve()}then(s,n){return this.finished.then(s,n)}}const _4=t=>t/100;class $f extends Bf{constructor(s){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,l;const{motionValue:n}=this.options;n&&n.updatedAt!==ys.now()&&this.tick(ys.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(l=(i=this.options).onStop)==null||l.call(i))},this.options=s,this.initAnimation(),this.play(),s.autoplay===!1&&this.pause()}initAnimation(){const{options:s}=this;zj(s);const{type:n=Vo,repeat:i=0,repeatDelay:l=0,repeatType:c,velocity:u=0}=s;let{keyframes:h}=s;const f=n||Vo;f!==Vo&&typeof h[0]!="number"&&(this.mixKeyframes=rl(_4,Oj(h[0],h[1])),h=[0,100]);const p=f({...s,keyframes:h});c==="mirror"&&(this.mirroredGenerator=f({...s,keyframes:[...h].reverse(),velocity:-u})),p.calculatedDuration===null&&(p.calculatedDuration=zf(p));const{calculatedDuration:g}=p;this.calculatedDuration=g,this.resolvedDuration=g+l,this.totalDuration=this.resolvedDuration*(i+1)-l,this.generator=p}updateTime(s){const n=Math.round(s-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(s,n=!1){const{generator:i,totalDuration:l,mixKeyframes:c,mirroredGenerator:u,resolvedDuration:h,calculatedDuration:f}=this;if(this.startTime===null)return i.next(0);const{delay:p=0,keyframes:g,repeat:y,repeatType:v,repeatDelay:j,type:N,onUpdate:_,finalKeyframe:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,s):this.speed<0&&(this.startTime=Math.min(s-l/this.speed,this.startTime)),n?this.currentTime=s:this.updateTime(s);const R=this.currentTime-p*(this.playbackSpeed>=0?1:-1),S=this.playbackSpeed>=0?R<0:R>l;this.currentTime=Math.max(R,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=l);let k=this.currentTime,E=i;if(y){const U=Math.min(this.currentTime,l)/h;let H=Math.floor(U),V=U%1;!V&&U>=1&&(V=1),V===1&&H--,H=Math.min(H,y+1),!!(H%2)&&(v==="reverse"?(V=1-V,j&&(V-=j/h)):v==="mirror"&&(E=u)),k=Pa(0,1,V)*h}const w=S?{done:!1,value:g[0]}:E.next(k);c&&(w.value=c(w.value));let{done:M}=w;!S&&f!==null&&(M=this.playbackSpeed>=0?this.currentTime>=l:this.currentTime<=0);const z=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return z&&N!==Pm&&(w.value=Lf(g,this.options,C,this.speed)),_&&_(w.value),z&&this.finish(),w}then(s,n){return this.finished.then(s,n)}get duration(){return da(this.calculatedDuration)}get time(){return da(this.currentTime)}set time(s){var n;s=ca(s),this.currentTime=s,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=s:this.driver&&(this.startTime=this.driver.now()-s/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(s){this.updateTime(ys.now());const n=this.playbackSpeed!==s;this.playbackSpeed=s,n&&(this.time=da(this.currentTime))}play(){var l,c;if(this.isStopped)return;const{driver:s=i4,startTime:n}=this.options;this.driver||(this.driver=s(u=>this.tick(u))),(c=(l=this.options).onPlay)==null||c.call(l);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ys.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var s,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(s=this.options).onComplete)==null||n.call(s)}cancel(){var s,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(s=this.options).onCancel)==null||n.call(s)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(s){return this.startTime=0,this.tick(s,!0)}attachTimeline(s){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),s.observe(this)}}function N4(t){for(let s=1;s<t.length;s++)t[s]??(t[s]=t[s-1])}const Xn=t=>t*180/Math.PI,zm=t=>{const s=Xn(Math.atan2(t[1],t[0]));return Lm(s)},S4={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:zm,rotateZ:zm,skewX:t=>Xn(Math.atan(t[1])),skewY:t=>Xn(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Lm=t=>(t=t%360,t<0&&(t+=360),t),Gy=zm,Yy=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Xy=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),C4={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Yy,scaleY:Xy,scale:t=>(Yy(t)+Xy(t))/2,rotateX:t=>Lm(Xn(Math.atan2(t[6],t[5]))),rotateY:t=>Lm(Xn(Math.atan2(-t[2],t[0]))),rotateZ:Gy,rotate:Gy,skewX:t=>Xn(Math.atan(t[4])),skewY:t=>Xn(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Bm(t){return t.includes("scale")?1:0}function $m(t,s){if(!t||t==="none")return Bm(s);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,l;if(n)i=C4,l=n;else{const h=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=S4,l=h}if(!l)return Bm(s);const c=i[s],u=l[1].split(",").map(E4);return typeof c=="function"?c(u):u[c]}const T4=(t,s)=>{const{transform:n="none"}=getComputedStyle(t);return $m(n,s)};function E4(t){return parseFloat(t.trim())}const Ei=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ai=new Set(Ei),Ky=t=>t===Ti||t===Le,A4=new Set(["x","y","z"]),k4=Ei.filter(t=>!A4.has(t));function M4(t){const s=[];return k4.forEach(n=>{const i=t.getValue(n);i!==void 0&&(s.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),s}const Wn={width:({x:t},{paddingLeft:s="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(s)-parseFloat(n),height:({y:t},{paddingTop:s="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(s)-parseFloat(n),top:(t,{top:s})=>parseFloat(s),left:(t,{left:s})=>parseFloat(s),bottom:({y:t},{top:s})=>parseFloat(s)+(t.max-t.min),right:({x:t},{left:s})=>parseFloat(s)+(t.max-t.min),x:(t,{transform:s})=>$m(s,"x"),y:(t,{transform:s})=>$m(s,"y")};Wn.translateX=Wn.x;Wn.translateY=Wn.y;const Qn=new Set;let Vm=!1,Um=!1,qm=!1;function Lj(){if(Um){const t=Array.from(Qn).filter(i=>i.needsMeasurement),s=new Set(t.map(i=>i.element)),n=new Map;s.forEach(i=>{const l=M4(i);l.length&&(n.set(i,l),i.render())}),t.forEach(i=>i.measureInitialState()),s.forEach(i=>{i.render();const l=n.get(i);l&&l.forEach(([c,u])=>{var h;(h=i.getValue(c))==null||h.set(u)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Um=!1,Vm=!1,Qn.forEach(t=>t.complete(qm)),Qn.clear()}function Bj(){Qn.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Um=!0)})}function D4(){qm=!0,Bj(),Lj(),qm=!1}class Vf{constructor(s,n,i,l,c,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...s],this.onComplete=n,this.name=i,this.motionValue=l,this.element=c,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(Qn.add(this),Vm||(Vm=!0,pt.read(Bj),pt.resolveKeyframes(Lj))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:s,name:n,element:i,motionValue:l}=this;if(s[0]===null){const c=l==null?void 0:l.get(),u=s[s.length-1];if(c!==void 0)s[0]=c;else if(i&&n){const h=i.readValue(n,u);h!=null&&(s[0]=h)}s[0]===void 0&&(s[0]=u),l&&c===void 0&&l.set(s[0])}N4(s)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(s=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,s),Qn.delete(this)}cancel(){this.state==="scheduled"&&(Qn.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const O4=t=>t.startsWith("--");function R4(t,s,n){O4(s)?t.style.setProperty(s,n):t.style[s]=n}const P4=Tf(()=>window.ScrollTimeline!==void 0),z4={};function L4(t,s){const n=Tf(t);return()=>z4[s]??n()}const $j=L4(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Po=([t,s,n,i])=>`cubic-bezier(${t}, ${s}, ${n}, ${i})`,Wy={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Po([0,.65,.55,1]),circOut:Po([.55,0,1,.45]),backIn:Po([.31,.01,.66,-.59]),backOut:Po([.33,1.53,.69,.99])};function Vj(t,s){if(t)return typeof t=="function"?$j()?Rj(t,s):"ease-out":Nj(t)?Po(t):Array.isArray(t)?t.map(n=>Vj(n,s)||Wy.easeOut):Wy[t]}function B4(t,s,n,{delay:i=0,duration:l=300,repeat:c=0,repeatType:u="loop",ease:h="easeOut",times:f}={},p=void 0){const g={[s]:n};f&&(g.offset=f);const y=Vj(h,l);Array.isArray(y)&&(g.easing=y);const v={delay:i,duration:l,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:c+1,direction:u==="reverse"?"alternate":"normal"};return p&&(v.pseudoElement=p),t.animate(g,v)}function Uj(t){return typeof t=="function"&&"applyToOptions"in t}function $4({type:t,...s}){return Uj(t)&&$j()?t.applyToOptions(s):(s.duration??(s.duration=300),s.ease??(s.ease="easeOut"),s)}class V4 extends Bf{constructor(s){if(super(),this.finishedTime=null,this.isStopped=!1,!s)return;const{element:n,name:i,keyframes:l,pseudoElement:c,allowFlatten:u=!1,finalKeyframe:h,onComplete:f}=s;this.isPseudoElement=!!c,this.allowFlatten=u,this.options=s,Cf(typeof s.type!="string");const p=$4(s);this.animation=B4(n,i,l,p,c),p.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!c){const g=Lf(l,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(g):R4(n,i,g),this.animation.cancel()}f==null||f(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var s,n;(n=(s=this.animation).finish)==null||n.call(s)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:s}=this;s==="idle"||s==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var s,n;this.isPseudoElement||(n=(s=this.animation).commitStyles)==null||n.call(s)}get duration(){var n,i;const s=((i=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:i.call(n).duration)||0;return da(Number(s))}get time(){return da(Number(this.animation.currentTime)||0)}set time(s){this.finishedTime=null,this.animation.currentTime=ca(s)}get speed(){return this.animation.playbackRate}set speed(s){s<0&&(this.finishedTime=null),this.animation.playbackRate=s}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(s){this.animation.startTime=s}attachTimeline({timeline:s,observe:n}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,s&&P4()?(this.animation.timeline=s,Vs):n(this)}}const qj={anticipate:vj,backInOut:bj,circInOut:wj};function U4(t){return t in qj}function q4(t){typeof t.ease=="string"&&U4(t.ease)&&(t.ease=qj[t.ease])}const Qy=10;class F4 extends V4{constructor(s){q4(s),zj(s),super(s),s.startTime&&(this.startTime=s.startTime),this.options=s}updateMotionValue(s){const{motionValue:n,onUpdate:i,onComplete:l,element:c,...u}=this.options;if(!n)return;if(s!==void 0){n.set(s);return}const h=new $f({...u,autoplay:!1}),f=ca(this.finishedTime??this.time);n.setWithVelocity(h.sample(f-Qy).value,h.sample(f).value,Qy),h.stop()}}const Zy=(t,s)=>s==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(xn.test(t)||t==="0")&&!t.startsWith("url("));function I4(t){const s=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==s)return!0}function H4(t,s,n,i){const l=t[0];if(l===null)return!1;if(s==="display"||s==="visibility")return!0;const c=t[t.length-1],u=Zy(l,s),h=Zy(c,s);return!u||!h?!1:I4(t)||(n==="spring"||Uj(n))&&i}function Fm(t){t.duration=0,t.type}const G4=new Set(["opacity","clipPath","filter","transform"]),Y4=Tf(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function X4(t){var g;const{motionValue:s,name:n,repeatDelay:i,repeatType:l,damping:c,type:u}=t;if(!(((g=s==null?void 0:s.owner)==null?void 0:g.current)instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:p}=s.owner.getProps();return Y4()&&n&&G4.has(n)&&(n!=="transform"||!p)&&!f&&!i&&l!=="mirror"&&c!==0&&u!=="inertia"}const K4=40;class W4 extends Bf{constructor({autoplay:s=!0,delay:n=0,type:i="keyframes",repeat:l=0,repeatDelay:c=0,repeatType:u="loop",keyframes:h,name:f,motionValue:p,element:g,...y}){var N;super(),this.stop=()=>{var _,C;this._animation&&(this._animation.stop(),(_=this.stopTimeline)==null||_.call(this)),(C=this.keyframeResolver)==null||C.cancel()},this.createdAt=ys.now();const v={autoplay:s,delay:n,type:i,repeat:l,repeatDelay:c,repeatType:u,name:f,motionValue:p,element:g,...y},j=(g==null?void 0:g.KeyframeResolver)||Vf;this.keyframeResolver=new j(h,(_,C,R)=>this.onKeyframesResolved(_,C,v,!R),f,p,g),(N=this.keyframeResolver)==null||N.scheduleResolve()}onKeyframesResolved(s,n,i,l){this.keyframeResolver=void 0;const{name:c,type:u,velocity:h,delay:f,isHandoff:p,onUpdate:g}=i;this.resolvedAt=ys.now(),H4(s,c,u,h)||((za.instantAnimations||!f)&&(g==null||g(Lf(s,i,n))),s[0]=s[s.length-1],Fm(i),i.repeat=0);const v={startTime:l?this.resolvedAt?this.resolvedAt-this.createdAt>K4?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...i,keyframes:s},j=!p&&X4(v)?new F4({...v,element:v.motionValue.owner.current}):new $f(v);j.finished.then(()=>this.notifyFinished()).catch(Vs),this.pendingTimeline&&(this.stopTimeline=j.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=j}get finished(){return this._animation?this.animation.finished:this._finished}then(s,n){return this.finished.finally(s).then(()=>{})}get animation(){var s;return this._animation||((s=this.keyframeResolver)==null||s.resume(),D4()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(s){this.animation.time=s}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(s){this.animation.speed=s}get startTime(){return this.animation.startTime}attachTimeline(s){return this._animation?this.stopTimeline=this.animation.attachTimeline(s):this.pendingTimeline=s,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var s;this._animation&&this.animation.cancel(),(s=this.keyframeResolver)==null||s.cancel()}}const Q4=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Z4(t){const s=Q4.exec(t);if(!s)return[,];const[,n,i,l]=s;return[`--${n??i}`,l]}function Fj(t,s,n=1){const[i,l]=Z4(t);if(!i)return;const c=window.getComputedStyle(s).getPropertyValue(i);if(c){const u=c.trim();return uj(u)?parseFloat(u):u}return Df(l)?Fj(l,s,n+1):l}function Uf(t,s){return(t==null?void 0:t[s])??(t==null?void 0:t.default)??t}const Ij=new Set(["width","height","top","left","right","bottom",...Ei]),J4={test:t=>t==="auto",parse:t=>t},Hj=t=>s=>s.test(t),Gj=[Ti,Le,ua,mn,IT,FT,J4],Jy=t=>Gj.find(Hj(t));function eE(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||mj(t):!0}const tE=new Set(["brightness","contrast","saturate","opacity"]);function sE(t){const[s,n]=t.slice(0,-1).split("(");if(s==="drop-shadow")return t;const[i]=n.match(Of)||[];if(!i)return t;const l=n.replace(i,"");let c=tE.has(s)?1:0;return i!==n&&(c*=100),s+"("+c+l+")"}const aE=/\b([a-z-]*)\(.*?\)/gu,Im={...xn,getAnimatableNone:t=>{const s=t.match(aE);return s?s.map(sE).join(" "):t}},eb={...Ti,transform:Math.round},nE={rotate:mn,rotateX:mn,rotateY:mn,rotateZ:mn,scale:Dc,scaleX:Dc,scaleY:Dc,scaleZ:Dc,skew:mn,skewX:mn,skewY:mn,distance:Le,translateX:Le,translateY:Le,translateZ:Le,x:Le,y:Le,z:Le,perspective:Le,transformPerspective:Le,opacity:Ko,originX:Uy,originY:Uy,originZ:Le},qf={borderWidth:Le,borderTopWidth:Le,borderRightWidth:Le,borderBottomWidth:Le,borderLeftWidth:Le,borderRadius:Le,radius:Le,borderTopLeftRadius:Le,borderTopRightRadius:Le,borderBottomRightRadius:Le,borderBottomLeftRadius:Le,width:Le,maxWidth:Le,height:Le,maxHeight:Le,top:Le,right:Le,bottom:Le,left:Le,padding:Le,paddingTop:Le,paddingRight:Le,paddingBottom:Le,paddingLeft:Le,margin:Le,marginTop:Le,marginRight:Le,marginBottom:Le,marginLeft:Le,backgroundPositionX:Le,backgroundPositionY:Le,...nE,zIndex:eb,fillOpacity:Ko,strokeOpacity:Ko,numOctaves:eb},rE={...qf,color:Ot,backgroundColor:Ot,outlineColor:Ot,fill:Ot,stroke:Ot,borderColor:Ot,borderTopColor:Ot,borderRightColor:Ot,borderBottomColor:Ot,borderLeftColor:Ot,filter:Im,WebkitFilter:Im},Yj=t=>rE[t];function Xj(t,s){let n=Yj(t);return n!==Im&&(n=xn),n.getAnimatableNone?n.getAnimatableNone(s):void 0}const iE=new Set(["auto","none","0"]);function oE(t,s,n){let i=0,l;for(;i<t.length&&!l;){const c=t[i];typeof c=="string"&&!iE.has(c)&&Wo(c).values.length&&(l=t[i]),i++}if(l&&n)for(const c of s)t[c]=Xj(n,l)}class lE extends Vf{constructor(s,n,i,l,c){super(s,n,i,l,c,!0)}readKeyframes(){const{unresolvedKeyframes:s,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let f=0;f<s.length;f++){let p=s[f];if(typeof p=="string"&&(p=p.trim(),Df(p))){const g=Fj(p,n.current);g!==void 0&&(s[f]=g),f===s.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!Ij.has(i)||s.length!==2)return;const[l,c]=s,u=Jy(l),h=Jy(c);if(u!==h)if(Ky(u)&&Ky(h))for(let f=0;f<s.length;f++){const p=s[f];typeof p=="string"&&(s[f]=parseFloat(p))}else Wn[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:s,name:n}=this,i=[];for(let l=0;l<s.length;l++)(s[l]===null||eE(s[l]))&&i.push(l);i.length&&oE(s,i,n)}measureInitialState(){const{element:s,unresolvedKeyframes:n,name:i}=this;if(!s||!s.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Wn[i](s.measureViewportBox(),window.getComputedStyle(s.current)),n[0]=this.measuredOrigin;const l=n[n.length-1];l!==void 0&&s.getValue(i,l).jump(l,!1)}measureEndState(){var h;const{element:s,name:n,unresolvedKeyframes:i}=this;if(!s||!s.current)return;const l=s.getValue(n);l&&l.jump(this.measuredOrigin,!1);const c=i.length-1,u=i[c];i[c]=Wn[n](s.measureViewportBox(),window.getComputedStyle(s.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),(h=this.removedTransforms)!=null&&h.length&&this.removedTransforms.forEach(([f,p])=>{s.getValue(f).set(p)}),this.resolveNoneKeyframes()}}function cE(t,s,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let i=document;const l=(n==null?void 0:n[t])??i.querySelectorAll(t);return l?Array.from(l):[]}return Array.from(t)}const Kj=(t,s)=>s&&typeof t=="number"?s.transform(t):t;function Wj(t){return hj(t)&&"offsetHeight"in t}const tb=30,dE=t=>!isNaN(parseFloat(t));class uE{constructor(s,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{var c;const l=ys.now();if(this.updatedAt!==l&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((c=this.events.change)==null||c.notify(this.current),this.dependents))for(const u of this.dependents)u.dirty()},this.hasAnimated=!1,this.setCurrent(s),this.owner=n.owner}setCurrent(s){this.current=s,this.updatedAt=ys.now(),this.canTrackVelocity===null&&s!==void 0&&(this.canTrackVelocity=dE(this.current))}setPrevFrameValue(s=this.current){this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt}onChange(s){return this.on("change",s)}on(s,n){this.events[s]||(this.events[s]=new Ef);const i=this.events[s].add(n);return s==="change"?()=>{i(),pt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const s in this.events)this.events[s].clear()}attach(s,n){this.passiveEffect=s,this.stopPassiveEffect=n}set(s){this.passiveEffect?this.passiveEffect(s,this.updateAndNotify):this.updateAndNotify(s)}setWithVelocity(s,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt-i}jump(s,n=!0){this.updateAndNotify(s),this.prev=s,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var s;(s=this.events.change)==null||s.notify(this.current)}addDependent(s){this.dependents||(this.dependents=new Set),this.dependents.add(s)}removeDependent(s){this.dependents&&this.dependents.delete(s)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const s=ys.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||s-this.updatedAt>tb)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,tb);return fj(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(s){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=s(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var s,n;(s=this.dependents)==null||s.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function bi(t,s){return new uE(t,s)}const{schedule:Ff}=Sj(queueMicrotask,!1),Hs={x:!1,y:!1};function Qj(){return Hs.x||Hs.y}function hE(t){return t==="x"||t==="y"?Hs[t]?null:(Hs[t]=!0,()=>{Hs[t]=!1}):Hs.x||Hs.y?null:(Hs.x=Hs.y=!0,()=>{Hs.x=Hs.y=!1})}function Zj(t,s){const n=cE(t),i=new AbortController,l={passive:!0,...s,signal:i.signal};return[n,l,()=>i.abort()]}function sb(t){return!(t.pointerType==="touch"||Qj())}function mE(t,s,n={}){const[i,l,c]=Zj(t,n),u=h=>{if(!sb(h))return;const{target:f}=h,p=s(f,h);if(typeof p!="function"||!f)return;const g=y=>{sb(y)&&(p(y),f.removeEventListener("pointerleave",g))};f.addEventListener("pointerleave",g,l)};return i.forEach(h=>{h.addEventListener("pointerenter",u,l)}),c}const Jj=(t,s)=>s?t===s?!0:Jj(t,s.parentElement):!1,If=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,fE=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function pE(t){return fE.has(t.tagName)||t.tabIndex!==-1}const Bc=new WeakSet;function ab(t){return s=>{s.key==="Enter"&&t(s)}}function rm(t,s){t.dispatchEvent(new PointerEvent("pointer"+s,{isPrimary:!0,bubbles:!0}))}const gE=(t,s)=>{const n=t.currentTarget;if(!n)return;const i=ab(()=>{if(Bc.has(n))return;rm(n,"down");const l=ab(()=>{rm(n,"up")}),c=()=>rm(n,"cancel");n.addEventListener("keyup",l,s),n.addEventListener("blur",c,s)});n.addEventListener("keydown",i,s),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),s)};function nb(t){return If(t)&&!Qj()}function xE(t,s,n={}){const[i,l,c]=Zj(t,n),u=h=>{const f=h.currentTarget;if(!nb(h))return;Bc.add(f);const p=s(f,h),g=(j,N)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",v),Bc.has(f)&&Bc.delete(f),nb(j)&&typeof p=="function"&&p(j,{success:N})},y=j=>{g(j,f===window||f===document||n.useGlobalTarget||Jj(f,j.target))},v=j=>{g(j,!1)};window.addEventListener("pointerup",y,l),window.addEventListener("pointercancel",v,l)};return i.forEach(h=>{(n.useGlobalTarget?window:h).addEventListener("pointerdown",u,l),Wj(h)&&(h.addEventListener("focus",p=>gE(p,l)),!pE(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),c}function ew(t){return hj(t)&&"ownerSVGElement"in t}function yE(t){return ew(t)&&t.tagName==="svg"}const ss=t=>!!(t&&t.getVelocity),bE=[...Gj,Ot,xn],vE=t=>bE.find(Hj(t)),Hf=b.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class jE extends b.Component{getSnapshotBeforeUpdate(s){const n=this.props.childRef.current;if(n&&s.isPresent&&!this.props.isPresent){const i=n.offsetParent,l=Wj(i)&&i.offsetWidth||0,c=this.props.sizeRef.current;c.height=n.offsetHeight||0,c.width=n.offsetWidth||0,c.top=n.offsetTop,c.left=n.offsetLeft,c.right=l-c.width-c.left}return null}componentDidUpdate(){}render(){return this.props.children}}function wE({children:t,isPresent:s,anchorX:n,root:i}){const l=b.useId(),c=b.useRef(null),u=b.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=b.useContext(Hf);return b.useInsertionEffect(()=>{const{width:f,height:p,top:g,left:y,right:v}=u.current;if(s||!c.current||!f||!p)return;const j=n==="left"?`left: ${y}`:`right: ${v}`;c.current.dataset.motionPopId=l;const N=document.createElement("style");h&&(N.nonce=h);const _=i??document.head;return _.appendChild(N),N.sheet&&N.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${p}px !important;
            ${j}px !important;
            top: ${g}px !important;
          }
        `),()=>{_.contains(N)&&_.removeChild(N)}},[s]),e.jsx(jE,{isPresent:s,childRef:c,sizeRef:u,children:b.cloneElement(t,{ref:c})})}const _E=({children:t,initial:s,isPresent:n,onExitComplete:i,custom:l,presenceAffectsLayout:c,mode:u,anchorX:h,root:f})=>{const p=wf(NE),g=b.useId();let y=!0,v=b.useMemo(()=>(y=!1,{id:g,initial:s,isPresent:n,custom:l,onExitComplete:j=>{p.set(j,!0);for(const N of p.values())if(!N)return;i&&i()},register:j=>(p.set(j,!1),()=>p.delete(j))}),[n,p,i]);return c&&y&&(v={...v}),b.useMemo(()=>{p.forEach((j,N)=>p.set(N,!1))},[n]),b.useEffect(()=>{!n&&!p.size&&i&&i()},[n]),u==="popLayout"&&(t=e.jsx(wE,{isPresent:n,anchorX:h,root:f,children:t})),e.jsx(fd.Provider,{value:v,children:t})};function NE(){return new Map}function tw(t=!0){const s=b.useContext(fd);if(s===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:l}=s,c=b.useId();b.useEffect(()=>{if(t)return l(c)},[t]);const u=b.useCallback(()=>t&&i&&i(c),[c,i,t]);return!n&&i?[!1,u]:[!0]}const Oc=t=>t.key||"";function rb(t){const s=[];return b.Children.forEach(t,n=>{b.isValidElement(n)&&s.push(n)}),s}const nr=({children:t,custom:s,initial:n=!0,onExitComplete:i,presenceAffectsLayout:l=!0,mode:c="sync",propagate:u=!1,anchorX:h="left",root:f})=>{const[p,g]=tw(u),y=b.useMemo(()=>rb(t),[t]),v=u&&!p?[]:y.map(Oc),j=b.useRef(!0),N=b.useRef(y),_=wf(()=>new Map),[C,R]=b.useState(y),[S,k]=b.useState(y);dj(()=>{j.current=!1,N.current=y;for(let M=0;M<S.length;M++){const z=Oc(S[M]);v.includes(z)?_.delete(z):_.get(z)!==!0&&_.set(z,!1)}},[S,v.length,v.join("-")]);const E=[];if(y!==C){let M=[...y];for(let z=0;z<S.length;z++){const U=S[z],H=Oc(U);v.includes(H)||(M.splice(z,0,U),E.push(U))}return c==="wait"&&E.length&&(M=E),k(rb(M)),R(y),null}const{forceRender:w}=b.useContext(jf);return e.jsx(e.Fragment,{children:S.map(M=>{const z=Oc(M),U=u&&!p?!1:y===S||v.includes(z),H=()=>{if(_.has(z))_.set(z,!0);else return;let V=!0;_.forEach(Q=>{Q||(V=!1)}),V&&(w==null||w(),k(N.current),u&&(g==null||g()),i&&i())};return e.jsx(_E,{isPresent:U,initial:!j.current||n?void 0:!1,custom:s,presenceAffectsLayout:l,mode:c,root:f,onExitComplete:U?void 0:H,anchorX:h,children:M},z)})})},sw=b.createContext({strict:!1}),ib={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},vi={};for(const t in ib)vi[t]={isEnabled:s=>ib[t].some(n=>!!s[n])};function SE(t){for(const s in t)vi[s]={...vi[s],...t[s]}}const CE=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Qc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||CE.has(t)}let aw=t=>!Qc(t);function TE(t){typeof t=="function"&&(aw=s=>s.startsWith("on")?!Qc(s):t(s))}try{TE(require("@emotion/is-prop-valid").default)}catch{}function EE(t,s,n){const i={};for(const l in t)l==="values"&&typeof t.values=="object"||(aw(l)||n===!0&&Qc(l)||!s&&!Qc(l)||t.draggable&&l.startsWith("onDrag"))&&(i[l]=t[l]);return i}const pd=b.createContext({});function gd(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Qo(t){return typeof t=="string"||Array.isArray(t)}const Gf=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Yf=["initial",...Gf];function xd(t){return gd(t.animate)||Yf.some(s=>Qo(t[s]))}function nw(t){return!!(xd(t)||t.variants)}function AE(t,s){if(xd(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Qo(n)?n:void 0,animate:Qo(i)?i:void 0}}return t.inherit!==!1?s:{}}function kE(t){const{initial:s,animate:n}=AE(t,b.useContext(pd));return b.useMemo(()=>({initial:s,animate:n}),[ob(s),ob(n)])}function ob(t){return Array.isArray(t)?t.join(" "):t}const Zo={};function ME(t){for(const s in t)Zo[s]=t[s],Mf(s)&&(Zo[s].isCSSVariable=!0)}function rw(t,{layout:s,layoutId:n}){return Ai.has(t)||t.startsWith("origin")||(s||n!==void 0)&&(!!Zo[t]||t==="opacity")}const DE={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},OE=Ei.length;function RE(t,s,n){let i="",l=!0;for(let c=0;c<OE;c++){const u=Ei[c],h=t[u];if(h===void 0)continue;let f=!0;if(typeof h=="number"?f=h===(u.startsWith("scale")?1:0):f=parseFloat(h)===0,!f||n){const p=Kj(h,qf[u]);if(!f){l=!1;const g=DE[u]||u;i+=`${g}(${p}) `}n&&(s[u]=p)}}return i=i.trim(),n?i=n(s,l?"":i):l&&(i="none"),i}function Xf(t,s,n){const{style:i,vars:l,transformOrigin:c}=t;let u=!1,h=!1;for(const f in s){const p=s[f];if(Ai.has(f)){u=!0;continue}else if(Mf(f)){l[f]=p;continue}else{const g=Kj(p,qf[f]);f.startsWith("origin")?(h=!0,c[f]=g):i[f]=g}}if(s.transform||(u||n?i.transform=RE(s,t.transform,n):i.transform&&(i.transform="none")),h){const{originX:f="50%",originY:p="50%",originZ:g=0}=c;i.transformOrigin=`${f} ${p} ${g}`}}const Kf=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function iw(t,s,n){for(const i in s)!ss(s[i])&&!rw(i,n)&&(t[i]=s[i])}function PE({transformTemplate:t},s){return b.useMemo(()=>{const n=Kf();return Xf(n,s,t),Object.assign({},n.vars,n.style)},[s])}function zE(t,s){const n=t.style||{},i={};return iw(i,n,t),Object.assign(i,PE(t,s)),i}function LE(t,s){const n={},i=zE(t,s);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}const BE={offset:"stroke-dashoffset",array:"stroke-dasharray"},$E={offset:"strokeDashoffset",array:"strokeDasharray"};function VE(t,s,n=1,i=0,l=!0){t.pathLength=1;const c=l?BE:$E;t[c.offset]=Le.transform(-i);const u=Le.transform(s),h=Le.transform(n);t[c.array]=`${u} ${h}`}function ow(t,{attrX:s,attrY:n,attrScale:i,pathLength:l,pathSpacing:c=1,pathOffset:u=0,...h},f,p,g){if(Xf(t,h,p),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:v}=t;y.transform&&(v.transform=y.transform,delete y.transform),(v.transform||y.transformOrigin)&&(v.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),v.transform&&(v.transformBox=(g==null?void 0:g.transformBox)??"fill-box",delete y.transformBox),s!==void 0&&(y.x=s),n!==void 0&&(y.y=n),i!==void 0&&(y.scale=i),l!==void 0&&VE(y,l,c,u,!1)}const lw=()=>({...Kf(),attrs:{}}),cw=t=>typeof t=="string"&&t.toLowerCase()==="svg";function UE(t,s,n,i){const l=b.useMemo(()=>{const c=lw();return ow(c,s,cw(i),t.transformTemplate,t.style),{...c.attrs,style:{...c.style}}},[s]);if(t.style){const c={};iw(c,t.style,t),l.style={...c,...l.style}}return l}const qE=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Wf(t){return typeof t!="string"||t.includes("-")?!1:!!(qE.indexOf(t)>-1||/[A-Z]/u.test(t))}function FE(t,s,n,{latestValues:i},l,c=!1){const h=(Wf(t)?UE:LE)(s,i,l,t),f=EE(s,typeof t=="string",c),p=t!==b.Fragment?{...f,...h,ref:n}:{},{children:g}=s,y=b.useMemo(()=>ss(g)?g.get():g,[g]);return b.createElement(t,{...p,children:y})}function lb(t){const s=[{},{}];return t==null||t.values.forEach((n,i)=>{s[0][i]=n.get(),s[1][i]=n.getVelocity()}),s}function Qf(t,s,n,i){if(typeof s=="function"){const[l,c]=lb(i);s=s(n!==void 0?n:t.custom,l,c)}if(typeof s=="string"&&(s=t.variants&&t.variants[s]),typeof s=="function"){const[l,c]=lb(i);s=s(n!==void 0?n:t.custom,l,c)}return s}function $c(t){return ss(t)?t.get():t}function IE({scrapeMotionValuesFromProps:t,createRenderState:s},n,i,l){return{latestValues:HE(n,i,l,t),renderState:s()}}function HE(t,s,n,i){const l={},c=i(t,{});for(const v in c)l[v]=$c(c[v]);let{initial:u,animate:h}=t;const f=xd(t),p=nw(t);s&&p&&!f&&t.inherit!==!1&&(u===void 0&&(u=s.initial),h===void 0&&(h=s.animate));let g=n?n.initial===!1:!1;g=g||u===!1;const y=g?h:u;if(y&&typeof y!="boolean"&&!gd(y)){const v=Array.isArray(y)?y:[y];for(let j=0;j<v.length;j++){const N=Qf(t,v[j]);if(N){const{transitionEnd:_,transition:C,...R}=N;for(const S in R){let k=R[S];if(Array.isArray(k)){const E=g?k.length-1:0;k=k[E]}k!==null&&(l[S]=k)}for(const S in _)l[S]=_[S]}}}return l}const dw=t=>(s,n)=>{const i=b.useContext(pd),l=b.useContext(fd),c=()=>IE(t,s,i,l);return n?c():wf(c)};function Zf(t,s,n){var c;const{style:i}=t,l={};for(const u in i)(ss(i[u])||s.style&&ss(s.style[u])||rw(u,t)||((c=n==null?void 0:n.getValue(u))==null?void 0:c.liveStyle)!==void 0)&&(l[u]=i[u]);return l}const GE=dw({scrapeMotionValuesFromProps:Zf,createRenderState:Kf});function uw(t,s,n){const i=Zf(t,s,n);for(const l in t)if(ss(t[l])||ss(s[l])){const c=Ei.indexOf(l)!==-1?"attr"+l.charAt(0).toUpperCase()+l.substring(1):l;i[c]=t[l]}return i}const YE=dw({scrapeMotionValuesFromProps:uw,createRenderState:lw}),XE=Symbol.for("motionComponentSymbol");function hi(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function KE(t,s,n){return b.useCallback(i=>{i&&t.onMount&&t.onMount(i),s&&(i?s.mount(i):s.unmount()),n&&(typeof n=="function"?n(i):hi(n)&&(n.current=i))},[s])}const Jf=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),WE="framerAppearId",hw="data-"+Jf(WE),mw=b.createContext({});function QE(t,s,n,i,l){var _,C;const{visualElement:c}=b.useContext(pd),u=b.useContext(sw),h=b.useContext(fd),f=b.useContext(Hf).reducedMotion,p=b.useRef(null);i=i||u.renderer,!p.current&&i&&(p.current=i(t,{visualState:s,parent:c,props:n,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:f}));const g=p.current,y=b.useContext(mw);g&&!g.projection&&l&&(g.type==="html"||g.type==="svg")&&ZE(p.current,n,l,y);const v=b.useRef(!1);b.useInsertionEffect(()=>{g&&v.current&&g.update(n,h)});const j=n[hw],N=b.useRef(!!j&&!((_=window.MotionHandoffIsComplete)!=null&&_.call(window,j))&&((C=window.MotionHasOptimisedAnimation)==null?void 0:C.call(window,j)));return dj(()=>{g&&(v.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),N.current&&g.animationState&&g.animationState.animateChanges())}),b.useEffect(()=>{g&&(!N.current&&g.animationState&&g.animationState.animateChanges(),N.current&&(queueMicrotask(()=>{var R;(R=window.MotionHandoffMarkAsComplete)==null||R.call(window,j)}),N.current=!1),g.enteringChildren=void 0)}),g}function ZE(t,s,n,i){const{layoutId:l,layout:c,drag:u,dragConstraints:h,layoutScroll:f,layoutRoot:p,layoutCrossfade:g}=s;t.projection=new n(t.latestValues,s["data-framer-portal-id"]?void 0:fw(t.parent)),t.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:!!u||h&&hi(h),visualElement:t,animationType:typeof c=="string"?c:"both",initialPromotionConfig:i,crossfade:g,layoutScroll:f,layoutRoot:p})}function fw(t){if(t)return t.options.allowProjection!==!1?t.projection:fw(t.parent)}function im(t,{forwardMotionProps:s=!1}={},n,i){n&&SE(n);const l=Wf(t)?YE:GE;function c(h,f){let p;const g={...b.useContext(Hf),...h,layoutId:JE(h)},{isStatic:y}=g,v=kE(h),j=l(h,y);if(!y&&_f){e6();const N=t6(g);p=N.MeasureLayout,v.visualElement=QE(t,j,g,i,N.ProjectionNode)}return e.jsxs(pd.Provider,{value:v,children:[p&&v.visualElement?e.jsx(p,{visualElement:v.visualElement,...g}):null,FE(t,h,KE(j,v.visualElement,f),j,y,s)]})}c.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const u=b.forwardRef(c);return u[XE]=t,u}function JE({layoutId:t}){const s=b.useContext(jf).id;return s&&t!==void 0?s+"-"+t:t}function e6(t,s){b.useContext(sw).strict}function t6(t){const{drag:s,layout:n}=vi;if(!s&&!n)return{};const i={...s,...n};return{MeasureLayout:s!=null&&s.isEnabled(t)||n!=null&&n.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function s6(t,s){if(typeof Proxy>"u")return im;const n=new Map,i=(c,u)=>im(c,u,t,s),l=(c,u)=>i(c,u);return new Proxy(l,{get:(c,u)=>u==="create"?i:(n.has(u)||n.set(u,im(u,void 0,t,s)),n.get(u))})}function pw({top:t,left:s,right:n,bottom:i}){return{x:{min:s,max:n},y:{min:t,max:i}}}function a6({x:t,y:s}){return{top:s.min,right:t.max,bottom:s.max,left:t.min}}function n6(t,s){if(!s)return t;const n=s({x:t.left,y:t.top}),i=s({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function om(t){return t===void 0||t===1}function Hm({scale:t,scaleX:s,scaleY:n}){return!om(t)||!om(s)||!om(n)}function In(t){return Hm(t)||gw(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function gw(t){return cb(t.x)||cb(t.y)}function cb(t){return t&&t!=="0%"}function Zc(t,s,n){const i=t-n,l=s*i;return n+l}function db(t,s,n,i,l){return l!==void 0&&(t=Zc(t,l,i)),Zc(t,n,i)+s}function Gm(t,s=0,n=1,i,l){t.min=db(t.min,s,n,i,l),t.max=db(t.max,s,n,i,l)}function xw(t,{x:s,y:n}){Gm(t.x,s.translate,s.scale,s.originPoint),Gm(t.y,n.translate,n.scale,n.originPoint)}const ub=.999999999999,hb=1.0000000000001;function r6(t,s,n,i=!1){const l=n.length;if(!l)return;s.x=s.y=1;let c,u;for(let h=0;h<l;h++){c=n[h],u=c.projectionDelta;const{visualElement:f}=c.options;f&&f.props.style&&f.props.style.display==="contents"||(i&&c.options.layoutScroll&&c.scroll&&c!==c.root&&fi(t,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),u&&(s.x*=u.x.scale,s.y*=u.y.scale,xw(t,u)),i&&In(c.latestValues)&&fi(t,c.latestValues))}s.x<hb&&s.x>ub&&(s.x=1),s.y<hb&&s.y>ub&&(s.y=1)}function mi(t,s){t.min=t.min+s,t.max=t.max+s}function mb(t,s,n,i,l=.5){const c=bt(t.min,t.max,l);Gm(t,s,n,c,i)}function fi(t,s){mb(t.x,s.x,s.scaleX,s.scale,s.originX),mb(t.y,s.y,s.scaleY,s.scale,s.originY)}function yw(t,s){return pw(n6(t.getBoundingClientRect(),s))}function i6(t,s,n){const i=yw(t,n),{scroll:l}=s;return l&&(mi(i.x,l.offset.x),mi(i.y,l.offset.y)),i}const fb=()=>({translate:0,scale:1,origin:0,originPoint:0}),pi=()=>({x:fb(),y:fb()}),pb=()=>({min:0,max:0}),Tt=()=>({x:pb(),y:pb()}),Ym={current:null},bw={current:!1};function o6(){if(bw.current=!0,!!_f)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),s=()=>Ym.current=t.matches;t.addEventListener("change",s),s()}else Ym.current=!1}const l6=new WeakMap;function c6(t,s,n){for(const i in s){const l=s[i],c=n[i];if(ss(l))t.addValue(i,l);else if(ss(c))t.addValue(i,bi(l,{owner:t}));else if(c!==l)if(t.hasValue(i)){const u=t.getValue(i);u.liveStyle===!0?u.jump(l):u.hasAnimated||u.set(l)}else{const u=t.getStaticValue(i);t.addValue(i,bi(u!==void 0?u:l,{owner:t}))}}for(const i in n)s[i]===void 0&&t.removeValue(i);return s}const gb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class d6{scrapeMotionValuesFromProps(s,n,i){return{}}constructor({parent:s,props:n,presenceContext:i,reducedMotionConfig:l,blockInitialAnimation:c,visualState:u},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Vf,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=ys.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,pt.render(this.render,!1,!0))};const{latestValues:f,renderState:p}=u;this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=p,this.parent=s,this.props=n,this.presenceContext=i,this.depth=s?s.depth+1:0,this.reducedMotionConfig=l,this.options=h,this.blockInitialAnimation=!!c,this.isControllingVariants=xd(n),this.isVariantNode=nw(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(s&&s.current);const{willChange:g,...y}=this.scrapeMotionValuesFromProps(n,{},this);for(const v in y){const j=y[v];f[v]!==void 0&&ss(j)&&j.set(f[v])}}mount(s){var n;this.current=s,l6.set(s,this),this.projection&&!this.projection.instance&&this.projection.mount(s),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,l)=>this.bindToMotionValue(l,i)),bw.current||o6(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ym.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var s;this.projection&&this.projection.unmount(),gn(this.notifyUpdate),gn(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(s=this.parent)==null||s.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const i=this.features[n];i&&(i.unmount(),i.isMounted=!1)}this.current=null}addChild(s){this.children.add(s),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(s)}removeChild(s){this.children.delete(s),this.enteringChildren&&this.enteringChildren.delete(s)}bindToMotionValue(s,n){this.valueSubscriptions.has(s)&&this.valueSubscriptions.get(s)();const i=Ai.has(s);i&&this.onBindTransform&&this.onBindTransform();const l=n.on("change",u=>{this.latestValues[s]=u,this.props.onUpdate&&pt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,s,n)),this.valueSubscriptions.set(s,()=>{l(),c&&c(),n.owner&&n.stop()})}sortNodePosition(s){return!this.current||!this.sortInstanceNodePosition||this.type!==s.type?0:this.sortInstanceNodePosition(this.current,s.current)}updateFeatures(){let s="animation";for(s in vi){const n=vi[s];if(!n)continue;const{isEnabled:i,Feature:l}=n;if(!this.features[s]&&l&&i(this.props)&&(this.features[s]=new l(this)),this.features[s]){const c=this.features[s];c.isMounted?c.update():(c.mount(),c.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Tt()}getStaticValue(s){return this.latestValues[s]}setStaticValue(s,n){this.latestValues[s]=n}update(s,n){(s.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=s,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<gb.length;i++){const l=gb[i];this.propEventSubscriptions[l]&&(this.propEventSubscriptions[l](),delete this.propEventSubscriptions[l]);const c="on"+l,u=s[c];u&&(this.propEventSubscriptions[l]=this.on(l,u))}this.prevMotionValues=c6(this,this.scrapeMotionValuesFromProps(s,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(s){return this.props.variants?this.props.variants[s]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(s){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(s),()=>n.variantChildren.delete(s)}addValue(s,n){const i=this.values.get(s);n!==i&&(i&&this.removeValue(s),this.bindToMotionValue(s,n),this.values.set(s,n),this.latestValues[s]=n.get())}removeValue(s){this.values.delete(s);const n=this.valueSubscriptions.get(s);n&&(n(),this.valueSubscriptions.delete(s)),delete this.latestValues[s],this.removeValueFromRenderState(s,this.renderState)}hasValue(s){return this.values.has(s)}getValue(s,n){if(this.props.values&&this.props.values[s])return this.props.values[s];let i=this.values.get(s);return i===void 0&&n!==void 0&&(i=bi(n===null?void 0:n,{owner:this}),this.addValue(s,i)),i}readValue(s,n){let i=this.latestValues[s]!==void 0||!this.current?this.latestValues[s]:this.getBaseTargetFromProps(this.props,s)??this.readValueFromInstance(this.current,s,this.options);return i!=null&&(typeof i=="string"&&(uj(i)||mj(i))?i=parseFloat(i):!vE(i)&&xn.test(n)&&(i=Xj(s,n)),this.setBaseTarget(s,ss(i)?i.get():i)),ss(i)?i.get():i}setBaseTarget(s,n){this.baseTarget[s]=n}getBaseTarget(s){var c;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const u=Qf(this.props,n,(c=this.presenceContext)==null?void 0:c.custom);u&&(i=u[s])}if(n&&i!==void 0)return i;const l=this.getBaseTargetFromProps(this.props,s);return l!==void 0&&!ss(l)?l:this.initialValues[s]!==void 0&&i===void 0?void 0:this.baseTarget[s]}on(s,n){return this.events[s]||(this.events[s]=new Ef),this.events[s].add(n)}notify(s,...n){this.events[s]&&this.events[s].notify(...n)}scheduleRenderMicrotask(){Ff.render(this.render)}}class vw extends d6{constructor(){super(...arguments),this.KeyframeResolver=lE}sortInstanceNodePosition(s,n){return s.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(s,n){return s.style?s.style[n]:void 0}removeValueFromRenderState(s,{vars:n,style:i}){delete n[s],delete i[s]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:s}=this.props;ss(s)&&(this.childSubscription=s.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function jw(t,{style:s,vars:n},i,l){const c=t.style;let u;for(u in s)c[u]=s[u];l==null||l.applyProjectionStyles(c,i);for(u in n)c.setProperty(u,n[u])}function u6(t){return window.getComputedStyle(t)}class h6 extends vw{constructor(){super(...arguments),this.type="html",this.renderInstance=jw}readValueFromInstance(s,n){var i;if(Ai.has(n))return(i=this.projection)!=null&&i.isProjecting?Bm(n):T4(s,n);{const l=u6(s),c=(Mf(n)?l.getPropertyValue(n):l[n])||0;return typeof c=="string"?c.trim():c}}measureInstanceViewportBox(s,{transformPagePoint:n}){return yw(s,n)}build(s,n,i){Xf(s,n,i.transformTemplate)}scrapeMotionValuesFromProps(s,n,i){return Zf(s,n,i)}}const ww=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function m6(t,s,n,i){jw(t,s,void 0,i);for(const l in s.attrs)t.setAttribute(ww.has(l)?l:Jf(l),s.attrs[l])}class f6 extends vw{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Tt}getBaseTargetFromProps(s,n){return s[n]}readValueFromInstance(s,n){if(Ai.has(n)){const i=Yj(n);return i&&i.default||0}return n=ww.has(n)?n:Jf(n),s.getAttribute(n)}scrapeMotionValuesFromProps(s,n,i){return uw(s,n,i)}build(s,n,i){ow(s,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(s,n,i,l){m6(s,n,i,l)}mount(s){this.isSVGTag=cw(s.tagName),super.mount(s)}}const p6=(t,s)=>Wf(t)?new f6(s):new h6(s,{allowProjection:t!==b.Fragment});function gi(t,s,n){const i=t.getProps();return Qf(i,s,n!==void 0?n:i.custom,t)}const Xm=t=>Array.isArray(t);function g6(t,s,n){t.hasValue(s)?t.getValue(s).set(n):t.addValue(s,bi(n))}function x6(t){return Xm(t)?t[t.length-1]||0:t}function y6(t,s){const n=gi(t,s);let{transitionEnd:i={},transition:l={},...c}=n||{};c={...c,...i};for(const u in c){const h=x6(c[u]);g6(t,u,h)}}function b6(t){return!!(ss(t)&&t.add)}function Km(t,s){const n=t.getValue("willChange");if(b6(n))return n.add(s);if(!n&&za.WillChange){const i=new za.WillChange("auto");t.addValue("willChange",i),i.add(s)}}function _w(t){return t.props[hw]}const v6=t=>t!==null;function j6(t,{repeat:s,repeatType:n="loop"},i){const l=t.filter(v6),c=s&&n!=="loop"&&s%2===1?0:l.length-1;return l[c]}const w6={type:"spring",stiffness:500,damping:25,restSpeed:10},_6=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),N6={type:"keyframes",duration:.8},S6={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},C6=(t,{keyframes:s})=>s.length>2?N6:Ai.has(t)?t.startsWith("scale")?_6(s[1]):w6:S6;function T6({when:t,delay:s,delayChildren:n,staggerChildren:i,staggerDirection:l,repeat:c,repeatType:u,repeatDelay:h,from:f,elapsed:p,...g}){return!!Object.keys(g).length}const e0=(t,s,n,i={},l,c)=>u=>{const h=Uf(i,t)||{},f=h.delay||i.delay||0;let{elapsed:p=0}=i;p=p-ca(f);const g={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:s.getVelocity(),...h,delay:-p,onUpdate:v=>{s.set(v),h.onUpdate&&h.onUpdate(v)},onComplete:()=>{u(),h.onComplete&&h.onComplete()},name:t,motionValue:s,element:c?void 0:l};T6(h)||Object.assign(g,C6(t,g)),g.duration&&(g.duration=ca(g.duration)),g.repeatDelay&&(g.repeatDelay=ca(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let y=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(Fm(g),g.delay===0&&(y=!0)),(za.instantAnimations||za.skipAnimations)&&(y=!0,Fm(g),g.delay=0),g.allowFlatten=!h.type&&!h.ease,y&&!c&&s.get()!==void 0){const v=j6(g.keyframes,h);if(v!==void 0){pt.update(()=>{g.onUpdate(v),g.onComplete()});return}}return h.isSync?new $f(g):new W4(g)};function E6({protectedKeys:t,needsAnimating:s},n){const i=t.hasOwnProperty(n)&&s[n]!==!0;return s[n]=!1,i}function Nw(t,s,{delay:n=0,transitionOverride:i,type:l}={}){let{transition:c=t.getDefaultTransition(),transitionEnd:u,...h}=s;i&&(c=i);const f=[],p=l&&t.animationState&&t.animationState.getState()[l];for(const g in h){const y=t.getValue(g,t.latestValues[g]??null),v=h[g];if(v===void 0||p&&E6(p,g))continue;const j={delay:n,...Uf(c||{},g)},N=y.get();if(N!==void 0&&!y.isAnimating&&!Array.isArray(v)&&v===N&&!j.velocity)continue;let _=!1;if(window.MotionHandoffAnimation){const R=_w(t);if(R){const S=window.MotionHandoffAnimation(R,g,pt);S!==null&&(j.startTime=S,_=!0)}}Km(t,g),y.start(e0(g,y,v,t.shouldReduceMotion&&Ij.has(g)?{type:!1}:j,t,_));const C=y.animation;C&&f.push(C)}return u&&Promise.all(f).then(()=>{pt.update(()=>{u&&y6(t,u)})}),f}function Sw(t,s,n,i=0,l=1){const c=Array.from(t).sort((p,g)=>p.sortNodePosition(g)).indexOf(s),u=t.size,h=(u-1)*i;return typeof n=="function"?n(c,u):l===1?c*i:h-c*i}function Wm(t,s,n={}){var f;const i=gi(t,s,n.type==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);let{transition:l=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(l=n.transitionOverride);const c=i?()=>Promise.all(Nw(t,i,n)):()=>Promise.resolve(),u=t.variantChildren&&t.variantChildren.size?(p=0)=>{const{delayChildren:g=0,staggerChildren:y,staggerDirection:v}=l;return A6(t,s,p,g,y,v,n)}:()=>Promise.resolve(),{when:h}=l;if(h){const[p,g]=h==="beforeChildren"?[c,u]:[u,c];return p().then(()=>g())}else return Promise.all([c(),u(n.delay)])}function A6(t,s,n=0,i=0,l=0,c=1,u){const h=[];for(const f of t.variantChildren)f.notify("AnimationStart",s),h.push(Wm(f,s,{...u,delay:n+(typeof i=="function"?0:i)+Sw(t.variantChildren,f,i,l,c)}).then(()=>f.notify("AnimationComplete",s)));return Promise.all(h)}function k6(t,s,n={}){t.notify("AnimationStart",s);let i;if(Array.isArray(s)){const l=s.map(c=>Wm(t,c,n));i=Promise.all(l)}else if(typeof s=="string")i=Wm(t,s,n);else{const l=typeof s=="function"?gi(t,s,n.custom):s;i=Promise.all(Nw(t,l,n))}return i.then(()=>{t.notify("AnimationComplete",s)})}function Cw(t,s){if(!Array.isArray(s))return!1;const n=s.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(s[i]!==t[i])return!1;return!0}const M6=Yf.length;function Tw(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Tw(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const s={};for(let n=0;n<M6;n++){const i=Yf[n],l=t.props[i];(Qo(l)||l===!1)&&(s[i]=l)}return s}const D6=[...Gf].reverse(),O6=Gf.length;function R6(t){return s=>Promise.all(s.map(({animation:n,options:i})=>k6(t,n,i)))}function P6(t){let s=R6(t),n=xb(),i=!0;const l=f=>(p,g)=>{var v;const y=gi(t,g,f==="exit"?(v=t.presenceContext)==null?void 0:v.custom:void 0);if(y){const{transition:j,transitionEnd:N,..._}=y;p={...p,..._,...N}}return p};function c(f){s=f(t)}function u(f){const{props:p}=t,g=Tw(t.parent)||{},y=[],v=new Set;let j={},N=1/0;for(let C=0;C<O6;C++){const R=D6[C],S=n[R],k=p[R]!==void 0?p[R]:g[R],E=Qo(k),w=R===f?S.isActive:null;w===!1&&(N=C);let M=k===g[R]&&k!==p[R]&&E;if(M&&i&&t.manuallyAnimateOnMount&&(M=!1),S.protectedKeys={...j},!S.isActive&&w===null||!k&&!S.prevProp||gd(k)||typeof k=="boolean")continue;const z=z6(S.prevProp,k);let U=z||R===f&&S.isActive&&!M&&E||C>N&&E,H=!1;const V=Array.isArray(k)?k:[k];let Q=V.reduce(l(R),{});w===!1&&(Q={});const{prevResolvedValues:X={}}=S,re={...X,...Q},pe=P=>{U=!0,v.has(P)&&(H=!0,v.delete(P)),S.needsAnimating[P]=!0;const B=t.getValue(P);B&&(B.liveStyle=!1)};for(const P in re){const B=Q[P],K=X[P];if(j.hasOwnProperty(P))continue;let A=!1;Xm(B)&&Xm(K)?A=!Cw(B,K):A=B!==K,A?B!=null?pe(P):v.add(P):B!==void 0&&v.has(P)?pe(P):S.protectedKeys[P]=!0}S.prevProp=k,S.prevResolvedValues=Q,S.isActive&&(j={...j,...Q}),i&&t.blockInitialAnimation&&(U=!1);const $=M&&z;U&&(!$||H)&&y.push(...V.map(P=>{const B={type:R};if(typeof P=="string"&&i&&!$&&t.manuallyAnimateOnMount&&t.parent){const{parent:K}=t,A=gi(K,P);if(K.enteringChildren&&A){const{delayChildren:q}=A.transition||{};B.delay=Sw(K.enteringChildren,t,q)}}return{animation:P,options:B}}))}if(v.size){const C={};if(typeof p.initial!="boolean"){const R=gi(t,Array.isArray(p.initial)?p.initial[0]:p.initial);R&&R.transition&&(C.transition=R.transition)}v.forEach(R=>{const S=t.getBaseTarget(R),k=t.getValue(R);k&&(k.liveStyle=!0),C[R]=S??null}),y.push({animation:C})}let _=!!y.length;return i&&(p.initial===!1||p.initial===p.animate)&&!t.manuallyAnimateOnMount&&(_=!1),i=!1,_?s(y):Promise.resolve()}function h(f,p){var y;if(n[f].isActive===p)return Promise.resolve();(y=t.variantChildren)==null||y.forEach(v=>{var j;return(j=v.animationState)==null?void 0:j.setActive(f,p)}),n[f].isActive=p;const g=u(f);for(const v in n)n[v].protectedKeys={};return g}return{animateChanges:u,setActive:h,setAnimateFunction:c,getState:()=>n,reset:()=>{n=xb(),i=!0}}}function z6(t,s){return typeof s=="string"?s!==t:Array.isArray(s)?!Cw(s,t):!1}function qn(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function xb(){return{animate:qn(!0),whileInView:qn(),whileHover:qn(),whileTap:qn(),whileDrag:qn(),whileFocus:qn(),exit:qn()}}class vn{constructor(s){this.isMounted=!1,this.node=s}update(){}}class L6 extends vn{constructor(s){super(s),s.animationState||(s.animationState=P6(s))}updateAnimationControlsSubscription(){const{animate:s}=this.node.getProps();gd(s)&&(this.unmountControls=s.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:s}=this.node.getProps(),{animate:n}=this.node.prevProps||{};s!==n&&this.updateAnimationControlsSubscription()}unmount(){var s;this.node.animationState.reset(),(s=this.unmountControls)==null||s.call(this)}}let B6=0;class $6 extends vn{constructor(){super(...arguments),this.id=B6++}update(){if(!this.node.presenceContext)return;const{isPresent:s,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||s===i)return;const l=this.node.animationState.setActive("exit",!s);n&&!s&&l.then(()=>{n(this.id)})}mount(){const{register:s,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),s&&(this.unmount=s(this.id))}unmount(){}}const V6={animation:{Feature:L6},exit:{Feature:$6}};function Jo(t,s,n,i={passive:!0}){return t.addEventListener(s,n,i),()=>t.removeEventListener(s,n)}function ll(t){return{point:{x:t.pageX,y:t.pageY}}}const U6=t=>s=>If(s)&&t(s,ll(s));function Uo(t,s,n,i){return Jo(t,s,U6(n),i)}const Ew=1e-4,q6=1-Ew,F6=1+Ew,Aw=.01,I6=0-Aw,H6=0+Aw;function ls(t){return t.max-t.min}function G6(t,s,n){return Math.abs(t-s)<=n}function yb(t,s,n,i=.5){t.origin=i,t.originPoint=bt(s.min,s.max,t.origin),t.scale=ls(n)/ls(s),t.translate=bt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=q6&&t.scale<=F6||isNaN(t.scale))&&(t.scale=1),(t.translate>=I6&&t.translate<=H6||isNaN(t.translate))&&(t.translate=0)}function qo(t,s,n,i){yb(t.x,s.x,n.x,i?i.originX:void 0),yb(t.y,s.y,n.y,i?i.originY:void 0)}function bb(t,s,n){t.min=n.min+s.min,t.max=t.min+ls(s)}function Y6(t,s,n){bb(t.x,s.x,n.x),bb(t.y,s.y,n.y)}function vb(t,s,n){t.min=s.min-n.min,t.max=t.min+ls(s)}function Fo(t,s,n){vb(t.x,s.x,n.x),vb(t.y,s.y,n.y)}function $s(t){return[t("x"),t("y")]}const kw=({current:t})=>t?t.ownerDocument.defaultView:null,jb=(t,s)=>Math.abs(t-s);function X6(t,s){const n=jb(t.x,s.x),i=jb(t.y,s.y);return Math.sqrt(n**2+i**2)}class Mw{constructor(s,n,{transformPagePoint:i,contextWindow:l=window,dragSnapToOrigin:c=!1,distanceThreshold:u=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=cm(this.lastMoveEventInfo,this.history),j=this.startEvent!==null,N=X6(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!j&&!N)return;const{point:_}=v,{timestamp:C}=Qt;this.history.push({..._,timestamp:C});const{onStart:R,onMove:S}=this.handlers;j||(R&&R(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,v)},this.handlePointerMove=(v,j)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=lm(j,this.transformPagePoint),pt.update(this.updatePoint,!0)},this.handlePointerUp=(v,j)=>{this.end();const{onEnd:N,onSessionEnd:_,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const R=cm(v.type==="pointercancel"?this.lastMoveEventInfo:lm(j,this.transformPagePoint),this.history);this.startEvent&&N&&N(v,R),_&&_(v,R)},!If(s))return;this.dragSnapToOrigin=c,this.handlers=n,this.transformPagePoint=i,this.distanceThreshold=u,this.contextWindow=l||window;const h=ll(s),f=lm(h,this.transformPagePoint),{point:p}=f,{timestamp:g}=Qt;this.history=[{...p,timestamp:g}];const{onSessionStart:y}=n;y&&y(s,cm(f,this.history)),this.removeListeners=rl(Uo(this.contextWindow,"pointermove",this.handlePointerMove),Uo(this.contextWindow,"pointerup",this.handlePointerUp),Uo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(s){this.handlers=s}end(){this.removeListeners&&this.removeListeners(),gn(this.updatePoint)}}function lm(t,s){return s?{point:s(t.point)}:t}function wb(t,s){return{x:t.x-s.x,y:t.y-s.y}}function cm({point:t},s){return{point:t,delta:wb(t,Dw(s)),offset:wb(t,K6(s)),velocity:W6(s,.1)}}function K6(t){return t[0]}function Dw(t){return t[t.length-1]}function W6(t,s){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const l=Dw(t);for(;n>=0&&(i=t[n],!(l.timestamp-i.timestamp>ca(s)));)n--;if(!i)return{x:0,y:0};const c=da(l.timestamp-i.timestamp);if(c===0)return{x:0,y:0};const u={x:(l.x-i.x)/c,y:(l.y-i.y)/c};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function Q6(t,{min:s,max:n},i){return s!==void 0&&t<s?t=i?bt(s,t,i.min):Math.max(t,s):n!==void 0&&t>n&&(t=i?bt(n,t,i.max):Math.min(t,n)),t}function _b(t,s,n){return{min:s!==void 0?t.min+s:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Z6(t,{top:s,left:n,bottom:i,right:l}){return{x:_b(t.x,n,l),y:_b(t.y,s,i)}}function Nb(t,s){let n=s.min-t.min,i=s.max-t.max;return s.max-s.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function J6(t,s){return{x:Nb(t.x,s.x),y:Nb(t.y,s.y)}}function e3(t,s){let n=.5;const i=ls(t),l=ls(s);return l>i?n=Xo(s.min,s.max-i,t.min):i>l&&(n=Xo(t.min,t.max-l,s.min)),Pa(0,1,n)}function t3(t,s){const n={};return s.min!==void 0&&(n.min=s.min-t.min),s.max!==void 0&&(n.max=s.max-t.min),n}const Qm=.35;function s3(t=Qm){return t===!1?t=0:t===!0&&(t=Qm),{x:Sb(t,"left","right"),y:Sb(t,"top","bottom")}}function Sb(t,s,n){return{min:Cb(t,s),max:Cb(t,n)}}function Cb(t,s){return typeof t=="number"?t:t[s]||0}const a3=new WeakMap;class n3{constructor(s){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Tt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=s}start(s,{snapToCursor:n=!1,distanceThreshold:i}={}){const{presenceContext:l}=this.visualElement;if(l&&l.isPresent===!1)return;const c=y=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ll(y).point)},u=(y,v)=>{const{drag:j,dragPropagation:N,onDragStart:_}=this.getProps();if(j&&!N&&(this.openDragLock&&this.openDragLock(),this.openDragLock=hE(j),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),$s(R=>{let S=this.getAxisMotionValue(R).get()||0;if(ua.test(S)){const{projection:k}=this.visualElement;if(k&&k.layout){const E=k.layout.layoutBox[R];E&&(S=ls(E)*(parseFloat(S)/100))}}this.originPoint[R]=S}),_&&pt.postRender(()=>_(y,v)),Km(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},h=(y,v)=>{this.latestPointerEvent=y,this.latestPanInfo=v;const{dragPropagation:j,dragDirectionLock:N,onDirectionLock:_,onDrag:C}=this.getProps();if(!j&&!this.openDragLock)return;const{offset:R}=v;if(N&&this.currentDirection===null){this.currentDirection=r3(R),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",v.point,R),this.updateAxis("y",v.point,R),this.visualElement.render(),C&&C(y,v)},f=(y,v)=>{this.latestPointerEvent=y,this.latestPanInfo=v,this.stop(y,v),this.latestPointerEvent=null,this.latestPanInfo=null},p=()=>$s(y=>{var v;return this.getAnimationState(y)==="paused"&&((v=this.getAxisMotionValue(y).animation)==null?void 0:v.play())}),{dragSnapToOrigin:g}=this.getProps();this.panSession=new Mw(s,{onSessionStart:c,onStart:u,onMove:h,onSessionEnd:f,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:i,contextWindow:kw(this.visualElement)})}stop(s,n){const i=s||this.latestPointerEvent,l=n||this.latestPanInfo,c=this.isDragging;if(this.cancel(),!c||!l||!i)return;const{velocity:u}=l;this.startAnimation(u);const{onDragEnd:h}=this.getProps();h&&pt.postRender(()=>h(i,l))}cancel(){this.isDragging=!1;const{projection:s,animationState:n}=this.visualElement;s&&(s.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(s,n,i){const{drag:l}=this.getProps();if(!i||!Rc(s,l,this.currentDirection))return;const c=this.getAxisMotionValue(s);let u=this.originPoint[s]+i[s];this.constraints&&this.constraints[s]&&(u=Q6(u,this.constraints[s],this.elastic[s])),c.set(u)}resolveConstraints(){var c;const{dragConstraints:s,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(c=this.visualElement.projection)==null?void 0:c.layout,l=this.constraints;s&&hi(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&i?this.constraints=Z6(i.layoutBox,s):this.constraints=!1,this.elastic=s3(n),l!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&$s(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=t3(i.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:s,onMeasureDragConstraints:n}=this.getProps();if(!s||!hi(s))return!1;const i=s.current,{projection:l}=this.visualElement;if(!l||!l.layout)return!1;const c=i6(i,l.root,this.visualElement.getTransformPagePoint());let u=J6(l.layout.layoutBox,c);if(n){const h=n(a6(u));this.hasMutatedConstraints=!!h,h&&(u=pw(h))}return u}startAnimation(s){const{drag:n,dragMomentum:i,dragElastic:l,dragTransition:c,dragSnapToOrigin:u,onDragTransitionEnd:h}=this.getProps(),f=this.constraints||{},p=$s(g=>{if(!Rc(g,n,this.currentDirection))return;let y=f&&f[g]||{};u&&(y={min:0,max:0});const v=l?200:1e6,j=l?40:1e7,N={type:"inertia",velocity:i?s[g]:0,bounceStiffness:v,bounceDamping:j,timeConstant:750,restDelta:1,restSpeed:10,...c,...y};return this.startAxisValueAnimation(g,N)});return Promise.all(p).then(h)}startAxisValueAnimation(s,n){const i=this.getAxisMotionValue(s);return Km(this.visualElement,s),i.start(e0(s,i,0,n,this.visualElement,!1))}stopAnimation(){$s(s=>this.getAxisMotionValue(s).stop())}pauseAnimation(){$s(s=>{var n;return(n=this.getAxisMotionValue(s).animation)==null?void 0:n.pause()})}getAnimationState(s){var n;return(n=this.getAxisMotionValue(s).animation)==null?void 0:n.state}getAxisMotionValue(s){const n=`_drag${s.toUpperCase()}`,i=this.visualElement.getProps(),l=i[n];return l||this.visualElement.getValue(s,(i.initial?i.initial[s]:void 0)||0)}snapToCursor(s){$s(n=>{const{drag:i}=this.getProps();if(!Rc(n,i,this.currentDirection))return;const{projection:l}=this.visualElement,c=this.getAxisMotionValue(n);if(l&&l.layout){const{min:u,max:h}=l.layout.layoutBox[n];c.set(s[n]-bt(u,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:s,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!hi(n)||!i||!this.constraints)return;this.stopAnimation();const l={x:0,y:0};$s(u=>{const h=this.getAxisMotionValue(u);if(h&&this.constraints!==!1){const f=h.get();l[u]=e3({min:f,max:f},this.constraints[u])}});const{transformTemplate:c}=this.visualElement.getProps();this.visualElement.current.style.transform=c?c({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),$s(u=>{if(!Rc(u,s,null))return;const h=this.getAxisMotionValue(u),{min:f,max:p}=this.constraints[u];h.set(bt(f,p,l[u]))})}addListeners(){if(!this.visualElement.current)return;a3.set(this.visualElement,this);const s=this.visualElement.current,n=Uo(s,"pointerdown",f=>{const{drag:p,dragListener:g=!0}=this.getProps();p&&g&&this.start(f)}),i=()=>{const{dragConstraints:f}=this.getProps();hi(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:l}=this.visualElement,c=l.addEventListener("measure",i);l&&!l.layout&&(l.root&&l.root.updateScroll(),l.updateLayout()),pt.read(i);const u=Jo(window,"resize",()=>this.scalePositionWithinConstraints()),h=l.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p})=>{this.isDragging&&p&&($s(g=>{const y=this.getAxisMotionValue(g);y&&(this.originPoint[g]+=f[g].translate,y.set(y.get()+f[g].translate))}),this.visualElement.render())});return()=>{u(),n(),c(),h&&h()}}getProps(){const s=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:l=!1,dragConstraints:c=!1,dragElastic:u=Qm,dragMomentum:h=!0}=s;return{...s,drag:n,dragDirectionLock:i,dragPropagation:l,dragConstraints:c,dragElastic:u,dragMomentum:h}}}function Rc(t,s,n){return(s===!0||s===t)&&(n===null||n===t)}function r3(t,s=10){let n=null;return Math.abs(t.y)>s?n="y":Math.abs(t.x)>s&&(n="x"),n}class i3 extends vn{constructor(s){super(s),this.removeGroupControls=Vs,this.removeListeners=Vs,this.controls=new n3(s)}mount(){const{dragControls:s}=this.node.getProps();s&&(this.removeGroupControls=s.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Vs}unmount(){this.removeGroupControls(),this.removeListeners()}}const Tb=t=>(s,n)=>{t&&pt.postRender(()=>t(s,n))};class o3 extends vn{constructor(){super(...arguments),this.removePointerDownListener=Vs}onPointerDown(s){this.session=new Mw(s,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:kw(this.node)})}createPanHandlers(){const{onPanSessionStart:s,onPanStart:n,onPan:i,onPanEnd:l}=this.node.getProps();return{onSessionStart:Tb(s),onStart:Tb(n),onMove:i,onEnd:(c,u)=>{delete this.session,l&&pt.postRender(()=>l(c,u))}}}mount(){this.removePointerDownListener=Uo(this.node.current,"pointerdown",s=>this.onPointerDown(s))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Vc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Eb(t,s){return s.max===s.min?0:t/(s.max-s.min)*100}const Mo={correct:(t,s)=>{if(!s.target)return t;if(typeof t=="string")if(Le.test(t))t=parseFloat(t);else return t;const n=Eb(t,s.target.x),i=Eb(t,s.target.y);return`${n}% ${i}%`}},l3={correct:(t,{treeScale:s,projectionDelta:n})=>{const i=t,l=xn.parse(t);if(l.length>5)return i;const c=xn.createTransformer(t),u=typeof l[0]!="number"?1:0,h=n.x.scale*s.x,f=n.y.scale*s.y;l[0+u]/=h,l[1+u]/=f;const p=bt(h,f,.5);return typeof l[2+u]=="number"&&(l[2+u]/=p),typeof l[3+u]=="number"&&(l[3+u]/=p),c(l)}};let dm=!1;class c3 extends b.Component{componentDidMount(){const{visualElement:s,layoutGroup:n,switchLayoutGroup:i,layoutId:l}=this.props,{projection:c}=s;ME(d3),c&&(n.group&&n.group.add(c),i&&i.register&&l&&i.register(c),dm&&c.root.didUpdate(),c.addEventListener("animationComplete",()=>{this.safeToRemove()}),c.setOptions({...c.options,onExitComplete:()=>this.safeToRemove()})),Vc.hasEverUpdated=!0}getSnapshotBeforeUpdate(s){const{layoutDependency:n,visualElement:i,drag:l,isPresent:c}=this.props,{projection:u}=i;return u&&(u.isPresent=c,dm=!0,l||s.layoutDependency!==n||n===void 0||s.isPresent!==c?u.willUpdate():this.safeToRemove(),s.isPresent!==c&&(c?u.promote():u.relegate()||pt.postRender(()=>{const h=u.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:s}=this.props.visualElement;s&&(s.root.didUpdate(),Ff.postRender(()=>{!s.currentAnimation&&s.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:s,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:l}=s;dm=!0,l&&(l.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(l),i&&i.deregister&&i.deregister(l))}safeToRemove(){const{safeToRemove:s}=this.props;s&&s()}render(){return null}}function Ow(t){const[s,n]=tw(),i=b.useContext(jf);return e.jsx(c3,{...t,layoutGroup:i,switchLayoutGroup:b.useContext(mw),isPresent:s,safeToRemove:n})}const d3={borderRadius:{...Mo,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Mo,borderTopRightRadius:Mo,borderBottomLeftRadius:Mo,borderBottomRightRadius:Mo,boxShadow:l3};function u3(t,s,n){const i=ss(t)?t:bi(t);return i.start(e0("",i,s,n)),i.animation}const h3=(t,s)=>t.depth-s.depth;class m3{constructor(){this.children=[],this.isDirty=!1}add(s){Nf(this.children,s),this.isDirty=!0}remove(s){Sf(this.children,s),this.isDirty=!0}forEach(s){this.isDirty&&this.children.sort(h3),this.isDirty=!1,this.children.forEach(s)}}function f3(t,s){const n=ys.now(),i=({timestamp:l})=>{const c=l-n;c>=s&&(gn(i),t(c-s))};return pt.setup(i,!0),()=>gn(i)}const Rw=["TopLeft","TopRight","BottomLeft","BottomRight"],p3=Rw.length,Ab=t=>typeof t=="string"?parseFloat(t):t,kb=t=>typeof t=="number"||Le.test(t);function g3(t,s,n,i,l,c){l?(t.opacity=bt(0,n.opacity??1,x3(i)),t.opacityExit=bt(s.opacity??1,0,y3(i))):c&&(t.opacity=bt(s.opacity??1,n.opacity??1,i));for(let u=0;u<p3;u++){const h=`border${Rw[u]}Radius`;let f=Mb(s,h),p=Mb(n,h);if(f===void 0&&p===void 0)continue;f||(f=0),p||(p=0),f===0||p===0||kb(f)===kb(p)?(t[h]=Math.max(bt(Ab(f),Ab(p),i),0),(ua.test(p)||ua.test(f))&&(t[h]+="%")):t[h]=p}(s.rotate||n.rotate)&&(t.rotate=bt(s.rotate||0,n.rotate||0,i))}function Mb(t,s){return t[s]!==void 0?t[s]:t.borderRadius}const x3=Pw(0,.5,jj),y3=Pw(.5,.95,Vs);function Pw(t,s,n){return i=>i<t?0:i>s?1:n(Xo(t,s,i))}function Db(t,s){t.min=s.min,t.max=s.max}function Bs(t,s){Db(t.x,s.x),Db(t.y,s.y)}function Ob(t,s){t.translate=s.translate,t.scale=s.scale,t.originPoint=s.originPoint,t.origin=s.origin}function Rb(t,s,n,i,l){return t-=s,t=Zc(t,1/n,i),l!==void 0&&(t=Zc(t,1/l,i)),t}function b3(t,s=0,n=1,i=.5,l,c=t,u=t){if(ua.test(s)&&(s=parseFloat(s),s=bt(u.min,u.max,s/100)-u.min),typeof s!="number")return;let h=bt(c.min,c.max,i);t===c&&(h-=s),t.min=Rb(t.min,s,n,h,l),t.max=Rb(t.max,s,n,h,l)}function Pb(t,s,[n,i,l],c,u){b3(t,s[n],s[i],s[l],s.scale,c,u)}const v3=["x","scaleX","originX"],j3=["y","scaleY","originY"];function zb(t,s,n,i){Pb(t.x,s,v3,n?n.x:void 0,i?i.x:void 0),Pb(t.y,s,j3,n?n.y:void 0,i?i.y:void 0)}function Lb(t){return t.translate===0&&t.scale===1}function zw(t){return Lb(t.x)&&Lb(t.y)}function Bb(t,s){return t.min===s.min&&t.max===s.max}function w3(t,s){return Bb(t.x,s.x)&&Bb(t.y,s.y)}function $b(t,s){return Math.round(t.min)===Math.round(s.min)&&Math.round(t.max)===Math.round(s.max)}function Lw(t,s){return $b(t.x,s.x)&&$b(t.y,s.y)}function Vb(t){return ls(t.x)/ls(t.y)}function Ub(t,s){return t.translate===s.translate&&t.scale===s.scale&&t.originPoint===s.originPoint}class _3{constructor(){this.members=[]}add(s){Nf(this.members,s),s.scheduleRender()}remove(s){if(Sf(this.members,s),s===this.prevLead&&(this.prevLead=void 0),s===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(s){const n=this.members.findIndex(l=>s===l);if(n===0)return!1;let i;for(let l=n;l>=0;l--){const c=this.members[l];if(c.isPresent!==!1){i=c;break}}return i?(this.promote(i),!0):!1}promote(s,n){const i=this.lead;if(s!==i&&(this.prevLead=i,this.lead=s,s.show(),i)){i.instance&&i.scheduleRender(),s.scheduleRender(),s.resumeFrom=i,n&&(s.resumeFrom.preserveOpacity=!0),i.snapshot&&(s.snapshot=i.snapshot,s.snapshot.latestValues=i.animationValues||i.latestValues),s.root&&s.root.isUpdating&&(s.isLayoutDirty=!0);const{crossfade:l}=s.options;l===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(s=>{const{options:n,resumingFrom:i}=s;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(s=>{s.instance&&s.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function N3(t,s,n){let i="";const l=t.x.translate/s.x,c=t.y.translate/s.y,u=(n==null?void 0:n.z)||0;if((l||c||u)&&(i=`translate3d(${l}px, ${c}px, ${u}px) `),(s.x!==1||s.y!==1)&&(i+=`scale(${1/s.x}, ${1/s.y}) `),n){const{transformPerspective:p,rotate:g,rotateX:y,rotateY:v,skewX:j,skewY:N}=n;p&&(i=`perspective(${p}px) ${i}`),g&&(i+=`rotate(${g}deg) `),y&&(i+=`rotateX(${y}deg) `),v&&(i+=`rotateY(${v}deg) `),j&&(i+=`skewX(${j}deg) `),N&&(i+=`skewY(${N}deg) `)}const h=t.x.scale*s.x,f=t.y.scale*s.y;return(h!==1||f!==1)&&(i+=`scale(${h}, ${f})`),i||"none"}const um=["","X","Y","Z"],S3=1e3;let C3=0;function hm(t,s,n,i){const{latestValues:l}=s;l[t]&&(n[t]=l[t],s.setStaticValue(t,0),i&&(i[t]=0))}function Bw(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:s}=t.options;if(!s)return;const n=_w(s);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:l,layoutId:c}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",pt,!(l||c))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&Bw(i)}function $w({attachResizeListener:t,defaultParent:s,measureScroll:n,checkIsScrollRoot:i,resetTransform:l}){return class{constructor(u={},h=s==null?void 0:s()){this.id=C3++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(A3),this.nodes.forEach(O3),this.nodes.forEach(R3),this.nodes.forEach(k3)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new m3)}addEventListener(u,h){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new Ef),this.eventHandlers.get(u).add(h)}notifyListeners(u,...h){const f=this.eventHandlers.get(u);f&&f.notify(...h)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=ew(u)&&!yE(u),this.instance=u;const{layoutId:h,layout:f,visualElement:p}=this.options;if(p&&!p.current&&p.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||h)&&(this.isLayoutDirty=!0),t){let g,y=0;const v=()=>this.root.updateBlockedByResize=!1;pt.read(()=>{y=window.innerWidth}),t(u,()=>{const j=window.innerWidth;j!==y&&(y=j,this.root.updateBlockedByResize=!0,g&&g(),g=f3(v,250),Vc.hasAnimatedSinceResize&&(Vc.hasAnimatedSinceResize=!1,this.nodes.forEach(Ib)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&p&&(h||f)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeLayoutChanged:v,layout:j})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||p.getDefaultTransition()||$3,{onLayoutAnimationStart:_,onLayoutAnimationComplete:C}=p.getProps(),R=!this.targetLayout||!Lw(this.targetLayout,j),S=!y&&v;if(this.options.layoutRoot||this.resumeFrom||S||y&&(R||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...Uf(N,"layout"),onPlay:_,onComplete:C};(p.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(g,S)}else y||Ib(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=j})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),gn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(P3),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Bw(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const y=this.path[g];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:h,layout:f}=this.options;if(h===void 0&&!f)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(qb);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Fb);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(D3),this.nodes.forEach(T3),this.nodes.forEach(E3)):this.nodes.forEach(Fb),this.clearAllSnapshots();const h=ys.now();Qt.delta=Pa(0,1e3/60,h-Qt.timestamp),Qt.timestamp=h,Qt.isProcessing=!0,em.update.process(Qt),em.preRender.process(Qt),em.render.process(Qt),Qt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Ff.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(M3),this.sharedNodes.forEach(z3)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,pt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){pt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ls(this.snapshot.measuredBox.x)&&!ls(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Tt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(h=!1),h&&this.instance){const f=i(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:f,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!l)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!zw(this.projectionDelta),f=this.getTransformTemplate(),p=f?f(this.latestValues,""):void 0,g=p!==this.prevTransformTemplateValue;u&&this.instance&&(h||In(this.latestValues)||g)&&(l(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const h=this.measurePageBox();let f=this.removeElementScroll(h);return u&&(f=this.removeTransform(f)),V3(f),{animationId:this.root.animationId,measuredBox:h,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){var p;const{visualElement:u}=this.options;if(!u)return Tt();const h=u.measureViewportBox();if(!(((p=this.scroll)==null?void 0:p.wasRoot)||this.path.some(U3))){const{scroll:g}=this.root;g&&(mi(h.x,g.offset.x),mi(h.y,g.offset.y))}return h}removeElementScroll(u){var f;const h=Tt();if(Bs(h,u),(f=this.scroll)!=null&&f.wasRoot)return h;for(let p=0;p<this.path.length;p++){const g=this.path[p],{scroll:y,options:v}=g;g!==this.root&&y&&v.layoutScroll&&(y.wasRoot&&Bs(h,u),mi(h.x,y.offset.x),mi(h.y,y.offset.y))}return h}applyTransform(u,h=!1){const f=Tt();Bs(f,u);for(let p=0;p<this.path.length;p++){const g=this.path[p];!h&&g.options.layoutScroll&&g.scroll&&g!==g.root&&fi(f,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),In(g.latestValues)&&fi(f,g.latestValues)}return In(this.latestValues)&&fi(f,this.latestValues),f}removeTransform(u){const h=Tt();Bs(h,u);for(let f=0;f<this.path.length;f++){const p=this.path[f];if(!p.instance||!In(p.latestValues))continue;Hm(p.latestValues)&&p.updateSnapshot();const g=Tt(),y=p.measurePageBox();Bs(g,y),zb(h,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,g)}return In(this.latestValues)&&zb(h,this.latestValues),h}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Qt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var v;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==h;if(!(u||f&&this.isSharedProjectionDirty||this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:y}=this.options;if(!(!this.layout||!(g||y))){if(this.resolvedRelativeTargetAt=Qt.timestamp,!this.targetDelta&&!this.relativeTarget){const j=this.getClosestProjectingParent();j&&j.layout&&this.animationProgress!==1?(this.relativeParent=j,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tt(),this.relativeTargetOrigin=Tt(),Fo(this.relativeTargetOrigin,this.layout.layoutBox,j.layout.layoutBox),Bs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Tt(),this.targetWithTransforms=Tt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Y6(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Bs(this.target,this.layout.layoutBox),xw(this.target,this.targetDelta)):Bs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const j=this.getClosestProjectingParent();j&&!!j.resumingFrom==!!this.resumingFrom&&!j.options.layoutScroll&&j.target&&this.animationProgress!==1?(this.relativeParent=j,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tt(),this.relativeTargetOrigin=Tt(),Fo(this.relativeTargetOrigin,this.target,j.target),Bs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Hm(this.parent.latestValues)||gw(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var N;const u=this.getLead(),h=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||(N=this.parent)!=null&&N.isProjectionDirty)&&(f=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Qt.timestamp&&(f=!1),f)return;const{layout:p,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||g))return;Bs(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,v=this.treeScale.y;r6(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=Tt());const{target:j}=u;if(!j){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Ob(this.prevProjectionDelta.x,this.projectionDelta.x),Ob(this.prevProjectionDelta.y,this.projectionDelta.y)),qo(this.projectionDelta,this.layoutCorrected,j,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==v||!Ub(this.projectionDelta.x,this.prevProjectionDelta.x)||!Ub(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",j))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){var h;if((h=this.options.visualElement)==null||h.scheduleRender(),u){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=pi(),this.projectionDelta=pi(),this.projectionDeltaWithTransform=pi()}setAnimationOrigin(u,h=!1){const f=this.snapshot,p=f?f.latestValues:{},g={...this.latestValues},y=pi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const v=Tt(),j=f?f.source:void 0,N=this.layout?this.layout.source:void 0,_=j!==N,C=this.getStack(),R=!C||C.members.length<=1,S=!!(_&&!R&&this.options.crossfade===!0&&!this.path.some(B3));this.animationProgress=0;let k;this.mixTargetDelta=E=>{const w=E/1e3;Hb(y.x,u.x,w),Hb(y.y,u.y,w),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Fo(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),L3(this.relativeTarget,this.relativeTargetOrigin,v,w),k&&w3(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=Tt()),Bs(k,this.relativeTarget)),_&&(this.animationValues=g,g3(g,p,this.latestValues,w,S,R)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){var h,f,p;this.notifyListeners("animationStart"),(h=this.currentAnimation)==null||h.stop(),(p=(f=this.resumingFrom)==null?void 0:f.currentAnimation)==null||p.stop(),this.pendingAnimation&&(gn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=pt.update(()=>{Vc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=bi(0)),this.currentAnimation=u3(this.motionValue,[0,1e3],{...u,velocity:0,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),u.onUpdate&&u.onUpdate(g)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(S3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:h,target:f,layout:p,latestValues:g}=u;if(!(!h||!f||!p)){if(this!==u&&this.layout&&p&&Vw(this.options.animationType,this.layout.layoutBox,p.layoutBox)){f=this.target||Tt();const y=ls(this.layout.layoutBox.x);f.x.min=u.target.x.min,f.x.max=f.x.min+y;const v=ls(this.layout.layoutBox.y);f.y.min=u.target.y.min,f.y.max=f.y.min+v}Bs(h,f),fi(h,g),qo(this.projectionDeltaWithTransform,this.layoutCorrected,h,g)}}registerSharedNode(u,h){this.sharedNodes.has(u)||this.sharedNodes.set(u,new _3),this.sharedNodes.get(u).add(h);const p=h.options.initialPromotionConfig;h.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(h):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var h;const{layoutId:u}=this.options;return u?((h=this.getStack())==null?void 0:h.lead)||this:this}getPrevLead(){var h;const{layoutId:u}=this.options;return u?(h=this.getStack())==null?void 0:h.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:h,preserveFollowOpacity:f}={}){const p=this.getStack();p&&p.promote(this,f),u&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let h=!1;const{latestValues:f}=u;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(h=!0),!h)return;const p={};f.z&&hm("z",u,p,this.animationValues);for(let g=0;g<um.length;g++)hm(`rotate${um[g]}`,u,p,this.animationValues),hm(`skew${um[g]}`,u,p,this.animationValues);u.render();for(const g in p)u.setStaticValue(g,p[g]),this.animationValues&&(this.animationValues[g]=p[g]);u.scheduleRender()}applyProjectionStyles(u,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){u.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,u.visibility="",u.opacity="",u.pointerEvents=$c(h==null?void 0:h.pointerEvents)||"",u.transform=f?f(this.latestValues,""):"none";return}const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){this.options.layoutId&&(u.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,u.pointerEvents=$c(h==null?void 0:h.pointerEvents)||""),this.hasProjected&&!In(this.latestValues)&&(u.transform=f?f({},""):"none",this.hasProjected=!1);return}u.visibility="";const g=p.animationValues||p.latestValues;this.applyTransformsToTarget();let y=N3(this.projectionDeltaWithTransform,this.treeScale,g);f&&(y=f(g,y)),u.transform=y;const{x:v,y:j}=this.projectionDelta;u.transformOrigin=`${v.origin*100}% ${j.origin*100}% 0`,p.animationValues?u.opacity=p===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:u.opacity=p===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const N in Zo){if(g[N]===void 0)continue;const{correct:_,applyTo:C,isCSSVariable:R}=Zo[N],S=y==="none"?g[N]:_(g[N],p);if(C){const k=C.length;for(let E=0;E<k;E++)u[C[E]]=S}else R?this.options.visualElement.renderState.vars[N]=S:u[N]=S}this.options.layoutId&&(u.pointerEvents=p===this?$c(h==null?void 0:h.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var h;return(h=u.currentAnimation)==null?void 0:h.stop()}),this.root.nodes.forEach(qb),this.root.sharedNodes.clear()}}}function T3(t){t.updateLayout()}function E3(t){var n;const s=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&s&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:l}=t.layout,{animationType:c}=t.options,u=s.source!==t.layout.source;c==="size"?$s(y=>{const v=u?s.measuredBox[y]:s.layoutBox[y],j=ls(v);v.min=i[y].min,v.max=v.min+j}):Vw(c,s.layoutBox,i)&&$s(y=>{const v=u?s.measuredBox[y]:s.layoutBox[y],j=ls(i[y]);v.max=v.min+j,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[y].max=t.relativeTarget[y].min+j)});const h=pi();qo(h,i,s.layoutBox);const f=pi();u?qo(f,t.applyTransform(l,!0),s.measuredBox):qo(f,i,s.layoutBox);const p=!zw(h);let g=!1;if(!t.resumeFrom){const y=t.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:v,layout:j}=y;if(v&&j){const N=Tt();Fo(N,s.layoutBox,v.layoutBox);const _=Tt();Fo(_,i,j.layoutBox),Lw(N,_)||(g=!0),y.options.layoutRoot&&(t.relativeTarget=_,t.relativeTargetOrigin=N,t.relativeParent=y)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:s,delta:f,layoutDelta:h,hasLayoutChanged:p,hasRelativeLayoutChanged:g})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function A3(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function k3(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function M3(t){t.clearSnapshot()}function qb(t){t.clearMeasurements()}function Fb(t){t.isLayoutDirty=!1}function D3(t){const{visualElement:s}=t.options;s&&s.getProps().onBeforeLayoutMeasure&&s.notify("BeforeLayoutMeasure"),t.resetTransform()}function Ib(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function O3(t){t.resolveTargetDelta()}function R3(t){t.calcProjection()}function P3(t){t.resetSkewAndRotation()}function z3(t){t.removeLeadSnapshot()}function Hb(t,s,n){t.translate=bt(s.translate,0,n),t.scale=bt(s.scale,1,n),t.origin=s.origin,t.originPoint=s.originPoint}function Gb(t,s,n,i){t.min=bt(s.min,n.min,i),t.max=bt(s.max,n.max,i)}function L3(t,s,n,i){Gb(t.x,s.x,n.x,i),Gb(t.y,s.y,n.y,i)}function B3(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const $3={duration:.45,ease:[.4,0,.1,1]},Yb=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Xb=Yb("applewebkit/")&&!Yb("chrome/")?Math.round:Vs;function Kb(t){t.min=Xb(t.min),t.max=Xb(t.max)}function V3(t){Kb(t.x),Kb(t.y)}function Vw(t,s,n){return t==="position"||t==="preserve-aspect"&&!G6(Vb(s),Vb(n),.2)}function U3(t){var s;return t!==t.root&&((s=t.scroll)==null?void 0:s.wasRoot)}const q3=$w({attachResizeListener:(t,s)=>Jo(t,"resize",s),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),mm={current:void 0},Uw=$w({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!mm.current){const t=new q3({});t.mount(window),t.setOptions({layoutScroll:!0}),mm.current=t}return mm.current},resetTransform:(t,s)=>{t.style.transform=s!==void 0?s:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),F3={pan:{Feature:o3},drag:{Feature:i3,ProjectionNode:Uw,MeasureLayout:Ow}};function Wb(t,s,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const l="onHover"+n,c=i[l];c&&pt.postRender(()=>c(s,ll(s)))}class I3 extends vn{mount(){const{current:s}=this.node;s&&(this.unmount=mE(s,(n,i)=>(Wb(this.node,i,"Start"),l=>Wb(this.node,l,"End"))))}unmount(){}}class H3 extends vn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let s=!1;try{s=this.node.current.matches(":focus-visible")}catch{s=!0}!s||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=rl(Jo(this.node.current,"focus",()=>this.onFocus()),Jo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Qb(t,s,n){const{props:i}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const l="onTap"+(n==="End"?"":n),c=i[l];c&&pt.postRender(()=>c(s,ll(s)))}class G3 extends vn{mount(){const{current:s}=this.node;s&&(this.unmount=xE(s,(n,i)=>(Qb(this.node,i,"Start"),(l,{success:c})=>Qb(this.node,l,c?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Zm=new WeakMap,fm=new WeakMap,Y3=t=>{const s=Zm.get(t.target);s&&s(t)},X3=t=>{t.forEach(Y3)};function K3({root:t,...s}){const n=t||document;fm.has(n)||fm.set(n,{});const i=fm.get(n),l=JSON.stringify(s);return i[l]||(i[l]=new IntersectionObserver(X3,{root:t,...s})),i[l]}function W3(t,s,n){const i=K3(s);return Zm.set(t,n),i.observe(t),()=>{Zm.delete(t),i.unobserve(t)}}const Q3={some:0,all:1};class Z3 extends vn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:s={}}=this.node.getProps(),{root:n,margin:i,amount:l="some",once:c}=s,u={root:n?n.current:void 0,rootMargin:i,threshold:typeof l=="number"?l:Q3[l]},h=f=>{const{isIntersecting:p}=f;if(this.isInView===p||(this.isInView=p,c&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:g,onViewportLeave:y}=this.node.getProps(),v=p?g:y;v&&v(f)};return W3(this.node.current,u,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:s,prevProps:n}=this.node;["amount","margin","root"].some(J3(s,n))&&this.startObserver()}unmount(){}}function J3({viewport:t={}},{viewport:s={}}={}){return n=>t[n]!==s[n]}const eA={inView:{Feature:Z3},tap:{Feature:G3},focus:{Feature:H3},hover:{Feature:I3}},tA={layout:{ProjectionNode:Uw,MeasureLayout:Ow}},sA={...V6,...eA,...F3,...tA},Ne=s6(sA,p6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),nA=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,n,i)=>i?i.toUpperCase():n.toLowerCase()),Zb=t=>{const s=nA(t);return s.charAt(0).toUpperCase()+s.slice(1)},qw=(...t)=>t.filter((s,n,i)=>!!s&&s.trim()!==""&&i.indexOf(s)===n).join(" ").trim(),rA=t=>{for(const s in t)if(s.startsWith("aria-")||s==="role"||s==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var iA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=b.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:l="",children:c,iconNode:u,...h},f)=>b.createElement("svg",{ref:f,...iA,width:s,height:s,stroke:t,strokeWidth:i?Number(n)*24/Number(s):n,className:qw("lucide",l),...!c&&!rA(h)&&{"aria-hidden":"true"},...h},[...u.map(([p,g])=>b.createElement(p,g)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=(t,s)=>{const n=b.forwardRef(({className:i,...l},c)=>b.createElement(oA,{ref:c,iconNode:s,className:qw(`lucide-${aA(Zb(t))}`,`lucide-${t}`,i),...l}));return n.displayName=Zb(t),n};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],t0=Se("arrow-left",lA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],Jc=Se("arrow-right-left",cA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Jb=Se("arrow-right",dA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],hA=Se("arrow-up-down",uA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],fA=Se("arrow-up",mA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],gA=Se("banknote",pA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],yA=Se("bell-ring",xA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],s0=Se("bell",bA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],jA=Se("building-2",vA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],_A=Se("building",wA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],ev=Se("calculator",NA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],rr=Se("calendar",SA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Fw=Se("chart-column",CA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],Jm=Se("chef-hat",TA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ed=Se("circle-alert",EA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],td=Se("circle-check-big",AA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],tv=Se("circle-x",kA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Ht=Se("clock",MA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DA=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],OA=Se("coffee",DA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],PA=Se("copy",RA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zA=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],ir=Se("credit-card",zA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Gt=Se("dollar-sign",LA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Iw=Se("download",BA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $A=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Hw=Se("eye-off",$A);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VA=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ki=Se("eye",VA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UA=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Gw=Se("file-text",UA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qA=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Yw=Se("funnel",qA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FA=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],IA=Se("layout-dashboard",FA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],GA=Se("lock",HA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YA=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],XA=Se("log-out",YA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KA=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Xw=Se("mail",KA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],cl=Se("map-pin",WA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QA=[["path",{d:"M5 12h14",key:"1ays0h"}]],ji=Se("minus",QA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],JA=Se("move",ZA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],er=Se("package",ek);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],sd=Se("phone",tk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Es=Se("plus",sk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],nk=Se("receipt",ak);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Kw=Se("rotate-ccw",rk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ad=Se("save",ik);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],La=Se("search",ok);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ck=Se("send",lk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dk=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ww=Se("settings",dk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uk=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],hk=Se("share-2",uk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],ef=Se("shopping-bag",mk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fk=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],el=Se("shopping-cart",fk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Qw=Se("smartphone",pk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gk=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],dl=Se("square-pen",gk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xk=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],tf=Se("star",xk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yk=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],sv=Se("timer",yk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bk=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],yd=Se("trash-2",bk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vk=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],av=Se("trending-down",vk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jk=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],wi=Se("trending-up",jk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wk=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ws=Se("triangle-alert",wk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Zw=Se("user-check",_k);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nk=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Sk=Se("user-plus",Nk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ck=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],tr=Se("user",Ck);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tk=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ha=Se("users",Tk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ek=[["path",{d:"M8 22h8",key:"rmew8v"}],["path",{d:"M7 10h10",key:"1101jm"}],["path",{d:"M12 15v7",key:"t2xh3l"}],["path",{d:"M12 15a5 5 0 0 0 5-5c0-2-.5-4-2-8H9c-1.5 4-2 6-2 8a5 5 0 0 0 5 5Z",key:"10ffi3"}]],sf=Se("wine",Ek);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ak=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],dt=Se("x",Ak);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kk=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],nd=Se("zap",kk),Mk=()=>{const[t,s]=b.useState(""),[n,i]=b.useState(""),[l,c]=b.useState(!1),[u,h]=b.useState(""),{login:f,loginAsDemo:p,isLoading:g}=as(),y=async j=>{if(j.preventDefault(),h(""),!t||!n){h("Por favor, preencha todos os campos");return}await f(t,n)||h("Erro ao fazer login. Tente novamente.")},v=()=>{p()};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-slate-800 to-slate-900 flex items-center justify-center p-4",children:e.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ha,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"ClubManager Pro"}),e.jsx("p",{className:"text-gray-600",children:"Sistema de Gestão de Clubes"})]}),e.jsxs(Ne.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:v,className:"w-full bg-gradient-to-r from-green-500 to-green-600 text-white py-4 rounded-lg font-semibold text-lg hover:from-green-600 hover:to-green-700 transition-all duration-300 flex items-center justify-center space-x-2 mb-6 shadow-lg",children:[e.jsx(nd,{className:"w-5 h-5"}),e.jsx("span",{children:"🚀 Entrar como Demo"})]}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500",children:"ou faça login tradicional"})})]}),e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(Xw,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"email",value:t,onChange:j=>s(j.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Digite seu email"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(GA,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:l?"text":"password",value:n,onChange:j=>i(j.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Digite sua senha"}),e.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l?e.jsx(Hw,{size:20}):e.jsx(ki,{size:20})})]})]}),u&&e.jsx(Ne.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-red-600 text-sm text-center bg-red-50 p-3 rounded-lg border border-red-200",children:u}),e.jsx(Ne.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:g,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Entrando..."})]}):"Entrar"})]}),e.jsxs("div",{className:"mt-8 p-4 bg-gradient-to-r from-blue-50 to-green-50 rounded-lg border border-blue-100",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2 text-center",children:"🎯 Acesso Demo Rápido"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{children:["✅ ",e.jsx("strong",{children:"Módulo Bar:"})," Pedidos, comandas e vendas"]}),e.jsxs("p",{children:["✅ ",e.jsx("strong",{children:"Módulo Cozinha:"})," Gestão de cardápio e pedidos"]}),e.jsxs("p",{children:["✅ ",e.jsx("strong",{children:"Dashboard:"})," Métricas e relatórios"]}),e.jsxs("p",{children:["✅ ",e.jsx("strong",{children:"Estoque:"})," Controle de inventário"]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-blue-200",children:e.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["💡 ",e.jsx("strong",{children:"Dica:"})," Use o botão verde acima para acesso instantâneo!"]})})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("p",{className:"text-xs text-gray-500",children:"ClubManager Pro v1.0 - Sistema Demonstração"})})]})})},Dk=()=>{const{user:t,logout:s}=as(),n=[{name:"Dashboard",icon:IA,path:"/"},{name:"Monitor Bar",icon:sf,path:"/bar"},{name:"Atendimento Bar",icon:OA,path:"/bar/attendance"},{name:"Monitor Cozinha",icon:Jm,path:"/kitchen"},{name:"Gestão de Caixa",icon:Gt,path:"/cash"},{name:"Clientes",icon:ha,path:"/bar-customers"},{name:"Funcionários",icon:Zw,path:"/bar-employees"},{name:"Estoque",icon:er,path:"/inventory"},{name:"Sócios",icon:ha,path:"/members"},{name:"Configurações",icon:Ww,path:"/settings"}],i=(t==null?void 0:t.email)==="demo@clubmanager.com";return e.jsxs(Ne.aside,{initial:{x:-280},animate:{x:0},transition:{duration:.3},className:"bg-slate-900 text-white w-64 h-full p-4 flex flex-col overflow-y-auto scrollbar-hide",style:{overscrollBehavior:"contain"},children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-blue-400",children:"ClubManager"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Sistema de Gestão"}),i&&e.jsxs("div",{className:"mt-2 flex items-center space-x-1 text-xs text-green-400",children:[e.jsx(nd,{size:12}),e.jsx("span",{children:"Modo Demo"})]})]}),t&&e.jsxs("div",{className:`mb-6 p-3 rounded-lg ${i?"bg-green-800 border border-green-600":"bg-slate-800"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:t.avatar||`https://api.dicebear.com/8.x/initials/svg?seed=${t.name}`,alt:t.name,className:"w-10 h-10 rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:t.name}),e.jsx("p",{className:"text-slate-400 text-xs capitalize",children:t.role}),t.department&&e.jsx("p",{className:"text-slate-300 text-xs",children:t.department})]})]}),i&&e.jsx("div",{className:"mt-2 text-xs text-green-300",children:"🚀 Explorando funcionalidades"})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto scrollbar-hide",children:e.jsx("ul",{className:"space-y-2",children:n.map(l=>e.jsx("li",{children:e.jsxs(Uv,{to:l.path,className:({isActive:c})=>`flex items-center space-x-3 p-3 rounded-lg transition-colors ${c?"bg-blue-600 text-white":"text-slate-300 hover:bg-slate-800 hover:text-white"}`,children:[e.jsx(l.icon,{size:20}),e.jsx("span",{children:l.name})]})},l.name))})}),i&&e.jsxs("div",{className:"mb-4 p-3 bg-blue-900 rounded-lg border border-blue-700",children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-200 mb-2",children:"🎯 Teste Agora:"}),e.jsxs("ul",{className:"text-xs text-blue-300 space-y-1",children:[e.jsx("li",{children:"• Criar pedidos no Bar"}),e.jsx("li",{children:"• Sistema de Atendimento"}),e.jsx("li",{children:"• Gerenciar cozinha"}),e.jsx("li",{children:"• Ver métricas em tempo real"}),e.jsx("li",{children:"• Controlar estoque"})]})]}),e.jsxs("button",{onClick:s,className:"flex items-center space-x-3 p-3 rounded-lg text-slate-300 hover:bg-slate-800 hover:text-white transition-colors mt-4",children:[e.jsx(XA,{size:20}),e.jsx("span",{children:i?"Sair do Demo":"Sair"})]})]})},Ok=()=>{const{notifications:t,clearNotifications:s}=_t(),[n,i]=Ke.useState(!1);return e.jsx("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:new Date().toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(La,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>i(!n),className:"relative p-2 text-gray-600 hover:text-gray-800 transition-colors",children:[e.jsx(s0,{size:20}),t.length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:t.length})]}),e.jsx(nr,{children:n&&e.jsxs(Ne.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"Notificações"}),t.length>0&&e.jsx("button",{onClick:s,className:"text-sm text-blue-600 hover:text-blue-800",children:"Limpar todas"})]}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:t.length===0?e.jsx("p",{className:"p-4 text-gray-500 text-center",children:"Nenhuma notificação"}):t.map((l,c)=>e.jsx("div",{className:"p-3 border-b border-gray-100 last:border-b-0",children:e.jsx("p",{className:"text-sm text-gray-700",children:l})},c))})]})})]})]})]})})},Rk=()=>e.jsxs("div",{className:"flex h-screen bg-gray-50 overflow-hidden",children:[e.jsx(Dk,{}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(Ok,{}),e.jsx("main",{className:"flex-1 overflow-y-auto p-6",style:{overscrollBehavior:"none"},children:e.jsx(B2,{})})]})]}),Jw=6048e5,Pk=864e5,nv=Symbol.for("constructDateFrom");function ma(t,s){return typeof t=="function"?t(s):t&&typeof t=="object"&&nv in t?t[nv](s):t instanceof Date?new t.constructor(s):new Date(s)}function bs(t,s){return ma(s||t,t)}function zk(t,s,n){const i=bs(t,n==null?void 0:n.in);if(isNaN(s))return ma(t,NaN);const l=i.getDate(),c=ma(t,i.getTime());c.setMonth(i.getMonth()+s+1,0);const u=c.getDate();return l>=u?c:(i.setFullYear(c.getFullYear(),c.getMonth(),l),i)}let Lk={};function bd(){return Lk}function tl(t,s){var h,f,p,g;const n=bd(),i=(s==null?void 0:s.weekStartsOn)??((f=(h=s==null?void 0:s.locale)==null?void 0:h.options)==null?void 0:f.weekStartsOn)??n.weekStartsOn??((g=(p=n.locale)==null?void 0:p.options)==null?void 0:g.weekStartsOn)??0,l=bs(t,s==null?void 0:s.in),c=l.getDay(),u=(c<i?7:0)+c-i;return l.setDate(l.getDate()-u),l.setHours(0,0,0,0),l}function rd(t,s){return tl(t,{...s,weekStartsOn:1})}function e1(t,s){const n=bs(t,s==null?void 0:s.in),i=n.getFullYear(),l=ma(n,0);l.setFullYear(i+1,0,4),l.setHours(0,0,0,0);const c=rd(l),u=ma(n,0);u.setFullYear(i,0,4),u.setHours(0,0,0,0);const h=rd(u);return n.getTime()>=c.getTime()?i+1:n.getTime()>=h.getTime()?i:i-1}function rv(t){const s=bs(t),n=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return n.setUTCFullYear(s.getFullYear()),+t-+n}function Bk(t,...s){const n=ma.bind(null,s.find(i=>typeof i=="object"));return s.map(n)}function iv(t,s){const n=bs(t,s==null?void 0:s.in);return n.setHours(0,0,0,0),n}function $k(t,s,n){const[i,l]=Bk(n==null?void 0:n.in,t,s),c=iv(i),u=iv(l),h=+c-rv(c),f=+u-rv(u);return Math.round((h-f)/Pk)}function Vk(t,s){const n=e1(t,s),i=ma(t,0);return i.setFullYear(n,0,4),i.setHours(0,0,0,0),rd(i)}function Uk(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function qk(t){return!(!Uk(t)&&typeof t!="number"||isNaN(+bs(t)))}function Fk(t,s){const n=bs(t,s==null?void 0:s.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Ik={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Hk=(t,s,n)=>{let i;const l=Ik[t];return typeof l=="string"?i=l:s===1?i=l.one:i=l.other.replace("{{count}}",s.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function xi(t){return(s={})=>{const n=s.width?String(s.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Gk={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Yk={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Xk={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Kk={date:xi({formats:Gk,defaultWidth:"full"}),time:xi({formats:Yk,defaultWidth:"full"}),dateTime:xi({formats:Xk,defaultWidth:"full"})},Wk={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Qk=(t,s,n,i)=>Wk[t];function ia(t){return(s,n)=>{const i=n!=null&&n.context?String(n.context):"standalone";let l;if(i==="formatting"&&t.formattingValues){const u=t.defaultFormattingWidth||t.defaultWidth,h=n!=null&&n.width?String(n.width):u;l=t.formattingValues[h]||t.formattingValues[u]}else{const u=t.defaultWidth,h=n!=null&&n.width?String(n.width):t.defaultWidth;l=t.values[h]||t.values[u]}const c=t.argumentCallback?t.argumentCallback(s):s;return l[c]}}const Zk={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Jk={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},e5={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},t5={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},s5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},a5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},n5=(t,s)=>{const n=Number(t),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},r5={ordinalNumber:n5,era:ia({values:Zk,defaultWidth:"wide"}),quarter:ia({values:Jk,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ia({values:e5,defaultWidth:"wide"}),day:ia({values:t5,defaultWidth:"wide"}),dayPeriod:ia({values:s5,defaultWidth:"wide",formattingValues:a5,defaultFormattingWidth:"wide"})};function oa(t){return(s,n={})=>{const i=n.width,l=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],c=s.match(l);if(!c)return null;const u=c[0],h=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],f=Array.isArray(h)?o5(h,y=>y.test(u)):i5(h,y=>y.test(u));let p;p=t.valueCallback?t.valueCallback(f):f,p=n.valueCallback?n.valueCallback(p):p;const g=s.slice(u.length);return{value:p,rest:g}}}function i5(t,s){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&s(t[n]))return n}function o5(t,s){for(let n=0;n<t.length;n++)if(s(t[n]))return n}function t1(t){return(s,n={})=>{const i=s.match(t.matchPattern);if(!i)return null;const l=i[0],c=s.match(t.parsePattern);if(!c)return null;let u=t.valueCallback?t.valueCallback(c[0]):c[0];u=n.valueCallback?n.valueCallback(u):u;const h=s.slice(l.length);return{value:u,rest:h}}}const l5=/^(\d+)(th|st|nd|rd)?/i,c5=/\d+/i,d5={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},u5={any:[/^b/i,/^(a|c)/i]},h5={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},m5={any:[/1/i,/2/i,/3/i,/4/i]},f5={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},p5={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},g5={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},x5={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},y5={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},b5={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},v5={ordinalNumber:t1({matchPattern:l5,parsePattern:c5,valueCallback:t=>parseInt(t,10)}),era:oa({matchPatterns:d5,defaultMatchWidth:"wide",parsePatterns:u5,defaultParseWidth:"any"}),quarter:oa({matchPatterns:h5,defaultMatchWidth:"wide",parsePatterns:m5,defaultParseWidth:"any",valueCallback:t=>t+1}),month:oa({matchPatterns:f5,defaultMatchWidth:"wide",parsePatterns:p5,defaultParseWidth:"any"}),day:oa({matchPatterns:g5,defaultMatchWidth:"wide",parsePatterns:x5,defaultParseWidth:"any"}),dayPeriod:oa({matchPatterns:y5,defaultMatchWidth:"any",parsePatterns:b5,defaultParseWidth:"any"})},j5={code:"en-US",formatDistance:Hk,formatLong:Kk,formatRelative:Qk,localize:r5,match:v5,options:{weekStartsOn:0,firstWeekContainsDate:1}};function w5(t,s){const n=bs(t,s==null?void 0:s.in);return $k(n,Fk(n))+1}function _5(t,s){const n=bs(t,s==null?void 0:s.in),i=+rd(n)-+Vk(n);return Math.round(i/Jw)+1}function s1(t,s){var g,y,v,j;const n=bs(t,s==null?void 0:s.in),i=n.getFullYear(),l=bd(),c=(s==null?void 0:s.firstWeekContainsDate)??((y=(g=s==null?void 0:s.locale)==null?void 0:g.options)==null?void 0:y.firstWeekContainsDate)??l.firstWeekContainsDate??((j=(v=l.locale)==null?void 0:v.options)==null?void 0:j.firstWeekContainsDate)??1,u=ma((s==null?void 0:s.in)||t,0);u.setFullYear(i+1,0,c),u.setHours(0,0,0,0);const h=tl(u,s),f=ma((s==null?void 0:s.in)||t,0);f.setFullYear(i,0,c),f.setHours(0,0,0,0);const p=tl(f,s);return+n>=+h?i+1:+n>=+p?i:i-1}function N5(t,s){var h,f,p,g;const n=bd(),i=(s==null?void 0:s.firstWeekContainsDate)??((f=(h=s==null?void 0:s.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??n.firstWeekContainsDate??((g=(p=n.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,l=s1(t,s),c=ma((s==null?void 0:s.in)||t,0);return c.setFullYear(l,0,i),c.setHours(0,0,0,0),tl(c,s)}function S5(t,s){const n=bs(t,s==null?void 0:s.in),i=+tl(n,s)-+N5(n,s);return Math.round(i/Jw)+1}function nt(t,s){const n=t<0?"-":"",i=Math.abs(t).toString().padStart(s,"0");return n+i}const dn={y(t,s){const n=t.getFullYear(),i=n>0?n:1-n;return nt(s==="yy"?i%100:i,s.length)},M(t,s){const n=t.getMonth();return s==="M"?String(n+1):nt(n+1,2)},d(t,s){return nt(t.getDate(),s.length)},a(t,s){const n=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,s){return nt(t.getHours()%12||12,s.length)},H(t,s){return nt(t.getHours(),s.length)},m(t,s){return nt(t.getMinutes(),s.length)},s(t,s){return nt(t.getSeconds(),s.length)},S(t,s){const n=s.length,i=t.getMilliseconds(),l=Math.trunc(i*Math.pow(10,n-3));return nt(l,s.length)}},ai={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ov={G:function(t,s,n){const i=t.getFullYear()>0?1:0;switch(s){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(t,s,n){if(s==="yo"){const i=t.getFullYear(),l=i>0?i:1-i;return n.ordinalNumber(l,{unit:"year"})}return dn.y(t,s)},Y:function(t,s,n,i){const l=s1(t,i),c=l>0?l:1-l;if(s==="YY"){const u=c%100;return nt(u,2)}return s==="Yo"?n.ordinalNumber(c,{unit:"year"}):nt(c,s.length)},R:function(t,s){const n=e1(t);return nt(n,s.length)},u:function(t,s){const n=t.getFullYear();return nt(n,s.length)},Q:function(t,s,n){const i=Math.ceil((t.getMonth()+1)/3);switch(s){case"Q":return String(i);case"QQ":return nt(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,s,n){const i=Math.ceil((t.getMonth()+1)/3);switch(s){case"q":return String(i);case"qq":return nt(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,s,n){const i=t.getMonth();switch(s){case"M":case"MM":return dn.M(t,s);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(t,s,n){const i=t.getMonth();switch(s){case"L":return String(i+1);case"LL":return nt(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(t,s,n,i){const l=S5(t,i);return s==="wo"?n.ordinalNumber(l,{unit:"week"}):nt(l,s.length)},I:function(t,s,n){const i=_5(t);return s==="Io"?n.ordinalNumber(i,{unit:"week"}):nt(i,s.length)},d:function(t,s,n){return s==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):dn.d(t,s)},D:function(t,s,n){const i=w5(t);return s==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):nt(i,s.length)},E:function(t,s,n){const i=t.getDay();switch(s){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(t,s,n,i){const l=t.getDay(),c=(l-i.weekStartsOn+8)%7||7;switch(s){case"e":return String(c);case"ee":return nt(c,2);case"eo":return n.ordinalNumber(c,{unit:"day"});case"eee":return n.day(l,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(l,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(l,{width:"short",context:"formatting"});case"eeee":default:return n.day(l,{width:"wide",context:"formatting"})}},c:function(t,s,n,i){const l=t.getDay(),c=(l-i.weekStartsOn+8)%7||7;switch(s){case"c":return String(c);case"cc":return nt(c,s.length);case"co":return n.ordinalNumber(c,{unit:"day"});case"ccc":return n.day(l,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(l,{width:"narrow",context:"standalone"});case"cccccc":return n.day(l,{width:"short",context:"standalone"});case"cccc":default:return n.day(l,{width:"wide",context:"standalone"})}},i:function(t,s,n){const i=t.getDay(),l=i===0?7:i;switch(s){case"i":return String(l);case"ii":return nt(l,s.length);case"io":return n.ordinalNumber(l,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(t,s,n){const l=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return n.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(l,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(l,{width:"wide",context:"formatting"})}},b:function(t,s,n){const i=t.getHours();let l;switch(i===12?l=ai.noon:i===0?l=ai.midnight:l=i/12>=1?"pm":"am",s){case"b":case"bb":return n.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(l,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(l,{width:"wide",context:"formatting"})}},B:function(t,s,n){const i=t.getHours();let l;switch(i>=17?l=ai.evening:i>=12?l=ai.afternoon:i>=4?l=ai.morning:l=ai.night,s){case"B":case"BB":case"BBB":return n.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(l,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(l,{width:"wide",context:"formatting"})}},h:function(t,s,n){if(s==="ho"){let i=t.getHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return dn.h(t,s)},H:function(t,s,n){return s==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):dn.H(t,s)},K:function(t,s,n){const i=t.getHours()%12;return s==="Ko"?n.ordinalNumber(i,{unit:"hour"}):nt(i,s.length)},k:function(t,s,n){let i=t.getHours();return i===0&&(i=24),s==="ko"?n.ordinalNumber(i,{unit:"hour"}):nt(i,s.length)},m:function(t,s,n){return s==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):dn.m(t,s)},s:function(t,s,n){return s==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):dn.s(t,s)},S:function(t,s){return dn.S(t,s)},X:function(t,s,n){const i=t.getTimezoneOffset();if(i===0)return"Z";switch(s){case"X":return cv(i);case"XXXX":case"XX":return Hn(i);case"XXXXX":case"XXX":default:return Hn(i,":")}},x:function(t,s,n){const i=t.getTimezoneOffset();switch(s){case"x":return cv(i);case"xxxx":case"xx":return Hn(i);case"xxxxx":case"xxx":default:return Hn(i,":")}},O:function(t,s,n){const i=t.getTimezoneOffset();switch(s){case"O":case"OO":case"OOO":return"GMT"+lv(i,":");case"OOOO":default:return"GMT"+Hn(i,":")}},z:function(t,s,n){const i=t.getTimezoneOffset();switch(s){case"z":case"zz":case"zzz":return"GMT"+lv(i,":");case"zzzz":default:return"GMT"+Hn(i,":")}},t:function(t,s,n){const i=Math.trunc(+t/1e3);return nt(i,s.length)},T:function(t,s,n){return nt(+t,s.length)}};function lv(t,s=""){const n=t>0?"-":"+",i=Math.abs(t),l=Math.trunc(i/60),c=i%60;return c===0?n+String(l):n+String(l)+s+nt(c,2)}function cv(t,s){return t%60===0?(t>0?"-":"+")+nt(Math.abs(t)/60,2):Hn(t,s)}function Hn(t,s=""){const n=t>0?"-":"+",i=Math.abs(t),l=nt(Math.trunc(i/60),2),c=nt(i%60,2);return n+l+s+c}const dv=(t,s)=>{switch(t){case"P":return s.date({width:"short"});case"PP":return s.date({width:"medium"});case"PPP":return s.date({width:"long"});case"PPPP":default:return s.date({width:"full"})}},a1=(t,s)=>{switch(t){case"p":return s.time({width:"short"});case"pp":return s.time({width:"medium"});case"ppp":return s.time({width:"long"});case"pppp":default:return s.time({width:"full"})}},C5=(t,s)=>{const n=t.match(/(P+)(p+)?/)||[],i=n[1],l=n[2];if(!l)return dv(t,s);let c;switch(i){case"P":c=s.dateTime({width:"short"});break;case"PP":c=s.dateTime({width:"medium"});break;case"PPP":c=s.dateTime({width:"long"});break;case"PPPP":default:c=s.dateTime({width:"full"});break}return c.replace("{{date}}",dv(i,s)).replace("{{time}}",a1(l,s))},T5={p:a1,P:C5},E5=/^D+$/,A5=/^Y+$/,k5=["D","DD","YY","YYYY"];function M5(t){return E5.test(t)}function D5(t){return A5.test(t)}function O5(t,s,n){const i=R5(t,s,n);if(console.warn(i),k5.includes(t))throw new RangeError(i)}function R5(t,s,n){const i=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${s}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const P5=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,z5=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,L5=/^'([^]*?)'?$/,B5=/''/g,$5=/[a-zA-Z]/;function Zt(t,s,n){var g,y,v,j,N,_,C,R;const i=bd(),l=(n==null?void 0:n.locale)??i.locale??j5,c=(n==null?void 0:n.firstWeekContainsDate)??((y=(g=n==null?void 0:n.locale)==null?void 0:g.options)==null?void 0:y.firstWeekContainsDate)??i.firstWeekContainsDate??((j=(v=i.locale)==null?void 0:v.options)==null?void 0:j.firstWeekContainsDate)??1,u=(n==null?void 0:n.weekStartsOn)??((_=(N=n==null?void 0:n.locale)==null?void 0:N.options)==null?void 0:_.weekStartsOn)??i.weekStartsOn??((R=(C=i.locale)==null?void 0:C.options)==null?void 0:R.weekStartsOn)??0,h=bs(t,n==null?void 0:n.in);if(!qk(h))throw new RangeError("Invalid time value");let f=s.match(z5).map(S=>{const k=S[0];if(k==="p"||k==="P"){const E=T5[k];return E(S,l.formatLong)}return S}).join("").match(P5).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const k=S[0];if(k==="'")return{isToken:!1,value:V5(S)};if(ov[k])return{isToken:!0,value:S};if(k.match($5))throw new RangeError("Format string contains an unescaped latin alphabet character `"+k+"`");return{isToken:!1,value:S}});l.localize.preprocessor&&(f=l.localize.preprocessor(h,f));const p={firstWeekContainsDate:c,weekStartsOn:u,locale:l};return f.map(S=>{if(!S.isToken)return S.value;const k=S.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&D5(k)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&M5(k))&&O5(k,s,String(t));const E=ov[k[0]];return E(h,k,l.localize,p)}).join("")}function V5(t){const s=t.match(L5);return s?s[1].replace(B5,"'"):t}function U5(t,s){return+bs(t)>+bs(s)}function q5(t,s,n){return zk(t,-1,n)}const F5={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 mês",other:"cerca de {{count}} meses"},xMonths:{one:"1 mês",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},I5=(t,s,n)=>{let i;const l=F5[t];return typeof l=="string"?i=l:s===1?i=l.one:i=l.other.replace("{{count}}",String(s)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"em "+i:"há "+i:i},H5={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},G5={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Y5={full:"{{date}} 'às' {{time}}",long:"{{date}} 'às' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},X5={date:xi({formats:H5,defaultWidth:"full"}),time:xi({formats:G5,defaultWidth:"full"}),dateTime:xi({formats:Y5,defaultWidth:"full"})},K5={lastWeek:t=>{const s=t.getDay();return"'"+(s===0||s===6?"último":"última")+"' eeee 'às' p"},yesterday:"'ontem às' p",today:"'hoje às' p",tomorrow:"'amanhã às' p",nextWeek:"eeee 'às' p",other:"P"},W5=(t,s,n,i)=>{const l=K5[t];return typeof l=="function"?l(s):l},Q5={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},Z5={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},J5={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},eM={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","terça","quarta","quinta","sexta","sábado"],wide:["domingo","segunda-feira","terça-feira","quarta-feira","quinta-feira","sexta-feira","sábado"]},tM={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"}},sM={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},aM=(t,s)=>{const n=Number(t);return(s==null?void 0:s.unit)==="week"?n+"ª":n+"º"},nM={ordinalNumber:aM,era:ia({values:Q5,defaultWidth:"wide"}),quarter:ia({values:Z5,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ia({values:J5,defaultWidth:"wide"}),day:ia({values:eM,defaultWidth:"wide"}),dayPeriod:ia({values:tM,defaultWidth:"wide",formattingValues:sM,defaultFormattingWidth:"wide"})},rM=/^(\d+)[ºªo]?/i,iM=/\d+/i,oM={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},lM={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},cM={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},dM={any:[/1/i,/2/i,/3/i,/4/i]},uM={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},hM={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},mM={narrow:/^(dom|[23456]ª?|s[aá]b)/i,short:/^(dom|[23456]ª?|s[aá]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[aá]b)/i,wide:/^(domingo|(segunda|ter[cç]a|quarta|quinta|sexta)([- ]feira)?|s[aá]bado)/i},fM={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[aá]b/i]},pM={narrow:/^(a|p|mn|md|(da) (manhã|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manhã|tarde|noite))/i},gM={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manhã/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},xM={ordinalNumber:t1({matchPattern:rM,parsePattern:iM,valueCallback:t=>parseInt(t,10)}),era:oa({matchPatterns:oM,defaultMatchWidth:"wide",parsePatterns:lM,defaultParseWidth:"any"}),quarter:oa({matchPatterns:cM,defaultMatchWidth:"wide",parsePatterns:dM,defaultParseWidth:"any",valueCallback:t=>t+1}),month:oa({matchPatterns:uM,defaultMatchWidth:"wide",parsePatterns:hM,defaultParseWidth:"any"}),day:oa({matchPatterns:mM,defaultMatchWidth:"wide",parsePatterns:fM,defaultParseWidth:"any"}),dayPeriod:oa({matchPatterns:pM,defaultMatchWidth:"any",parsePatterns:gM,defaultParseWidth:"any"})},cs={code:"pt-BR",formatDistance:I5,formatLong:X5,formatRelative:W5,localize:nM,match:xM,options:{weekStartsOn:0,firstWeekContainsDate:1}},yM=()=>{const t=sr(),{orders:s,inventory:n,notifications:i}=_t(),{user:l}=as(),c=s.filter(y=>y.status==="delivered"&&Zt(y.updatedAt,"yyyy-MM-dd")===Zt(new Date,"yyyy-MM-dd")),u=c.reduce((y,v)=>y+v.total,0),h=s.filter(y=>y.status==="pending").length,f=n.filter(y=>y.currentStock<=y.minStock).length,p=(l==null?void 0:l.email)==="demo@clubmanager.com",g=[{title:"Faturamento Hoje",value:`R$ ${u.toFixed(2)}`,icon:Gt,color:"text-green-600",bgColor:"bg-green-100"},{title:"Pedidos Pendentes",value:h,icon:Ht,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Vendas Hoje",value:c.length,icon:el,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Estoque Baixo",value:f,icon:Ws,color:"text-red-600",bgColor:"bg-red-100"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:["Dashboard Executivo",p&&e.jsx("span",{className:"ml-3 text-lg text-green-600 font-normal",children:"🚀 Modo Demo Ativo"})]}),e.jsx("p",{className:"text-gray-600",children:"Visão geral das operações do clube"})]}),p&&e.jsxs(Ne.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},className:"bg-gradient-to-r from-green-500 to-blue-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[e.jsx(nd,{size:16}),e.jsx("span",{className:"text-sm font-medium",children:"Teste todas as funcionalidades!"})]})]})}),p&&e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-gradient-to-r from-blue-50 to-green-50 border border-blue-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"p-3 bg-blue-600 rounded-full",children:e.jsx(nd,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"🎯 Bem-vindo ao ClubManager Demo!"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Explore todos os módulos e funcionalidades do sistema. Você pode criar pedidos, gerenciar a cozinha, controlar estoque e muito mais!"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(fn,{to:"/bar",className:"flex items-center justify-between p-3 bg-white rounded-lg border border-blue-200 hover:border-blue-400 transition-colors group",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(sf,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"font-medium text-gray-800",children:"Testar Módulo Bar"})]}),e.jsx(Jb,{className:"w-4 h-4 text-gray-400 group-hover:text-blue-600 transition-colors"})]}),e.jsxs(fn,{to:"/kitchen",className:"flex items-center justify-between p-3 bg-white rounded-lg border border-green-200 hover:border-green-400 transition-colors group",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Jm,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"font-medium text-gray-800",children:"Testar Módulo Cozinha"})]}),e.jsx(Jb,{className:"w-4 h-4 text-gray-400 group-hover:text-green-600 transition-colors"})]})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:g.map((y,v)=>{const j=y.title==="Estoque Baixo";return e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:v*.1},className:`bg-white rounded-lg shadow-md p-6 ${j?"cursor-pointer hover:shadow-lg transition-shadow":""}`,onClick:j?()=>t("/inventory/estoque-baixo"):void 0,whileHover:j?{scale:1.02}:{},whileTap:j?{scale:.98}:{},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:y.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:y.value})]}),e.jsx("div",{className:`p-3 rounded-full ${y.bgColor}`,children:e.jsx(y.icon,{className:`w-6 h-6 ${y.color}`})})]})},y.title)})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(Ne.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Pedidos Recentes"}),e.jsxs("div",{className:"space-y-3",children:[s.slice(0,5).map(y=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:y.tableNumber?`Mesa ${y.tableNumber}`:"Balcão"}),e.jsx("p",{className:"text-sm text-gray-600",children:Zt(y.createdAt,"HH:mm",{locale:cs})})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium text-gray-800",children:["R$ ",y.total.toFixed(2)]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${y.status==="pending"?"bg-yellow-100 text-yellow-800":y.status==="preparing"?"bg-blue-100 text-blue-800":y.status==="ready"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:y.status==="pending"?"Pendente":y.status==="preparing"?"Preparando":y.status==="ready"?"Pronto":"Entregue"})]})]},y.id)),s.length===0&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-gray-500 mb-2",children:"Nenhum pedido ainda"}),p&&e.jsx(fn,{to:"/bar",className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Criar primeiro pedido →"})]})]})]}),e.jsxs(Ne.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.3},className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Alertas de Estoque"}),e.jsxs("div",{className:"space-y-3",children:[n.filter(y=>y.currentStock<=y.minStock).slice(0,5).map(y=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg border border-red-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:y.name}),e.jsx("p",{className:"text-sm text-gray-600",children:y.category})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium text-red-600",children:[y.currentStock," ",y.unit]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Mín: ",y.minStock]})]})]},y.id)),n.filter(y=>y.currentStock<=y.minStock).length===0&&e.jsx("p",{className:"text-gray-500 text-center py-4",children:"Todos os itens com estoque adequado"})]})]})]}),e.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Módulos Disponíveis"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(fn,{to:"/bar",className:"p-4 border border-gray-200 rounded-lg hover:border-blue-300 transition-colors cursor-pointer group",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(sf,{className:"w-5 h-5 text-blue-600"}),e.jsx("h4",{className:"font-medium text-gray-800 group-hover:text-blue-600 transition-colors",children:"Módulo Bar"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Gestão completa de pedidos, comandas e vendas do bar"})]}),e.jsxs(fn,{to:"/cash",className:"p-4 border border-gray-200 rounded-lg hover:border-green-300 transition-colors cursor-pointer group",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Gt,{className:"w-5 h-5 text-green-600"}),e.jsx("h4",{className:"font-medium text-gray-800 group-hover:text-green-600 transition-colors",children:"Gestão de Caixa"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Controle financeiro, fechamento de caixa e relatórios"})]}),e.jsxs(fn,{to:"/kitchen",className:"p-4 border border-gray-200 rounded-lg hover:border-orange-300 transition-colors cursor-pointer group",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Jm,{className:"w-5 h-5 text-orange-600"}),e.jsx("h4",{className:"font-medium text-gray-800 group-hover:text-orange-600 transition-colors",children:"Módulo Cozinha"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Controle de cardápio, pedidos e gestão da cozinha"})]}),e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(er,{className:"w-5 h-5 text-gray-400"}),e.jsx("h4",{className:"font-medium text-gray-500",children:"Módulos Futuros"})]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Quadras, Piscina, Eventos, RH e mais"})]})]})]})]})},n1=({onCustomerSelected:t,onClose:s})=>{const[n,i]=b.useState({phone:"",name:"",email:""}),[l,c]=b.useState(null),[u,h]=b.useState(!1),[f,p]=b.useState(!1),[g,y]=b.useState(null),v=async S=>{if(!(S.length<10)){p(!0),y(null);try{const{data:k,error:E}=await ae.rpc("get_bar_customer_by_phone",{customer_phone:S});if(E)throw E;if(k&&k.length>0){const w=k[0];c(w),i({phone:w.phone,name:w.name,email:w.email||""})}else c(null),i(w=>({...w,name:"",email:""}))}catch(k){console.error("Erro ao buscar cliente:",k),y("Erro ao buscar cliente")}finally{p(!1)}}},j=S=>{const k=S.replace(/\D/g,"");return k.length<=11?k.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3"):S},N=S=>{const k=S.target.value,E=j(k);i(M=>({...M,phone:E}));const w=k.replace(/\D/g,"");w.length===11?v(w):c(null)},_=async()=>{h(!0),y(null);try{const S=n.phone.replace(/\D/g,""),{data:k,error:E}=await ae.from("bar_customers").insert({phone:S,name:n.name,email:n.email||null,status:"active",is_vip:!1,loyalty_points:0,credit_limit:0,current_balance:0}).select().single();if(E)throw E;t(k)}catch(S){console.error("Erro ao criar cliente:",S),y("Erro ao criar cliente")}finally{h(!1)}},C=()=>{l&&t(l)},R=S=>{if(S.preventDefault(),!n.phone||!n.name){y("Telefone e nome são obrigatórios");return}l?C():_()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:l?"Cliente Encontrado":"Cadastro de Cliente"}),e.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),g&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:g}),e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:n.phone,onChange:N,placeholder:"(11) 99999-9999",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",maxLength:15,required:!0}),f&&e.jsx("div",{className:"absolute right-3 top-2.5",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome *"}),e.jsx("input",{type:"text",value:n.name,onChange:S=>i(k=>({...k,name:S.target.value})),placeholder:"Nome completo",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:!!l})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email (opcional)"}),e.jsx("input",{type:"email",value:n.email,onChange:S=>i(k=>({...k,email:S.target.value})),placeholder:"email@exemplo.com",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:!!l})]}),l&&e.jsx("div",{className:"p-3 bg-green-100 border border-green-400 rounded",children:e.jsxs("p",{className:"text-green-700 text-sm",children:[e.jsx("strong",{children:"Cliente encontrado!"}),e.jsx("br",{}),"Última visita: ",l.last_visit?new Date(l.last_visit).toLocaleDateString("pt-BR"):"Primeira visita",e.jsx("br",{}),"Pontos de fidelidade: ",l.loyalty_points,l.is_vip&&e.jsx("span",{className:"ml-2 text-yellow-600",children:"⭐ VIP"})]})}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:s,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:u||!n.phone||!n.name,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:u?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Processando..."]}):l?"Selecionar Cliente":"Cadastrar Cliente"})]})]})]})})},bM=({isOpen:t,onClose:s,menuItems:n})=>{const{addOrder:i}=_t(),{user:l}=as(),[c,u]=b.useState([]),[h,f]=b.useState(""),[p,g]=b.useState(""),[y,v]=b.useState(!1),[j,N]=b.useState(null),[_,C]=b.useState(!1),R=z=>{if(c.find(H=>H.menuItemId===z.id))u(H=>H.map(V=>V.menuItemId===z.id?{...V,quantity:V.quantity+1}:V));else{const H={id:`item-${Date.now()}`,menuItemId:z.id,quantity:1,price:z.price};u(V=>[...V,H])}},S=z=>{u(U=>U.filter(H=>H.menuItemId!==z))},k=(z,U)=>{if(U<=0){S(z);return}u(H=>H.map(V=>V.menuItemId===z?{...V,quantity:U}:V))},E=c.reduce((z,U)=>z+U.price*U.quantity,0),w=z=>{N(z),C(!1)},M=async z=>{if(z.preventDefault(),!(c.length===0||y)){if(!j){alert("Por favor, selecione um cliente antes de finalizar o pedido.");return}v(!0);try{await i({tableNumber:h||void 0,items:c.map(({id:U,...H})=>H),status:"pending",employeeId:l.id,customerId:j.id,notes:p||void 0}),u([]),f(""),g(""),N(null),s()}catch(U){console.error("Falha ao criar o pedido:",U)}finally{v(!1)}}};return e.jsx(nr,{children:t&&e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:[e.jsxs(Ne.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Novo Pedido"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(dt,{size:24})})]}),e.jsxs("div",{className:"flex h-[70vh]",children:[e.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Cardápio"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map(z=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:z.name}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:["R$ ",z.price.toFixed(2)]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:z.description}),e.jsx("button",{onClick:()=>R(z),disabled:!z.available||y,className:"w-full bg-blue-600 text-white py-2 rounded-lg font-medium hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:z.available?"Adicionar":"Indisponível"})]},z.id))})]}),e.jsxs("div",{className:"w-1/3 bg-gray-50 p-6 border-l border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Pedido"}),e.jsxs("form",{onSubmit:M,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cliente *"}),j?e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-800",children:j.name}),e.jsx("p",{className:"text-sm text-green-600",children:j.phone}),j.is_vip&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 mt-1",children:"⭐ VIP"})]}),e.jsx("button",{type:"button",onClick:()=>N(null),className:"text-green-600 hover:text-green-800",disabled:y,children:e.jsx(dt,{size:16})})]})}):e.jsxs("button",{type:"button",onClick:()=>C(!0),className:"w-full flex items-center justify-center px-3 py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-blue-400 hover:text-blue-600 transition-colors",disabled:y,children:[e.jsx(tr,{size:20,className:"mr-2"}),"Selecionar Cliente"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Número da Mesa"}),e.jsx("input",{type:"text",value:h,onChange:z=>f(z.target.value),placeholder:"Ex: 5",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:y})]}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto pr-2",children:c.map(z=>{const U=n.find(H=>H.id===z.menuItemId);return e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:U==null?void 0:U.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["R$ ",z.price.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>k(z.menuItemId,z.quantity-1),className:"text-gray-400 hover:text-gray-600",disabled:y,children:e.jsx(ji,{size:16})}),e.jsx("span",{className:"w-8 text-center",children:z.quantity}),e.jsx("button",{type:"button",onClick:()=>k(z.menuItemId,z.quantity+1),className:"text-gray-400 hover:text-gray-600",disabled:y,children:e.jsx(Es,{size:16})})]})]},z.id)})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observações"}),e.jsx("textarea",{value:p,onChange:z=>g(z.target.value),placeholder:"Observações especiais...",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:y})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-800",children:"Total:"}),e.jsxs("span",{className:"text-xl font-bold text-green-600",children:["R$ ",E.toFixed(2)]})]}),e.jsx("button",{type:"submit",disabled:c.length===0||y||!j,className:"w-full bg-green-600 text-white py-3 rounded-lg font-medium hover:bg-green-700 disabled:bg-green-400 disabled:cursor-not-allowed transition-colors",children:y?"Confirmando...":"Confirmar Pedido"})]})]})]})]})]}),_&&e.jsx(n1,{onCustomerSelected:w,onClose:()=>C(!1)})]})})},vM=({order:t,menuItems:s,hasMultipleOrders:n=!1,orderNumber:i})=>{const{updateOrderStatus:l}=_t(),c=y=>{switch(y){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"preparing":return"bg-blue-100 text-blue-800 border-blue-200";case"ready":return"bg-green-100 text-green-800 border-green-200";case"delivered":return"bg-gray-100 text-gray-800 border-gray-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},u=y=>{switch(y){case"pending":return"Pendente";case"preparing":return"Preparando";case"ready":return"Pronto";case"delivered":return"Entregue";case"cancelled":return"Cancelado";default:return y}},f=(y=>{switch(y){case"pending":return"preparing";case"preparing":return"ready";case"ready":return"delivered";default:return null}})(t.status),p=y=>y.id.startsWith("balcao-"),g=y=>y.id.startsWith("comanda-");return e.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow ${n?"ring-2 ring-orange-300 ring-offset-2":""} ${p(t)?"border-green-400 bg-green-50 shadow-lg":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(cl,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"font-medium text-gray-800",children:t.tableNumber?`Mesa ${t.tableNumber}`:"Balcão"}),i&&e.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium",children:["#",i]}),p(t)&&e.jsx("span",{className:"bg-green-600 text-white px-2 py-1 rounded-full text-xs font-bold animate-pulse",children:"✓ PAGO"}),g(t)&&e.jsx("span",{className:"bg-yellow-500 text-white px-2 py-1 rounded-full text-xs font-medium",children:"AGUARDA PAGTO"})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${c(t.status)}`,children:u(t.status)})]}),e.jsx("div",{className:"space-y-2 mb-4",children:t.items.map(y=>{const v=s.find(j=>j.id===y.menuItemId);return e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:[y.quantity,"x ",v==null?void 0:v.name]}),e.jsxs("span",{className:"text-gray-800",children:["R$ ",(y.price*y.quantity).toFixed(2)]})]},y.id)})}),t.notes&&e.jsx("div",{className:"mb-4 p-2 bg-yellow-50 rounded border border-yellow-200",children:e.jsx("p",{className:"text-xs text-yellow-800",children:t.notes})}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ht,{size:12}),e.jsx("span",{children:Zt(t.createdAt,"HH:mm",{locale:cs})})]}),e.jsxs("span",{className:"font-medium text-gray-800",children:["R$ ",t.total.toFixed(2)]})]}),f&&e.jsxs("button",{onClick:()=>l(t.id,f),className:`w-full py-2 rounded-lg text-sm font-medium transition-colors ${p(t)?t.status==="pending"?"bg-green-600 text-white hover:bg-green-700":t.status==="preparing"?"bg-green-700 text-white hover:bg-green-800":"bg-green-800 text-white hover:bg-green-900":g(t)?t.status==="pending"?"bg-yellow-600 text-white hover:bg-yellow-700":t.status==="preparing"?"bg-yellow-700 text-white hover:bg-yellow-800":"bg-yellow-800 text-white hover:bg-yellow-900":t.status==="pending"?"bg-blue-600 text-white hover:bg-blue-700":t.status==="preparing"?"bg-blue-700 text-white hover:bg-blue-800":"bg-blue-800 text-white hover:bg-blue-900"}`,children:[f==="preparing"&&"Iniciar Preparo",f==="ready"&&"Marcar como Pronto",f==="delivered"&&"Marcar como Entregue"]})]})},jM=()=>{const{orders:t,barOrders:s,menuItems:n}=_t(),[i,l]=b.useState(!1),[c,u]=b.useState("all"),[h,f]=b.useState(""),[p,g]=b.useState("all"),y=n,j=(()=>{const S=new Map;return s.forEach(k=>{const E=k.tableNumber||"Balcão";S.has(E)||S.set(E,[]),S.get(E).push(k)}),S})(),N=S=>(j.get(S)||[]).length>1,_=S=>S.id.slice(-4).toUpperCase(),C=s.filter(S=>{var M,z;const k=c==="all"||S.status===c,E=p==="all"||(S.tableNumber||"Balcão")===p,w=((M=S.tableNumber)==null?void 0:M.toLowerCase().includes(h.toLowerCase()))||S.id.toLowerCase().includes(h.toLowerCase())||((z=S.notes)==null?void 0:z.toLowerCase().includes(h.toLowerCase()));return k&&E&&w}),R=s.filter(S=>S.status==="delivered").reduce((S,k)=>S+k.total,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Módulo Bar"}),e.jsx("p",{className:"text-gray-600",children:"Gestão completa de pedidos e vendas"})]}),e.jsxs(Ne.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>l(!0),className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(Es,{size:20}),e.jsx("span",{children:"Novo Pedido"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Receita Total"}),e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["R$ ",R.toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Pedidos Hoje"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:s.length})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Pedidos Pendentes"}),e.jsx("p",{className:"text-3xl font-bold text-orange-600",children:s.filter(S=>S.status==="pending").length})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Pedidos"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[Array.from(j.entries()).filter(([S,k])=>k.length>1).length>0&&e.jsxs("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs font-medium",children:[Array.from(j.entries()).filter(([S,k])=>k.length>1).length," mesa(s) com múltiplos pedidos"]}),p!=="all"&&e.jsxs("button",{onClick:()=>g("all"),className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium hover:bg-blue-200 transition-colors flex items-center space-x-1",children:[e.jsxs("span",{children:["Filtro: ",p]}),e.jsx("span",{className:"text-blue-600",children:"✕"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(La,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar pedidos...",value:h,onChange:S=>f(S.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("select",{value:c,onChange:S=>u(S.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Todos os Status"}),e.jsx("option",{value:"pending",children:"Pendente"}),e.jsx("option",{value:"preparing",children:"Preparando"}),e.jsx("option",{value:"ready",children:"Pronto"}),e.jsx("option",{value:"delivered",children:"Entregue"})]})]})]}),Array.from(j.entries()).filter(([S,k])=>k.length>1).length>0&&e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"text-sm font-semibold text-orange-800 mb-2",children:"⚠️ Mesas com Múltiplos Pedidos:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from(j.entries()).filter(([S,k])=>k.length>1).map(([S,k])=>e.jsxs("button",{onClick:()=>g(S),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors hover:shadow-md transform hover:scale-105 ${p===S?"bg-orange-400 text-white":"bg-orange-200 text-orange-800 hover:bg-orange-300"}`,title:`Filtrar pedidos da ${S}`,children:["Mesa ",S,": ",k.length," pedidos"]},S))})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:C.map(S=>e.jsx(vM,{order:S,menuItems:n,hasMultipleOrders:N(S.tableNumber||"Balcão"),orderNumber:_(S)},S.id))}),C.length===0&&e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Nenhum pedido encontrado"})})]}),i&&e.jsx(bM,{isOpen:i,onClose:()=>l(!1),menuItems:y})]})},wM=()=>{const[t,s]=b.useState([]),[n,i]=b.useState(!0),[l,c]=b.useState(""),[u,h]=b.useState("all"),[f,p]=b.useState(!1),[g,y]=b.useState(null),[v,j]=b.useState(!1),N=async()=>{i(!0);try{const{data:w,error:M}=await ae.from("bar_customers").select("*").order("created_at",{ascending:!1});if(M)throw M;s(w||[])}catch(w){console.error("Erro ao carregar clientes:",w)}finally{i(!1)}};b.useEffect(()=>{N()},[]);const _=t.filter(w=>{const M=w.name.toLowerCase().includes(l.toLowerCase())||w.phone.includes(l)||w.email&&w.email.toLowerCase().includes(l.toLowerCase()),z=u==="all"||w.status===u;return M&&z}),C={total:t.length,active:t.filter(w=>w.status==="active").length,vip:t.filter(w=>w.is_vip).length,totalLoyaltyPoints:t.reduce((w,M)=>w+M.loyalty_points,0)},R=w=>{s(M=>[w,...M]),p(!1)},S=w=>{y(w),j(!0)},k=w=>{const M=w.replace(/\D/g,"");return M.length===11?`(${M.slice(0,2)}) ${M.slice(2,7)}-${M.slice(7)}`:w},E=w=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(w);return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Clientes do Bar"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Gerencie os clientes e suas informações"})]}),e.jsxs("button",{onClick:()=>p(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(Es,{size:20}),e.jsx("span",{children:"Novo Cliente"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total de Clientes"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:C.total})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(sd,{className:"h-6 w-6 text-blue-600"})})]})}),e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Clientes Ativos"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:C.active})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx(rr,{className:"h-6 w-6 text-green-600"})})]})}),e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Clientes VIP"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:C.vip})]}),e.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:e.jsx(tf,{className:"h-6 w-6 text-yellow-600"})})]})}),e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pontos Totais"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:C.totalLoyaltyPoints.toLocaleString()})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:e.jsx(Gt,{className:"h-6 w-6 text-purple-600"})})]})})]}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(La,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Buscar por nome, telefone ou email...",value:l,onChange:w=>c(w.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsx("div",{className:"flex space-x-4",children:e.jsxs("select",{value:u,onChange:w=>h(w.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Todos os Status"}),e.jsx("option",{value:"active",children:"Ativo"}),e.jsx("option",{value:"inactive",children:"Inativo"}),e.jsx("option",{value:"blocked",children:"Bloqueado"})]})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:n?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Carregando clientes..."})]}):_.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(sd,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Nenhum cliente encontrado"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contato"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pontos"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Última Visita"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map(w=>e.jsxs(Ne.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-blue-600",children:w.name.charAt(0).toUpperCase()})})}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.name}),w.is_vip&&e.jsx(tf,{className:"ml-2 h-4 w-4 text-yellow-500 fill-current"})]}),e.jsx("div",{className:"text-sm text-gray-500",children:w.cpf||"CPF não informado"})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:k(w.phone)}),e.jsx("div",{className:"text-sm text-gray-500",children:w.email||"Email não informado"})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w.status==="active"?"bg-green-100 text-green-800":w.status==="inactive"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:w.status==="active"?"Ativo":w.status==="inactive"?"Inativo":"Bloqueado"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[w.loyalty_points.toLocaleString()," pts"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:w.last_visit?new Date(w.last_visit).toLocaleDateString("pt-BR"):"Nunca"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>S(w),className:"text-blue-600 hover:text-blue-900",children:e.jsx(ki,{size:16})}),e.jsx("button",{className:"text-gray-600 hover:text-gray-900",children:e.jsx(dl,{size:16})}),e.jsx("button",{className:"text-red-600 hover:text-red-900",children:e.jsx(yd,{size:16})})]})})]},w.id))})]})})}),f&&e.jsx(n1,{onCustomerSelected:R,onClose:()=>p(!1)}),v&&g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Detalhes do Cliente"}),e.jsx("button",{onClick:()=>j(!1),className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nome"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:g.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Telefone"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:k(g.phone)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:g.email||"Não informado"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"CPF"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:g.cpf||"Não informado"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsxs("p",{className:"mt-1",children:[e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${g.status==="active"?"bg-green-100 text-green-800":g.status==="inactive"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:g.status==="active"?"Ativo":g.status==="inactive"?"Inativo":"Bloqueado"}),g.is_vip&&e.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"⭐ VIP"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Pontos de Fidelidade"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[g.loyalty_points.toLocaleString()," pontos"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Limite de Crédito"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:E(g.credit_limit)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Saldo Atual"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:E(g.current_balance)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Última Visita"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:g.last_visit?new Date(g.last_visit).toLocaleDateString("pt-BR"):"Nunca"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Cadastrado em"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:new Date(g.created_at).toLocaleDateString("pt-BR")})]})]}),g.notes&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Observações"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:g.notes})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Fechar"})})]})})]})},_M=()=>{const[t,s]=b.useState([]),[n,i]=b.useState(!0),[l,c]=b.useState(null),u=b.useCallback(async()=>{try{i(!0),c(null);const{data:N,error:_}=await ae.from("bar_employees").select("*").order("created_at",{ascending:!1});if(_)throw console.error("Erro na consulta bar_employees:",_),new Error(`Erro ao consultar banco de dados: ${_.message}`);const C=(N||[]).map(R=>{const S=R.notes||"",k=S.match(/Nome: ([^,]+)/),E=S.match(/CPF: ([^,]+)/),w=S.match(/Email: ([^,]+)/),M=S.match(/Telefone: ([^,]+)/);return{id:R.id,employee_id:R.employee_id||"",bar_role:R.bar_role,shift_preference:R.shift_preference,specialties:R.specialties||[],commission_rate:R.commission_rate||0,status:R.is_active?"active":"inactive",start_date:R.start_date,end_date:R.end_date,notes:R.notes,created_at:R.created_at,updated_at:R.updated_at,employee:{id:R.id,name:k?k[1]:"Nome não informado",cpf:E?E[1]:void 0,email:w?w[1]:void 0,phone:M?M[1]:void 0,hire_date:R.start_date,status:R.is_active?"active":"inactive"}}});console.log("Funcionários carregados:",C.length),s(C)}catch(N){console.error("Erro ao buscar funcionários:",N),c(N instanceof Error?N.message:"Erro ao buscar funcionários")}finally{i(!1)}},[]),h=b.useCallback(async N=>{try{c(null);const{data:_,error:C}=await ae.from("bar_employees").insert([{employee_id:null,bar_role:N.bar_role,shift_preference:N.shift_preference||"qualquer",specialties:N.specialties||[],commission_rate:N.commission_rate||0,is_active:!0,start_date:new Date().toISOString().split("T")[0],notes:`Nome: ${N.name}${N.cpf?`, CPF: ${N.cpf}`:""}${N.email?`, Email: ${N.email}`:""}${N.phone?`, Telefone: ${N.phone}`:""}${N.notes?`, Observações: ${N.notes}`:""}`}]).select().single();if(C)throw C;return await u(),_.id}catch(_){console.error("Erro ao criar funcionário:",_);const C=_ instanceof Error?_.message:"Erro ao criar funcionário";throw c(C),new Error(C)}},[u]),f=b.useCallback(async(N,_)=>{try{c(null);const{data:C,error:R}=await ae.from("bar_employees").select("notes").eq("id",N).single();if(R)throw R;let S=(C==null?void 0:C.notes)||"";_.name!==void 0&&(S=S.replace(/Nome: [^,]+/,`Nome: ${_.name}`),S.includes("Nome:")||(S=`Nome: ${_.name}, ${S}`)),_.cpf!==void 0&&(S=S.replace(/CPF: [^,]+/,`CPF: ${_.cpf}`),!S.includes("CPF:")&&_.cpf&&(S+=`, CPF: ${_.cpf}`)),_.email!==void 0&&(S=S.replace(/Email: [^,]+/,`Email: ${_.email}`),!S.includes("Email:")&&_.email&&(S+=`, Email: ${_.email}`)),_.phone!==void 0&&(S=S.replace(/Telefone: [^,]+/,`Telefone: ${_.phone}`),!S.includes("Telefone:")&&_.phone&&(S+=`, Telefone: ${_.phone}`));const k={updated_at:new Date().toISOString()};_.bar_role!==void 0&&(k.bar_role=_.bar_role),_.shift_preference!==void 0&&(k.shift_preference=_.shift_preference),_.specialties!==void 0&&(k.specialties=_.specialties),_.commission_rate!==void 0&&(k.commission_rate=_.commission_rate),_.is_active!==void 0&&(k.is_active=_.is_active),_.notes!==void 0&&(S+=_.notes?`, Observações: ${_.notes}`:""),k.notes=S;const{error:E}=await ae.from("bar_employees").update(k).eq("id",N);if(E)throw E;await u()}catch(C){console.error("Erro ao atualizar funcionário:",C);const R=C instanceof Error?C.message:"Erro ao atualizar funcionário";throw c(R),new Error(R)}},[u]),p=b.useCallback(async N=>{try{await f(N,{is_active:!1})}catch(_){throw console.error("Erro ao desativar funcionário:",_),_}},[f]),g=b.useCallback(async N=>{try{await f(N,{is_active:!0})}catch(_){throw console.error("Erro ao reativar funcionário:",_),_}},[f]),y=b.useCallback(async N=>{try{const{data:_,error:C}=await ae.from("bar_employees").select("*").eq("id",N).single();if(C)throw C;if(!_)return null;const R=_.notes||"",S=R.match(/Nome: ([^,]+)/),k=R.match(/CPF: ([^,]+)/),E=R.match(/Email: ([^,]+)/),w=R.match(/Telefone: ([^,]+)/);return{id:_.id,employee_id:_.employee_id||"",bar_role:_.bar_role,shift_preference:_.shift_preference,specialties:_.specialties||[],commission_rate:_.commission_rate||0,status:_.is_active?"active":"inactive",start_date:_.start_date||"",end_date:_.end_date||void 0,notes:_.notes||void 0,created_at:_.created_at||"",updated_at:_.updated_at||"",employee:{id:_.id,name:S?S[1]:"Nome não informado",cpf:k?k[1]:void 0,email:E?E[1]:void 0,phone:w?w[1]:void 0,hire_date:_.start_date||void 0,status:_.is_active?"active":"inactive"}}}catch(_){return console.error("Erro ao buscar funcionário:",_),null}},[]),v=b.useCallback((N="",_="all",C="all")=>t.filter(R=>{var M,z,U;const S=R.employee;if(!S)return!1;const k=S.name.toLowerCase().includes(N.toLowerCase())||((M=S.phone)==null?void 0:M.includes(N))||((z=S.email)==null?void 0:z.toLowerCase().includes(N.toLowerCase()))||((U=S.cpf)==null?void 0:U.includes(N)),E=_==="all"||R.bar_role===_,w=C==="all"||R.status===C;return k&&E&&w}),[t]),j=b.useCallback(()=>({total:t.length,active:t.filter(N=>N.status==="active").length,inactive:t.filter(N=>N.status==="inactive").length,byRole:{atendente:t.filter(N=>N.bar_role==="atendente").length,garcom:t.filter(N=>N.bar_role==="garcom").length,cozinheiro:t.filter(N=>N.bar_role==="cozinheiro").length,barman:t.filter(N=>N.bar_role==="barman").length,gerente:t.filter(N=>N.bar_role==="gerente").length}}),[t]);return b.useEffect(()=>{u()},[u]),{employees:t,loading:n,error:l,createEmployee:h,updateEmployee:f,deactivateEmployee:p,reactivateEmployee:g,getEmployeeById:y,filterEmployees:v,getStats:j,refetch:u}},NM=()=>{var me,fe;const{loading:t,error:s,createEmployee:n,updateEmployee:i,deactivateEmployee:l,reactivateEmployee:c,filterEmployees:u,getStats:h}=_M(),[f,p]=b.useState(""),[g,y]=b.useState("all"),[v,j]=b.useState("all"),[N,_]=b.useState(null),[C,R]=b.useState(!1),[S,k]=b.useState(!1),[E,w]=b.useState(!1),[M,z]=b.useState(!1),[U,H]=b.useState({name:"",cpf:"",email:"",phone:"",bar_role:"atendente",shift_preference:"qualquer",specialties:[],commission_rate:0,notes:""}),[V,Q]=b.useState({}),X=u(f,g,v),re=h(),pe=async()=>{if(!U.name.trim()){alert("Por favor, informe o nome do funcionário");return}z(!0);try{await n(U),k(!1),K(),alert("Funcionário cadastrado com sucesso!")}catch(ie){console.error("Erro ao criar funcionário:",ie),alert("Erro ao cadastrar funcionário. Tente novamente.")}finally{z(!1)}},$=ie=>{var de,Ee,Ue,je;_(ie),Q({name:((de=ie.employee)==null?void 0:de.name)||"",cpf:((Ee=ie.employee)==null?void 0:Ee.cpf)||"",email:((Ue=ie.employee)==null?void 0:Ue.email)||"",phone:((je=ie.employee)==null?void 0:je.phone)||"",bar_role:ie.bar_role,shift_preference:ie.shift_preference,specialties:ie.specialties||[],commission_rate:ie.commission_rate,notes:ie.notes||""}),w(!0)},D=async()=>{if(N){z(!0);try{await i(N.id,V),w(!1),_(null),Q({}),alert("Funcionário atualizado com sucesso!")}catch(ie){console.error("Erro ao atualizar funcionário:",ie),alert("Erro ao atualizar funcionário. Tente novamente.")}finally{z(!1)}}},P=async ie=>{var Ee;if(confirm(`Tem certeza que deseja desativar o funcionário ${(Ee=ie.employee)==null?void 0:Ee.name}?`))try{await l(ie.id),alert("Funcionário desativado com sucesso!")}catch(Ue){console.error("Erro ao desativar funcionário:",Ue),alert("Erro ao desativar funcionário. Tente novamente.")}},B=async ie=>{var Ee;if(confirm(`Tem certeza que deseja reativar o funcionário ${(Ee=ie.employee)==null?void 0:Ee.name}?`))try{await c(ie.id),alert("Funcionário reativado com sucesso!")}catch(Ue){console.error("Erro ao reativar funcionário:",Ue),alert("Erro ao reativar funcionário. Tente novamente.")}},K=()=>{H({name:"",cpf:"",email:"",phone:"",bar_role:"atendente",shift_preference:"qualquer",specialties:[],commission_rate:0,notes:""})},A=ie=>{_(ie),R(!0)},q=ie=>{if(!ie)return"Não informado";const de=ie.replace(/\D/g,"");return de.length===11?`(${de.slice(0,2)}) ${de.slice(2,7)}-${de.slice(7)}`:ie},L=ie=>{switch(ie){case"atendente":return"👥";case"garcom":return"🍽️";case"cozinheiro":return"👨‍🍳";case"barman":return"🍹";case"gerente":return"👔";default:return"👤"}},W=ie=>{switch(ie){case"atendente":return"bg-blue-100 text-blue-800";case"garcom":return"bg-green-100 text-green-800";case"cozinheiro":return"bg-orange-100 text-orange-800";case"barman":return"bg-purple-100 text-purple-800";case"gerente":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},oe=ie=>{switch(ie){case"atendente":return"Atendente";case"garcom":return"Garçom";case"cozinheiro":return"Cozinheiro";case"barman":return"Barman";case"gerente":return"Gerente";default:return ie}};return e.jsxs("div",{className:"p-6 space-y-6",children:[s&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"text-red-600",children:e.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("p",{className:"text-red-800",children:s})]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Funcionários do Bar"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Gerencie a equipe do bar e suas funções"})]}),e.jsxs("button",{onClick:()=>k(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(Es,{size:20}),e.jsx("span",{children:"Novo Funcionário"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:re.total}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total"})]})}),e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:re.active}),e.jsx("div",{className:"text-sm text-gray-600",children:"Ativos"})]})}),e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xl font-bold text-blue-600",children:["👥 ",re.byRole.atendente]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Atendentes"})]})}),e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xl font-bold text-green-600",children:["🍽️ ",re.byRole.garcom]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Garçons"})]})}),e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xl font-bold text-orange-600",children:["👨‍🍳 ",re.byRole.cozinheiro]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Cozinheiros"})]})}),e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xl font-bold text-purple-600",children:["🍹 ",re.byRole.barman]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Barmans"})]})})]}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(La,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Buscar por nome, telefone ou email...",value:f,onChange:ie=>p(ie.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("select",{value:g,onChange:ie=>y(ie.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Todas as Funções"}),e.jsx("option",{value:"atendente",children:"Atendente"}),e.jsx("option",{value:"garcom",children:"Garçom"}),e.jsx("option",{value:"cozinheiro",children:"Cozinheiro"}),e.jsx("option",{value:"barman",children:"Barman"}),e.jsx("option",{value:"gerente",children:"Gerente"})]}),e.jsxs("select",{value:v,onChange:ie=>j(ie.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Todos os Status"}),e.jsx("option",{value:"active",children:"Ativo"}),e.jsx("option",{value:"inactive",children:"Inativo"})]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:t?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Carregando funcionários..."})]}):X.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(tr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Nenhum funcionário encontrado"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Funcionário"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Função no Bar"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contato"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data de Contratação"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:X.map(ie=>{const de=ie.employee;return de?e.jsxs(Ne.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-blue-600",children:de.name.charAt(0).toUpperCase()})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:de.name}),e.jsx("div",{className:"text-sm text-gray-500",children:de.cpf||"CPF não informado"})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${W(ie.bar_role)}`,children:[e.jsx("span",{className:"mr-1",children:L(ie.bar_role)}),oe(ie.bar_role)]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:q(de.phone||null)}),e.jsx("div",{className:"text-sm text-gray-500",children:de.email||"Email não informado"})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${ie.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:ie.status==="active"?"Ativo":"Inativo"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:de.hire_date?new Date(de.hire_date).toLocaleDateString("pt-BR"):"Não informado"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>A(ie),className:"text-blue-600 hover:text-blue-900",children:e.jsx(ki,{size:16})}),e.jsx("button",{onClick:()=>$(ie),className:"text-gray-600 hover:text-gray-900",title:"Editar funcionário",children:e.jsx(dl,{size:16})}),ie.status==="active"?e.jsx("button",{onClick:()=>P(ie),className:"text-red-600 hover:text-red-900",title:"Desativar funcionário",children:e.jsx(yd,{size:16})}):e.jsx("button",{onClick:()=>B(ie),className:"text-green-600 hover:text-green-900",title:"Reativar funcionário",children:e.jsx(tr,{size:16})})]})})]},ie.id):null})})]})})}),C&&N&&N.employee&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Detalhes do Funcionário"}),e.jsx("button",{onClick:()=>R(!1),className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nome"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:N.employee.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Função no Bar"}),e.jsx("p",{className:"mt-1",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${W(N.bar_role)}`,children:[e.jsx("span",{className:"mr-1",children:L(N.bar_role)}),oe(N.bar_role)]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Telefone"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:q(((me=N.employee)==null?void 0:me.phone)||null)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:N.employee.email||"Não informado"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"CPF"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:N.employee.cpf||"Não informado"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsx("p",{className:"mt-1",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${N.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:N.status==="active"?"Ativo":"Inativo"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data de Contratação"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:N.employee.hire_date?new Date(N.employee.hire_date).toLocaleDateString("pt-BR"):"Não informado"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Cadastrado no Bar em"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:new Date(N.created_at).toLocaleDateString("pt-BR")})]})]}),N.notes&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Observações"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:N.notes})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Fechar"})})]})}),S&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Novo Funcionário"}),e.jsx("button",{onClick:()=>k(!1),className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome *"}),e.jsx("input",{type:"text",value:U.name,onChange:ie=>H(de=>({...de,name:ie.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nome completo",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CPF"}),e.jsx("input",{type:"text",value:U.cpf,onChange:ie=>H(de=>({...de,cpf:ie.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"000.000.000-00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:U.email,onChange:ie=>H(de=>({...de,email:ie.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"email@exemplo.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone"}),e.jsx("input",{type:"text",value:U.phone,onChange:ie=>H(de=>({...de,phone:ie.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"(11) 99999-9999"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Função *"}),e.jsxs("select",{value:U.bar_role,onChange:ie=>H(de=>({...de,bar_role:ie.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"atendente",children:"Atendente"}),e.jsx("option",{value:"garcom",children:"Garçom"}),e.jsx("option",{value:"cozinheiro",children:"Cozinheiro"}),e.jsx("option",{value:"barman",children:"Barman"}),e.jsx("option",{value:"gerente",children:"Gerente"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Turno Preferido"}),e.jsxs("select",{value:U.shift_preference,onChange:ie=>H(de=>({...de,shift_preference:ie.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"qualquer",children:"Qualquer"}),e.jsx("option",{value:"manha",children:"Manhã"}),e.jsx("option",{value:"tarde",children:"Tarde"}),e.jsx("option",{value:"noite",children:"Noite"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comissão (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:U.commission_rate,onChange:ie=>H(de=>({...de,commission_rate:parseFloat(ie.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observações"}),e.jsx("textarea",{value:U.notes,onChange:ie=>H(de=>({...de,notes:ie.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Observações adicionais (opcional)"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{k(!1),K()},disabled:M,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 disabled:opacity-50",children:"Cancelar"}),e.jsx("button",{onClick:pe,disabled:M||!U.name.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 flex items-center space-x-2",children:M?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Cadastrando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ad,{size:16}),e.jsx("span",{children:"Cadastrar"})]})})]})]})}),E&&N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Editar Funcionário"}),e.jsx("button",{onClick:()=>{w(!1),_(null),Q({})},className:"text-gray-400 hover:text-gray-600",children:e.jsx(dt,{size:20})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome *"}),e.jsx("input",{type:"text",value:V.name||"",onChange:ie=>Q(de=>({...de,name:ie.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nome completo",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CPF"}),e.jsx("input",{type:"text",value:V.cpf||"",onChange:ie=>Q(de=>({...de,cpf:ie.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"000.000.000-00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:V.email||"",onChange:ie=>Q(de=>({...de,email:ie.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"email@exemplo.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone"}),e.jsx("input",{type:"text",value:V.phone||"",onChange:ie=>Q(de=>({...de,phone:ie.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"(11) 99999-9999"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Função *"}),e.jsxs("select",{value:V.bar_role||"atendente",onChange:ie=>Q(de=>({...de,bar_role:ie.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"atendente",children:"Atendente"}),e.jsx("option",{value:"garcom",children:"Garçom"}),e.jsx("option",{value:"cozinheiro",children:"Cozinheiro"}),e.jsx("option",{value:"barman",children:"Barman"}),e.jsx("option",{value:"gerente",children:"Gerente"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Turno Preferido"}),e.jsxs("select",{value:V.shift_preference||"qualquer",onChange:ie=>Q(de=>({...de,shift_preference:ie.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"qualquer",children:"Qualquer"}),e.jsx("option",{value:"manha",children:"Manhã"}),e.jsx("option",{value:"tarde",children:"Tarde"}),e.jsx("option",{value:"noite",children:"Noite"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comissão (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:V.commission_rate||0,onChange:ie=>Q(de=>({...de,commission_rate:parseFloat(ie.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:V.is_active!==void 0?V.is_active?"active":"inactive":"active",onChange:ie=>Q(de=>({...de,is_active:ie.target.value==="active"})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"active",children:"Ativo"}),e.jsx("option",{value:"inactive",children:"Inativo"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observações"}),e.jsx("textarea",{value:V.notes||"",onChange:ie=>Q(de=>({...de,notes:ie.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Observações adicionais (opcional)"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{w(!1),_(null),Q({})},disabled:M,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 disabled:opacity-50",children:"Cancelar"}),e.jsx("button",{onClick:D,disabled:M||!((fe=V.name)!=null&&fe.trim()),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 flex items-center space-x-2",children:M?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Salvando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ad,{size:16}),e.jsx("span",{children:"Salvar"})]})})]})]})})]})};var ul=t=>t.type==="checkbox",Kn=t=>t instanceof Date,os=t=>t==null;const r1=t=>typeof t=="object";var At=t=>!os(t)&&!Array.isArray(t)&&r1(t)&&!Kn(t),i1=t=>At(t)&&t.target?ul(t.target)?t.target.checked:t.target.value:t,SM=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,o1=(t,s)=>t.has(SM(s)),CM=t=>{const s=t.constructor&&t.constructor.prototype;return At(s)&&s.hasOwnProperty("isPrototypeOf")},a0=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Lt(t){let s;const n=Array.isArray(t),i=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)s=new Date(t);else if(!(a0&&(t instanceof Blob||i))&&(n||At(t)))if(s=n?[]:Object.create(Object.getPrototypeOf(t)),!n&&!CM(t))s=t;else for(const l in t)t.hasOwnProperty(l)&&(s[l]=Lt(t[l]));else return t;return s}var vd=t=>/^\w*$/.test(t),Et=t=>t===void 0,n0=t=>Array.isArray(t)?t.filter(Boolean):[],r0=t=>n0(t.replace(/["|']|\]/g,"").split(/\.|\[/)),ve=(t,s,n)=>{if(!s||!At(t))return n;const i=(vd(s)?[s]:r0(s)).reduce((l,c)=>os(l)?l:l[c],t);return Et(i)||i===t?Et(t[s])?n:t[s]:i},Ts=t=>typeof t=="boolean",mt=(t,s,n)=>{let i=-1;const l=vd(s)?[s]:r0(s),c=l.length,u=c-1;for(;++i<c;){const h=l[i];let f=n;if(i!==u){const p=t[h];f=At(p)||Array.isArray(p)?p:isNaN(+l[i+1])?{}:[]}if(h==="__proto__"||h==="constructor"||h==="prototype")return;t[h]=f,t=t[h]}};const id={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Ys={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Aa={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},l1=Ke.createContext(null);l1.displayName="HookFormContext";const i0=()=>Ke.useContext(l1);var c1=(t,s,n,i=!0)=>{const l={defaultValues:s._defaultValues};for(const c in t)Object.defineProperty(l,c,{get:()=>{const u=c;return s._proxyFormState[u]!==Ys.all&&(s._proxyFormState[u]=!i||Ys.all),n&&(n[u]=!0),t[u]}});return l};const o0=typeof window<"u"?Ke.useLayoutEffect:Ke.useEffect;function TM(t){const s=i0(),{control:n=s.control,disabled:i,name:l,exact:c}=t||{},[u,h]=Ke.useState(n._formState),f=Ke.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return o0(()=>n._subscribe({name:l,formState:f.current,exact:c,callback:p=>{!i&&h({...n._formState,...p})}}),[l,i,c]),Ke.useEffect(()=>{f.current.isValid&&n._setValid(!0)},[n]),Ke.useMemo(()=>c1(u,n,f.current,!1),[u,n])}var la=t=>typeof t=="string",d1=(t,s,n,i,l)=>la(t)?(i&&s.watch.add(t),ve(n,t,l)):Array.isArray(t)?t.map(c=>(i&&s.watch.add(c),ve(n,c))):(i&&(s.watchAll=!0),n),af=t=>os(t)||!r1(t);function Da(t,s,n=new WeakSet){if(af(t)||af(s))return t===s;if(Kn(t)&&Kn(s))return t.getTime()===s.getTime();const i=Object.keys(t),l=Object.keys(s);if(i.length!==l.length)return!1;if(n.has(t)||n.has(s))return!0;n.add(t),n.add(s);for(const c of i){const u=t[c];if(!l.includes(c))return!1;if(c!=="ref"){const h=s[c];if(Kn(u)&&Kn(h)||At(u)&&At(h)||Array.isArray(u)&&Array.isArray(h)?!Da(u,h,n):u!==h)return!1}}return!0}function EM(t){const s=i0(),{control:n=s.control,name:i,defaultValue:l,disabled:c,exact:u,compute:h}=t||{},f=Ke.useRef(l),p=Ke.useRef(h),g=Ke.useRef(void 0);p.current=h;const y=Ke.useMemo(()=>n._getWatch(i,f.current),[n,i]),[v,j]=Ke.useState(p.current?p.current(y):y);return o0(()=>n._subscribe({name:i,formState:{values:!0},exact:u,callback:N=>{if(!c){const _=d1(i,n._names,N.values||n._formValues,!1,f.current);if(p.current){const C=p.current(_);Da(C,g.current)||(j(C),g.current=C)}else j(_)}}}),[n,c,i,u]),Ke.useEffect(()=>n._removeUnmounted()),v}function AM(t){const s=i0(),{name:n,disabled:i,control:l=s.control,shouldUnregister:c,defaultValue:u}=t,h=o1(l._names.array,n),f=Ke.useMemo(()=>ve(l._formValues,n,ve(l._defaultValues,n,u)),[l,n,u]),p=EM({control:l,name:n,defaultValue:f,exact:!0}),g=TM({control:l,name:n,exact:!0}),y=Ke.useRef(t),v=Ke.useRef(l.register(n,{...t.rules,value:p,...Ts(t.disabled)?{disabled:t.disabled}:{}}));y.current=t;const j=Ke.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!ve(g.errors,n)},isDirty:{enumerable:!0,get:()=>!!ve(g.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!ve(g.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!ve(g.validatingFields,n)},error:{enumerable:!0,get:()=>ve(g.errors,n)}}),[g,n]),N=Ke.useCallback(S=>v.current.onChange({target:{value:i1(S),name:n},type:id.CHANGE}),[n]),_=Ke.useCallback(()=>v.current.onBlur({target:{value:ve(l._formValues,n),name:n},type:id.BLUR}),[n,l._formValues]),C=Ke.useCallback(S=>{const k=ve(l._fields,n);k&&S&&(k._f.ref={focus:()=>S.focus&&S.focus(),select:()=>S.select&&S.select(),setCustomValidity:E=>S.setCustomValidity(E),reportValidity:()=>S.reportValidity()})},[l._fields,n]),R=Ke.useMemo(()=>({name:n,value:p,...Ts(i)||g.disabled?{disabled:g.disabled||i}:{},onChange:N,onBlur:_,ref:C}),[n,i,g.disabled,N,_,C,p]);return Ke.useEffect(()=>{const S=l._options.shouldUnregister||c;l.register(n,{...y.current.rules,...Ts(y.current.disabled)?{disabled:y.current.disabled}:{}});const k=(E,w)=>{const M=ve(l._fields,E);M&&M._f&&(M._f.mount=w)};if(k(n,!0),S){const E=Lt(ve(l._options.defaultValues,n));mt(l._defaultValues,n,E),Et(ve(l._formValues,n))&&mt(l._formValues,n,E)}return!h&&l.register(n),()=>{(h?S&&!l._state.action:S)?l.unregister(n):k(n,!1)}},[n,l,h,c]),Ke.useEffect(()=>{l._setDisabledField({disabled:i,name:n})},[i,n,l]),Ke.useMemo(()=>({field:R,formState:g,fieldState:j}),[R,g,j])}const Zn=t=>t.render(AM(t));var kM=(t,s,n,i,l)=>s?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[i]:l||!0}}:{},Io=t=>Array.isArray(t)?t:[t],uv=()=>{let t=[];return{get observers(){return t},next:l=>{for(const c of t)c.next&&c.next(l)},subscribe:l=>(t.push(l),{unsubscribe:()=>{t=t.filter(c=>c!==l)}}),unsubscribe:()=>{t=[]}}},gs=t=>At(t)&&!Object.keys(t).length,l0=t=>t.type==="file",Xs=t=>typeof t=="function",od=t=>{if(!a0)return!1;const s=t?t.ownerDocument:0;return t instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},u1=t=>t.type==="select-multiple",c0=t=>t.type==="radio",MM=t=>c0(t)||ul(t),pm=t=>od(t)&&t.isConnected;function DM(t,s){const n=s.slice(0,-1).length;let i=0;for(;i<n;)t=Et(t)?i++:t[s[i++]];return t}function OM(t){for(const s in t)if(t.hasOwnProperty(s)&&!Et(t[s]))return!1;return!0}function Dt(t,s){const n=Array.isArray(s)?s:vd(s)?[s]:r0(s),i=n.length===1?t:DM(t,n),l=n.length-1,c=n[l];return i&&delete i[c],l!==0&&(At(i)&&gs(i)||Array.isArray(i)&&OM(i))&&Dt(t,n.slice(0,-1)),t}var h1=t=>{for(const s in t)if(Xs(t[s]))return!0;return!1};function ld(t,s={}){const n=Array.isArray(t);if(At(t)||n)for(const i in t)Array.isArray(t[i])||At(t[i])&&!h1(t[i])?(s[i]=Array.isArray(t[i])?[]:{},ld(t[i],s[i])):os(t[i])||(s[i]=!0);return s}function m1(t,s,n){const i=Array.isArray(t);if(At(t)||i)for(const l in t)Array.isArray(t[l])||At(t[l])&&!h1(t[l])?Et(s)||af(n[l])?n[l]=Array.isArray(t[l])?ld(t[l],[]):{...ld(t[l])}:m1(t[l],os(s)?{}:s[l],n[l]):n[l]=!Da(t[l],s[l]);return n}var Do=(t,s)=>m1(t,s,ld(s));const hv={value:!1,isValid:!1},mv={value:!0,isValid:!0};var f1=t=>{if(Array.isArray(t)){if(t.length>1){const s=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:s,isValid:!!s.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Et(t[0].attributes.value)?Et(t[0].value)||t[0].value===""?mv:{value:t[0].value,isValid:!0}:mv:hv}return hv},p1=(t,{valueAsNumber:s,valueAsDate:n,setValueAs:i})=>Et(t)?t:s?t===""?NaN:t&&+t:n&&la(t)?new Date(t):i?i(t):t;const fv={isValid:!1,value:null};var g1=t=>Array.isArray(t)?t.reduce((s,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:s,fv):fv;function pv(t){const s=t.ref;return l0(s)?s.files:c0(s)?g1(t.refs).value:u1(s)?[...s.selectedOptions].map(({value:n})=>n):ul(s)?f1(t.refs).value:p1(Et(s.value)?t.ref.value:s.value,t)}var RM=(t,s,n,i)=>{const l={};for(const c of t){const u=ve(s,c);u&&mt(l,c,u._f)}return{criteriaMode:n,names:[...t],fields:l,shouldUseNativeValidation:i}},cd=t=>t instanceof RegExp,Oo=t=>Et(t)?t:cd(t)?t.source:At(t)?cd(t.value)?t.value.source:t.value:t,gv=t=>({isOnSubmit:!t||t===Ys.onSubmit,isOnBlur:t===Ys.onBlur,isOnChange:t===Ys.onChange,isOnAll:t===Ys.all,isOnTouch:t===Ys.onTouched});const xv="AsyncFunction";var PM=t=>!!t&&!!t.validate&&!!(Xs(t.validate)&&t.validate.constructor.name===xv||At(t.validate)&&Object.values(t.validate).find(s=>s.constructor.name===xv)),zM=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),yv=(t,s,n)=>!n&&(s.watchAll||s.watch.has(t)||[...s.watch].some(i=>t.startsWith(i)&&/^\.\w+/.test(t.slice(i.length))));const Ho=(t,s,n,i)=>{for(const l of n||Object.keys(t)){const c=ve(t,l);if(c){const{_f:u,...h}=c;if(u){if(u.refs&&u.refs[0]&&s(u.refs[0],l)&&!i)return!0;if(u.ref&&s(u.ref,u.name)&&!i)return!0;if(Ho(h,s))break}else if(At(h)&&Ho(h,s))break}}};function bv(t,s,n){const i=ve(t,n);if(i||vd(n))return{error:i,name:n};const l=n.split(".");for(;l.length;){const c=l.join("."),u=ve(s,c),h=ve(t,c);if(u&&!Array.isArray(u)&&n!==c)return{name:n};if(h&&h.type)return{name:c,error:h};if(h&&h.root&&h.root.type)return{name:`${c}.root`,error:h.root};l.pop()}return{name:n}}var LM=(t,s,n,i)=>{n(t);const{name:l,...c}=t;return gs(c)||Object.keys(c).length>=Object.keys(s).length||Object.keys(c).find(u=>s[u]===(!i||Ys.all))},BM=(t,s,n)=>!t||!s||t===s||Io(t).some(i=>i&&(n?i===s:i.startsWith(s)||s.startsWith(i))),$M=(t,s,n,i,l)=>l.isOnAll?!1:!n&&l.isOnTouch?!(s||t):(n?i.isOnBlur:l.isOnBlur)?!t:(n?i.isOnChange:l.isOnChange)?t:!0,VM=(t,s)=>!n0(ve(t,s)).length&&Dt(t,s),UM=(t,s,n)=>{const i=Io(ve(t,n));return mt(i,"root",s[n]),mt(t,n,i),t},Uc=t=>la(t);function vv(t,s,n="validate"){if(Uc(t)||Array.isArray(t)&&t.every(Uc)||Ts(t)&&!t)return{type:n,message:Uc(t)?t:"",ref:s}}var ni=t=>At(t)&&!cd(t)?t:{value:t,message:""},jv=async(t,s,n,i,l,c)=>{const{ref:u,refs:h,required:f,maxLength:p,minLength:g,min:y,max:v,pattern:j,validate:N,name:_,valueAsNumber:C,mount:R}=t._f,S=ve(n,_);if(!R||s.has(_))return{};const k=h?h[0]:u,E=X=>{l&&k.reportValidity&&(k.setCustomValidity(Ts(X)?"":X||""),k.reportValidity())},w={},M=c0(u),z=ul(u),U=M||z,H=(C||l0(u))&&Et(u.value)&&Et(S)||od(u)&&u.value===""||S===""||Array.isArray(S)&&!S.length,V=kM.bind(null,_,i,w),Q=(X,re,pe,$=Aa.maxLength,D=Aa.minLength)=>{const P=X?re:pe;w[_]={type:X?$:D,message:P,ref:u,...V(X?$:D,P)}};if(c?!Array.isArray(S)||!S.length:f&&(!U&&(H||os(S))||Ts(S)&&!S||z&&!f1(h).isValid||M&&!g1(h).isValid)){const{value:X,message:re}=Uc(f)?{value:!!f,message:f}:ni(f);if(X&&(w[_]={type:Aa.required,message:re,ref:k,...V(Aa.required,re)},!i))return E(re),w}if(!H&&(!os(y)||!os(v))){let X,re;const pe=ni(v),$=ni(y);if(!os(S)&&!isNaN(S)){const D=u.valueAsNumber||S&&+S;os(pe.value)||(X=D>pe.value),os($.value)||(re=D<$.value)}else{const D=u.valueAsDate||new Date(S),P=A=>new Date(new Date().toDateString()+" "+A),B=u.type=="time",K=u.type=="week";la(pe.value)&&S&&(X=B?P(S)>P(pe.value):K?S>pe.value:D>new Date(pe.value)),la($.value)&&S&&(re=B?P(S)<P($.value):K?S<$.value:D<new Date($.value))}if((X||re)&&(Q(!!X,pe.message,$.message,Aa.max,Aa.min),!i))return E(w[_].message),w}if((p||g)&&!H&&(la(S)||c&&Array.isArray(S))){const X=ni(p),re=ni(g),pe=!os(X.value)&&S.length>+X.value,$=!os(re.value)&&S.length<+re.value;if((pe||$)&&(Q(pe,X.message,re.message),!i))return E(w[_].message),w}if(j&&!H&&la(S)){const{value:X,message:re}=ni(j);if(cd(X)&&!S.match(X)&&(w[_]={type:Aa.pattern,message:re,ref:u,...V(Aa.pattern,re)},!i))return E(re),w}if(N){if(Xs(N)){const X=await N(S,n),re=vv(X,k);if(re&&(w[_]={...re,...V(Aa.validate,re.message)},!i))return E(re.message),w}else if(At(N)){let X={};for(const re in N){if(!gs(X)&&!i)break;const pe=vv(await N[re](S,n),k,re);pe&&(X={...pe,...V(re,pe.message)},E(pe.message),i&&(w[_]=X))}if(!gs(X)&&(w[_]={ref:k,...X},!i))return w}}return E(!0),w};const qM={mode:Ys.onSubmit,reValidateMode:Ys.onChange,shouldFocusError:!0};function FM(t={}){let s={...qM,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Xs(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},i={},l=At(s.defaultValues)||At(s.values)?Lt(s.defaultValues||s.values)||{}:{},c=s.shouldUnregister?{}:Lt(l),u={action:!1,mount:!1,watch:!1},h={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},f,p=0;const g={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let y={...g};const v={array:uv(),state:uv()},j=s.criteriaMode===Ys.all,N=I=>ee=>{clearTimeout(p),p=setTimeout(I,ee)},_=async I=>{if(!s.disabled&&(g.isValid||y.isValid||I)){const ee=s.resolver?gs((await z()).errors):await H(i,!0);ee!==n.isValid&&v.state.next({isValid:ee})}},C=(I,ee)=>{!s.disabled&&(g.isValidating||g.validatingFields||y.isValidating||y.validatingFields)&&((I||Array.from(h.mount)).forEach(le=>{le&&(ee?mt(n.validatingFields,le,ee):Dt(n.validatingFields,le))}),v.state.next({validatingFields:n.validatingFields,isValidating:!gs(n.validatingFields)}))},R=(I,ee=[],le,be,ye=!0,ge=!0)=>{if(be&&le&&!s.disabled){if(u.action=!0,ge&&Array.isArray(ve(i,I))){const we=le(ve(i,I),be.argA,be.argB);ye&&mt(i,I,we)}if(ge&&Array.isArray(ve(n.errors,I))){const we=le(ve(n.errors,I),be.argA,be.argB);ye&&mt(n.errors,I,we),VM(n.errors,I)}if((g.touchedFields||y.touchedFields)&&ge&&Array.isArray(ve(n.touchedFields,I))){const we=le(ve(n.touchedFields,I),be.argA,be.argB);ye&&mt(n.touchedFields,I,we)}(g.dirtyFields||y.dirtyFields)&&(n.dirtyFields=Do(l,c)),v.state.next({name:I,isDirty:Q(I,ee),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else mt(c,I,ee)},S=(I,ee)=>{mt(n.errors,I,ee),v.state.next({errors:n.errors})},k=I=>{n.errors=I,v.state.next({errors:n.errors,isValid:!1})},E=(I,ee,le,be)=>{const ye=ve(i,I);if(ye){const ge=ve(c,I,Et(le)?ve(l,I):le);Et(ge)||be&&be.defaultChecked||ee?mt(c,I,ee?ge:pv(ye._f)):pe(I,ge),u.mount&&_()}},w=(I,ee,le,be,ye)=>{let ge=!1,we=!1;const Re={name:I};if(!s.disabled){if(!le||be){(g.isDirty||y.isDirty)&&(we=n.isDirty,n.isDirty=Re.isDirty=Q(),ge=we!==Re.isDirty);const qe=Da(ve(l,I),ee);we=!!ve(n.dirtyFields,I),qe?Dt(n.dirtyFields,I):mt(n.dirtyFields,I,!0),Re.dirtyFields=n.dirtyFields,ge=ge||(g.dirtyFields||y.dirtyFields)&&we!==!qe}if(le){const qe=ve(n.touchedFields,I);qe||(mt(n.touchedFields,I,le),Re.touchedFields=n.touchedFields,ge=ge||(g.touchedFields||y.touchedFields)&&qe!==le)}ge&&ye&&v.state.next(Re)}return ge?Re:{}},M=(I,ee,le,be)=>{const ye=ve(n.errors,I),ge=(g.isValid||y.isValid)&&Ts(ee)&&n.isValid!==ee;if(s.delayError&&le?(f=N(()=>S(I,le)),f(s.delayError)):(clearTimeout(p),f=null,le?mt(n.errors,I,le):Dt(n.errors,I)),(le?!Da(ye,le):ye)||!gs(be)||ge){const we={...be,...ge&&Ts(ee)?{isValid:ee}:{},errors:n.errors,name:I};n={...n,...we},v.state.next(we)}},z=async I=>{C(I,!0);const ee=await s.resolver(c,s.context,RM(I||h.mount,i,s.criteriaMode,s.shouldUseNativeValidation));return C(I),ee},U=async I=>{const{errors:ee}=await z(I);if(I)for(const le of I){const be=ve(ee,le);be?mt(n.errors,le,be):Dt(n.errors,le)}else n.errors=ee;return ee},H=async(I,ee,le={valid:!0})=>{for(const be in I){const ye=I[be];if(ye){const{_f:ge,...we}=ye;if(ge){const Re=h.array.has(ge.name),qe=ye._f&&PM(ye._f);qe&&g.validatingFields&&C([be],!0);const tt=await jv(ye,h.disabled,c,j,s.shouldUseNativeValidation&&!ee,Re);if(qe&&g.validatingFields&&C([be]),tt[ge.name]&&(le.valid=!1,ee))break;!ee&&(ve(tt,ge.name)?Re?UM(n.errors,tt,ge.name):mt(n.errors,ge.name,tt[ge.name]):Dt(n.errors,ge.name))}!gs(we)&&await H(we,ee,le)}}return le.valid},V=()=>{for(const I of h.unMount){const ee=ve(i,I);ee&&(ee._f.refs?ee._f.refs.every(le=>!pm(le)):!pm(ee._f.ref))&&ie(I)}h.unMount=new Set},Q=(I,ee)=>!s.disabled&&(I&&ee&&mt(c,I,ee),!Da(A(),l)),X=(I,ee,le)=>d1(I,h,{...u.mount?c:Et(ee)?l:la(I)?{[I]:ee}:ee},le,ee),re=I=>n0(ve(u.mount?c:l,I,s.shouldUnregister?ve(l,I,[]):[])),pe=(I,ee,le={})=>{const be=ve(i,I);let ye=ee;if(be){const ge=be._f;ge&&(!ge.disabled&&mt(c,I,p1(ee,ge)),ye=od(ge.ref)&&os(ee)?"":ee,u1(ge.ref)?[...ge.ref.options].forEach(we=>we.selected=ye.includes(we.value)):ge.refs?ul(ge.ref)?ge.refs.forEach(we=>{(!we.defaultChecked||!we.disabled)&&(Array.isArray(ye)?we.checked=!!ye.find(Re=>Re===we.value):we.checked=ye===we.value||!!ye)}):ge.refs.forEach(we=>we.checked=we.value===ye):l0(ge.ref)?ge.ref.value="":(ge.ref.value=ye,ge.ref.type||v.state.next({name:I,values:Lt(c)})))}(le.shouldDirty||le.shouldTouch)&&w(I,ye,le.shouldTouch,le.shouldDirty,!0),le.shouldValidate&&K(I)},$=(I,ee,le)=>{for(const be in ee){if(!ee.hasOwnProperty(be))return;const ye=ee[be],ge=I+"."+be,we=ve(i,ge);(h.array.has(I)||At(ye)||we&&!we._f)&&!Kn(ye)?$(ge,ye,le):pe(ge,ye,le)}},D=(I,ee,le={})=>{const be=ve(i,I),ye=h.array.has(I),ge=Lt(ee);mt(c,I,ge),ye?(v.array.next({name:I,values:Lt(c)}),(g.isDirty||g.dirtyFields||y.isDirty||y.dirtyFields)&&le.shouldDirty&&v.state.next({name:I,dirtyFields:Do(l,c),isDirty:Q(I,ge)})):be&&!be._f&&!os(ge)?$(I,ge,le):pe(I,ge,le),yv(I,h)&&v.state.next({...n,name:I}),v.state.next({name:u.mount?I:void 0,values:Lt(c)})},P=async I=>{u.mount=!0;const ee=I.target;let le=ee.name,be=!0;const ye=ve(i,le),ge=qe=>{be=Number.isNaN(qe)||Kn(qe)&&isNaN(qe.getTime())||Da(qe,ve(c,le,qe))},we=gv(s.mode),Re=gv(s.reValidateMode);if(ye){let qe,tt;const xe=ee.type?pv(ye._f):i1(I),We=I.type===id.BLUR||I.type===id.FOCUS_OUT,Z=!zM(ye._f)&&!s.resolver&&!ve(n.errors,le)&&!ye._f.deps||$M(We,ve(n.touchedFields,le),n.isSubmitted,Re,we),Ae=yv(le,h,We);mt(c,le,xe),We?(!ee||!ee.readOnly)&&(ye._f.onBlur&&ye._f.onBlur(I),f&&f(0)):ye._f.onChange&&ye._f.onChange(I);const Pe=w(le,xe,We),rt=!gs(Pe)||Ae;if(!We&&v.state.next({name:le,type:I.type,values:Lt(c)}),Z)return(g.isValid||y.isValid)&&(s.mode==="onBlur"?We&&_():We||_()),rt&&v.state.next({name:le,...Ae?{}:Pe});if(!We&&Ae&&v.state.next({...n}),s.resolver){const{errors:Yt}=await z([le]);if(ge(xe),be){const ns=bv(n.errors,i,le),Js=bv(Yt,i,ns.name||le);qe=Js.error,le=Js.name,tt=gs(Yt)}}else C([le],!0),qe=(await jv(ye,h.disabled,c,j,s.shouldUseNativeValidation))[le],C([le]),ge(xe),be&&(qe?tt=!1:(g.isValid||y.isValid)&&(tt=await H(i,!0)));be&&(ye._f.deps&&K(ye._f.deps),M(le,tt,qe,Pe))}},B=(I,ee)=>{if(ve(n.errors,ee)&&I.focus)return I.focus(),1},K=async(I,ee={})=>{let le,be;const ye=Io(I);if(s.resolver){const ge=await U(Et(I)?I:ye);le=gs(ge),be=I?!ye.some(we=>ve(ge,we)):le}else I?(be=(await Promise.all(ye.map(async ge=>{const we=ve(i,ge);return await H(we&&we._f?{[ge]:we}:we)}))).every(Boolean),!(!be&&!n.isValid)&&_()):be=le=await H(i);return v.state.next({...!la(I)||(g.isValid||y.isValid)&&le!==n.isValid?{}:{name:I},...s.resolver||!I?{isValid:le}:{},errors:n.errors}),ee.shouldFocus&&!be&&Ho(i,B,I?ye:h.mount),be},A=I=>{const ee={...u.mount?c:l};return Et(I)?ee:la(I)?ve(ee,I):I.map(le=>ve(ee,le))},q=(I,ee)=>({invalid:!!ve((ee||n).errors,I),isDirty:!!ve((ee||n).dirtyFields,I),error:ve((ee||n).errors,I),isValidating:!!ve(n.validatingFields,I),isTouched:!!ve((ee||n).touchedFields,I)}),L=I=>{I&&Io(I).forEach(ee=>Dt(n.errors,ee)),v.state.next({errors:I?n.errors:{}})},W=(I,ee,le)=>{const be=(ve(i,I,{_f:{}})._f||{}).ref,ye=ve(n.errors,I)||{},{ref:ge,message:we,type:Re,...qe}=ye;mt(n.errors,I,{...qe,...ee,ref:be}),v.state.next({name:I,errors:n.errors,isValid:!1}),le&&le.shouldFocus&&be&&be.focus&&be.focus()},oe=(I,ee)=>Xs(I)?v.state.subscribe({next:le=>"values"in le&&I(X(void 0,ee),le)}):X(I,ee,!0),me=I=>v.state.subscribe({next:ee=>{BM(I.name,ee.name,I.exact)&&LM(ee,I.formState||g,$e,I.reRenderRoot)&&I.callback({values:{...c},...n,...ee,defaultValues:l})}}).unsubscribe,fe=I=>(u.mount=!0,y={...y,...I.formState},me({...I,formState:y})),ie=(I,ee={})=>{for(const le of I?Io(I):h.mount)h.mount.delete(le),h.array.delete(le),ee.keepValue||(Dt(i,le),Dt(c,le)),!ee.keepError&&Dt(n.errors,le),!ee.keepDirty&&Dt(n.dirtyFields,le),!ee.keepTouched&&Dt(n.touchedFields,le),!ee.keepIsValidating&&Dt(n.validatingFields,le),!s.shouldUnregister&&!ee.keepDefaultValue&&Dt(l,le);v.state.next({values:Lt(c)}),v.state.next({...n,...ee.keepDirty?{isDirty:Q()}:{}}),!ee.keepIsValid&&_()},de=({disabled:I,name:ee})=>{(Ts(I)&&u.mount||I||h.disabled.has(ee))&&(I?h.disabled.add(ee):h.disabled.delete(ee))},Ee=(I,ee={})=>{let le=ve(i,I);const be=Ts(ee.disabled)||Ts(s.disabled);return mt(i,I,{...le||{},_f:{...le&&le._f?le._f:{ref:{name:I}},name:I,mount:!0,...ee}}),h.mount.add(I),le?de({disabled:Ts(ee.disabled)?ee.disabled:s.disabled,name:I}):E(I,!0,ee.value),{...be?{disabled:ee.disabled||s.disabled}:{},...s.progressive?{required:!!ee.required,min:Oo(ee.min),max:Oo(ee.max),minLength:Oo(ee.minLength),maxLength:Oo(ee.maxLength),pattern:Oo(ee.pattern)}:{},name:I,onChange:P,onBlur:P,ref:ye=>{if(ye){Ee(I,ee),le=ve(i,I);const ge=Et(ye.value)&&ye.querySelectorAll&&ye.querySelectorAll("input,select,textarea")[0]||ye,we=MM(ge),Re=le._f.refs||[];if(we?Re.find(qe=>qe===ge):ge===le._f.ref)return;mt(i,I,{_f:{...le._f,...we?{refs:[...Re.filter(pm),ge,...Array.isArray(ve(l,I))?[{}]:[]],ref:{type:ge.type,name:I}}:{ref:ge}}}),E(I,!1,void 0,ge)}else le=ve(i,I,{}),le._f&&(le._f.mount=!1),(s.shouldUnregister||ee.shouldUnregister)&&!(o1(h.array,I)&&u.action)&&h.unMount.add(I)}}},Ue=()=>s.shouldFocusError&&Ho(i,B,h.mount),je=I=>{Ts(I)&&(v.state.next({disabled:I}),Ho(i,(ee,le)=>{const be=ve(i,le);be&&(ee.disabled=be._f.disabled||I,Array.isArray(be._f.refs)&&be._f.refs.forEach(ye=>{ye.disabled=be._f.disabled||I}))},0,!1))},Be=(I,ee)=>async le=>{let be;le&&(le.preventDefault&&le.preventDefault(),le.persist&&le.persist());let ye=Lt(c);if(v.state.next({isSubmitting:!0}),s.resolver){const{errors:ge,values:we}=await z();n.errors=ge,ye=Lt(we)}else await H(i);if(h.disabled.size)for(const ge of h.disabled)Dt(ye,ge);if(Dt(n.errors,"root"),gs(n.errors)){v.state.next({errors:{}});try{await I(ye,le)}catch(ge){be=ge}}else ee&&await ee({...n.errors},le),Ue(),setTimeout(Ue);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:gs(n.errors)&&!be,submitCount:n.submitCount+1,errors:n.errors}),be)throw be},De=(I,ee={})=>{ve(i,I)&&(Et(ee.defaultValue)?D(I,Lt(ve(l,I))):(D(I,ee.defaultValue),mt(l,I,Lt(ee.defaultValue))),ee.keepTouched||Dt(n.touchedFields,I),ee.keepDirty||(Dt(n.dirtyFields,I),n.isDirty=ee.defaultValue?Q(I,Lt(ve(l,I))):Q()),ee.keepError||(Dt(n.errors,I),g.isValid&&_()),v.state.next({...n}))},Je=(I,ee={})=>{const le=I?Lt(I):l,be=Lt(le),ye=gs(I),ge=ye?l:be;if(ee.keepDefaultValues||(l=le),!ee.keepValues){if(ee.keepDirtyValues){const we=new Set([...h.mount,...Object.keys(Do(l,c))]);for(const Re of Array.from(we))ve(n.dirtyFields,Re)?mt(ge,Re,ve(c,Re)):D(Re,ve(ge,Re))}else{if(a0&&Et(I))for(const we of h.mount){const Re=ve(i,we);if(Re&&Re._f){const qe=Array.isArray(Re._f.refs)?Re._f.refs[0]:Re._f.ref;if(od(qe)){const tt=qe.closest("form");if(tt){tt.reset();break}}}}if(ee.keepFieldsRef)for(const we of h.mount)D(we,ve(ge,we));else i={}}c=s.shouldUnregister?ee.keepDefaultValues?Lt(l):{}:Lt(ge),v.array.next({values:{...ge}}),v.state.next({values:{...ge}})}h={mount:ee.keepDirtyValues?h.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!g.isValid||!!ee.keepIsValid||!!ee.keepDirtyValues,u.watch=!!s.shouldUnregister,v.state.next({submitCount:ee.keepSubmitCount?n.submitCount:0,isDirty:ye?!1:ee.keepDirty?n.isDirty:!!(ee.keepDefaultValues&&!Da(I,l)),isSubmitted:ee.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:ye?{}:ee.keepDirtyValues?ee.keepDefaultValues&&c?Do(l,c):n.dirtyFields:ee.keepDefaultValues&&I?Do(l,I):ee.keepDirty?n.dirtyFields:{},touchedFields:ee.keepTouched?n.touchedFields:{},errors:ee.keepErrors?n.errors:{},isSubmitSuccessful:ee.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:l})},$t=(I,ee)=>Je(Xs(I)?I(c):I,ee),ke=(I,ee={})=>{const le=ve(i,I),be=le&&le._f;if(be){const ye=be.refs?be.refs[0]:be.ref;ye.focus&&(ye.focus(),ee.shouldSelect&&Xs(ye.select)&&ye.select())}},$e=I=>{n={...n,...I}},ds={control:{register:Ee,unregister:ie,getFieldState:q,handleSubmit:Be,setError:W,_subscribe:me,_runSchema:z,_focusError:Ue,_getWatch:X,_getDirty:Q,_setValid:_,_setFieldArray:R,_setDisabledField:de,_setErrors:k,_getFieldArray:re,_reset:Je,_resetDefaultValues:()=>Xs(s.defaultValues)&&s.defaultValues().then(I=>{$t(I,s.resetOptions),v.state.next({isLoading:!1})}),_removeUnmounted:V,_disableForm:je,_subjects:v,_proxyFormState:g,get _fields(){return i},get _formValues(){return c},get _state(){return u},set _state(I){u=I},get _defaultValues(){return l},get _names(){return h},set _names(I){h=I},get _formState(){return n},get _options(){return s},set _options(I){s={...s,...I}}},subscribe:fe,trigger:K,register:Ee,handleSubmit:Be,watch:oe,setValue:D,getValues:A,reset:$t,resetField:De,clearErrors:L,unregister:ie,setError:W,setFocus:ke,getFieldState:q};return{...ds,formControl:ds}}function d0(t={}){const s=Ke.useRef(void 0),n=Ke.useRef(void 0),[i,l]=Ke.useState({isDirty:!1,isValidating:!1,isLoading:Xs(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Xs(t.defaultValues)?void 0:t.defaultValues});if(!s.current)if(t.formControl)s.current={...t.formControl,formState:i},t.defaultValues&&!Xs(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:u,...h}=FM(t);s.current={...h,formState:i}}const c=s.current.control;return c._options=t,o0(()=>{const u=c._subscribe({formState:c._proxyFormState,callback:()=>l({...c._formState}),reRenderRoot:!0});return l(h=>({...h,isReady:!0})),c._formState.isReady=!0,u},[c]),Ke.useEffect(()=>c._disableForm(t.disabled),[c,t.disabled]),Ke.useEffect(()=>{t.mode&&(c._options.mode=t.mode),t.reValidateMode&&(c._options.reValidateMode=t.reValidateMode)},[c,t.mode,t.reValidateMode]),Ke.useEffect(()=>{t.errors&&(c._setErrors(t.errors),c._focusError())},[c,t.errors]),Ke.useEffect(()=>{t.shouldUnregister&&c._subjects.state.next({values:c._getWatch()})},[c,t.shouldUnregister]),Ke.useEffect(()=>{if(c._proxyFormState.isDirty){const u=c._getDirty();u!==i.isDirty&&c._subjects.state.next({isDirty:u})}},[c,i.isDirty]),Ke.useEffect(()=>{t.values&&!Da(t.values,n.current)?(c._reset(t.values,{keepFieldsRef:!0,...c._options.resetOptions}),n.current=t.values,l(u=>({...u}))):c._resetDefaultValues()},[c,t.values]),Ke.useEffect(()=>{c._state.mount||(c._setValid(),c._state.mount=!0),c._state.watch&&(c._state.watch=!1,c._subjects.state.next({...c._formState})),c._removeUnmounted()}),s.current.formState=c1(i,c),s.current}const IM=({isOpen:t,onClose:s,item:n})=>{const{addMenuItem:i,updateMenuItem:l}=_t(),{register:c,handleSubmit:u,control:h,reset:f,formState:{errors:p}}=d0(),[g,y]=b.useState(!1);b.useEffect(()=>{f(n?{name:n.name,description:n.description||"",price:n.price,category:n.category,preparationTime:n.preparation_time||0,available:n.available,image_url:n.image_url||""}:{name:"",description:"",price:"",category:"food",preparationTime:"",available:!0,image_url:""})},[n,f]);const v=async N=>{console.log("=== INÍCIO DO SUBMIT ==="),console.log("Dados recebidos do formulário:",N),y(!0);try{const _={...N,description:N.description||"",preparationTime:N.preparationTime||void 0};console.log("Dados processados para envio:",_),n?(console.log("Modo: Edição de item existente"),await l({...n,..._})):(console.log("Modo: Criação de novo item"),await i(_)),console.log("Item salvo com sucesso!"),n||f({name:"",description:"",price:"",category:"food",preparationTime:"",available:!0,image_url:""}),s()}catch(_){console.error("=== ERRO DETALHADO ==="),console.error("Tipo do erro:",typeof _),console.error("Erro completo:",_),console.error("Stack trace:",_ instanceof Error?_.stack:"N/A"),_&&typeof _=="object"&&"message"in _&&console.error("Mensagem do erro:",_.message),alert(`Erro ao salvar o prato: ${_ instanceof Error?_.message:"Erro desconhecido"}`)}finally{y(!1),console.log("=== FIM DO SUBMIT ===")}},j=[{value:"food",label:"Pratos Principais"},{value:"snacks",label:"Petiscos"},{value:"drinks",label:"Bebidas"}];return e.jsx(nr,{children:t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:e.jsxs(Ne.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.2},className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 bg-gray-50 rounded-t-xl",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:n?"Editar Prato":"Novo Prato"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:n?"Atualize as informações do prato":"Adicione um novo prato ao cardápio"})]}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 hover:bg-gray-200 p-2 rounded-lg transition-colors duration-200",disabled:g,title:"Fechar modal","aria-label":"Fechar modal",children:e.jsx(dt,{size:24})})]}),e.jsxs("form",{onSubmit:u(v),className:"p-6 space-y-6",children:[e.jsx(ri,{label:"Nome do Prato",error:p.name,children:e.jsx("input",{...c("name",{required:"Nome é obrigatório"}),className:"form-input",placeholder:"Digite o nome do prato",disabled:g})}),e.jsx(ri,{label:"Descrição",error:p.description,children:e.jsx("textarea",{...c("description"),className:"form-input min-h-[80px] resize-none",placeholder:"Descreva o prato...",disabled:g})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ri,{label:"Categoria",error:p.category,children:e.jsx(Zn,{name:"category",control:h,rules:{required:"Categoria é obrigatória"},render:({field:N})=>e.jsx("select",{...N,className:"form-select",disabled:g,children:j.map(_=>e.jsx("option",{value:_.value,children:_.label},_.value))})})}),e.jsx(ri,{label:"Preço (R$)",error:p.price,children:e.jsx("input",{type:"number",step:"0.01",...c("price",{required:"Preço é obrigatório",valueAsNumber:!0,min:{value:.01,message:"Valor deve ser maior que 0"}}),className:"form-input",placeholder:"Digite o preço",disabled:g})})]}),e.jsxs(ri,{label:"URL da Imagem (opcional)",error:p.image_url,children:[e.jsx("input",{...c("image_url"),className:"form-input",placeholder:"https://exemplo.com/imagem.jpg",disabled:g}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Cole aqui o link da imagem do prato. Recomendamos imagens com proporção 1:1 (quadrada)."})]}),e.jsx(ri,{label:"Tempo de Preparo (min)",error:p.preparationTime,children:e.jsx("input",{type:"number",...c("preparationTime",{setValueAs:N=>N===""||N===null?void 0:Number(N),min:{value:0,message:"Valor deve ser maior ou igual a 0"}}),className:"form-input",placeholder:"Digite o tempo em minutos",disabled:g})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Zn,{name:"available",control:h,render:({field:N})=>e.jsx("input",{type:"checkbox",onChange:N.onChange,onBlur:N.onBlur,name:N.name,ref:N.ref,checked:N.value,className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500 focus:ring-2",disabled:g,title:"Marcar como disponível","aria-label":"Marcar prato como disponível para pedidos"})}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Prato disponível para pedidos"})]}),e.jsxs("div",{className:"pt-6 flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-3 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:s,className:"btn-secondary",disabled:g,children:"Cancelar"}),e.jsx("button",{type:"submit",className:"btn-primary flex items-center justify-center space-x-2",disabled:g,children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Salvando..."})]}):e.jsx("span",{children:n?"Salvar Alterações":"Adicionar Prato"})})]})]})]})})})},ri=({label:t,children:s,error:n})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:t}),s,n&&e.jsxs("p",{className:"text-red-500 text-sm flex items-center space-x-1",children:[e.jsx("span",{className:"w-4 h-4 rounded-full bg-red-100 flex items-center justify-center",children:e.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"})}),e.jsx("span",{children:n.message})]})]}),HM=({menuItems:t})=>{const{removeMenuItem:s}=_t(),[n,i]=b.useState(""),[l,c]=b.useState(!1),[u,h]=b.useState(null),f=t.filter(j=>{const N=j.name.toLowerCase().includes(n.toLowerCase()),_=j.item_type!=="direct";return N&&_}),p=()=>{h(null),c(!0)},g=j=>{h(j),c(!0)},y=()=>{c(!1),h(null)},v=async j=>{window.confirm(`Tem certeza que deseja remover "${j.name}" do cardápio?`)&&await s(j.id)};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Gestão de Cardápio"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Gerencie apenas pratos que precisam de preparo na cozinha.",e.jsx("br",{}),e.jsx("span",{className:"text-blue-600 font-medium",children:'Produtos prontos do estoque aparecem automaticamente no balcão quando marcados como "Disponível para venda" no módulo Estoque.'})]})]}),e.jsx("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3",children:e.jsxs(Ne.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:p,className:"bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700 transition-colors flex items-center space-x-2",children:[e.jsx(Es,{size:20}),e.jsx("span",{children:"Novo Prato"})]})})]}),e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-4 sm:space-y-0 sm:space-x-4 mb-6",children:e.jsx("input",{type:"text",placeholder:"Buscar pratos...",value:n,onChange:j=>i(j.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(j=>e.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-md transition-shadow",children:[j.image_url&&e.jsx("div",{className:"aspect-video w-full bg-gray-100 overflow-hidden",children:e.jsx("img",{src:j.image_url,alt:j.name,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300",onError:N=>{N.currentTarget.style.display="none"}})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:j.name}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>g(j),className:"text-gray-400 hover:text-blue-600 transition-colors",title:"Editar prato","aria-label":"Editar prato",children:e.jsx(dl,{size:16})}),e.jsx("button",{onClick:()=>v(j),className:"text-gray-400 hover:text-red-600 transition-colors",title:"Excluir prato","aria-label":"Excluir prato",children:e.jsx(yd,{size:16})})]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:j.description}),e.jsxs("div",{className:"flex items-center justify-between text-sm mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-1 text-gray-600",children:[e.jsx(Ht,{size:14}),e.jsxs("span",{children:[j.preparation_time||0,"min"]})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-green-600",children:[e.jsx(Gt,{size:14}),e.jsxs("span",{className:"font-semibold",children:["R$ ",j.price.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${j.available?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:j.available?"Disponível":"Indisponível"}),e.jsx("span",{className:"text-xs text-gray-500 capitalize",children:j.category==="Prato Principal"?"Prato Principal":j.category==="Petiscos"?"Petiscos":"Bebidas"})]})]})]},j.id))}),f.length===0&&e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Nenhum prato encontrado"})}),e.jsx(IM,{isOpen:l,onClose:y,item:u})]})},jd=t=>{if(!t)return"000";if(t.includes("-")){const s=t.split("-"),n=s[s.length-1];if(/^\d+$/.test(n))return n.padStart(3,"0");for(const i of s.reverse())if(/^\d+$/.test(i)&&i.length>=3)return i}return t.length>10?t.slice(-6).toUpperCase():t.toUpperCase()},u0=t=>t?`Mesa ${t}`:"Balcão",x1=t=>{let s=t.match(/Pedido Balcão #(\d+)/);if(s)return`#${s[1]}`;if(s=t.match(/Pedido de balcão #([a-f0-9-]+)/),s){const i=s[1].replace(/-/g,"").slice(-4);return`#${(parseInt(i,16)%1e4).toString().padStart(4,"0")}`}return null},GM=({orders:t,menuItems:s})=>{const{updateOrderStatus:n}=_t(),[i,l]=b.useState(new Set),[c,u]=b.useState("all"),f=(()=>{const S=new Map;return t.forEach(k=>{const E=k.tableNumber||"Balcão";S.has(E)||S.set(E,[]),S.get(E).push(k)}),S})(),p=S=>S.items.reduce((k,E)=>{const w=s.find(z=>z.id===E.menuItemId)||E.menuItem,M=(w==null?void 0:w.preparation_time)||(w==null?void 0:w.preparationTime)||0;return k+M},0),g=S=>{const k=(new Date().getTime()-S.createdAt.getTime())/6e4;return k>20?"high":k>10?"medium":"low"},y=S=>{switch(S){case"high":return"border-red-400 bg-red-50";case"medium":return"border-yellow-400 bg-yellow-50";case"low":return"border-green-400 bg-green-50";default:return"border-gray-200 bg-white"}},v=S=>S.id.slice(-4).toUpperCase(),j=S=>S.id.startsWith("balcao-"),N=S=>S.id.startsWith("comanda-"),_=async(S,k)=>{console.log("🍳 Cozinha - Atualizando status:",{orderId:S,newStatus:k,isComandaOrder:N({id:S})}),l(E=>new Set([...E,S]));try{await n(S,k),console.log(`✅ Status do pedido ${S} atualizado para ${k}`)}catch(E){console.error("❌ Erro ao atualizar status:",E)}finally{setTimeout(()=>{l(E=>{const w=new Set(E);return w.delete(S),w})},1e3)}},C=S=>(f.get(S)||[]).length>1,R=t.filter(S=>c==="all"?!0:(S.tableNumber||"Balcão")===c);return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Pedidos da Cozinha"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[Array.from(f.entries()).filter(([S,k])=>k.length>1).length>0&&e.jsxs("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs font-medium",children:[Array.from(f.entries()).filter(([S,k])=>k.length>1).length," mesa(s) com múltiplos pedidos"]}),c!=="all"&&e.jsxs("button",{onClick:()=>u("all"),className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium hover:bg-blue-200 transition-colors flex items-center space-x-1",children:[e.jsxs("span",{children:["Filtro: ",c]}),e.jsx("span",{className:"text-blue-600",children:"✕"})]})]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[R.length," de ",t.length," pedidos"]})]}),Array.from(f.entries()).filter(([S,k])=>k.length>1).length>0&&e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"text-sm font-semibold text-orange-800 mb-2",children:"⚠️ Mesas com Múltiplos Pedidos:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from(f.entries()).filter(([S,k])=>k.length>1).map(([S,k])=>e.jsxs("button",{onClick:()=>u(S),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors hover:shadow-md transform hover:scale-105 ${c===S?"bg-orange-400 text-white":"bg-orange-200 text-orange-800 hover:bg-orange-300"}`,title:`Filtrar pedidos da ${S}`,children:["Mesa ",S,": ",k.length," pedidos"]},S))})]}),R.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:c!=="all"?`Nenhum pedido encontrado para ${c}`:"Nenhum pedido pendente na cozinha"})}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:R.map(S=>{const k=g(S),E=p(S),w=S.items.filter(z=>{const U=s.find(H=>H.id===z.menuItemId)||z.menuItem;return U&&U.item_type!=="direct"}),M=C(S.tableNumber||"Balcão");return e.jsxs(Ne.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:`border-2 rounded-lg p-4 ${y(k)} ${M?"ring-2 ring-orange-300 ring-offset-2":""} ${j(S)?"border-green-400 bg-green-50 shadow-lg":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(cl,{size:16,className:"text-gray-500"}),e.jsx("span",{className:"font-bold text-lg",children:u0(S.tableNumber)}),e.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium",children:["#",v(S)]}),j(S)&&e.jsx("span",{className:"bg-green-600 text-white px-2 py-1 rounded-full text-xs font-bold animate-pulse",children:"✓ PAGO"}),N(S)&&e.jsx("span",{className:"bg-yellow-500 text-white px-2 py-1 rounded-full text-xs font-medium",children:"AGUARDA PAGTO"})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[e.jsx(Ht,{size:14}),e.jsx("span",{children:Zt(S.createdAt,"HH:mm",{locale:cs})})]})]}),e.jsx("div",{className:"space-y-2 mb-4",children:w.map(z=>{const U=s.find(H=>H.id===z.menuItemId)||z.menuItem;return e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"font-medium",children:[z.quantity,"x ",(U==null?void 0:U.name)||"Item não encontrado"]}),e.jsxs("span",{className:"text-sm text-gray-600",children:[(U==null?void 0:U.preparation_time)||(U==null?void 0:U.preparationTime)||0,"min"]})]},z.id)})}),S.notes&&e.jsx("div",{className:"mb-4 p-2 bg-yellow-100 rounded border",children:e.jsx("p",{className:"text-sm text-yellow-800",children:S.notes})}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["Tempo estimado: ",E,"min"]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${k==="high"?"bg-red-200 text-red-800":k==="medium"?"bg-yellow-200 text-yellow-800":"bg-green-200 text-green-800"}`,children:k==="high"?"Urgente":k==="medium"?"Médio":"Normal"})]}),e.jsxs("div",{className:"space-y-2",children:[S.status==="pending"&&e.jsx("button",{onClick:()=>_(S.id,"preparing"),disabled:i.has(S.id),className:`w-full py-2 rounded-lg font-medium transition-all duration-300 ${i.has(S.id)?"bg-blue-300 text-blue-700 cursor-not-allowed animate-pulse scale-95":"bg-blue-600 text-white hover:bg-blue-700 hover:shadow-lg transform hover:scale-105 active:scale-95"}`,children:i.has(S.id)?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-blue-700 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Iniciando..."})]}):"Iniciar Preparo"}),S.status==="preparing"&&e.jsx("button",{onClick:()=>_(S.id,"ready"),disabled:i.has(S.id),className:`w-full py-2 rounded-lg font-medium transition-all duration-300 ${i.has(S.id)?"bg-green-300 text-green-700 cursor-not-allowed animate-pulse scale-95":"bg-green-600 text-white hover:bg-green-700 hover:shadow-lg transform hover:scale-105 active:scale-95"}`,children:i.has(S.id)?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-green-700 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Finalizando..."})]}):"Marcar como Pronto"}),S.status==="ready"&&e.jsx("div",{className:"w-full py-2 rounded-lg font-medium bg-green-100 text-green-800 border-2 border-green-300 text-center animate-pulse",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"w-5 h-5 bg-green-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"✓"})}),e.jsx("span",{children:"Pronto para Entrega"})]})})]})]},S.id)})})]})},YM=()=>{const{kitchenOrders:t,menuItems:s}=_t(),[n,i]=b.useState("orders"),l=t.filter(h=>h.status==="pending"||h.status==="preparing"),c=s.filter(h=>h.item_type!=="direct"),u=c.filter(h=>h.preparationTime).reduce((h,f)=>h+(f.preparationTime||0),0)/c.filter(h=>h.preparationTime).length||0;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Módulo Cozinha"}),e.jsx("p",{className:"text-gray-600",children:"Gestão completa da cozinha e cardápio"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>i("orders"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n==="orders"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Pedidos"}),e.jsx("button",{onClick:()=>i("menu"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n==="menu"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Cardápio"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:"Pedidos Pendentes"}),e.jsx("p",{className:"text-3xl font-bold text-orange-600",children:l.length})]}),e.jsx("div",{className:"p-3 bg-orange-100 rounded-full",children:e.jsx(Ht,{className:"w-6 h-6 text-orange-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:"Tempo Médio"}),e.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:[u.toFixed(0),"min"]})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(Ht,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:"Pratos Disponíveis"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:c.filter(h=>h.available).length})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx(ed,{className:"w-6 h-6 text-green-600"})})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md",children:n==="orders"?e.jsx(GM,{orders:l,menuItems:c}):e.jsx(HM,{menuItems:c})})]})},XM=({isOpen:t,onClose:s,item:n})=>{const{addInventoryItem:i,updateInventoryItem:l,inventoryCategories:c}=_t(),{register:u,handleSubmit:h,control:f,reset:p,formState:{errors:g}}=d0(),[y,v]=b.useState(!1);b.useEffect(()=>{p(n?{name:n.name,categoryId:n.categoryId,currentStock:n.currentStock,minStock:n.minStock,unit:n.unit,cost:n.cost,supplier:n.supplier,availableForSale:n.availableForSale,image_url:n.image_url}:{name:"",categoryId:"",currentStock:void 0,minStock:void 0,unit:"unidades",cost:void 0,supplier:"",availableForSale:!1,image_url:""})},[n,p]);const j=async _=>{v(!0);try{n?await l({...n,..._}):await i(_),s()}catch(C){console.error("Falha ao salvar o item:",C)}finally{v(!1)}},N=["unidades","kg","litros","garrafas"];return e.jsx(nr,{children:t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:e.jsxs(Ne.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.2},className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 bg-gray-50 rounded-t-xl",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:n?"Editar Item":"Novo Item no Estoque"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:n?"Atualize as informações do item":"Adicione um novo item ao inventário"})]}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 hover:bg-gray-200 p-2 rounded-lg transition-colors duration-200",disabled:y,children:e.jsx(dt,{size:24})})]}),e.jsxs("form",{onSubmit:h(j),className:"p-6 space-y-6",children:[e.jsx(un,{label:"Nome do Item",error:g.name,children:e.jsx("input",{...u("name",{required:"Nome é obrigatório"}),className:"form-input",placeholder:"Digite o nome do item",disabled:y})}),e.jsx(un,{label:"Categoria",error:g.categoryId,children:e.jsx(Zn,{name:"categoryId",control:f,rules:{required:"Categoria é obrigatória"},render:({field:_})=>e.jsxs("select",{..._,className:"form-select",disabled:y,children:[e.jsx("option",{value:"",children:"Selecione uma categoria"}),c.map(C=>e.jsx("option",{value:C.id,children:C.name},C.id))]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(un,{label:"Estoque Atual",error:g.currentStock,children:e.jsx("input",{type:"number",...u("currentStock",{required:"Estoque atual é obrigatório",valueAsNumber:!0,min:{value:0,message:"Valor deve ser maior ou igual a 0"}}),className:"form-input",placeholder:"0",disabled:y})}),e.jsx(un,{label:"Estoque Mínimo",error:g.minStock,children:e.jsx("input",{type:"number",...u("minStock",{required:"Estoque mínimo é obrigatório",valueAsNumber:!0,min:{value:0,message:"Valor deve ser maior ou igual a 0"}}),className:"form-input",placeholder:"0",disabled:y})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(un,{label:"Unidade",error:g.unit,children:e.jsx(Zn,{name:"unit",control:f,rules:{required:"Unidade é obrigatória"},render:({field:_})=>e.jsx("select",{..._,className:"form-select",disabled:y,children:N.map(C=>e.jsx("option",{value:C,children:C},C))})})}),e.jsx(un,{label:"Custo por Unidade (R$)",error:g.cost,children:e.jsx("input",{type:"number",step:"0.01",...u("cost",{required:"Custo é obrigatório",valueAsNumber:!0,min:{value:0,message:"Valor deve ser maior ou igual a 0"}}),className:"form-input",placeholder:"0,00",disabled:y})})]}),e.jsx(un,{label:"Fornecedor (Opcional)",error:g.supplier,children:e.jsx("input",{...u("supplier"),className:"form-input",placeholder:"Nome do fornecedor",disabled:y})}),e.jsxs(un,{label:"URL da Imagem (Opcional)",error:g.image_url,children:[e.jsx("input",{...u("image_url"),className:"form-input",placeholder:"https://exemplo.com/imagem.jpg",disabled:y}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Cole aqui o link de uma imagem para representar este item do estoque"})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx(Zn,{name:"availableForSale",control:f,render:({field:_})=>e.jsx("input",{type:"checkbox",checked:_.value||!1,onChange:C=>_.onChange(C.target.checked),onBlur:_.onBlur,name:_.name,ref:_.ref,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",disabled:y})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-900",children:"Disponível para Venda"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Marque esta opção para que o produto apareça automaticamente no balcão e comandas quando houver estoque"})]})]}),e.jsxs("div",{className:"pt-6 flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-3 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:s,className:"btn-secondary",disabled:y,children:"Cancelar"}),e.jsx("button",{type:"submit",className:"btn-primary flex items-center justify-center space-x-2",disabled:y,children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Salvando..."})]}):e.jsx("span",{children:n?"Salvar Alterações":"Adicionar Item"})})]})]})]})})})},un=({label:t,children:s,error:n})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:t}),s,n&&e.jsxs("p",{className:"text-red-500 text-sm flex items-center space-x-1",children:[e.jsx("span",{className:"w-4 h-4 rounded-full bg-red-100 flex items-center justify-center",children:e.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"})}),e.jsx("span",{children:n.message})]})]}),KM=({item:t,categories:s,onEdit:n,onDelete:i})=>{const l=t.currentStock<=t.minStock,c=t.availableForSale||!1,u=s.find(h=>h.id===t.categoryId);return e.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`bg-white border rounded-lg p-4 hover:shadow-lg transition-shadow relative ${l?"border-red-300":c?"border-green-300":"border-gray-200"}`,children:[t.image_url&&e.jsx("div",{className:"w-full h-32 mb-3 bg-gray-100 rounded-lg overflow-hidden flex items-center justify-center",children:e.jsx("img",{src:t.image_url,alt:t.name,className:"max-w-full max-h-full object-contain hover:scale-105 transition-transform duration-300",onError:h=>{h.currentTarget.style.display="none"}})}),e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"pr-4 flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:t.name}),e.jsx("p",{className:"text-sm text-gray-500",children:(u==null?void 0:u.name)||"Sem categoria"})]}),e.jsxs("div",{className:"flex space-x-2 ml-2",children:[e.jsx("button",{onClick:()=>n(t),className:"text-gray-400 hover:text-blue-600 transition-colors p-1 rounded hover:bg-gray-100",title:"Editar item","aria-label":`Editar ${t.name}`,children:e.jsx(dl,{size:16})}),e.jsx("button",{onClick:()=>i(t.id),className:"text-gray-400 hover:text-red-600 transition-colors p-1 rounded hover:bg-gray-100",title:"Excluir item","aria-label":`Excluir ${t.name}`,children:e.jsx(yd,{size:16})})]})]}),e.jsx("div",{className:"mb-3",children:c?e.jsxs("div",{className:"flex items-center space-x-1 bg-green-100 text-green-700 px-2 py-1 rounded-full text-xs font-medium w-fit",children:[e.jsx(el,{size:12}),e.jsx("span",{children:"Disponível para venda"})]}):e.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 text-gray-600 px-2 py-1 rounded-full text-xs font-medium w-fit",children:[e.jsx(tv,{size:12}),e.jsx("span",{children:"Não disponível para venda"})]})}),e.jsxs("div",{className:"flex justify-between items-baseline mb-3",children:[e.jsx("span",{className:"text-2xl font-bold text-gray-800",children:t.currentStock}),e.jsxs("span",{className:"text-sm text-gray-600",children:["/ ",t.minStock," ",t.unit]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:`h-2.5 rounded-full ${l?"bg-red-500":"bg-blue-500"}`,style:{width:`${Math.min(t.currentStock/(t.minStock*2)*100,100)}%`}})}),(l||!c)&&e.jsxs("div",{className:"flex flex-col space-y-1 mt-2",children:[l&&e.jsxs("div",{className:"flex items-center space-x-1 text-red-600 text-xs",children:[e.jsx(Ws,{size:14}),e.jsx("span",{children:"Estoque baixo"})]}),!c&&e.jsxs("div",{className:"flex items-center space-x-1 text-orange-600 text-xs",children:[e.jsx(tv,{size:14}),e.jsx("span",{children:"Produto não liberado para venda no balcão"})]})]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-3 flex justify-between",children:[e.jsxs("span",{children:["Custo: R$ ",t.cost.toFixed(2)]}),e.jsxs("span",{children:["Fornecedor: ",t.supplier||"N/A"]})]})]})},WM=()=>{const t=sr(),{inventory:s,inventoryCategories:n,removeInventoryItem:i}=_t(),[l,c]=b.useState(!1),[u,h]=b.useState(null),[f,p]=b.useState(""),g=_=>{h(_),c(!0)},y=()=>{h(null),c(!0)},v=()=>{c(!1),h(null)},j=b.useMemo(()=>s.filter(_=>_.name.toLowerCase().includes(f.toLowerCase())),[s,f]),N=b.useMemo(()=>{const _=s.reduce((R,S)=>R+S.cost*S.currentStock,0),C=s.filter(R=>R.currentStock<=R.minStock).length;return{totalValue:_,lowStockCount:C,totalItems:s.length}},[s]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Módulo Estoque"}),e.jsx("p",{className:"text-gray-600",children:"Controle e gestão de inventário"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3 mt-4 sm:mt-0",children:[e.jsxs(Ne.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>t("/inventory/atualizacao-massiva"),className:"bg-green-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-green-700 transition-colors flex items-center space-x-2",children:[e.jsx(er,{size:20}),e.jsx("span",{children:"Atualização Massiva"})]}),e.jsxs(Ne.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:y,className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(Es,{size:20}),e.jsx("span",{children:"Novo Item"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(gm,{icon:Gt,title:"Valor Total do Estoque",value:`R$ ${N.totalValue.toFixed(2)}`,color:"green"}),e.jsx(gm,{icon:er,title:"Itens Totais",value:N.totalItems,color:"blue"}),e.jsx(gm,{icon:Ws,title:"Itens com Estoque Baixo",value:N.lowStockCount,color:"orange",onClick:()=>t("/inventory/estoque-baixo"),clickable:!0})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Itens do Inventário"}),e.jsxs("div",{className:"relative",children:[e.jsx(La,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar itens...",value:f,onChange:_=>p(_.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:j.map(_=>e.jsx(KM,{item:_,categories:n,onEdit:g,onDelete:i},_.id))}),j.length===0&&e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Nenhum item encontrado"})})]}),l&&e.jsx(XM,{isOpen:l,onClose:v,item:u})]})},gm=({icon:t,title:s,value:n,color:i,onClick:l,clickable:c=!1})=>{const u={green:"bg-green-100 text-green-600",blue:"bg-blue-100 text-blue-600",orange:"bg-orange-100 text-orange-600"},h="bg-white rounded-lg shadow-md p-6",f=c?"cursor-pointer hover:shadow-lg transition-shadow":"";return e.jsx(Ne.div,{className:`${h} ${f}`,onClick:l,whileHover:c?{scale:1.02}:{},whileTap:c?{scale:.98}:{},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:s}),e.jsx("p",{className:`text-3xl font-bold text-${i}-600`,children:n})]}),e.jsx("div",{className:`p-3 rounded-full ${u[i]}`,children:e.jsx(t,{className:"w-6 h-6"})})]})})},QM=({isOpen:t,onClose:s,itens:n,categorias:i})=>{const[l,c]=b.useState(""),[u,h]=b.useState(""),[f,p]=b.useState(""),[g,y]=b.useState("telefone"),v=M=>{const z=M.replace(/\D/g,"");return z.length<=2?z:z.length<=7?`(${z.slice(0,2)}) ${z.slice(2)}`:`(${z.slice(0,2)}) ${z.slice(2,7)}-${z.slice(7,11)}`},j=M=>{const z=M.replace(/\D/g,"");return z.length===11&&z.startsWith("11",0)||z.length===11},N=(M,z)=>Math.max(z*2-M,z),_=()=>{const M=new Date,z=M.toLocaleDateString("pt-BR"),U=M.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),H=n.reduce((Q,X)=>{var pe;const re=((pe=i.find($=>$.id===X.categoryId))==null?void 0:pe.name)||"Sem Categoria";return Q[re]||(Q[re]=[]),Q[re].push(X),Q},{});let V=`🏪 *AABB - Lista de Compras*
`;return V+=`📅 ${z} às ${U}

`,V+=`📋 *ITENS PARA REPOSIÇÃO:*

`,Object.entries(H).forEach(([Q,X])=>{V+=`🔸 *${Q.toUpperCase()}*
`,X.forEach(re=>{const pe=N(re.currentStock,re.minStock),$=re.currentStock===0?"🔴 ESGOTADO":"🟡 BAIXO";V+=`• ${re.name}
`,V+=`  ${$} - Atual: ${re.currentStock} ${re.unit}
`,V+=`  Mínimo: ${re.minStock} ${re.unit}
`,V+=`  *Sugestão: ${pe} ${re.unit}*
`,re.supplier&&(V+=`  Fornecedor: ${re.supplier}
`),re.cost&&(V+=`  Custo: R$ ${re.cost.toFixed(2)}
`),V+=`
`}),V+=`
`}),V+=`💡 *Observações:*
`,V+=`- Quantidades baseadas no estoque mínimo
`,V+=`- Verificar disponibilidade com fornecedores
`,V+=`- Priorizar itens esgotados

`,V+=`👤 Solicitado pelo Sistema AABB
`,V+=`📞 Contato: (11) 99999-9999

`,V+=`---
`,V+="Sistema AABB - Gestão de Estoque",V},C=M=>{const z=v(M.target.value);c(z),u&&h("")},R=()=>{if(!j(l)){h("Número de telefone inválido. Use o formato (XX) XXXXX-XXXX");return}const M=_();p(M),y("mensagem")},S=()=>{const z=`55${l.replace(/\D/g,"")}`,U=encodeURIComponent(f),H=`https://web.whatsapp.com/send?phone=${z}&text=${U}`;if(!window.open(H,"_blank")){const Q=`whatsapp://send?phone=${z}&text=${U}`;window.location.href=Q}s()},k=async()=>{try{await navigator.clipboard.writeText(f),alert("Mensagem copiada para a área de transferência!")}catch(M){console.error("Erro ao copiar mensagem:",M),alert("Erro ao copiar mensagem. Tente selecionar e copiar manualmente.")}},E=()=>{y("telefone"),p("")},w=()=>{c(""),h(""),p(""),y("telefone"),s()};return e.jsx(nr,{children:t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(Ne.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:g==="telefone"?"Compartilhar no WhatsApp":"Confirmar Envio"}),e.jsx("button",{onClick:w,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(dt,{size:20,className:"text-gray-500"})})]}),e.jsx("div",{className:"p-6",children:g==="telefone"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Insira o número de telefone para enviar a lista de compras via WhatsApp."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Número de Telefone"}),e.jsxs("div",{className:"relative",children:[e.jsx(sd,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:l,onChange:C,placeholder:"(11) 99999-9999",className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent ${u?"border-red-300":"border-gray-300"}`,maxLength:15})]}),u&&e.jsx("p",{className:"text-red-600 text-sm",children:u})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Resumo da Lista"}),e.jsxs("p",{className:"text-blue-700 text-sm",children:[n.length," ",n.length===1?"item":"itens"," com estoque baixo serão incluídos na mensagem."]})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-600 mb-4",children:["Mensagem que será enviada para ",e.jsx("strong",{children:l}),":"]}),e.jsx("div",{className:"bg-gray-50 border rounded-lg p-4 max-h-96 overflow-y-auto",children:e.jsx("pre",{className:"text-sm text-gray-800 whitespace-pre-wrap font-mono",children:f})})]}),e.jsx("div",{className:"flex space-x-3",children:e.jsxs("button",{onClick:k,className:"flex-1 bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsx(PA,{size:16}),e.jsx("span",{children:"Copiar Mensagem"})]})})]})}),e.jsx("div",{className:"flex justify-between p-6 border-t bg-gray-50",children:g==="telefone"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:w,className:"px-6 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:R,disabled:!l,className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:e.jsx("span",{children:"Gerar Mensagem"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:E,className:"px-6 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Voltar"}),e.jsxs("button",{onClick:S,className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[e.jsx(ck,{size:16}),e.jsx("span",{children:"Enviar WhatsApp"})]})]})})]})})})},ZM=()=>{const t=sr(),{inventory:s,inventoryCategories:n}=_t(),[i,l]=b.useState(!1),c=b.useMemo(()=>s.filter(p=>p.currentStock<=p.minStock),[s]),u=b.useMemo(()=>{const p=c.reduce((g,y)=>{var j;const v=((j=n.find(N=>N.id===y.categoryId))==null?void 0:j.name)||"Sem Categoria";return g[v]||(g[v]=[]),g[v].push(y),g},{});return Object.entries(p).sort(([g],[y])=>g.localeCompare(y))},[c,n]),h=(p,g)=>Math.max(g*2-p,g),f=()=>{l(!0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>t("/inventory"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(t0,{size:20,className:"text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Itens com Estoque Baixo"}),e.jsxs("p",{className:"text-gray-600",children:[c.length," ",c.length===1?"item precisa":"itens precisam"," de reposição"]})]})]}),c.length>0&&e.jsxs(Ne.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:f,className:"bg-green-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-green-700 transition-colors flex items-center space-x-2",children:[e.jsx(hk,{size:20}),e.jsx("span",{children:"Compartilhar no WhatsApp"})]})]}),c.length===0?e.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-green-50 border border-green-200 rounded-lg p-8 text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-4 bg-green-100 rounded-full",children:e.jsx(er,{className:"w-8 h-8 text-green-600"})})}),e.jsx("h3",{className:"text-xl font-semibold text-green-800 mb-2",children:"Parabéns! Todos os itens estão com estoque adequado"}),e.jsx("p",{className:"text-green-600",children:"Não há itens que precisam de reposição no momento."})]}):e.jsx("div",{className:"space-y-6",children:u.map(([p,g],y)=>e.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:y*.1},className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center space-x-2",children:[e.jsx(Ws,{className:"w-5 h-5 text-orange-500"}),e.jsx("span",{children:p}),e.jsxs("span",{className:"text-sm text-gray-500 font-normal",children:["(",g.length," itens)"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(v=>{const j=h(v.currentStock,v.minStock),N=v.currentStock===0;return e.jsxs("div",{className:`p-4 rounded-lg border-2 ${N?"border-red-300 bg-red-50":"border-orange-300 bg-orange-50"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h4",{className:"font-semibold text-gray-800 text-sm",children:v.name}),N&&e.jsx("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-1 rounded-full",children:"ESGOTADO"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Estoque Atual:"}),e.jsxs("span",{className:`font-medium ${N?"text-red-600":"text-orange-600"}`,children:[v.currentStock," ",v.unit]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Estoque Mínimo:"}),e.jsxs("span",{className:"font-medium text-gray-800",children:[v.minStock," ",v.unit]})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2",children:[e.jsx("span",{className:"text-gray-600",children:"Sugestão de Compra:"}),e.jsxs("span",{className:"font-bold text-blue-600",children:[j," ",v.unit]})]}),v.supplier&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Fornecedor:"}),e.jsx("span",{className:"font-medium text-gray-800 text-xs",children:v.supplier})]}),v.cost&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Custo Unit.:"}),e.jsxs("span",{className:"font-medium text-gray-800",children:["R$ ",v.cost.toFixed(2)]})]})]})]},v.id)})})]},p))}),e.jsx(QM,{isOpen:i,onClose:()=>l(!1),itens:c,categorias:n})]})},JM=()=>{const t=sr(),{inventory:s,inventoryCategories:n,updateInventoryItem:i}=_t(),[l,c]=b.useState(""),[u,h]=b.useState(""),[f,p]=b.useState({}),[g,y]=b.useState(!1),v=b.useMemo(()=>s.filter(E=>{const w=E.name.toLowerCase().includes(l.toLowerCase()),M=!u||E.categoryId===u;return w&&M}),[s,l,u]),j=b.useMemo(()=>Object.values(f).filter(E=>E.selecionado),[f]),N=b.useMemo(()=>j.reduce((E,w)=>E+w.valorTotal,0),[j]),_=(E,w)=>{p(M=>{var z,U,H;return{...M,[E]:{...M[E],id:E,selecionado:w,quantidadeComprada:((z=M[E])==null?void 0:z.quantidadeComprada)||1,valorUnitario:((U=M[E])==null?void 0:U.valorUnitario)||0,valorTotal:((H=M[E])==null?void 0:H.valorTotal)||0}}})},C=(E,w)=>{w<0||p(M=>{const z=M[E]||{id:E,selecionado:!1,quantidadeComprada:0,valorUnitario:0,valorTotal:0},U=w*z.valorUnitario;return{...M,[E]:{...z,quantidadeComprada:w,valorTotal:U}}})},R=(E,w)=>{w<0||p(M=>{const z=M[E]||{id:E,selecionado:!1,quantidadeComprada:0,valorUnitario:0,valorTotal:0},U=z.quantidadeComprada*w;return{...M,[E]:{...z,valorUnitario:w,valorTotal:U}}})},S=async()=>{y(!0);try{const E=j.map(async w=>{const M=s.find(V=>V.id===w.id);if(!M)return;const z=M.currentStock+w.quantidadeComprada,U=w.valorUnitario>0?w.valorUnitario:M.cost,H={...M,currentStock:z,cost:U};await i(H)});await Promise.all(E),p({}),alert(`${j.length} itens atualizados com sucesso!`)}catch(E){console.error("Erro ao atualizar estoque:",E),alert("Erro ao atualizar estoque. Tente novamente.")}finally{y(!1)}},k=E=>f[E]||{id:E,selecionado:!1,quantidadeComprada:1,valorUnitario:0,valorTotal:0};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>t("/inventory"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(t0,{size:20,className:"text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Atualização Massiva de Estoque"}),e.jsx("p",{className:"text-gray-600",children:"Selecione os itens comprados e atualize o estoque em lote"})]})]}),j.length>0&&e.jsxs(Ne.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:S,disabled:g,className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center space-x-2 disabled:opacity-50",children:[e.jsx(ad,{size:20}),e.jsx("span",{children:g?"Salvando...":`Salvar ${j.length} Itens`})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(La,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar produtos...",value:l,onChange:E=>c(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("select",{value:u,onChange:E=>h(E.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Todas as categorias"}),n.map(E=>e.jsx("option",{value:E.id,children:E.name},E.id))]}),e.jsxs("button",{onClick:()=>{const E=v.filter(M=>M.currentStock<=M.minStock),w={...f};E.forEach(M=>{const z=Math.max(M.minStock*2-M.currentStock,M.minStock);w[M.id]={id:M.id,selecionado:!0,quantidadeComprada:z,valorUnitario:M.cost||0,valorTotal:z*(M.cost||0)}}),p(w)},className:"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsx(er,{size:16}),e.jsx("span",{children:"Selecionar Estoque Baixo"})]}),e.jsxs("button",{onClick:()=>p({}),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsx(dt,{size:16}),e.jsx("span",{children:"Limpar Seleção"})]})]})}),j.length>0&&e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:j.length}),e.jsx("p",{className:"text-blue-800 text-sm",children:"Itens Selecionados"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:j.reduce((E,w)=>E+w.quantidadeComprada,0)}),e.jsx("p",{className:"text-blue-800 text-sm",children:"Quantidade Total"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["R$ ",N.toFixed(2)]}),e.jsx("p",{className:"text-blue-800 text-sm",children:"Valor Total"})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Produtos Disponíveis (",v.length,")"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Selecionar"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Produto"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estoque Atual"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantidade Comprada"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Unitário"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Total"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Novo Estoque"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map(E=>{const w=k(E.id),M=n.find(U=>U.id===E.categoryId),z=E.currentStock+(w.selecionado?w.quantidadeComprada:0);return e.jsxs("tr",{className:w.selecionado?"bg-blue-50":"",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:w.selecionado,onChange:U=>_(E.id,U.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:E.name}),e.jsx("div",{className:"text-sm text-gray-500",children:M==null?void 0:M.name})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("span",{className:`text-sm font-medium ${E.currentStock<=E.minStock?"text-red-600":"text-gray-900"}`,children:[E.currentStock," ",E.unit]}),E.currentStock<=E.minStock&&e.jsx("div",{className:"text-xs text-red-500",children:"Estoque baixo"})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w.selecionado?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>C(E.id,w.quantidadeComprada-1),className:"p-1 hover:bg-gray-200 rounded",children:e.jsx(ji,{size:16})}),e.jsx("input",{type:"number",min:"0",value:w.quantidadeComprada,onChange:U=>C(E.id,parseInt(U.target.value)||0),className:"w-20 px-2 py-1 text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{onClick:()=>C(E.id,w.quantidadeComprada+1),className:"p-1 hover:bg-gray-200 rounded",children:e.jsx(Es,{size:16})}),e.jsx("span",{className:"text-sm text-gray-500",children:E.unit})]}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w.selecionado?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm",children:"R$"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:w.valorUnitario,onChange:U=>R(E.id,parseFloat(U.target.value)||0),className:"w-24 px-2 py-1 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",placeholder:"0,00"})]}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w.selecionado?e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["R$ ",w.valorTotal.toFixed(2)]}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("span",{className:`text-sm font-medium ${w.selecionado?"text-green-600":"text-gray-500"}`,children:[z," ",E.unit]}),w.selecionado&&w.quantidadeComprada>0&&e.jsxs("div",{className:"text-xs text-green-500",children:["+",w.quantidadeComprada," ",E.unit]})]})]},E.id)})})]})}),v.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(er,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Nenhum produto encontrado"})]})]})]})},eD=({isOpen:t,onClose:s,member:n})=>{const{addMember:i,updateMember:l}=_t(),{register:c,handleSubmit:u,control:h,reset:f,formState:{errors:p}}=d0(),[g,y]=b.useState(!1);b.useEffect(()=>{f(n||{name:"",email:"",phone:"",avatar:`https://api.dicebear.com/8.x/initials/svg?seed=${name||"user"}`,status:"active",membershipType:"individual"})},[n,f]);const v=async _=>{y(!0);try{n?await l({...n,..._}):await i(_),s()}catch(C){console.error("Falha ao salvar o sócio:",C)}finally{y(!1)}},j=["active","inactive","pending"],N=["individual","family","vip"];return e.jsx(nr,{children:t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs(Ne.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-lg shadow-xl w-full max-w-lg",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:n?"Editar Sócio":"Novo Sócio"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:e.jsx(dt,{size:24})})]}),e.jsxs("form",{onSubmit:u(v),className:"p-6 space-y-4",children:[e.jsx(ii,{label:"Nome Completo",error:p.name,children:e.jsx("input",{...c("name",{required:"Nome é obrigatório"}),className:"form-input",disabled:g})}),e.jsx(ii,{label:"Email",error:p.email,children:e.jsx("input",{type:"email",...c("email",{required:"Email é obrigatório",pattern:{value:/^\S+@\S+$/i,message:"Email inválido"}}),className:"form-input",disabled:g})}),e.jsx(ii,{label:"Telefone",error:p.phone,children:e.jsx("input",{...c("phone",{required:"Telefone é obrigatório"}),className:"form-input",disabled:g})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ii,{label:"Status",error:p.status,children:e.jsx(Zn,{name:"status",control:h,render:({field:_})=>e.jsx("select",{..._,className:"form-input",disabled:g,children:j.map(C=>e.jsx("option",{value:C,className:"capitalize",children:C},C))})})}),e.jsx(ii,{label:"Tipo de Plano",error:p.membershipType,children:e.jsx(Zn,{name:"membershipType",control:h,render:({field:_})=>e.jsx("select",{..._,className:"form-input",disabled:g,children:N.map(C=>e.jsx("option",{value:C,className:"capitalize",children:C},C))})})})]}),e.jsx(ii,{label:"URL do Avatar",error:p.avatar,children:e.jsx("input",{...c("avatar"),className:"form-input",disabled:g})}),e.jsxs("div",{className:"pt-4 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300",disabled:g,children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-wait",disabled:g,children:g?"Salvando...":n?"Salvar Alterações":"Adicionar Sócio"})]})]})]})})})},ii=({label:t,children:s,error:n})=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),s,n&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.message})]}),tD=({member:t,onEdit:s})=>{const n={active:"bg-green-100 text-green-800",inactive:"bg-red-100 text-red-800",pending:"bg-yellow-100 text-yellow-800"},i={active:"Ativo",inactive:"Inativo",pending:"Pendente"};return e.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white border border-gray-200 rounded-lg p-4 text-center hover:shadow-xl transition-shadow flex flex-col",children:[e.jsxs("div",{className:"relative self-center",children:[e.jsx("img",{src:t.avatar,alt:t.name,className:"w-24 h-24 rounded-full mx-auto mb-4 object-cover"}),e.jsx("span",{className:`absolute bottom-1 right-1 block h-4 w-4 rounded-full border-2 border-white ${t.status==="active"?"bg-green-500":t.status==="inactive"?"bg-red-500":"bg-yellow-500"}`})]}),e.jsx("h3",{className:"font-bold text-lg text-gray-800",children:t.name}),e.jsx("p",{className:`text-xs font-medium px-2 py-0.5 rounded-full self-center my-2 ${n[t.status]}`,children:i[t.status]}),e.jsx("div",{className:"text-sm text-gray-600 capitalize mb-4",children:t.membershipType}),e.jsxs("div",{className:"text-left space-y-2 text-xs text-gray-500 border-t pt-3 mt-auto",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Xw,{size:14}),e.jsx("span",{children:t.email})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(sd,{size:14}),e.jsx("span",{children:t.phone})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rr,{size:14}),e.jsxs("span",{children:["Sócio desde ",Zt(t.joinDate,"MMM yyyy",{locale:cs})]})]})]}),e.jsxs("button",{onClick:()=>s(t),className:"mt-4 w-full bg-gray-100 text-gray-700 py-2 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors flex items-center justify-center space-x-2",children:[e.jsx(dl,{size:14}),e.jsx("span",{children:"Editar Perfil"})]})]})},sD=()=>{const{members:t}=_t(),[s,n]=b.useState(!1),[i,l]=b.useState(null),[c,u]=b.useState(""),[h,f]=b.useState("all"),p=N=>{l(N),n(!0)},g=()=>{l(null),n(!0)},y=()=>{n(!1),l(null)},v=b.useMemo(()=>t.filter(N=>{const _=N.name.toLowerCase().includes(c.toLowerCase()),C=h==="all"||N.status===h;return _&&C}),[t,c,h]),j=b.useMemo(()=>{const N=q5(new Date);return{total:t.length,active:t.filter(_=>_.status==="active").length,newThisMonth:t.filter(_=>U5(_.joinDate,N)).length}},[t]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Sócios do Clube"}),e.jsx("p",{className:"text-gray-600",children:"Gestão completa de sócios do clube"})]}),e.jsxs(Ne.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:g,className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center space-x-2 mt-4 sm:mt-0",children:[e.jsx(Es,{size:20}),e.jsx("span",{children:"Novo Sócio"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(xm,{icon:ha,title:"Total de Sócios",value:j.total,color:"blue"}),e.jsx(xm,{icon:Zw,title:"Sócios Ativos",value:j.active,color:"green"}),e.jsx(xm,{icon:Sk,title:"Novos (Último Mês)",value:j.newThisMonth,color:"purple"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4 sm:mb-0",children:"Lista de Sócios"}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(La,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar sócios...",value:c,onChange:N=>u(N.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("select",{value:h,onChange:N=>f(N.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Todos os Status"}),e.jsx("option",{value:"active",children:"Ativo"}),e.jsx("option",{value:"inactive",children:"Inativo"}),e.jsx("option",{value:"pending",children:"Pendente"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:v.map(N=>e.jsx(tD,{member:N,onEdit:p},N.id))}),v.length===0&&e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Nenhum sócio encontrado"})})]}),s&&e.jsx(eD,{isOpen:s,onClose:y,member:i})]})},xm=({icon:t,title:s,value:n,color:i})=>{const l={green:"bg-green-100 text-green-600",blue:"bg-blue-100 text-blue-600",purple:"bg-purple-100 text-purple-600"};return e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:s}),e.jsx("p",{className:`text-3xl font-bold text-${i}-600`,children:n})]}),e.jsx("div",{className:`p-3 rounded-full ${l[i]}`,children:e.jsx(t,{className:"w-6 h-6"})})]})})},aD=()=>{const[t,s]=b.useState(!0),n=b.useRef(null),i=b.useCallback(()=>(n.current||(n.current=new(window.AudioContext||window.webkitAudioContext)),n.current),[]),l=b.useCallback(()=>{if(t)try{const f=i(),p=(g,y,v=0)=>{setTimeout(()=>{const j=f.createOscillator(),N=f.createGain();j.connect(N),N.connect(f.destination),j.frequency.setValueAtTime(g,f.currentTime),j.type="sine",N.gain.setValueAtTime(0,f.currentTime),N.gain.linearRampToValueAtTime(.3,f.currentTime+.01),N.gain.exponentialRampToValueAtTime(.01,f.currentTime+y),j.start(f.currentTime),j.stop(f.currentTime+y)},v)};p(800,.2,0),p(1e3,.3,200)}catch(f){console.warn("Erro ao reproduzir som de notificação:",f);try{const p="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcCTSNzPLOdSUGMIMcaYOlhAAAaYOlhAAAaYOlhAAAaYOlhAAAAA==",g=new Audio(p);g.volume=.3,g.play().catch(()=>{console.log("🔔 Pedido pronto!")})}catch{console.log("🔔 Pedido pronto!")}}},[t,i]),c=b.useCallback(()=>{n.current&&(n.current.close(),n.current=null)},[]),u=b.useCallback(f=>{console.log("Volume definido para:",f)},[]),h=b.useCallback(()=>{s(f=>!f)},[]);return{play:l,stop:c,setVolume:u,isEnabled:t,toggle:h}},hl=()=>{const[t,s]=b.useState([]),[n,i]=b.useState(!0),[l,c]=b.useState(null),u=aD(),{refreshKitchenOrders:h,refreshBarOrders:f}=_t(),p=async()=>{try{i(!0);const{data:k,error:E}=await ae.from("comandas").select(`
          *,
          table:bar_tables(*),
          customer:bar_customers(*),
          employee:profiles(*),
          items:comanda_items(
            *,
            menu_item:menu_items(*)
          )
        `).order("opened_at",{ascending:!1});if(E)throw E;s(k||[])}catch(k){c(k instanceof Error?k.message:"Erro ao carregar comandas")}finally{i(!1)}},g=async k=>{try{const{data:E,error:w}=await ae.from("comandas").insert([k]).select(`
          *,
          table:bar_tables(*),
          customer:bar_customers(*),
          employee:profiles(*)
        `).single();if(w)throw w;return s(M=>[E,...M]),E}catch(E){throw new Error(E instanceof Error?E.message:"Erro ao criar comanda")}},y=async(k,E)=>{try{const w={status:E};E==="closed"&&(w.closed_at=new Date().toISOString());const{error:M}=await ae.from("comandas").update(w).eq("id",k);if(M)throw M;s(z=>z.map(U=>U.id===k?{...U,status:E,...w}:U))}catch(w){throw new Error(w instanceof Error?w.message:"Erro ao atualizar comanda")}},v=async(k,E)=>{try{const{data:w,error:M}=await ae.from("comanda_items").insert([{comanda_id:k,...E}]).select(`
          *,
          menu_item:menu_items(*)
        `).single();if(M)throw M;return s(z=>z.map(U=>U.id===k?{...U,items:[...U.items||[],w]}:U)),console.log("🍳 Atualizando pedidos da cozinha e bar após adicionar item..."),await Promise.all([h(),f()]),w}catch(w){throw new Error(w instanceof Error?w.message:"Erro ao adicionar item à comanda")}},j=async(k,E)=>{try{const w={status:E};E==="ready"?w.prepared_at=new Date().toISOString():E==="delivered"&&(w.delivered_at=new Date().toISOString());const{error:M}=await ae.from("comanda_items").update(w).eq("id",k);if(M)throw M;E==="ready"&&u.play(),s(z=>z.map(U=>{var H;return{...U,items:(H=U.items)==null?void 0:H.map(V=>V.id===k?{...V,status:E,...w}:V)}}))}catch(w){throw new Error(w instanceof Error?w.message:"Erro ao atualizar item")}},N=async k=>{try{const{data:E,error:w}=await ae.from("comandas").select(`
          *,
          table:bar_tables(*),
          customer:bar_customers(*),
          employee:profiles(*),
          items:comanda_items(
            *,
            menu_item:menu_items(*)
          )
        `).eq("table_id",k).eq("status","open").single();if(w&&w.code!=="PGRST116")throw w;return E}catch(E){throw new Error(E instanceof Error?E.message:"Erro ao buscar comanda da mesa")}},_=async k=>{try{const{error:E}=await ae.from("comanda_items").delete().eq("id",k);if(E)throw E;s(w=>w.map(M=>{var z;return{...M,items:(z=M.items)==null?void 0:z.filter(U=>U.id!==k)}}))}catch(E){throw new Error(E instanceof Error?E.message:"Erro ao remover item da comanda")}},C=async(k,E)=>{try{const{data:w,error:M}=await ae.from("bill_splits").insert([{comanda_id:k,split_type:E.type,person_count:E.person_count,splits:E.splits,service_charge_percentage:E.service_charge_percentage,discount_amount:E.discount_amount}]).select().single();if(M)throw M;return w}catch(w){throw new Error(w instanceof Error?w.message:"Erro ao criar divisão de conta")}},R=async k=>{try{const{data:E,error:w}=await ae.from("bill_splits").select("*").eq("comanda_id",k).single();if(w&&w.code!=="PGRST116")throw w;return E}catch(E){throw new Error(E instanceof Error?E.message:"Erro ao buscar divisão de conta")}},S=async(k,E)=>{try{return await y(k,"closed"),console.log("Processando pagamentos múltiplos:",E),{success:!0,payments:E}}catch(w){throw new Error(w instanceof Error?w.message:"Erro ao processar pagamentos")}};return b.useEffect(()=>{p()},[]),{comandas:t,loading:n,error:l,refetch:p,createComanda:g,updateComandaStatus:y,addItemToComanda:v,updateItemStatus:j,getComandaByTable:N,removeItemFromComanda:_,createBillSplit:C,getBillSplit:R,processMultiplePayments:S}},nD=({mode:t,onModeChange:s,user:n})=>{const i={balcao:"Balcão",mesas:"Mesas",comandas:"Comandas",fila:"Fila",pedidos:"Preparo"},l={balcao:"Balcão",mesas:"Mesas",comandas:"Comandas",fila:"Fila de Pedidos",pedidos:"Pedidos Bar"},c={balcao:"🍺",mesas:"🪑",comandas:"📋",fila:"⏱️",pedidos:"🥃"};return e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-10",children:e.jsx("div",{className:"px-2 sm:px-4 lg:px-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-center py-3 space-y-3 lg:space-y-0 min-h-16",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 min-w-0 flex-1",children:[e.jsxs("h1",{className:"text-base sm:text-lg lg:text-xl font-semibold text-gray-900 truncate",children:[e.jsx("span",{className:"hidden sm:inline",children:"Sistema de Atendimento - "}),"Bar"]}),n&&e.jsxs("span",{className:"text-xs sm:text-sm text-gray-500 mt-1 sm:mt-0 truncate",children:[e.jsx("span",{className:"hidden sm:inline",children:"Atendente: "}),n.full_name||n.email]})]}),e.jsx("nav",{className:"flex flex-wrap gap-1 sm:gap-2",children:Object.keys(i).map(u=>e.jsxs("button",{onClick:()=>s(u),className:`
                  flex items-center space-x-1 sm:space-x-2 px-2 sm:px-3 py-2 rounded-lg font-medium transition-colors text-xs sm:text-sm
                  ${t===u?"bg-blue-100 text-blue-700 border border-blue-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}
                `,children:[e.jsx("span",{className:"text-sm sm:text-lg",children:c[u]}),e.jsx("span",{className:"hidden sm:inline",children:l[u]}),e.jsx("span",{className:"sm:hidden",children:i[u]})]},u))})]})})})};function rD({title:t,titleId:s,...n},i){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":s},n),t?b.createElement("title",{id:s},t):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const wv=b.forwardRef(rD);function iD({title:t,titleId:s,...n},i){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":s},n),t?b.createElement("title",{id:s},t):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.76c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.076-4.076a1.526 1.526 0 0 1 1.037-.443 48.282 48.282 0 0 0 5.68-.494c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"}))}const oD=b.forwardRef(iD);function lD({title:t,titleId:s,...n},i){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":s},n),t?b.createElement("title",{id:s},t):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const y1=b.forwardRef(lD);function cD({title:t,titleId:s,...n},i){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":s},n),t?b.createElement("title",{id:s},t):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const qc=b.forwardRef(cD);function dD({title:t,titleId:s,...n},i){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":s},n),t?b.createElement("title",{id:s},t):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const uD=b.forwardRef(dD);function hD({title:t,titleId:s,...n},i){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":s},n),t?b.createElement("title",{id:s},t):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const ym=b.forwardRef(hD);function mD({title:t,titleId:s,...n},i){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":s},n),t?b.createElement("title",{id:s},t):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const nf=b.forwardRef(mD);function fD({title:t,titleId:s,...n},i){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":s},n),t?b.createElement("title",{id:s},t):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14"}))}const pD=b.forwardRef(fD);function gD({title:t,titleId:s,...n},i){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":s},n),t?b.createElement("title",{id:s},t):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"}))}const rf=b.forwardRef(gD);function xD({title:t,titleId:s,...n},i){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":s},n),t?b.createElement("title",{id:s},t):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const yD=b.forwardRef(xD);function bD({title:t,titleId:s,...n},i){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":s},n),t?b.createElement("title",{id:s},t):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"}))}const vD=b.forwardRef(bD);function jD({title:t,titleId:s,...n},i){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":s},n),t?b.createElement("title",{id:s},t):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const wD=b.forwardRef(jD);function _D({title:t,titleId:s,...n},i){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":s},n),t?b.createElement("title",{id:s},t):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const dd=b.forwardRef(_D);function ND({title:t,titleId:s,...n},i){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":s},n),t?b.createElement("title",{id:s},t):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const h0=b.forwardRef(ND),b1=(t=!1)=>{const[s,n]=b.useState([]),[i,l]=b.useState(!0),[c,u]=b.useState(null),h=async()=>{try{l(!0),console.log("Fetching menu items...");try{const{data:C,error:R}=await ae.from("menu_items").select("count").limit(1);if(R&&R.message.includes("JWT"))throw new Error("Supabase não configurado")}catch(C){console.error("Supabase não configurado. Criando dados mock...",C);const R=[{id:"mock-1",name:"Cerveja Pilsen",description:"Cerveja gelada 350ml",price:8.5,category:"Bebidas",image_url:void 0,available:!0,preparation_time:0,item_type:"prepared",direct_inventory_item_id:void 0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"mock-2",name:"Refrigerante",description:"Coca-Cola 350ml",price:5,category:"Bebidas",image_url:void 0,available:!0,preparation_time:0,item_type:"prepared",direct_inventory_item_id:void 0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"mock-3",name:"Porção de Batata",description:"Batata frita crocante",price:15,category:"Petiscos",image_url:void 0,available:!0,preparation_time:15,item_type:"prepared",direct_inventory_item_id:void 0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}];n(R),u("Dados de exemplo sendo exibidos. Configure o Supabase para usar dados reais.");return}const{data:g,error:y}=await ae.from("menu_items").select("*");console.log("All menu items:",g,"Error:",y);let v=ae.from("menu_items").select(`
          *,
          inventory_items!left(
            name,
            image_url,
            current_stock,
            min_stock,
            unit,
            available_for_sale
          )
        `).eq("available",!0).order("category",{ascending:!0}).order("name",{ascending:!0});t||(v=v.neq("item_type","direct"));const{data:j,error:N}=await v;if(console.log("Available menu items:",j,"Error:",N),N)throw N;if(!j||j.length===0){console.log("No menu items found - creating sample data");const C=[{name:"Cerveja Pilsen",description:"Cerveja gelada 350ml",price:8.5,category:"Bebidas",available:!0},{name:"Refrigerante",description:"Coca-Cola 350ml",price:5,category:"Bebidas",available:!0}],{data:R,error:S}=await ae.from("menu_items").insert(C).select();if(console.log("Sample data inserted:",R,"Error:",S),!S&&R){const k=R.map(E=>({id:E.id,name:E.name,description:E.description||"",price:E.price,category:E.category||"",image_url:E.image_url||void 0,available:E.available||!1,preparation_time:E.preparation_time||0,item_type:E.item_type||"prepared",direct_inventory_item_id:E.direct_inventory_item_id||void 0,created_at:E.created_at||void 0,updated_at:E.updated_at||void 0}));n(k);return}}const _=(j||[]).map(C=>{const R=C.inventory_items,S=C.item_type==="direct";return{id:C.id,name:S&&(R!=null&&R.name)?R.name:C.name,description:C.description||"",price:typeof C.price=="string"?parseFloat(C.price):C.price||0,category:C.category||"",image_url:S&&(R!=null&&R.image_url)?R.image_url:C.image_url||void 0,available:C.available||!1,preparation_time:C.preparation_time||0,item_type:C.item_type||"prepared",direct_inventory_item_id:C.direct_inventory_item_id||void 0,created_at:C.created_at||void 0,updated_at:C.updated_at||void 0,inventory_items:R?{id:"",name:R.name||"",currentStock:R.current_stock||0,minStock:R.min_stock||0,unit:R.unit||"unidades",lastUpdated:new Date,cost:0,availableForSale:R.available_for_sale||!1,image_url:R.image_url||void 0}:void 0}});console.log("Mapped items:",_),n(_)}catch(g){console.error("Error in fetchMenuItems:",g),u(g instanceof Error?g.message:"Erro ao carregar itens do menu")}finally{l(!1)}},f=g=>s.filter(y=>y.category===g),p=()=>s.filter(g=>g.available);return b.useEffect(()=>{h()},[t]),{menuItems:s,loading:i,error:c,refetch:h,getItemsByCategory:f,getAvailableItems:p}},wd=()=>{const{user:t}=as(),{refreshKitchenOrders:s,refreshBarOrders:n}=_t(),[i,l]=b.useState({orders:[],metrics:null,loading:!0,error:null}),c=b.useCallback(w=>{l(M=>({...M,...w}))},[]),u=b.useCallback((w,M)=>{console.error(`Erro em ${M}:`,w),c({error:`Erro em ${M}: ${w.message||"Erro desconhecido"}`,loading:!1})},[c]),h=b.useCallback(async()=>{if(t)try{c({loading:!0,error:null});const{data:w,error:M}=await ae.from("balcao_orders_with_details").select("*").order("created_at",{ascending:!1}).limit(50);if(M)throw M;const z=await Promise.all((w||[]).map(async U=>{const{data:H,error:V}=await ae.from("balcao_order_items").select(`
              *,
              menu_items:menu_item_id (
                id,
                name,
                category,
                price,
                preparation_time,
                item_type
              )
            `).eq("balcao_order_id",U.id);return V&&console.warn(`Erro ao carregar itens do pedido ${U.id}:`,V),{...U,items:(H==null?void 0:H.map(Q=>({...Q,menu_item:Array.isArray(Q.menu_items)?Q.menu_items[0]:Q.menu_items})))||[]}}));c({orders:z,loading:!1})}catch(w){u(w,"carregamento de pedidos")}},[t,c,u]),f=b.useCallback(async w=>{if(!t)throw new Error("Usuário não autenticado");try{c({loading:!0,error:null});const{data:M,error:z}=await ae.from("balcao_orders").insert({employee_id:t.id,customer_name:w.customer_name,customer_phone:w.customer_phone,discount_amount:w.discount_amount||0,notes:w.notes,customer_notes:w.customer_notes,status:"pending_payment"}).select().single();if(z)throw z;const U=w.items.map(V=>({balcao_order_id:M.id,menu_item_id:V.menu_item_id,quantity:V.quantity,unit_price:V.unit_price,notes:V.notes,status:"pending"})),{error:H}=await ae.from("balcao_order_items").insert(U);if(H)throw H;return await h(),M.id}catch(M){throw u(M,"criação de pedido"),M}},[t,c,u,h]),p=b.useCallback(async(w,M)=>{try{c({loading:!0,error:null});const z={status:M.status,updated_at:new Date().toISOString()};M.status==="paid"?(z.payment_method=M.payment_method,z.cash_session_id=M.cash_session_id,z.paid_at=new Date().toISOString()):M.status==="preparing"?z.preparation_started_at=new Date().toISOString():M.status==="ready"?z.preparation_completed_at=new Date().toISOString():M.status==="delivered"&&(z.delivered_at=new Date().toISOString(),z.delivered_by=M.delivered_by||(t==null?void 0:t.id)),M.notes&&(z.notes=M.notes);const{error:U}=await ae.from("balcao_orders").update(z).eq("id",w);if(U)throw U;await h()}catch(z){throw u(z,"atualização de status do pedido"),z}},[c,u,h,t]),g=b.useCallback(async w=>{try{console.log("💳 Iniciando processamento de pagamento:",w.order_id);const{data:M,error:z}=await ae.from("balcao_orders").select("order_number, customer_name").eq("id",w.order_id).single();if(z)throw console.error("❌ Erro ao buscar dados do pedido:",z),z;await p(w.order_id,{status:"paid",payment_method:w.payment_method,cash_session_id:w.cash_session_id,notes:w.notes}),console.log("💰 Registrando transação no caixa..."),console.log("📊 Dados do pedido:",M);const U=M.order_number.toString().padStart(4,"0"),H=M.customer_name?` - ${M.customer_name}`:"",V=`Pedido Balcão #${U}${H}`;console.log("📝 Nota que será salva:",V);const Q={cash_session_id:w.cash_session_id,transaction_type:"sale",payment_method:w.payment_method,amount:w.amount_paid,processed_by:t.id,notes:V};console.log("📋 Dados da transação de balcão:",Q);const{data:X,error:re}=await ae.from("cash_transactions").insert(Q).select().single();if(re)throw console.error("❌ Erro ao inserir transação de balcão:",re),re;if(console.log("✅ Transação de balcão inserida:",X),re)throw re;console.log("✅ Pagamento processado com sucesso!"),console.log("🔄 Forçando atualização dos monitores em múltiplas camadas..."),setTimeout(async()=>{await Promise.all([s(),n()]),console.log("🚀 Primeira atualização dos monitores concluída!")},500),setTimeout(async()=>{await Promise.all([s(),n(),h()]),console.log("🎉 Atualização backup dos monitores concluída!")},1500)}catch(M){throw u(M,"processamento de pagamento"),M}},[p,u,t,s,n,h]),y=b.useCallback(async(w,M)=>{try{const z={status:M,updated_at:new Date().toISOString()};M==="preparing"?z.preparation_started_at=new Date().toISOString():M==="ready"&&(z.preparation_completed_at=new Date().toISOString());const{error:U}=await ae.from("balcao_order_items").update(z).eq("id",w);if(U)throw U;await h()}catch(z){throw u(z,"atualização de status do item"),z}},[u,h]),v=b.useCallback(async(w,M)=>{try{await p(w,{status:"cancelled",notes:M?`Cancelado: ${M}`:"Pedido cancelado"})}catch(z){throw u(z,"cancelamento de pedido"),z}},[p,u]),j=b.useCallback(async w=>{try{let M=ae.from("balcao_orders_with_details").select("*");w.status&&w.status.length>0&&(M=M.in("status",w.status)),w.employee_id&&(M=M.eq("employee_id",w.employee_id)),w.start_date&&(M=M.gte("created_at",w.start_date)),w.end_date&&(M=M.lte("created_at",w.end_date)),w.customer_name&&(M=M.ilike("customer_name",`%${w.customer_name}%`)),w.order_number&&(M=M.eq("order_number",w.order_number)),w.payment_method&&(M=M.eq("payment_method",w.payment_method));const{data:z,error:U}=await M.order("created_at",{ascending:!1}).limit(100);if(U)throw U;return z||[]}catch(M){return u(M,"busca de pedidos"),[]}},[u]),N=b.useCallback(async()=>{try{const w=new Date().toISOString().split("T")[0],{data:M,error:z}=await ae.from("balcao_orders").select("status, final_amount, payment_method").gte("created_at",`${w}T00:00:00.000Z`).lt("created_at",`${w}T23:59:59.999Z`);if(z)throw z;const U=M||[],H={today:{total_orders:U.length,total_revenue:U.reduce((V,Q)=>V+(Q.final_amount||0),0),avg_order_value:U.length>0?U.reduce((V,Q)=>V+(Q.final_amount||0),0)/U.length:0,pending_payment:U.filter(V=>V.status==="pending_payment").length,preparing:U.filter(V=>V.status==="preparing").length,ready_for_delivery:U.filter(V=>V.status==="ready").length},by_status:[],by_payment_method:[],hourly_breakdown:[]};c({metrics:H})}catch(w){u(w,"carregamento de métricas")}},[c,u]),_=b.useCallback(async()=>{await Promise.all([h(),N()])},[h,N]),C=b.useCallback(w=>i.orders.filter(M=>M.status===w),[i.orders]),R=b.useCallback(w=>i.orders.find(M=>M.id===w),[i.orders]),S=C("pending_payment"),k=C("preparing"),E=C("ready");return b.useEffect(()=>{t&&_()},[t,_]),b.useEffect(()=>{if(!t)return;const w=ae.channel("balcao_orders_changes").on("postgres_changes",{event:"*",schema:"public",table:"balcao_orders"},()=>{h()}).on("postgres_changes",{event:"*",schema:"public",table:"balcao_order_items"},()=>{h()}).subscribe();return()=>{w.unsubscribe()}},[t,h]),{orders:i.orders,pendingOrders:S,preparingOrders:k,readyOrders:E,metrics:i.metrics,loading:i.loading,error:i.error,createOrder:f,updateOrderStatus:p,updateItemStatus:y,cancelOrder:v,processPayment:g,searchOrders:j,getOrdersByStatus:C,refreshData:_,getOrderById:R,loadMetrics:N}},v1=()=>{const{user:t}=as(),[s,n]=b.useState({currentSession:null,pendingComandas:[],todaysTransactions:[],todaysSessions:[],todaysSummary:{session_date:new Date().toISOString().split("T")[0],total_sessions:0,total_sales:0,total_transactions:0,by_payment_method:[],by_employee:[],discrepancies:[],avg_ticket:0,peak_hours:[]},loading:!0,error:null}),i=b.useCallback(f=>{n(p=>({...p,...f}))},[]),l=b.useCallback((f,p)=>{console.error(`Erro em ${p}:`,f),i({error:`Erro em ${p}: ${f.message||"Erro desconhecido"}`,loading:!1})},[i]),c=b.useCallback(async()=>{if(t)try{i({loading:!0,error:null});const{data:f,error:p}=await ae.from("cash_sessions").select("*").eq("employee_id",t.id).eq("status","open").maybeSingle();if(p&&p.code!=="PGRST116")throw p;const g=f?{...f,employee:{id:t.id,name:t.email||"Usuário",role:"employee"}}:null;i({currentSession:g,pendingComandas:[],todaysTransactions:[],todaysSessions:[],loading:!1})}catch(f){l(f,"carregamento inicial")}},[t,i,l]),u=b.useCallback(async f=>{if(!t)throw new Error("Usuário não autenticado");try{i({loading:!0,error:null});const p={employee_id:t.id,opening_amount:f.opening_amount,opening_notes:f.opening_notes,supervisor_approval_id:f.supervisor_approval_id,status:"open"},{data:g,error:y}=await ae.from("cash_sessions").insert(p).select("*").single();if(y)throw y;await c()}catch(p){throw l(p,"abertura de caixa"),p}},[t,i,l,c]),h=b.useCallback(async f=>{if(!s.currentSession)throw new Error("Nenhuma sessão aberta");try{i({loading:!0,error:null});const p=f.closing_amount-s.currentSession.expected_amount,{error:g}=await ae.from("cash_sessions").update({status:"closed",closed_at:new Date().toISOString(),closing_amount:f.closing_amount,cash_discrepancy:p,closing_notes:f.closing_notes}).eq("id",s.currentSession.id);if(g)throw g;const y=f.reconciliation.map(j=>({cash_session_id:s.currentSession.id,payment_method:j.payment_method,expected_amount:j.expected_amount,actual_amount:j.actual_amount,transaction_count:j.transaction_count,reconciled_by:t.id,notes:j.notes})),{error:v}=await ae.from("payment_reconciliation").insert(y);if(v)throw v;await c()}catch(p){throw l(p,"fechamento de caixa"),p}},[s.currentSession,t,i,l,c]);return b.useEffect(()=>{c()},[c]),{currentSession:s.currentSession,pendingComandas:s.pendingComandas,todaysTransactions:s.todaysTransactions,todaysSessions:s.todaysSessions,todaysSummary:s.todaysSummary,loading:s.loading,error:s.error,openCashSession:u,closeCashSession:h,getCurrentSession:()=>s.currentSession,processComandaPayment:async()=>{throw new Error("Não implementado ainda")},processRefund:async()=>{throw new Error("Não implementado ainda")},processAdjustment:async()=>{throw new Error("Não implementado ainda")},generateDailySummary:async()=>s.todaysSummary,generateMonthlySummary:async()=>({month:new Date().toISOString().slice(0,7),total_sessions:0,total_sales:0,total_transactions:0,employees_performance:[],top_payment_methods:[],daily_breakdown:[],avg_discrepancy:0,peak_days:[]}),getTransactionsByFilters:async()=>[],getSessionsByFilters:async()=>[],validateCashAmount:async()=>({isValid:!0,errors:[]}),validateSession:async()=>({isValid:!0,errors:[]}),reloadData:c}},Te=t=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t),_d={dinheiro:"Dinheiro",cartao_debito:"Cartão de Débito",cartao_credito:"Cartão de Crédito",pix:"PIX",transferencia:"Transferência"},j1={sale:"Venda",refund:"Estorno",adjustment:"Ajuste",tip:"Gorjeta",cash_withdrawal:"Saída de Dinheiro",treasury_transfer:"Transferência para Tesouraria"},SD=({isOpen:t,onClose:s,onSelectCustomer:n})=>{const[i,l]=b.useState(""),[c,u]=b.useState([]),[h,f]=b.useState(!1),[p,g]=b.useState("phone");b.useEffect(()=>{t&&(l(""),u([]))},[t]);const y=async()=>{if(i.trim()){f(!0);try{let N=ae.from("bar_customers").select("*");p==="phone"?N=N.ilike("phone",`%${i}%`):N=N.ilike("name",`%${i}%`);const{data:_,error:C}=await N.eq("status","active").order("name").limit(10);if(C)throw C;if(!_||_.length===0){const R=[{id:"mock-1",phone:i.includes("11")?i:"(11) 99999-1234",name:"João Silva",email:"joao@exemplo.com",credit_limit:1e3,current_balance:0,status:"active",is_vip:!0,loyalty_points:250,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),last_visit:"2024-08-30"},{id:"mock-2",phone:"(11) 88888-5678",name:"Maria Santos",email:"maria@exemplo.com",credit_limit:500,current_balance:0,status:"active",is_vip:!1,loyalty_points:120,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),last_visit:"2024-08-28"}];u(p==="phone"?R.filter(S=>S.phone.includes(i)||i.includes("11")):R.filter(S=>S.name.toLowerCase().includes(i.toLowerCase())))}else u(_)}catch(N){console.error("Erro ao buscar clientes:",N),u([])}finally{f(!1)}}},v=N=>{N.key==="Enter"&&y()},j=N=>{n(N),s()};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Identificar Membro"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:e.jsx(h0,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6 border-b",children:[e.jsx("div",{className:"flex space-x-4 mb-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>g("phone"),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${p==="phone"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(rf,{className:"h-4 w-4 inline mr-1"}),"Telefone"]}),e.jsxs("button",{onClick:()=>g("name"),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${p==="name"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(dd,{className:"h-4 w-4 inline mr-1"}),"Nome"]})]})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(nf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:p==="phone"?"Digite o telefone (ex: 11999999999)":"Digite o nome do membro",value:i,onChange:N=>l(N.target.value),onKeyPress:v,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",autoFocus:!0})]}),e.jsx("button",{onClick:y,disabled:h||!i.trim(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Buscando...":"Buscar"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:h?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):c.length>0?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:[c.length," resultado(s) encontrado(s)"]}),c.map(N=>e.jsxs("div",{onClick:()=>j(N),className:"bg-gray-50 rounded-lg p-4 hover:bg-gray-100 cursor-pointer transition-colors border border-gray-200",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h5",{className:"font-medium text-gray-900",children:N.name}),N.is_vip&&e.jsxs("div",{className:"flex items-center space-x-1 bg-yellow-100 px-2 py-1 rounded-full",children:[e.jsx(vD,{className:"h-3 w-3 text-yellow-600"}),e.jsx("span",{className:"text-xs font-medium text-yellow-800",children:"VIP"})]})]}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rf,{className:"h-4 w-4"}),e.jsx("span",{children:N.phone})]}),N.email&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(uD,{className:"h-4 w-4"}),e.jsx("span",{children:N.email})]})]})]}),e.jsxs("div",{className:"text-right text-sm",children:[e.jsxs("div",{className:"text-gray-900 font-medium",children:[N.loyalty_points," pontos"]}),N.last_visit&&e.jsxs("div",{className:"text-gray-500",children:["Última visita: ",new Date(N.last_visit).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between text-xs",children:[e.jsx("span",{className:`px-2 py-1 rounded-full ${N.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:N.status==="active"?"Ativo":"Inativo"}),e.jsxs("span",{className:"text-gray-500",children:["Limite: R$ ",N.credit_limit.toFixed(2)]})]})]},N.id))]}):i&&!h?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(dd,{className:"h-12 w-12 mx-auto text-gray-300 mb-4"}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum membro encontrado"}),e.jsxs("p",{className:"text-gray-600",children:["Tente buscar por outro ",p==="phone"?"telefone":"nome"," ou verifique se o membro está cadastrado."]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(nf,{className:"h-12 w-12 mx-auto text-gray-300 mb-4"}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Buscar Membro"}),e.jsxs("p",{className:"text-gray-600",children:["Digite o ",p==="phone"?"telefone":"nome"," do membro para aplicar descontos e benefícios."]})]})}),e.jsx("div",{className:"p-6 border-t bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[e.jsx("span",{children:"💡 Membros recebem 10% de desconto automaticamente"}),e.jsx("button",{onClick:s,className:"text-blue-600 hover:text-blue-800 font-medium",children:"Continuar sem identificar"})]})})]})}):null},_v=()=>{const{user:t}=as(),{menuItems:s,loading:n}=b1(!0),{createOrder:i}=wd(),{currentSession:l}=v1(),{inventory:c}=_t(),[u,h]=b.useState([]),[f,p]=b.useState(null),[g,y]=b.useState(""),[v,j]=b.useState(""),[N,_]=b.useState("all"),[C,R]=b.useState(""),[S,k]=b.useState(!1),[E,w]=b.useState(!1),[M,z]=b.useState({}),U=b.useMemo(()=>Array.from(new Set(s.map(q=>q.category))).sort(),[s]),H=b.useMemo(()=>{let A=s.filter(q=>q.available);return N!=="all"&&(A=A.filter(q=>q.category===N)),C&&(A=A.filter(q=>{var L;return q.name.toLowerCase().includes(C.toLowerCase())||((L=q.description)==null?void 0:L.toLowerCase().includes(C.toLowerCase()))})),A},[s,N,C]),V=b.useMemo(()=>u.reduce((A,q)=>A+q.price*q.quantity,0),[u]),Q=b.useMemo(()=>f?V*.1:0,[f,V]),X=b.useMemo(()=>V-Q,[V,Q]),re=(A,q)=>{if(A.item_type==="direct"&&A.direct_inventory_item_id){const L=c.find(W=>W.id===A.direct_inventory_item_id);return L?L.currentStock<q?{available:!1,currentStock:L.currentStock,warning:`Estoque insuficiente. Disponível: ${L.currentStock} ${L.unit}`}:L.currentStock<=L.minStock?{available:!0,currentStock:L.currentStock,warning:`Estoque baixo! Disponível: ${L.currentStock} ${L.unit}`}:{available:!0,currentStock:L.currentStock}:{available:!1,warning:"Item não encontrado no estoque"}}return{available:!0}},pe=A=>{const q=re(A,1);if(!q.available){alert(q.warning);return}h(L=>{const W=L.find(oe=>oe.menu_item_id===A.id);if(W){const oe=W.quantity+1,me=re(A,oe);return me.available?(me.warning?z(fe=>({...fe,[A.id]:me.warning})):z(fe=>{const ie={...fe};return delete ie[A.id],ie}),L.map(fe=>fe.menu_item_id===A.id?{...fe,quantity:oe}:fe)):(alert(me.warning),L)}else return q.warning&&z(oe=>({...oe,[A.id]:q.warning})),[...L,{menu_item_id:A.id,name:A.name,price:A.price,quantity:1}]})},$=A=>{h(q=>q.filter(L=>L.menu_item_id!==A)),z(q=>{const L={...q};return delete L[A],L})},D=(A,q)=>{if(q<=0){$(A);return}const L=s.find(W=>W.id===A);if(L){const W=re(L,q);if(!W.available){alert(W.warning);return}W.warning?z(oe=>({...oe,[A]:W.warning})):z(oe=>{const me={...oe};return delete me[A],me})}h(W=>W.map(oe=>oe.menu_item_id===A?{...oe,quantity:q}:oe))},P=()=>{h([]),p(null),y(""),j(""),z({})},B=()=>{const A=[];for(const q of u){const L=s.find(W=>W.id===q.menu_item_id);if(L){const W=re(L,q.quantity);W.available||A.push(`${L.name}: ${W.warning}`)}}return{valid:A.length===0,errors:A}},K=async()=>{if(u.length===0)return;const A=B();if(!A.valid){alert(`Problemas de estoque encontrados:

`+A.errors.join(`
`));return}w(!0);try{const q={customer_name:f==null?void 0:f.name,customer_phone:f==null?void 0:f.phone,customer_notes:v||void 0,items:u.map(W=>({menu_item_id:W.menu_item_id,quantity:W.quantity,unit_price:W.price,notes:W.notes})),discount_amount:Q,notes:g||void 0},L=await i(q);P(),alert(`Pedido #${L.slice(-4).toUpperCase()} criado com sucesso!

O pedido está aguardando pagamento no caixa.`)}catch(q){console.error("Erro ao criar pedido:",q),q instanceof Error&&q.message.includes("Estoque insuficiente")?alert("Estoque insuficiente para um ou mais itens. Verifique o estoque e tente novamente."):alert("Erro ao criar pedido. Tente novamente.")}finally{w(!1)}};return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm p-4 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Criar Pedido de Balcão"}),e.jsx("p",{className:"text-gray-600",children:"O pedido ficará pendente até o pagamento ser processado no caixa"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:l?e.jsx("div",{className:"bg-green-100 px-4 py-2 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y1,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-green-800 font-medium",children:"Caixa Aberto"})]})}):e.jsx("div",{className:"bg-yellow-100 px-4 py-2 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qc,{className:"h-5 w-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-yellow-800 font-medium",children:"Caixa Fechado"}),e.jsx("p",{className:"text-yellow-700 text-sm",children:"Pedidos serão processados quando o caixa abrir"})]})]})})})]})}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("div",{className:"bg-white p-4 border-b",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(nf,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar itens...",value:C,onChange:A=>R(A.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("select",{value:N,onChange:A=>_(A.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Todas Categorias"}),U.map(A=>e.jsx("option",{value:A,children:A},A))]})]})}),e.jsx("div",{className:"flex-1 overflow-auto p-4",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:H.map(A=>{const q=re(A,1),L=q.warning&&q.available,W=!q.available;return e.jsxs(Ne.div,{whileHover:{scale:W?1:1.02},whileTap:{scale:W?1:.98},onClick:()=>!W&&pe(A),className:`bg-white rounded-lg p-4 shadow-sm border transition-all duration-200 relative ${W?"cursor-not-allowed opacity-50 border-red-300":L?"cursor-pointer hover:shadow-lg hover:border-yellow-400 hover:bg-yellow-50 border-yellow-300":"cursor-pointer hover:shadow-lg hover:border-blue-400 hover:bg-blue-50 border-gray-200"}`,children:[W&&e.jsxs("div",{className:"absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded-full flex items-center space-x-1",children:[e.jsx(ym,{className:"h-3 w-3"}),e.jsx("span",{children:"Esgotado"})]}),L&&e.jsxs("div",{className:"absolute top-2 right-2 bg-yellow-500 text-white text-xs px-2 py-1 rounded-full flex items-center space-x-1",children:[e.jsx(ym,{className:"h-3 w-3"}),e.jsx("span",{children:"Baixo"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2 line-clamp-2",children:A.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:A.category}),A.item_type==="direct"&&q.currentStock!==void 0&&e.jsxs("p",{className:`text-xs mb-2 ${W?"text-red-600":L?"text-yellow-600":"text-gray-500"}`,children:["Estoque: ",q.currentStock]}),e.jsx("p",{className:`text-lg font-bold ${W?"text-gray-400":"text-blue-600"}`,children:Te(A.price)})]})]},A.id)})})})]}),e.jsxs("div",{className:"w-96 bg-white border-l flex flex-col",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Carrinho"}),u.length>0&&e.jsx("button",{onClick:P,className:"text-red-600 hover:text-red-700 text-sm",children:"Limpar"})]})}),e.jsx("div",{className:"flex-1 overflow-auto p-4",children:u.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500",children:"Carrinho vazio"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Adicione itens do menu"})]}):e.jsx("div",{className:"space-y-4",children:u.map(A=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:A.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[Te(A.price)," cada"]}),M[A.menu_item_id]&&e.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[e.jsx(ym,{className:"h-4 w-4 text-yellow-500"}),e.jsx("p",{className:"text-xs text-yellow-600",children:M[A.menu_item_id]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>D(A.menu_item_id,A.quantity-1),className:"p-1 rounded hover:bg-gray-200",children:e.jsx(pD,{className:"h-4 w-4"})}),e.jsx("span",{className:"w-8 text-center font-medium",children:A.quantity}),e.jsx("button",{onClick:()=>D(A.menu_item_id,A.quantity+1),className:"p-1 rounded hover:bg-gray-200",children:e.jsx(yD,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>$(A.menu_item_id),className:"p-1 rounded hover:bg-red-100 text-red-600 ml-2",children:e.jsx(wD,{className:"h-4 w-4"})})]})]},A.menu_item_id))})}),f&&e.jsx("div",{className:"p-4 border-t bg-blue-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900",children:f.name}),e.jsx("p",{className:"text-sm text-blue-700",children:"Membro - Desconto 10%"})]}),e.jsx("button",{onClick:()=>p(null),className:"text-blue-600 hover:text-blue-700",children:e.jsx(h0,{className:"h-5 w-5"})})]})}),u.length>0&&e.jsxs("div",{className:"p-4 border-t bg-gray-50",children:[e.jsxs("button",{onClick:()=>k(!0),className:"w-full mb-4 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 flex items-center justify-center space-x-2",children:[e.jsx(dd,{className:"h-5 w-5"}),e.jsx("span",{children:f?"Trocar Cliente":"Identificar Cliente"})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Subtotal:"}),e.jsx("span",{children:Te(V)})]}),Q>0&&e.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[e.jsx("span",{children:"Desconto (10%):"}),e.jsxs("span",{children:["-",Te(Q)]})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[e.jsx("span",{children:"Total:"}),e.jsx("span",{children:Te(X)})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observações do Cliente"}),e.jsx("textarea",{value:v,onChange:A=>j(A.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Observações especiais..."})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observações Internas"}),e.jsx("textarea",{value:g,onChange:A=>y(A.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Observações sobre o pedido..."})]}),e.jsx("button",{onClick:K,disabled:E||u.length===0,className:"w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 font-medium",children:E?"Criando Pedido...":"Enviar para Caixa"})]})]})]}),e.jsx(SD,{isOpen:S,onClose:()=>k(!1),onSelectCustomer:A=>{p(A),k(!1)}})]})},CD={pending_payment:"Aguardando Pagamento",paid:"Pago",preparing:"Preparando",ready:"Pronto",delivered:"Entregue",cancelled:"Cancelado"},TD={pending_payment:"bg-yellow-100 text-yellow-800",paid:"bg-blue-100 text-blue-800",preparing:"bg-orange-100 text-orange-800",ready:"bg-green-100 text-green-800",delivered:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800"},Nv=t=>`#${t.toString().padStart(4,"0")}`,ED=()=>{var E;const{pendingOrders:t,preparingOrders:s,readyOrders:n,updateOrderStatus:i,processPayment:l,loading:c,refreshData:u}=wd(),{currentSession:h}=v1(),[f,p]=b.useState(!1),[g,y]=b.useState(null),[v,j]=b.useState("dinheiro"),[N,_]=b.useState(!1),C=async()=>{if(!(!g||!h)){_(!0);try{await l({order_id:g.id,payment_method:v,cash_session_id:h.id,amount_paid:g.final_amount}),p(!1),y(null)}catch(w){console.error("Erro ao processar pagamento:",w),alert("Erro ao processar pagamento. Tente novamente.")}finally{_(!1)}}},R=async w=>{try{await i(w,{status:"ready"})}catch(M){console.error("Erro ao marcar como pronto:",M),alert("Erro ao atualizar status. Tente novamente.")}},S=async w=>{try{await i(w,{status:"delivered"})}catch(M){console.error("Erro ao marcar como entregue:",M),alert("Erro ao atualizar status. Tente novamente.")}},k=({order:w})=>{var Q;const M=TD[w.status],z=CD[w.status],H=(()=>{const X=new Date(w.created_at);return Math.floor((new Date().getTime()-X.getTime())/(1e3*60))})(),V=H>15;return e.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`bg-white rounded-lg shadow-md p-4 border-l-4 ${V?"border-red-500":w.status==="ready"?"border-green-500":"border-blue-500"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:Nv(w.order_number)}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${M}`,children:z})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(qc,{className:"h-4 w-4"}),e.jsxs("span",{className:V?"text-red-600 font-medium":"",children:[H,"min"]})]})]}),(w.customer_name||w.customer_phone)&&e.jsx("div",{className:"mb-3 p-2 bg-gray-50 rounded",children:e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[w.customer_name&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(dd,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{children:w.customer_name})]}),w.customer_phone&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(rf,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{children:w.customer_phone})]})]})}),e.jsx("div",{className:"space-y-2 mb-3",children:(Q=w.items)==null?void 0:Q.map(X=>{var re;return e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:[X.quantity,"x ",((re=X.menu_item)==null?void 0:re.name)||"Item",X.notes&&e.jsxs("span",{className:"text-gray-500 italic",children:[" - ",X.notes]})]}),e.jsx("span",{className:"font-medium",children:Te(X.total_price)})]},X.id)})}),(w.customer_notes||w.notes)&&e.jsxs("div",{className:"mb-3 p-2 bg-yellow-50 rounded",children:[w.customer_notes&&e.jsxs("div",{className:"flex items-start space-x-2 text-sm",children:[e.jsx(oD,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),e.jsx("span",{className:"text-yellow-800",children:w.customer_notes})]}),w.notes&&e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Obs. interna: ",w.notes]})]}),e.jsxs("div",{className:"flex justify-between items-center mb-3 pt-2 border-t",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Total:"}),e.jsx("span",{className:"text-lg font-bold text-green-600",children:Te(w.final_amount)})]}),e.jsxs("div",{className:"flex space-x-2",children:[w.status==="pending_payment"&&e.jsx("button",{onClick:()=>{y(w),p(!0)},disabled:!h,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:"Receber Pagamento"}),w.status==="preparing"&&e.jsx("button",{onClick:()=>R(w.id),className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 text-sm font-medium",children:"Marcar como Pronto"}),w.status==="ready"&&e.jsx("button",{onClick:()=>S(w.id),className:"flex-1 bg-purple-600 text-white py-2 px-4 rounded hover:bg-purple-700 text-sm font-medium",children:"Entregar ao Cliente"})]})]})};return c?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Pedidos de Balcão"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[h?e.jsx("div",{className:"bg-green-100 px-3 py-1 rounded-lg",children:e.jsx("span",{className:"text-green-800 text-sm font-medium",children:"Caixa Aberto"})}):e.jsx("div",{className:"bg-red-100 px-3 py-1 rounded-lg",children:e.jsx("span",{className:"text-red-800 text-sm font-medium",children:"Caixa Fechado"})}),e.jsxs("button",{onClick:u,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[e.jsx(wv,{className:"h-4 w-4"}),e.jsx("span",{children:"Atualizar"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-yellow-100 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-800 text-sm font-medium",children:"Aguardando Pagamento"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:t.length})]}),e.jsx(qc,{className:"h-8 w-8 text-yellow-600"})]})}),e.jsx("div",{className:"bg-blue-100 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-800 text-sm font-medium",children:"Preparando"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:s.length})]}),e.jsx(wv,{className:"h-8 w-8 text-blue-600"})]})}),e.jsx("div",{className:"bg-green-100 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-800 text-sm font-medium",children:"Prontos"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:n.length})]}),e.jsx(y1,{className:"h-8 w-8 text-green-600"})]})})]}),e.jsxs("div",{className:"space-y-6",children:[t.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Aguardando Pagamento (",t.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(w=>e.jsx(k,{order:w},w.id))})]}),s.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Preparando (",s.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(w=>e.jsx(k,{order:w},w.id))})]}),n.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Prontos para Entrega (",n.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(w=>e.jsx(k,{order:w},w.id))})]}),t.length===0&&s.length===0&&n.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(qc,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum pedido pendente"}),e.jsx("p",{className:"text-gray-600",children:"Todos os pedidos foram processados e entregues."})]})]}),f&&g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-96",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Receber Pagamento - ",Nv(g.order_number)]}),e.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(h0,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Resumo do Pedido"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[(E=g.items)==null?void 0:E.map(w=>{var M;return e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[w.quantity,"x ",(M=w.menu_item)==null?void 0:M.name]}),e.jsx("span",{children:Te(w.total_price)})]},w.id)}),e.jsxs("div",{className:"border-t pt-2 flex justify-between font-medium",children:[e.jsx("span",{children:"Total:"}),e.jsx("span",{children:Te(g.final_amount)})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Método de Pagamento"}),e.jsxs("select",{value:v,onChange:w=>j(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"dinheiro",children:"Dinheiro"}),e.jsx("option",{value:"cartao_debito",children:"Cartão de Débito"}),e.jsx("option",{value:"cartao_credito",children:"Cartão de Crédito"}),e.jsx("option",{value:"pix",children:"PIX"}),e.jsx("option",{value:"transferencia",children:"Transferência"})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>p(!1),className:"flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:C,disabled:N||!h,className:"flex-1 bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:N?"Processando...":"Confirmar Pagamento"})]})]})})]})},Nd=()=>{const[t,s]=b.useState([]),[n,i]=b.useState(!0),[l,c]=b.useState(null),u=async()=>{try{i(!0);const{data:p,error:g}=await ae.from("bar_tables").select("*").order("number");if(g)throw g;s(p||[])}catch(p){c(p instanceof Error?p.message:"Erro ao carregar mesas")}finally{i(!1)}},h=async(p,g)=>{try{const{error:y}=await ae.from("bar_tables").update({status:g}).eq("id",p);if(y)throw y;s(v=>v.map(j=>j.id===p?{...j,status:g}:j))}catch(y){throw new Error(y instanceof Error?y.message:"Erro ao atualizar mesa")}},f=async(p,g,y)=>{try{const{error:v}=await ae.from("bar_tables").update({position_x:g,position_y:y}).eq("id",p);if(v)throw v;s(j=>j.map(N=>N.id===p?{...N,position_x:g,position_y:y}:N))}catch(v){throw new Error(v instanceof Error?v.message:"Erro ao atualizar posição da mesa")}};return b.useEffect(()=>{u()},[]),{tables:t,loading:n,error:l,refetch:u,updateTableStatus:h,updateTablePosition:f}},w1=({isOpen:t,onClose:s,selectedTable:n,onComandaCreated:i})=>{const{user:l}=as(),{tables:c}=Nd(),{createComanda:u}=hl(),[h,f]=b.useState({table_id:(n==null?void 0:n.id)||"",customer_id:"",customer_name:"",people_count:1,notes:""}),[p,g]=b.useState(""),[y,v]=b.useState([]),[j,N]=b.useState(!1),[_,C]=b.useState(!1),R=async E=>{if(!E.trim()){v([]);return}try{N(!0);const{data:w,error:M}=await ae.from("bar_customers").select("*").or(`phone.ilike.%${E}%,name.ilike.%${E}%`).eq("status","active").limit(10);if(M)throw M;v(w||[])}catch(w){console.error("Erro ao buscar clientes:",w)}finally{N(!1)}},S=E=>{f(w=>({...w,customer_id:E.id,customer_name:E.name})),g(E.name),v([])},k=async E=>{if(E.preventDefault(),!!l)try{C(!0);const w={table_id:h.table_id||void 0,customer_id:h.customer_id||void 0,customer_name:h.customer_name||void 0,employee_id:l.id,people_count:h.people_count,notes:h.notes||void 0};await u(w),i&&i(),s(),f({table_id:"",customer_id:"",customer_name:"",people_count:1,notes:""}),g("")}catch(w){console.error("Erro ao criar comanda:",w),alert("Erro ao criar comanda. Tente novamente.")}finally{C(!1)}};return b.useEffect(()=>{n&&f(E=>({...E,table_id:n.id}))},[n]),b.useEffect(()=>{const E=setTimeout(()=>{R(p)},300);return()=>clearTimeout(E)},[p]),t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Nova Comanda"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:e.jsx(dt,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:k,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(cl,{className:"w-4 h-4 inline mr-1"}),"Mesa (opcional)"]}),e.jsxs("select",{value:h.table_id,onChange:E=>f(w=>({...w,table_id:E.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Balcão (sem mesa)"}),c.filter(E=>E.status==="available").map(E=>e.jsxs("option",{value:E.id,children:["Mesa ",E.number," (",E.capacity," pessoas)"]},E.id))]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(tr,{className:"w-4 h-4 inline mr-1"}),"Cliente (opcional)"]}),e.jsx("input",{type:"text",value:p,onChange:E=>{g(E.target.value),E.target.value||f(w=>({...w,customer_id:"",customer_name:""}))},placeholder:"Buscar por telefone ou nome...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),y.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-40 overflow-y-auto",children:y.map(E=>e.jsxs("button",{type:"button",onClick:()=>S(E),className:"w-full px-3 py-2 text-left hover:bg-gray-100 focus:bg-gray-100",children:[e.jsx("div",{className:"font-medium",children:E.name}),e.jsx("div",{className:"text-sm text-gray-600",children:E.phone})]},E.id))}),j&&e.jsx("div",{className:"absolute right-3 top-9",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"})})]}),p&&!h.customer_id&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do cliente"}),e.jsx("input",{type:"text",value:h.customer_name,onChange:E=>f(w=>({...w,customer_name:E.target.value})),placeholder:"Digite o nome do cliente",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(ha,{className:"w-4 h-4 inline mr-1"}),"Número de pessoas"]}),e.jsx("input",{type:"number",min:"1",max:"20",value:h.people_count,onChange:E=>f(w=>({...w,people_count:parseInt(E.target.value)||1})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observações"}),e.jsx("textarea",{value:h.notes,onChange:E=>f(w=>({...w,notes:E.target.value})),placeholder:"Observações sobre a comanda...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:s,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:_,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50",children:_?"Criando...":"Criar Comanda"})]})]})]})}):null},AD=({isOpen:t,onClose:s})=>{const{tables:n,updateTablePosition:i}=Nd(),[l,c]=b.useState([]),[u,h]=b.useState({isDragging:!1,tableId:null,startX:0,startY:0,offsetX:0,offsetY:0}),[f,p]=b.useState(!1),g=b.useRef(null);b.useEffect(()=>{c([...n])},[n]);const y=(R,S)=>{var M;if(R.preventDefault(),!((M=g.current)==null?void 0:M.getBoundingClientRect()))return;const w=R.currentTarget.getBoundingClientRect();h({isDragging:!0,tableId:S.id,startX:R.clientX,startY:R.clientY,offsetX:R.clientX-w.left,offsetY:R.clientY-w.top})},v=R=>{if(!u.isDragging||!u.tableId||!g.current)return;const S=g.current.getBoundingClientRect(),k=(R.clientX-S.left-u.offsetX)/S.width*100,E=(R.clientY-S.top-u.offsetY)/S.height*100,w=Math.max(0,Math.min(95,k)),M=Math.max(0,Math.min(95,E));c(z=>z.map(U=>U.id===u.tableId?{...U,position_x:w,position_y:M}:U))},j=()=>{h({isDragging:!1,tableId:null,startX:0,startY:0,offsetX:0,offsetY:0})},N=async()=>{try{p(!0);const R=l.map(S=>{const k=n.find(E=>E.id===S.id);return k&&(k.position_x!==S.position_x||k.position_y!==S.position_y)?i(S.id,S.position_x,S.position_y):Promise.resolve()});await Promise.all(R),s(),alert("Layout salvo com sucesso!")}catch(R){console.error("Erro ao salvar layout:",R),alert("Erro ao salvar layout. Tente novamente.")}finally{p(!1)}},_=()=>{c([...n])},C=R=>{switch(R){case"available":return"bg-green-500";case"occupied":return"bg-red-500";case"reserved":return"bg-yellow-500";case"cleaning":return"bg-gray-500";case"maintenance":return"bg-orange-500";default:return"bg-gray-400"}};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl mx-4 max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(JA,{className:"w-6 h-6 text-gray-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Configurar Layout do Salão"})]}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:e.jsx(dt,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-blue-800 text-sm",children:[e.jsx("strong",{children:"Instruções:"})," Arraste as mesas para reposicioná-las no salão. As posições são salvas em porcentagem para se adaptar a diferentes tamanhos de tela."]})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),e.jsx("span",{children:"Disponível"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),e.jsx("span",{children:"Ocupada"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),e.jsx("span",{children:"Reservada"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-500 rounded"}),e.jsx("span",{children:"Limpeza"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded"}),e.jsx("span",{children:"Manutenção"})]})]}),e.jsxs("div",{ref:g,className:"relative bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg h-96 overflow-hidden select-none",onMouseMove:v,onMouseUp:j,onMouseLeave:j,children:[l.map(R=>e.jsx("div",{className:`absolute w-12 h-12 rounded-lg border-2 border-white shadow-lg cursor-move flex items-center justify-center text-white font-bold text-xs transition-transform hover:scale-110 ${C(R.status)} ${u.tableId===R.id?"scale-110 shadow-xl":""}`,style:{left:`${R.position_x}%`,top:`${R.position_y}%`,zIndex:u.tableId===R.id?10:1},onMouseDown:S=>y(S,R),title:`Mesa ${R.number} - ${R.capacity} pessoas - ${R.status}`,children:R.number},R.id)),e.jsx("div",{className:"absolute top-2 left-2 text-xs text-gray-500 bg-white px-2 py-1 rounded",children:"Salão Principal"})]}),e.jsxs("div",{className:"flex justify-between items-center mt-6",children:[e.jsxs("button",{onClick:_,className:"flex items-center space-x-2 px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:[e.jsx(Kw,{className:"w-4 h-4"}),e.jsx("span",{children:"Resetar"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:s,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancelar"}),e.jsxs("button",{onClick:N,disabled:f,className:"flex items-center space-x-2 px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(ad,{className:"w-4 h-4"}),e.jsx("span",{children:f?"Salvando...":"Salvar Layout"})]})]})]})]})]})}):null},m0=()=>{const{user:t}=as(),[s,n]=b.useState({mesas:[],comandas:[],metricas:null,notificacoes:[],loading:!0,error:null}),i=b.useCallback(V=>{n(Q=>({...Q,...V}))},[]),l=b.useCallback((V,Q)=>{console.error(`Erro em ${Q}:`,V),i({error:`Erro em ${Q}: ${V.message||"Erro desconhecido"}`,loading:!1})},[i]),c=b.useCallback(async()=>{if(t)try{i({loading:!0,error:null});const{data:V,error:Q}=await ae.from("bar_tables").select(`
          *,
          comandas!comandas_table_id_fkey(
            id,
            customer_name,
            people_count,
            total,
            opened_at,
            status,
            comanda_items(
              id,
              quantity,
              price,
              status
            )
          )
        `).order("number");if(Q)throw Q;const X=(V==null?void 0:V.map(B=>{var A;const K=(A=B.comandas)==null?void 0:A.find(q=>q.status==="open");return{...B,currentComanda:K||void 0,occupiedSince:(K==null?void 0:K.opened_at)||void 0,currentTotal:(K==null?void 0:K.total)||0,peopleCount:(K==null?void 0:K.people_count)||0}}))||[],{data:re,error:pe}=await ae.from("comandas").select(`
          *,
          bar_tables(number, capacity),
          bar_customers(name, phone),
          comanda_items(
            *,
            menu_items(name, price, category)
          )
        `).in("status",["open","pending_payment"]).order("opened_at",{ascending:!1});if(pe)throw pe;const $=(re==null?void 0:re.map(B=>({...B,items:B.comanda_items||[],table:B.bar_tables||void 0,customer:B.bar_customers||void 0})))||[],{data:D,error:P}=await ae.from("attendance_metrics").select("*").eq("employee_id",t.id).eq("date",new Date().toISOString().split("T")[0]).maybeSingle();P&&console.warn("Erro ao carregar métricas:",P),i({mesas:X,comandas:$,metricas:D||null,loading:!1})}catch(V){l(V,"carregamento inicial")}},[t,i,l]);b.useEffect(()=>{if(!t)return;const V=[],Q=ae.channel("bar-tables-changes").on("postgres_changes",{event:"*",schema:"public",table:"bar_tables"},pe=>{console.log("Mudança em mesas:",pe),c()}).subscribe();V.push(Q);const X=ae.channel("comandas-changes").on("postgres_changes",{event:"*",schema:"public",table:"comandas"},pe=>{console.log("Mudança em comandas:",pe),c()}).subscribe();V.push(X);const re=ae.channel("comanda-items-changes").on("postgres_changes",{event:"*",schema:"public",table:"comanda_items"},pe=>{console.log("Mudança em itens de comanda:",pe),c()}).subscribe();return V.push(re),()=>{V.forEach(pe=>ae.removeChannel(pe))}},[t,c]),b.useEffect(()=>{t&&c()},[t,c]);const u=b.useCallback(async(V,Q,X)=>{if(!t)throw new Error("Usuário não autenticado");try{i({loading:!0,error:null});const{data:re,error:pe}=await ae.from("comandas").insert({table_id:V||null,customer_name:Q||null,people_count:X||1,employee_id:t.id,status:"open",opened_at:new Date().toISOString(),total:0}).select().single();if(pe)throw pe;return V&&await f(V,"occupied"),await c(),re.id}catch(re){throw l(re,"criação de comanda"),re}},[t,i,l,c]),h=b.useCallback(async(V,Q)=>{try{i({loading:!0,error:null});const{error:X}=await ae.from("comandas").update({...Q,updated_at:new Date().toISOString()}).eq("id",V);if(X)throw X;await c()}catch(X){throw l(X,"atualização de comanda"),X}},[i,l,c]),f=b.useCallback(async(V,Q)=>{try{const{error:X}=await ae.from("bar_tables").update({status:Q,updated_at:new Date().toISOString()}).eq("id",V);if(X)throw X;await c()}catch(X){throw l(X,"atualização de status da mesa"),X}},[l,c]),p=b.useCallback(async V=>{try{await f(V,"cleaning"),setTimeout(async()=>{await f(V,"available")},5*60*1e3)}catch(Q){throw l(Q,"liberação de mesa"),Q}},[f,l]),g=b.useCallback(async V=>{if(t)try{const Q=new Date().toISOString().split("T")[0],{data:X,error:re}=await ae.from("attendance_metrics").select("*").eq("employee_id",t.id).eq("date",Q).single();if(re&&re.code!=="PGRST116")throw re;if(X){const{error:pe}=await ae.from("attendance_metrics").update({total_sales:(X.total_sales||0)+V,orders_count:(X.orders_count||0)+1,comandas_count:(X.comandas_count||0)+1,updated_at:new Date().toISOString()}).eq("id",X.id);if(pe)throw pe}else{const{error:pe}=await ae.from("attendance_metrics").insert({employee_id:t.id,date:Q,total_sales:V,orders_count:1,comandas_count:1});if(pe)throw pe}}catch(Q){console.error("Erro ao atualizar métricas de venda:",Q)}},[t]),y=b.useCallback(async(V,Q,X)=>{try{i({loading:!0,error:null});const{data:re,error:pe}=await ae.from("comandas").select("table_id, total").eq("id",V).single();if(pe)throw pe;const{error:$}=await ae.from("comandas").update({status:"closed",closed_at:new Date().toISOString(),payment_method:Q,notes:X,updated_at:new Date().toISOString()}).eq("id",V);if($)throw $;re.table_id&&await p(re.table_id),await g(re.total||0),await c()}catch(re){throw l(re,"fechamento de comanda"),re}},[i,l,c,p,g]),v=b.useCallback(async(V,Q,X,re)=>{try{i({loading:!0,error:null});const{data:pe,error:$}=await ae.from("menu_items").select("price").eq("id",Q).single();if($)throw $;const{error:D}=await ae.from("comanda_items").insert({comanda_id:V,menu_item_id:Q,quantity:X,price:pe.price,notes:re,status:"pending",added_at:new Date().toISOString()});if(D)throw D;const{data:P,error:B}=await ae.from("comanda_items").select("quantity, price").eq("comanda_id",V);if(B)throw B;const K=P.reduce((A,q)=>A+q.quantity*q.price,0);await h(V,{total:K})}catch(pe){throw l(pe,"adição de item à comanda"),pe}},[i,l,h]),j=b.useCallback(async V=>{try{i({loading:!0,error:null});const{data:Q,error:X}=await ae.from("comanda_items").select("comanda_id").eq("id",V).single();if(X)throw X;const{error:re}=await ae.from("comanda_items").delete().eq("id",V);if(re)throw re;const{data:pe,error:$}=await ae.from("comanda_items").select("quantity, price").eq("comanda_id",Q.comanda_id);if($)throw $;const D=pe.reduce((P,B)=>P+B.quantity*B.price,0);await h(Q.comanda_id,{total:D})}catch(Q){throw l(Q,"remoção de item da comanda"),Q}},[i,l,h]),N=b.useCallback(async(V,Q)=>{try{const X={status:Q,updated_at:new Date().toISOString()};Q==="ready"?X.prepared_at=new Date().toISOString():Q==="delivered"&&(X.delivered_at=new Date().toISOString());const{error:re}=await ae.from("comanda_items").update(X).eq("id",V);if(re)throw re;await c()}catch(X){throw l(X,"atualização de status do item"),X}},[l,c]),_=b.useCallback(async(V,Q)=>{try{await f(V,"occupied"),Q&&await h(Q,{table_id:V})}catch(X){throw l(X,"ocupação de mesa"),X}},[f,h,l]),C=b.useCallback(async(V,Q,X)=>{try{const{error:re}=await ae.from("bar_tables").update({status:"reserved",notes:`Reservado para ${Q} às ${X.toLocaleTimeString()}`,updated_at:new Date().toISOString()}).eq("id",V);if(re)throw re;await c()}catch(re){throw l(re,"reserva de mesa"),re}},[l,c]),R=b.useCallback(async V=>{try{await f(V,"available")}catch(Q){throw l(Q,"limpeza de mesa"),Q}},[f,l]),S=b.useCallback(async V=>{var Q;if(!t)throw new Error("Usuário não autenticado");try{i({loading:!0,error:null});const{data:X,error:re}=await ae.from("comandas").insert({customer_name:((Q=V.customer)==null?void 0:Q.name)||"Cliente Balcão",employee_id:t.id,status:"closed",opened_at:new Date().toISOString(),closed_at:new Date().toISOString(),total:V.total,payment_method:V.payment_method||"dinheiro",notes:V.notes}).select().single();if(re)throw re;const pe=V.items.map(D=>({comanda_id:X.id,menu_item_id:D.menu_item_id,quantity:D.quantity,price:D.price,notes:D.notes,status:"delivered",added_at:new Date().toISOString(),delivered_at:new Date().toISOString()})),{error:$}=await ae.from("comanda_items").insert(pe);if($)throw $;return await g(V.total),await c(),X.id}catch(X){throw l(X,"processamento de pedido do balcão"),X}},[t,i,l,c]),k=b.useCallback(async(V,Q)=>{if(!t)throw new Error("Usuário não autenticado");try{i({loading:!0,error:null});const{error:X}=await ae.from("bill_splits").insert({comanda_id:V,split_type:Q.type,person_count:Q.person_count,splits:Q.splits,total_amount:Q.splits.reduce((re,pe)=>re+pe.total,0),service_charge:Q.service_charge_percentage||0,discount_amount:Q.discount_amount||0,created_by:t.id});if(X)throw X;await c()}catch(X){throw l(X,"divisão de conta"),X}},[t,i,l,c]),E=b.useCallback(async()=>{if(t)try{const V=new Date().toISOString().split("T")[0],{data:Q}=await ae.from("attendance_metrics").select("*").eq("employee_id",t.id).eq("date",V).single(),{data:X}=await ae.from("comandas").select("total, opened_at, closed_at").eq("employee_id",t.id).gte("opened_at",`${V}T00:00:00`).lt("opened_at",`${V}T23:59:59`),re=(X==null?void 0:X.reduce((D,P)=>D+(P.total||0),0))||0,pe=(X==null?void 0:X.length)||0,$={employee_id:t.id,date:V,comandas_count:pe,total_sales:re,orders_count:pe,updated_at:new Date().toISOString()};if(Q){const{error:D}=await ae.from("attendance_metrics").update($).eq("id",Q.id);if(D)throw D}else{const{error:D}=await ae.from("attendance_metrics").insert($);if(D)throw D}await c()}catch(V){l(V,"atualização de métricas")}},[t,l,c]),w=b.useCallback(async V=>{i({notificacoes:s.notificacoes.map(Q=>Q.id===V?{...Q,read:!0}:Q)})},[s.notificacoes,i]),M=b.useCallback(async()=>{i({notificacoes:[]})},[i]),z=b.useCallback(async()=>{await c()},[c]),U=b.useCallback(V=>s.comandas.find(Q=>Q.table_id===V&&Q.status==="open"),[s.comandas]),H=b.useCallback(V=>s.mesas.find(Q=>Q.number===V),[s.mesas]);return{...s,criarComanda:u,atualizarComanda:h,fecharComanda:y,adicionarItemComanda:v,removerItemComanda:j,atualizarStatusItem:N,ocuparMesa:_,liberarMesa:p,reservarMesa:C,limparMesa:R,atualizarStatusMesa:f,processarPedidoBalcao:S,dividirConta:k,atualizarMetricas:E,marcarNotificacaoLida:w,limparNotificacoes:M,recarregarDados:z,obterComandaPorMesa:U,obterMesaPorNumero:H}},kD=({isOpen:t,onClose:s,mesa:n,onStatusChange:i})=>{if(!t||!n)return null;const{getComandaByTable:l}=hl();m0();const[c,u]=b.useState(null),[h,f]=b.useState(!1),[p,g]=b.useState(!1),[y,v]=b.useState(!1);b.useEffect(()=>{t&&n&&n.status==="occupied"&&j()},[t,n]);const j=async()=>{if(n)try{f(!0);const w=await l(n.id);u(w)}catch(w){console.error("Erro ao carregar detalhes da comanda:",w)}finally{f(!1)}},N=w=>new Date(w).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),_=w=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(w),C=w=>{switch(w){case"available":return"text-green-600 bg-green-100";case"occupied":return"text-red-600 bg-red-100";case"reserved":return"text-yellow-600 bg-yellow-100";case"cleaning":return"text-gray-600 bg-gray-100";case"maintenance":return"text-orange-600 bg-orange-100";default:return"text-gray-600 bg-gray-100"}},R=w=>{switch(w){case"available":return"Disponível";case"occupied":return"Ocupada";case"reserved":return"Reservada";case"cleaning":return"Limpeza";case"maintenance":return"Manutenção";default:return"Indefinido"}},S=async(w,M)=>{if(c){v(!0);try{console.log("💳 Enviando comanda para o caixa:",c.id,"Método:",w);const{error:z}=await ae.from("comandas").update({status:"pending_payment",payment_method:w,notes:M,updated_at:new Date().toISOString()}).eq("id",c.id);if(z)throw z;console.log("✅ Comanda enviada para o caixa com sucesso"),await j(),g(!1)}catch(z){console.error("❌ Erro ao enviar comanda para o caixa:",z)}finally{v(!1)}}},k=w=>{n&&(i(n.id,w),s())},E=w=>{const M=new Date(w),U=new Date().getTime()-M.getTime(),H=Math.floor(U/(1e3*60*60)),V=Math.floor(U%(1e3*60*60)/(1e3*60));return H>0?`${H}h ${V}min`:`${V}min`};return e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["Mesa ",n.number]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${C(n.status)}`,children:R(n.status)})]}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(dt,{size:24})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(ha,{size:20,className:"text-gray-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:"Capacidade"})]}),e.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:[n.capacity," pessoas"]})]}),n.status==="occupied"&&n.occupiedSince&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Ht,{size:20,className:"text-gray-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:"Tempo de ocupação"})]}),e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:E(n.occupiedSince)})]})]}),n.status==="occupied"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informações da Comanda"}),h?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2",children:"Carregando comanda..."})]}):c?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Cliente"}),e.jsx("p",{className:"font-medium",children:c.customer_name||"Não informado"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Pessoas"}),e.jsx("p",{className:"font-medium",children:c.people_count||n.peopleCount||1})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Aberta em"}),e.jsx("p",{className:"font-medium",children:N(c.opened_at)})]})]})}),e.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Gt,{size:20,className:"text-green-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:"Total da Comanda"})]}),e.jsx("span",{className:"text-2xl font-bold text-green-600",children:_(c.total)})]})}),c.items&&c.items.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3",children:["Itens da Comanda (",c.items.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:c.items.map((w,M)=>{var z,U;return console.log("🔍 Debug item no MesaDetailsModal:",w),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[w.quantity,"x ",((z=w.menu_item)==null?void 0:z.name)||((U=w.menu_items)==null?void 0:U.name)||`Item #${w.menu_item_id}`]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Adicionado em ",N(w.added_at)]}),w.notes&&e.jsxs("p",{className:"text-sm text-gray-500 italic",children:["Obs: ",w.notes]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium text-gray-900",children:_(w.price*w.quantity)}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${w.status==="delivered"?"bg-green-100 text-green-800":w.status==="ready"?"bg-blue-100 text-blue-800":w.status==="preparing"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:w.status==="delivered"?"Entregue":w.status==="ready"?"Pronto":w.status==="preparing"?"Preparando":"Pendente"})]})]},w.id)})})]})]}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Nenhuma comanda encontrada para esta mesa"})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Ações Rápidas"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.status==="available"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>k("occupied"),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Ocupar Mesa"}),e.jsx("button",{onClick:()=>k("reserved"),className:"px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition-colors",children:"Reservar Mesa"})]}),n.status==="occupied"&&e.jsxs(e.Fragment,{children:[c&&c.status==="open"&&c.items&&c.items.length>0&&e.jsxs("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors col-span-2 flex items-center justify-center space-x-2",children:[e.jsx(Gt,{size:16}),e.jsxs("span",{children:["Enviar para Caixa - ",_(c.total)]})]}),e.jsx("button",{onClick:()=>k("available"),className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:"Liberar Mesa"}),e.jsx("button",{onClick:()=>k("cleaning"),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Marcar para Limpeza"})]}),(n.status==="cleaning"||n.status==="reserved")&&e.jsx("button",{onClick:()=>k("available"),className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors col-span-2",children:"Liberar Mesa"})]})]})]})]}),p&&c&&e.jsx(MD,{isOpen:p,onClose:()=>g(!1),comanda:c,onConfirm:S,isLoading:y})]})},MD=({isOpen:t,onClose:s,comanda:n,onConfirm:i,isLoading:l})=>{var y;const[c,u]=b.useState("dinheiro"),[h,f]=b.useState("");if(!t)return null;const p=v=>{v.preventDefault(),i(c,h)},g=v=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(v);return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Enviar para Caixa"}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-2",children:[(y=n.table)!=null&&y.number?`Mesa ${n.table.number}`:"Balcão"," - ",n.customer_name||"Cliente"]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Total da conta:"}),e.jsx("span",{className:"text-2xl font-bold text-green-600",children:g(n.total)})]})]}),e.jsxs("form",{onSubmit:p,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Método de Pagamento"}),e.jsxs("select",{value:c,onChange:v=>u(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"dinheiro",children:"Dinheiro"}),e.jsx("option",{value:"cartao_credito",children:"Cartão de Crédito"}),e.jsx("option",{value:"cartao_debito",children:"Cartão de Débito"}),e.jsx("option",{value:"pix",children:"PIX"}),e.jsx("option",{value:"vale_refeicao",children:"Vale Refeição"}),e.jsx("option",{value:"outros",children:"Outros"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observações (opcional)"}),e.jsx("textarea",{value:h,onChange:v=>f(v.target.value),placeholder:"Observações para o caixa...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"button",onClick:s,disabled:l,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:l,className:"flex-1 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center justify-center space-x-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Enviando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ir,{size:16}),e.jsx("span",{children:"Enviar para Caixa"})]})})]})]})]})})})},DD=()=>{const{tables:t,loading:s,updateTableStatus:n,refetch:i}=Nd(),{comandas:l,refetch:c}=hl(),[u,h]=b.useState(!1),[f,p]=b.useState(!1),[g,y]=b.useState(!1),[v,j]=b.useState(null),[N,_]=b.useState([]);b.useEffect(()=>{const U=t.map(H=>{const V=l.find(X=>X.table_id===H.id&&X.status==="open"),Q=V?"occupied":H.status;return{...H,status:Q,currentComanda:V,occupiedSince:V==null?void 0:V.opened_at,currentTotal:(V==null?void 0:V.total)||0,peopleCount:(V==null?void 0:V.people_count)||void 0}});_(U)},[t,l]);const C=()=>{j(null),h(!0)},R=()=>{p(!0)},S=U=>{j(U),U.status==="available"?h(!0):y(!0)},k=async(U,H)=>{try{await n(U,H)}catch(V){console.error("Erro ao atualizar status da mesa:",V)}},w=(()=>{const U={available:0,occupied:0,reserved:0,cleaning:0,maintenance:0};return N.forEach(H=>{H.status in U&&U[H.status]++}),U})(),M=U=>{switch(U){case"available":return"bg-green-100 border-green-300 text-green-800 hover:bg-green-200";case"occupied":return"bg-red-100 border-red-300 text-red-800 hover:bg-red-200";case"reserved":return"bg-yellow-100 border-yellow-300 text-yellow-800 hover:bg-yellow-200";case"cleaning":return"bg-gray-100 border-gray-300 text-gray-800 hover:bg-gray-200";case"maintenance":return"bg-orange-100 border-orange-300 text-orange-800 hover:bg-orange-200";default:return"bg-gray-100 border-gray-300 text-gray-800 hover:bg-gray-200"}},z=U=>{switch(U){case"available":return"✓";case"occupied":return"👥";case"reserved":return"📅";case"cleaning":return"🧹";case"maintenance":return"🔧";default:return"?"}};return e.jsxs("div",{className:"mesas-container space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Gestão de Mesas"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:[N.length," mesas configuradas"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:C,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(Es,{size:20}),e.jsx("span",{children:"Nova Comanda"})]}),e.jsxs("button",{onClick:()=>i(),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Kw,{size:20}),e.jsx("span",{children:"Atualizar"})]}),e.jsxs("button",{onClick:R,className:"flex items-center space-x-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[e.jsx(Ww,{size:20}),e.jsx("span",{children:"Configurar Layout"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:w.available}),e.jsx("div",{className:"text-sm text-green-700",children:"Disponíveis"})]}),e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:w.occupied}),e.jsx("div",{className:"text-sm text-red-700",children:"Ocupadas"})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:w.reserved}),e.jsx("div",{className:"text-sm text-yellow-700",children:"Reservadas"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-600",children:w.cleaning}),e.jsx("div",{className:"text-sm text-gray-700",children:"Limpeza"})]}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:w.maintenance}),e.jsx("div",{className:"text-sm text-orange-700",children:"Manutenção"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Layout do Salão"}),e.jsx("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:e.jsx("span",{children:"Clique nas mesas para gerenciar"})})]}),s?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2",children:"Carregando mesas..."})]}):e.jsxs("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 lg:grid-cols-10 gap-4 p-4 bg-gray-50 rounded-lg min-h-96",children:[N.map(U=>e.jsxs("div",{onClick:()=>S(U),className:`
                  relative aspect-square rounded-lg border-2 cursor-pointer transition-all duration-200 hover:scale-105 hover:shadow-lg
                  flex flex-col items-center justify-center text-center p-2
                  ${M(U.status)}
                `,children:[e.jsx("div",{className:"font-bold text-sm mb-1",children:U.number}),e.jsx("div",{className:"text-xs opacity-75",children:z(U.status)}),U.currentComanda&&e.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:U.peopleCount||"!"}),e.jsxs("div",{className:"text-xs mt-1 opacity-60",children:[U.capacity,"p"]})]},U.id)),Array.from({length:Math.max(0,40-N.length)}).map((U,H)=>e.jsx("div",{className:"aspect-square rounded-lg border-2 border-dashed border-gray-200 flex items-center justify-center text-gray-400 text-xs",children:"Vazio"},`empty-${H}`))]})]}),e.jsx(w1,{isOpen:u,onClose:()=>{h(!1),j(null)},selectedTable:v,onComandaCreated:()=>{c()}}),e.jsx(AD,{isOpen:f,onClose:()=>p(!1)}),e.jsx(kD,{isOpen:g,onClose:()=>{y(!1),j(null)},mesa:v,onStatusChange:k})]})},OD=({comandas:t,onComandaClick:s,onDismissAlert:n})=>{const i=()=>{const f=new Date;return t.filter(p=>{if(p.status!=="open")return!1;const g=new Date(p.opened_at);return(f.getTime()-g.getTime())/(1e3*60*60)>2})},l=()=>{const f=new Date;return t.filter(p=>{if(p.status!=="open")return!1;const g=new Date(p.opened_at);return(f.getTime()-g.getTime())/(1e3*60*60)>4})},c=f=>{const p=new Date(f),y=new Date().getTime()-p.getTime(),v=Math.floor(y/(1e3*60*60)),j=Math.floor(y%(1e3*60*60)/(1e3*60));return v>0?`${v}h ${j}m`:`${j}m`},u=i(),h=l();return u.length===0?null:e.jsxs("div",{className:"mb-6 space-y-3",children:[h.map(f=>{var p,g;return e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ws,{className:"w-6 h-6 text-red-500"}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-red-800 font-semibold",children:["Comanda Crítica - ",((p=f.table)==null?void 0:p.number)||"Balcão"]}),e.jsxs("p",{className:"text-red-700 text-sm",children:[((g=f.customer)==null?void 0:g.name)||f.customer_name||"Cliente não identificado"," • Aberta há ",c(f.opened_at)," • R$ ",f.total.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>s(f),className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors",children:"Ver Detalhes"}),n&&e.jsx("button",{onClick:()=>n(f.id),className:"p-1 text-red-500 hover:bg-red-100 rounded transition-colors",children:e.jsx(dt,{className:"w-4 h-4"})})]})]})},`critical-${f.id}`)}),u.filter(f=>!h.includes(f)).map(f=>{var p,g;return e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ht,{className:"w-5 h-5 text-yellow-500"}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-yellow-800 font-semibold",children:["Atenção - ",((p=f.table)==null?void 0:p.number)||"Balcão"]}),e.jsxs("p",{className:"text-yellow-700 text-sm",children:[((g=f.customer)==null?void 0:g.name)||f.customer_name||"Cliente não identificado"," • Aberta há ",c(f.opened_at)," • R$ ",f.total.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>s(f),className:"px-3 py-1 bg-yellow-600 text-white text-sm rounded hover:bg-yellow-700 transition-colors",children:"Ver Detalhes"}),n&&e.jsx("button",{onClick:()=>n(f.id),className:"p-1 text-yellow-500 hover:bg-yellow-100 rounded transition-colors",children:e.jsx(dt,{className:"w-4 h-4"})})]})]})},`warning-${f.id}`)}),u.length>3&&e.jsx("div",{className:"bg-gray-50 border border-gray-200 p-3 rounded-lg text-center",children:e.jsxs("p",{className:"text-gray-600 text-sm",children:[u.length," comandas com tempo excessivo •",h.length," críticas"]})})]})},RD=({searchTerm:t,onSearchChange:s,statusFilter:n,onStatusFilterChange:i,employeeFilter:l,onEmployeeFilterChange:c,tableFilter:u,onTableFilterChange:h,timeFilter:f,onTimeFilterChange:p,employees:g,tables:y,onClearFilters:v})=>{var C,R;const j=t||n!=="all"||l||u||f!=="all",N=S=>{switch(S){case"all":return"Todos os Status";case"open":return"Abertas";case"pending_payment":return"Aguardando Pagamento";case"closed":return"Fechadas";case"cancelled":return"Canceladas";default:return S}},_=S=>{switch(S){case"all":return"Todos os Tempos";case"recent":return"Recentes (< 1h)";case"overdue":return"Atrasadas (> 2h)";case"critical":return"Críticas (> 4h)";default:return S}};return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Yw,{className:"w-5 h-5 text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Filtros"})]}),j&&e.jsxs("button",{onClick:v,className:"flex items-center space-x-1 px-3 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx(dt,{className:"w-4 h-4"}),e.jsx("span",{children:"Limpar Filtros"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[e.jsxs("div",{className:"xl:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Buscar"}),e.jsxs("div",{className:"relative",children:[e.jsx(La,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:t,onChange:S=>s(S.target.value),placeholder:"Mesa, cliente ou funcionário...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:n,onChange:S=>i(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Todos os Status"}),e.jsx("option",{value:"open",children:"Abertas"}),e.jsx("option",{value:"pending_payment",children:"Aguardando Pagamento"}),e.jsx("option",{value:"closed",children:"Fechadas"}),e.jsx("option",{value:"cancelled",children:"Canceladas"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Funcionário"}),e.jsxs("select",{value:l,onChange:S=>c(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Todos os Funcionários"}),g.map(S=>e.jsx("option",{value:S.id,children:S.name},S.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mesa"}),e.jsxs("select",{value:u,onChange:S=>h(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Todas as Mesas"}),e.jsx("option",{value:"balcao",children:"Balcão"}),y.map(S=>e.jsxs("option",{value:S.id,children:["Mesa ",S.number]},S.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tempo"}),e.jsxs("select",{value:f,onChange:S=>p(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Todos os Tempos"}),e.jsx("option",{value:"recent",children:"Recentes (< 1h)"}),e.jsx("option",{value:"overdue",children:"Atrasadas (> 2h)"}),e.jsx("option",{value:"critical",children:"Críticas (> 4h)"})]})]})]}),j&&e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[t&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full",children:['Busca: "',t,'"',e.jsx("button",{onClick:()=>s(""),className:"ml-1 p-0.5 hover:bg-blue-200 rounded-full",children:e.jsx(dt,{className:"w-3 h-3"})})]}),n!=="all"&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full",children:["Status: ",N(n),e.jsx("button",{onClick:()=>i("all"),className:"ml-1 p-0.5 hover:bg-green-200 rounded-full",children:e.jsx(dt,{className:"w-3 h-3"})})]}),l&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-purple-100 text-purple-800 text-xs font-medium rounded-full",children:["Funcionário: ",(C=g.find(S=>S.id===l))==null?void 0:C.name,e.jsx("button",{onClick:()=>c(""),className:"ml-1 p-0.5 hover:bg-purple-200 rounded-full",children:e.jsx(dt,{className:"w-3 h-3"})})]}),u&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-orange-100 text-orange-800 text-xs font-medium rounded-full",children:["Mesa: ",u==="balcao"?"Balcão":(R=y.find(S=>S.id===u))==null?void 0:R.number,e.jsx("button",{onClick:()=>h(""),className:"ml-1 p-0.5 hover:bg-orange-200 rounded-full",children:e.jsx(dt,{className:"w-3 h-3"})})]}),f!=="all"&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-red-100 text-red-800 text-xs font-medium rounded-full",children:["Tempo: ",_(f),e.jsx("button",{onClick:()=>p("all"),className:"ml-1 p-0.5 hover:bg-red-200 rounded-full",children:e.jsx(dt,{className:"w-3 h-3"})})]})]})]})};var _1=(t=>(t.ABERTA="aberta",t.PENDENTE_PAGAMENTO="pendente_pagamento",t.FECHADA="fechada",t.CANCELADA="cancelada",t))(_1||{}),Fc=(t=>(t.PENDENTE="pendente",t.PREPARANDO="preparando",t.PRONTO="pronto",t.ENTREGUE="entregue",t.CANCELADO="cancelado",t))(Fc||{});const Sv=10,oi=0,li=30;class xs{static validatePercentage(s){return s>=oi&&s<=li&&!isNaN(s)&&isFinite(s)}static calculateCommission(s,n){if(!this.validatePercentage(n))throw new Error(`Percentual de comissão deve estar entre ${oi}% e ${li}%`);if(s<=0)throw new Error("Valor base deve ser maior que zero");return s*n/100}static calculateTotal(s,n){const i=this.calculateCommission(s,n);return s+i}static calculateWithValidation(s,n){try{if(!this.validatePercentage(n))return{valor_base:s,percentual_comissao:n,valor_comissao:0,valor_total:s,percentual_valido:!1,erro:`Percentual deve estar entre ${oi}% e ${li}%`};if(s<=0)return{valor_base:s,percentual_comissao:n,valor_comissao:0,valor_total:s,percentual_valido:!1,erro:"Valor base deve ser maior que zero"};const l=this.calculateCommission(s,n),c=s+l;return{valor_base:s,percentual_comissao:n,valor_comissao:l,valor_total:c,percentual_valido:!0}}catch(i){return{valor_base:s,percentual_comissao:n,valor_comissao:0,valor_total:s,percentual_valido:!1,erro:i instanceof Error?i.message:"Erro desconhecido"}}}static validateCommissionData(s,n){const i=[];let l=!0,c;s<=0&&(l=!1,c="Valor base deve ser maior que zero"),this.validatePercentage(n)||(l=!1,c=`Percentual deve estar entre ${oi}% e ${li}%`,n<oi?i.push(`Percentual mínimo é ${oi}%`):n>li&&i.push(`Percentual máximo é ${li}%`)),l&&(n===0?i.push("Comissão zerada - confirme se está correto"):n<5?i.push("Percentual baixo - considere o padrão de 10%"):n>20&&i.push("Percentual alto - verifique se está correto"));const u=l?this.calculateCommission(s,n):0;return{valido:l,percentual:n,valor_calculado:u,mensagem_erro:c,sugestoes:i.length>0?i:void 0}}static calculatePercentageFromAmount(s,n){if(s<=0)throw new Error("Valor base deve ser maior que zero");return n/s*100}static formatCurrency(s){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s)}static formatPercentage(s){return`${s.toFixed(1)}%`}}xs.validatePercentage;xs.calculateCommission;xs.calculateTotal;xs.formatCurrency;const N1=({isOpen:t,comanda:s,onClose:n,onConfirm:i,loading:l=!1})=>{var N;const[c,u]=b.useState(Sv),[h,f]=b.useState(""),[p,g]=b.useState(),y=xs.calculateWithValidation(s.total,c);b.useEffect(()=>{t&&(u(Sv),f(""),g(void 0))},[t]);const v=_=>{const C=parseFloat(_)||0;u(C),g(void 0)},j=async()=>{try{if(g(void 0),!y.percentual_valido){g(y.erro);return}const _={comanda_id:s.id,valor_base:s.total,percentual_comissao:c,valor_comissao:y.valor_comissao,valor_total:y.valor_total,metodo_pagamento:"dinheiro",observacoes:h.trim()||void 0};await i(_)}catch(_){g(_ instanceof Error?_.message:"Erro ao processar fechamento")}};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ev,{className:"w-6 h-6 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Fechamento de Conta"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Comanda #",jd(s.id),((N=s.mesa)==null?void 0:N.numero)&&` - Mesa ${s.mesa.numero}`]})]})]}),e.jsx("button",{onClick:n,disabled:l,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(dt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"Itens Consumidos"}),s.itens&&s.itens.length>0&&e.jsxs("span",{className:"text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:[s.itens.length," ",s.itens.length===1?"item":"itens"]})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 max-h-60 overflow-y-auto",children:s.itens&&s.itens.length>0?e.jsxs("div",{className:"space-y-3",children:[s.itens.map((_,C)=>e.jsxs("div",{className:"flex justify-between items-start bg-white rounded-lg p-3 shadow-sm",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs bg-gray-200 text-gray-600 px-2 py-1 rounded-full",children:C+1}),e.jsx("div",{className:"font-medium text-gray-900",children:_.nome_produto})]}),e.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[e.jsxs("span",{className:"font-medium",children:[_.quantidade,"x"]})," ",xs.formatCurrency(_.preco_unitario),_.observacoes&&e.jsxs("div",{className:"text-xs text-gray-400 italic mt-1",children:["Obs: ",_.observacoes]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-medium text-gray-900",children:xs.formatCurrency(_.preco_total)}),e.jsx("div",{className:"text-xs text-gray-500",children:_.quantidade>1&&`${_.quantidade} unidades`})]})]},_.id)),e.jsx("div",{className:"border-t pt-3 mt-3 bg-white rounded-lg p-3",children:e.jsxs("div",{className:"flex justify-between items-center font-semibold text-gray-900",children:[e.jsx("span",{children:"Subtotal dos Itens"}),e.jsx("span",{className:"text-lg",children:xs.formatCurrency(s.total)})]})})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-400 mb-2",children:e.jsx(ev,{className:"w-12 h-12 mx-auto"})}),e.jsx("p",{className:"text-gray-500",children:"Nenhum item encontrado na comanda"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Verifique se a comanda possui itens adicionados"})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Comissão do Garçom"}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Percentual de Comissão (0% - 30%)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"number",min:"0",max:"30",step:"0.1",value:c,onChange:_=>v(_.target.value),disabled:l,className:`flex-1 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${y.percentual_valido?"border-gray-300":"border-red-300 bg-red-50"}`,placeholder:"10.0"}),e.jsx("span",{className:"text-sm text-gray-500",children:"%"}),e.jsx("button",{type:"button",onClick:()=>u(0),disabled:l,className:"px-3 py-2 text-sm bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Zerar"})]}),!y.percentual_valido&&y.erro&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:y.erro}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Você pode ajustar o percentual ou zerá-lo completamente"})]}),y.percentual_valido&&e.jsxs("div",{className:"bg-white rounded-lg p-3 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Valor da comissão:"}),e.jsx("span",{className:"font-medium",children:xs.formatCurrency(y.valor_comissao)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Percentual aplicado:"}),e.jsx("span",{className:"font-medium",children:xs.formatPercentage(y.percentual_comissao)})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observações (opcional)"}),e.jsx("textarea",{value:h,onChange:_=>f(_.target.value),disabled:l,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Adicione observações sobre o fechamento..."})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-blue-600 mt-0.5",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-1",children:"Envio para Caixa"}),e.jsxs("p",{className:"text-sm text-blue-700",children:["Esta comanda será enviada como ",e.jsx("strong",{children:"pendente de pagamento"})," para o caixa. O operador do caixa escolherá o método de pagamento (dinheiro, cartão, PIX, etc.) no momento do processamento."]})]})]})}),p&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-red-600 mt-0.5",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-red-800 mb-1",children:"Erro no Processamento"}),e.jsx("p",{className:"text-red-700 text-sm",children:p})]})]})})]}),e.jsx("div",{className:"border-t bg-gray-50 p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Valor dos itens:"}),e.jsx("span",{children:xs.formatCurrency(s.total)})]}),y.percentual_valido&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:["Comissão (",xs.formatPercentage(c),"):"]}),e.jsx("span",{children:xs.formatCurrency(y.valor_comissao)})]}),e.jsx("div",{className:"border-t pt-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Total a Pagar:"}),e.jsx("span",{className:"text-2xl font-bold text-green-600",children:xs.formatCurrency(y.percentual_valido?y.valor_total:s.total)})]})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:n,disabled:l,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancelar"}),e.jsx("button",{onClick:j,disabled:l||!y.percentual_valido,className:"flex-1 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Enviando para Caixa..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ir,{className:"w-4 h-4"}),"Fechar e Enviar para Caixa"]})})]})]})})]})}):null},S1=(t={})=>{const[s,n]=b.useState(!1),[i,l]=b.useState(null),[c,u]=b.useState(!1),[h,f]=b.useState(null),p=b.useCallback(j=>{l(j),n(!0),f(null)},[]),g=b.useCallback(()=>{n(!1),l(null),f(null),u(!1)},[]),y=b.useCallback(()=>{f(null)},[]),v=b.useCallback(async j=>{try{u(!0),f(null),console.log("📋 Processando fechamento de comanda:",j),await new Promise(_=>setTimeout(_,1e3));const N={success:!0,data:{transaction_id:`TXN-${Date.now()}`,reference_number:`REF-${Date.now()}`,pending_id:`PEND-${Date.now()}`,total_amount:j.valor_total,commission_amount:j.valor_comissao,payment_method:j.metodo_pagamento,receipt:void 0,processed_at:new Date().toISOString(),additional_data:{status:"pending_payment",message:"Comanda enviada para processamento no caixa"}}};return t.onSuccess&&t.onSuccess(N),setTimeout(()=>{g()},1500),N}catch(N){const _=N instanceof Error?N:new Error("Erro interno do sistema");return f(_.message),t.onError&&t.onError(_),{success:!1,error:{type:"system",message:_.message,details:{error:_ instanceof Error?_.stack:String(_)}}}}finally{u(!1)}},[g,t]);return{isOpen:s,selectedComanda:i,loading:c,error:h,openModal:p,closeModal:g,handleConfirm:v,clearError:y}},PD=()=>{var xe,We;const{comandas:t,loading:s,refetch:n}=hl(),{tables:i}=Nd(),[l,c]=b.useState(""),[u,h]=b.useState("all"),[f,p]=b.useState(""),[g,y]=b.useState(""),[v,j]=b.useState("all"),[N,_]=b.useState(!1),[C,R]=b.useState(null),[S,k]=b.useState(new Set),[E,w]=b.useState("list"),[M,z]=b.useState([]),[U,H]=b.useState("all"),[V,Q]=b.useState(""),[X,re]=b.useState(!1),[pe,$]=b.useState(!1),[D,P]=b.useState(""),{isOpen:B,selectedComanda:K,loading:A,error:q,openModal:L,closeModal:W,handleConfirm:oe,clearError:me}=S1({onSuccess:async Z=>{if(console.log("✅ Modal processado com sucesso:",Z),C)try{console.log("💳 Fechando comanda no sistema do bar:",C.id);const{error:Ae}=await ae.from("comandas").update({status:"pending_payment",payment_method:"pending",notes:"Enviado para caixa - aguardando processamento",updated_at:new Date().toISOString()}).eq("id",C.id);if(Ae)throw new Error(`Erro ao atualizar comanda: ${Ae.message}`);console.log("✅ [MODAL NOVO] Comanda atualizada para pendente de pagamento com sucesso"),await n(),await Ee(),await Ue(),w("list"),R(null),z([]),P("Comanda enviada para o caixa com sucesso!"),$(!0),setTimeout(()=>$(!1),3e3)}catch(Ae){console.error("❌ [MODAL NOVO] Erro ao fechar comanda no sistema do bar:",Ae),P("❌ Erro ao processar fechamento da comanda"),$(!0),setTimeout(()=>$(!1),5e3)}},onError:Z=>{console.error("❌ Erro no modal:",Z),P(`Erro: ${Z.message}`),$(!0),setTimeout(()=>$(!1),5e3)}}),{menuItems:fe,loading:ie}=b1(!0),{adicionarItemComanda:de}=m0(),{refreshBarOrders:Ee,refreshKitchenOrders:Ue}=_t();b.useEffect(()=>{if(C&&t.length>0){const Z=t.find(Ae=>Ae.id===C.id);Z&&(console.log("🔄 Atualizando comanda selecionada com novos dados:",Z),R(Z))}},[t,C==null?void 0:C.id]);const je=()=>{_(!0)},Be=Z=>{R(Z),w("details")},De=()=>{w("list"),R(null),z([])},Je=Z=>{console.log("Adicionando item ao carrinho:",Z);const Ae=M.findIndex(Pe=>Pe.menu_item_id===Z.id);if(Ae>=0){const Pe=[...M];Pe[Ae].quantity+=1,z(Pe),console.log("Item já existia, quantidade atualizada:",Pe)}else{const Pe={menu_item_id:Z.id,name:Z.name,price:typeof Z.price=="string"?parseFloat(Z.price):Z.price,quantity:1,notes:""},rt=[...M,Pe];z(rt),console.log("Novo item adicionado ao carrinho:",rt)}},$t=(Z,Ae)=>{Ae<=0?z(M.filter(Pe=>Pe.menu_item_id!==Z)):z(M.map(Pe=>Pe.menu_item_id===Z?{...Pe,quantity:Ae}:Pe))},ke=()=>M.reduce((Z,Ae)=>Z+Ae.price*Ae.quantity,0),$e=async()=>{if(console.log("🔥 Botão clicado! Iniciando adição de itens à comanda"),console.log("Comanda selecionada:",C),console.log("Itens no carrinho:",M),!C){console.error("❌ Nenhuma comanda selecionada");return}if(M.length===0){console.error("❌ Carrinho vazio");return}re(!0);try{console.log("📦 Adicionando",M.length,"itens à comanda",C.id);for(const Ae of M)console.log("➕ Adicionando item:",Ae),await de(C.id,Ae.menu_item_id,Ae.quantity,Ae.notes||""),console.log("✅ Item adicionado com sucesso");console.log("🧹 Limpando carrinho");const Z=M.length;z([]),console.log("🔄 Atualizando dados"),await n(),console.log("📋 Dados atualizados, comanda selecionada será atualizada automaticamente"),console.log("🍺 Forçando atualização dos pedidos do bar e cozinha..."),await Ee(),await Ue(),console.log("✅ Pedidos do bar e cozinha atualizados"),P(`✅ ${Z} ${Z===1?"item adicionado":"itens adicionados"} com sucesso!`),$(!0),setTimeout(()=>{$(!1)},3e3),console.log("🎉 Processo concluído com sucesso!")}catch(Z){console.error("❌ Erro ao adicionar itens à comanda:",Z),P("❌ Erro ao adicionar itens à comanda"),$(!0),setTimeout(()=>{$(!1)},3e3)}finally{re(!1)}},Nt=Z=>{var Ae;return console.log("🔄 Convertendo comanda:",Z),{id:Z.id,mesa_id:Z.table_id||void 0,cliente_id:Z.customer_id||void 0,nome_cliente:Z.customer_name||void 0,funcionario_id:Z.employee_id,status:Z.status==="open"?"aberta":Z.status,total:Z.total||0,quantidade_pessoas:Z.people_count||1,aberta_em:Z.opened_at||Z.created_at||new Date().toISOString(),fechada_em:Z.closed_at||void 0,observacoes:Z.notes||void 0,created_at:Z.created_at||new Date().toISOString(),updated_at:Z.updated_at||Z.created_at||new Date().toISOString(),data_abertura:Z.opened_at||Z.created_at||new Date().toISOString(),mesa:Z.table?{id:Z.table.id,numero:Z.table.number,capacidade:Z.table.capacity}:void 0,itens:((Ae=Z.items)==null?void 0:Ae.map(Pe=>{console.log("🔄 Convertendo item:",Pe);const rt=Pe.menu_item||Pe.menu_items,Yt=Pe.product_name||(rt==null?void 0:rt.name)||"Item sem nome",ns=Pe.unit_price||(rt==null?void 0:rt.price)||0,Js=Pe.quantity||1,jn=Pe.total_price||ns*Js;return{id:Pe.id,comanda_id:Z.id,produto_id:Pe.menu_item_id||"",nome_produto:Yt,quantidade:Js,preco_unitario:ns,preco_total:jn,status:Pe.status,adicionado_em:Pe.created_at||new Date().toISOString(),entregue_em:Pe.delivered_at||void 0,created_at:Pe.created_at||new Date().toISOString(),observacoes:Pe.notes||void 0}}))||[]}},ds=Z=>{k(Ae=>new Set([...Ae,Z]))},I=b.useMemo(()=>t.filter(Z=>{var Js,jn,Mi,or,Ba,ml;const Ae=!l||((Js=Z.customer_name)==null?void 0:Js.toLowerCase().includes(l.toLowerCase()))||((Mi=(jn=Z.table)==null?void 0:jn.number)==null?void 0:Mi.toString().includes(l))||Z.id.toLowerCase().includes(l.toLowerCase()),Pe=u==="all"||Z.status===u,rt=!f||((or=Z.employee_name)==null?void 0:or.toLowerCase().includes(f.toLowerCase())),Yt=!g||((ml=(Ba=Z.table)==null?void 0:Ba.number)==null?void 0:ml.toString().includes(g)),ns=(()=>{if(v==="all")return!0;const fl=new Date(Z.opened_at),wn=(new Date().getTime()-fl.getTime())/(1e3*60*60);switch(v){case"recent":if(wn>=1)return!1;break;case"overdue":if(wn<=2)return!1;break;case"critical":if(wn<=4)return!1;break}return!0})();return Ae&&Pe&&rt&&Yt&&ns}),[t,l,u,f,g,v]),ee=I.filter(Z=>Z.status==="open"),le=I.filter(Z=>Z.status==="pending_payment"),be=I.filter(Z=>{if(Z.status!=="open")return!1;const Ae=new Date(Z.opened_at);return(new Date().getTime()-Ae.getTime())/(1e3*60*60)>2}),ye=be.filter(Z=>!S.has(Z.id)),ge=Z=>new Date(Z).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}),we=Z=>{switch(Z){case"open":return"Aberta";case"pending_payment":return"Aguardando Pagamento";case"closed":return"Fechada";default:return Z}},Re=[...new Set(fe.map(Z=>Z.category))],qe=fe.filter(Z=>{const Ae=U==="all"||Z.category===U,Pe=Z.name.toLowerCase().includes(V.toLowerCase());return Ae&&Pe&&Z.available});if(console.log("Estado atual do carrinho:",M),console.log("Carrinho tem itens?",M.length>0),console.log("🔍 Debug botão Fechar Conta:",{selectedComanda:!!C,status:C==null?void 0:C.status,shouldShow:(C==null?void 0:C.status)==="open"}),E==="details"&&C)return e.jsxs("div",{className:"comanda-details-container h-full flex flex-col bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b bg-white flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:De,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx(t0,{size:20}),e.jsx("span",{children:"Voltar para Comandas"})]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:[(xe=C.table)!=null&&xe.number?`Mesa ${C.table.number}`:"Balcão"," - ",C.customer_name||"Cliente"]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Aberta em ",ge(C.opened_at)]}),e.jsx("div",{className:"bg-green-100 px-4 py-2 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-green-800",children:"Total da Comanda:"}),e.jsxs("span",{className:"text-xl font-bold text-green-900",children:["R$ ",((We=C.total)==null?void 0:We.toFixed(2))||"0,00"]})]})})]})]})]}),e.jsx("div",{className:"flex flex-col space-y-2",children:e.jsxs("button",{onClick:()=>{if(console.log("🔥 Botão Fechar Conta clicado!"),console.log("📋 Comanda selecionada:",C),console.log("📋 Itens da comanda:",C==null?void 0:C.items),C){const Z=Nt(C);console.log("🔄 Comanda convertida:",Z),console.log("🔄 Itens convertidos:",Z.itens),console.log("🚀 Abrindo modal..."),L(Z)}else console.error("❌ Nenhuma comanda selecionada")},className:"bg-red-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-red-700 transition-colors flex items-center space-x-2",children:[e.jsx(ir,{size:20}),e.jsx("span",{children:"Fechar Conta"})]})})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden min-h-0",children:[e.jsxs("div",{className:"flex-1 flex flex-col p-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[e.jsx("div",{className:"flex-1 relative",children:e.jsx("input",{type:"text",placeholder:"Buscar itens...",value:V,onChange:Z=>Q(Z.target.value),className:"w-full pl-4 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),e.jsxs("select",{value:U,onChange:Z=>H(Z.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Todas as Categorias"}),Re.map(Z=>e.jsx("option",{value:Z,children:Z},Z))]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:ie?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):qe.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500 mb-2",children:"Nenhum item encontrado"})}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:qe.map(Z=>e.jsxs("div",{onClick:()=>Je(Z),className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-all duration-200 group cursor-pointer hover:border-blue-300 hover:bg-blue-50",children:[e.jsxs("div",{className:"aspect-square bg-gray-100 rounded-lg mb-3 flex items-center justify-center group-hover:bg-blue-100 transition-colors",children:[Z.image_url?e.jsx("img",{src:Z.image_url,alt:Z.name,className:"max-w-full max-h-full object-contain rounded-lg",onError:Ae=>{Ae.currentTarget.style.display="none",Ae.currentTarget.nextElementSibling.style.display="block"}}):null,e.jsx("div",{className:"text-gray-400 text-2xl group-hover:text-blue-500 transition-colors",style:{display:Z.image_url?"none":"block"},children:"🍺"})]}),e.jsx("h3",{className:"font-medium text-gray-900 mb-1 line-clamp-2 group-hover:text-blue-900",children:Z.name}),e.jsx("p",{className:"text-sm text-gray-500 mb-2 line-clamp-2 group-hover:text-blue-700",children:Z.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-lg font-bold text-green-600 group-hover:text-green-700",children:["R$ ",(typeof Z.price=="string"?parseFloat(Z.price):Z.price).toFixed(2)]}),e.jsx("div",{className:"bg-blue-600 text-white p-2 rounded-lg group-hover:bg-blue-700 transition-colors",children:e.jsx(Es,{size:16})})]})]},Z.id))})})]}),e.jsxs("div",{className:"w-96 bg-gray-50 border-l border-gray-200 flex flex-col",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 flex-shrink-0",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pedidos da Comanda"})})}),(C==null?void 0:C.items)&&C.items.length>0&&e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("div",{className:"p-4 bg-blue-50",children:[e.jsxs("h4",{className:"text-sm font-medium text-blue-900 mb-3",children:["Itens já pedidos (",C.items.length,")",e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(Debug: ",new Date().toLocaleTimeString(),")"]})]}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:C.items.map(Z=>{var Ae,Pe;return console.log("🔍 Debug item da comanda:",Z),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium text-gray-900 text-sm",children:((Ae=Z.menu_item)==null?void 0:Ae.name)||((Pe=Z.menu_items)==null?void 0:Pe.name)||`Item ${Z.menu_item_id}`}),e.jsxs("p",{className:"text-xs text-gray-600",children:["R$ ",Z.price.toFixed(2)," cada"]})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${Z.status==="pending"?"bg-yellow-100 text-yellow-800":Z.status==="preparing"?"bg-blue-100 text-blue-800":Z.status==="ready"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:Z.status==="pending"?"Pendente":Z.status==="preparing"?"Preparando":Z.status==="ready"?"Pronto":Z.status==="delivered"?"Entregue":Z.status})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["Qtd: ",Z.quantity]}),e.jsxs("span",{className:"font-medium text-green-600 text-sm",children:["R$ ",(Z.price*Z.quantity).toFixed(2)]})]}),Z.notes&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Obs: ",Z.notes]})]},Z.id)})})]})}),e.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900",children:["Novos Itens (",M.length,")"]}),M.length>0&&e.jsx("button",{onClick:()=>z([]),className:"text-xs text-red-600 hover:text-red-800",children:"Limpar"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 min-h-0",children:M.length===0?e.jsxs("div",{className:"text-center text-gray-500 py-4 h-full flex flex-col items-center justify-center",children:[e.jsx(el,{className:"h-8 w-8 mx-auto mb-2 text-gray-300"}),e.jsx("p",{className:"text-sm",children:"Nenhum item novo selecionado"})]}):e.jsxs("div",{className:"space-y-4",children:[M.map(Z=>e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:Z.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["R$ ",Z.price.toFixed(2)," cada"]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>$t(Z.menu_item_id,Z.quantity-1),className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center hover:bg-gray-300 transition-colors",children:e.jsx(ji,{size:14})}),e.jsx("span",{className:"w-8 text-center font-medium",children:Z.quantity}),e.jsx("button",{onClick:()=>$t(Z.menu_item_id,Z.quantity+1),className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center hover:bg-gray-300 transition-colors",children:e.jsx(Es,{size:14})})]}),e.jsxs("span",{className:"font-bold text-green-600",children:["R$ ",(Z.price*Z.quantity).toFixed(2)]})]})]},Z.menu_item_id)),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-4 rounded-lg border border-green-200 mb-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-green-800",children:"Total dos Novos Itens:"}),e.jsxs("span",{className:"text-3xl font-bold text-green-900",children:["R$ ",ke().toFixed(2)]})]})}),e.jsx("button",{onClick:$e,disabled:X,className:`w-full py-3 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2 ${X?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white"}`,children:X?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Adicionando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Es,{size:20}),e.jsx("span",{children:"Adicionar à Comanda"})]})}),pe&&e.jsx("div",{className:`mt-3 p-3 rounded-lg text-sm font-medium text-center transition-all duration-300 ${D.includes("❌")?"bg-red-100 text-red-800 border border-red-200":"bg-green-100 text-green-800 border border-green-200"}`,children:D})]})]})})]})]}),(console.log("🔍 Debug Modal:",{showCloseModal:B,closeModalComanda:!!K,isClosingComanda:A}),K&&e.jsx(N1,{isOpen:B,comanda:K,onClose:W,onConfirm:oe,loading:A})),q&&e.jsx("div",{className:"fixed top-4 right-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg shadow-lg z-50",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("span",{className:"font-medium",children:["Erro: ",q]}),e.jsx("button",{onClick:me,className:"text-red-600 hover:text-red-800",children:"✕"})]})})]});return e.jsxs("div",{className:"comandas-container",children:[e.jsx(OD,{comandas:ye,onComandaClick:Be,onDismissAlert:ds}),e.jsx(RD,{searchTerm:l,onSearchChange:c,statusFilter:u,onStatusFilterChange:h,employeeFilter:f,onEmployeeFilterChange:p,tableFilter:g,onTableFilterChange:y,timeFilter:v,onTimeFilterChange:j,employees:[],tables:i||[],onClearFilters:()=>{c(""),h("all"),p(""),y(""),j("all")}}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:ee.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Abertas"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:le.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Aguardando Pagamento"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:be.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Com Atraso"})]})]}),e.jsx("button",{onClick:je,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"+ Nova Comanda"})]}),e.jsx("div",{className:"bg-white rounded-lg border",children:s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mesa/Cliente"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Funcionário"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Abertura"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:I.map(Z=>{var rt,Yt;const Ae=tt(Z.opened_at),Pe=new Date().getTime()-new Date(Z.opened_at).getTime()>2*60*60*1e3;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[((rt=Z.table)==null?void 0:rt.number)||"Balcão",Z.customer_name&&e.jsx("div",{className:"text-xs text-gray-500",children:Z.customer_name})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Z.status==="open"?"bg-green-100 text-green-800":Z.status==="pending_payment"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:we(Z.status)}),Pe&&Z.status==="open"&&e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800",children:"⚠️ Atrasada"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Z.employee_name||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{children:[ge(Z.opened_at),e.jsxs("div",{className:`text-xs ${Pe?"text-red-600 font-medium":"text-gray-400"}`,children:[Ae," decorrido"]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600",children:["R$ ",((Yt=Z.total)==null?void 0:Yt.toFixed(2))||"0,00"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("button",{onClick:()=>Be(Z),className:"inline-flex items-center px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition-colors",children:[e.jsx(ki,{className:"w-3 h-3 mr-1"}),"Ver Detalhes"]})})]},Z.id)})})]})})}),e.jsx(w1,{isOpen:N,onClose:()=>_(!1),onComandaCreated:()=>{n()}}),console.log("🔍 Debug modal:",{showCloseModal:B,selectedComanda:!!C,viewMode:E}),pe&&E==="list"&&e.jsx("div",{className:"fixed top-4 right-4 z-50",children:e.jsx("div",{className:`p-4 rounded-lg shadow-lg ${D.includes("❌")?"bg-red-100 text-red-800 border border-red-200":"bg-green-100 text-green-800 border border-green-200"}`,children:D})})]});function tt(Z){const Ae=new Date(Z),rt=new Date().getTime()-Ae.getTime(),Yt=Math.floor(rt/(1e3*60*60)),ns=Math.floor(rt%(1e3*60*60)/(1e3*60));return Yt>0?`${Yt}h ${ns}min`:`${ns}min`}},zD=()=>{const{user:t}=as(),[s,n]=b.useState([]),[i,l]=b.useState({orderQueue:[],alerts:[],loading:!0,error:null}),c=b.useCallback($=>{l(D=>({...D,...$}))},[]),u=b.useCallback(($,D)=>{console.error(`Erro em ${D}:`,$),c({error:`Erro em ${D}: ${$.message||"Erro desconhecido"}`,loading:!1})},[c]),h=b.useCallback(async()=>{if(t)try{c({loading:!0,error:null});const{data:$,error:D}=await ae.rpc("get_order_queue_items");if(D)throw D;const P=($||[]).map(K=>{const A=j([K]);return{...K,priority:{level:A.priorityLevel,complexity:N(A.finalEstimate),estimatedTime:A.finalEstimate,isManuallyPrioritized:K.is_priority||!1,createdAt:new Date(K.added_at),timerStatus:f(new Date(K.added_at),A.finalEstimate),alertsEnabled:!0}}}),B=E(P);c({orderQueue:B,loading:!1})}catch($){u($,"carregamento da fila de pedidos")}},[t,c,u]),f=($,D)=>{const B=(new Date().getTime()-$.getTime())/(1e3*60),K=D*.8,A=D*1.2;return B>=A?"overdue":B>=K?"warning":"normal"},p={bebidas:{baseTime:2,complexity:"simple"},drinks:{baseTime:3,complexity:"simple"},petiscos:{baseTime:8,complexity:"medium"},pratos:{baseTime:15,complexity:"complex"},sobremesas:{baseTime:5,complexity:"simple"},cafes:{baseTime:3,complexity:"simple"}},g={simple:1,medium:1.3,complex:1.8},y=b.useCallback($=>{let D=0,P="simple",B=0;$.forEach(L=>{var W,oe;if(L.menu_items){const me=L.menu_items.category.toLowerCase(),fe=L.menu_items.preparation_time||0,ie=fe>0?fe:((W=p[me])==null?void 0:W.baseTime)||8;D+=ie*L.quantity;const de=((oe=p[me])==null?void 0:oe.complexity)||"medium";v(de)>v(P)&&(P=de),me==="pratos"&&(B+=2),me==="petiscos"&&(B+=1)}});const K=g[P],A=Math.ceil((D+B)*K);let q="low";return A>=20?q="high":A>=12?q="medium":q="low",{baseTime:D,complexityMultiplier:K,categoryBonus:B,finalEstimate:A,priorityLevel:q}},[]),v=$=>{switch($){case"simple":return 1;case"medium":return 2;case"complex":return 3;default:return 1}},j=b.useCallback(($,D=!1,P)=>{const B=y($);return{level:D&&P?P:B.priorityLevel,complexity:N(B.finalEstimate),estimatedTime:B.finalEstimate,isManuallyPrioritized:D,createdAt:new Date,timerStatus:"normal",alertsEnabled:!0}},[y]),N=$=>$>=15?"complex":$>=8?"medium":"simple",_=b.useCallback(($,D)=>{const P={id:$,startTime:new Date,estimatedTime:D,status:"normal",alertsSent:[]};n(B=>[...B.filter(K=>K.id!==$),P])},[]),C=b.useCallback($=>{n(D=>D.filter(P=>P.id!==$))},[]),R=b.useCallback(($,D,P)=>{n(K=>K.map(A=>A.id===$?{...A,status:D==="urgent"?"warning":A.status}:A));const B={id:`priority-${$}-${Date.now()}`,orderId:$,type:"warning",message:`Pedido marcado como ${S(D)}${P?`: ${P}`:""}`,timestamp:new Date,acknowledged:!1};setAlerts(K=>[B,...K])},[]),S=$=>{switch($){case"low":return"Baixa Prioridade";case"medium":return"Prioridade Média";case"high":return"Alta Prioridade";case"urgent":return"Urgente";default:return $}},k=$=>{switch($){case"low":return"bg-green-100 text-green-800 border-green-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"urgent":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},E=b.useCallback($=>{const D={urgent:4,high:3,medium:2,low:1};return $.sort((P,B)=>{var me,fe,ie,de,Ee,Ue,je,Be;if((me=P.priority)!=null&&me.isManuallyPrioritized&&!((fe=B.priority)!=null&&fe.isManuallyPrioritized))return-1;if(!((ie=P.priority)!=null&&ie.isManuallyPrioritized)&&((de=B.priority)!=null&&de.isManuallyPrioritized))return 1;const K=((Ee=P.priority)==null?void 0:Ee.level)||"low",A=((Ue=B.priority)==null?void 0:Ue.level)||"low",q=D[K],L=D[A];if(q!==L)return L-q;const W=new Date(((je=P.priority)==null?void 0:je.createdAt)||P.added_at||0).getTime(),oe=new Date(((Be=B.priority)==null?void 0:Be.createdAt)||B.added_at||0).getTime();return W-oe})},[]),w=b.useCallback(async($,D)=>{try{const{error:P}=await ae.from("comanda_items").update({is_priority:D,updated_at:new Date().toISOString()}).eq("id",$);if(P)throw P;c({orderQueue:i.orderQueue.map(B=>B.id===$&&B.priority?{...B,priority:{...B.priority,isManuallyPrioritized:D,level:D?"urgent":B.priority.level}}:B)}),await h()}catch(P){throw u(P,"marcação de prioridade"),P}},[i.orderQueue,c,u,h]),M=b.useCallback(async($,D)=>{try{const P={status:D,updated_at:new Date().toISOString()};D==="preparing"?P.started_at=new Date().toISOString():D==="ready"?P.prepared_at=new Date().toISOString():D==="delivered"&&(P.delivered_at=new Date().toISOString());const{error:B}=await ae.from("comanda_items").update(P).eq("id",$);if(B)throw B;await h()}catch(P){throw u(P,"atualização de status"),P}},[u,h]);b.useCallback(($,D,P)=>{const B={id:`alert-${$}-${Date.now()}`,orderId:$,type:D,message:P,timestamp:new Date,acknowledged:!1};c({alerts:[B,...i.alerts]})},[i.alerts,c]);const z=b.useCallback($=>{c({alerts:i.alerts.map(D=>D.id===$?{...D,acknowledged:!0}:D)})},[i.alerts,c]),U=b.useCallback(()=>{c({alerts:[]})},[c]),H=b.useCallback($=>{if($.priority)return $.priority;const D=j([$]);return{level:D.priorityLevel,complexity:N(D.finalEstimate),estimatedTime:D.finalEstimate,isManuallyPrioritized:!1,createdAt:new Date($.added_at),timerStatus:f(new Date($.added_at),D.finalEstimate),alertsEnabled:!0}},[]),V=b.useCallback($=>{const D=H($);return f(D.createdAt,D.estimatedTime)},[H]),Q=b.useCallback($=>{const D=H($),P=(new Date().getTime()-D.createdAt.getTime())/(1e3*60);return Math.max(0,D.estimatedTime-P)},[H]),X=b.useCallback($=>{const D=Q($);if(D<1)return"< 1min";if(D<60)return`${Math.ceil(D)}min`;const P=Math.floor(D/60),B=Math.ceil(D%60);return B===0?`${P}h`:`${P}h ${B}min`},[Q]),re=b.useCallback(()=>{const $={urgent:0,high:0,medium:0,low:0,overdue:0,warning:0};return i.orderQueue.forEach(D=>{const P=H(D);$[P.level]++,P.timerStatus==="overdue"?$.overdue++:P.timerStatus==="warning"&&$.warning++}),$},[i.orderQueue,H]),pe=b.useCallback(async()=>{await h()},[h]);return b.useEffect(()=>{if(!t)return;const $=ae.channel("order-priority-changes").on("postgres_changes",{event:"*",schema:"public",table:"comanda_items"},D=>{console.log("Mudança em itens de comanda:",D),h()}).subscribe();return()=>{ae.removeChannel($)}},[t,h]),b.useEffect(()=>{t&&h()},[t,h]),b.useEffect(()=>{const $=setInterval(()=>{if(i.orderQueue.length>0){const D=i.orderQueue.map(P=>{if(P.priority){const B=f(P.priority.createdAt,P.priority.estimatedTime);return{...P,priority:{...P.priority,timerStatus:B}}}return P});c({orderQueue:D})}},6e4);return()=>clearInterval($)},[i.orderQueue,c]),{...i,markItemAsPriority:w,updateItemStatus:M,dismissAlert:z,clearAllAlerts:U,getItemPriority:H,getTimerStatus:V,getRemainingTime:Q,formatRemainingTime:X,getPriorityStats:re,refreshQueue:pe,getPriorityLabel:S,getPriorityColor:k,sortOrdersByPriority:E,calculateOrderPriority:j,calculateAutoPriority:y,startOrderTimer:_,stopOrderTimer:C,markOrderAsPriority:R,orderTimers:s,allAlerts:i.alerts}},LD=({onUpdateItemStatus:t})=>{const{orderQueue:s,loading:n,markItemAsPriority:i,updateItemStatus:l,getItemPriority:c,getTimerStatus:u,formatRemainingTime:h,alerts:f,getPriorityLabel:p,getPriorityColor:g}=zD(),[y,v]=b.useState(!0),[j,N]=b.useState(null),_=s,R=(()=>{const H=new Map;return _.forEach(V=>{var X,re;const Q=((re=(X=V.comandas)==null?void 0:X.bar_tables)==null?void 0:re.number)||"Balcão";H.has(Q)||H.set(Q,[]),H.get(Q).push(V)}),H})(),S=H=>(R.get(H)||[]).length>1,k=H=>H.id.slice(-4).toUpperCase(),E=async(H,V)=>{try{t?await t(H,V):await l(H,V)}catch(Q){console.error("Erro ao atualizar status:",Q)}},w=async(H,V)=>{try{await i(H,V),N(null)}catch(Q){console.error("Erro ao marcar prioridade:",Q)}},M=H=>{switch(H){case"pending":return e.jsx(Ht,{className:"h-4 w-4"});case"preparing":return e.jsx(sv,{className:"h-4 w-4"});case"ready":return e.jsx(td,{className:"h-4 w-4"});default:return e.jsx(Ht,{className:"h-4 w-4"})}},z=H=>{switch(H){case"pending":return"text-yellow-600 bg-yellow-100";case"preparing":return"text-blue-600 bg-blue-100";case"ready":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},U=H=>{switch(H){case"pending":return"Pendente";case"preparing":return"Preparando";case"ready":return"Pronto";default:return H}};return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(nr,{children:y&&f.length>0&&e.jsxs(Ne.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(yA,{className:"h-5 w-5 text-red-600"}),e.jsxs("h3",{className:"text-lg font-semibold text-red-800",children:["Alertas (",f.length,")"]})]}),e.jsx("button",{onClick:()=>v(!1),className:"text-red-600 hover:text-red-800",title:"Fechar alertas","aria-label":"Fechar alertas",children:e.jsx(dt,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"space-y-2",children:f.slice(0,3).map(H=>e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded border",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-red-800",children:H.message}),e.jsx("p",{className:"text-xs text-red-600",children:Zt(H.timestamp,"HH:mm",{locale:cs})})]}),e.jsx("button",{onClick:()=>acknowledgeAlert(H.id),className:"text-red-600 hover:text-red-800 ml-2",title:"Reconhecer alerta","aria-label":"Reconhecer alerta",children:e.jsx(td,{className:"h-4 w-4"})})]},H.id))})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Fila de Pedidos"}),e.jsxs("p",{className:"text-gray-600",children:[_.length," itens na fila, ordenados por prioridade"]}),Array.from(R.entries()).filter(([H,V])=>V.length>1).length>0&&e.jsxs("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs font-medium mt-1 inline-block",children:[Array.from(R.entries()).filter(([H,V])=>V.length>1).length," mesa(s) com múltiplos pedidos"]})]}),f.length>0&&!y&&e.jsxs("button",{onClick:()=>v(!0),className:"flex items-center space-x-2 bg-red-100 text-red-800 px-3 py-2 rounded-lg hover:bg-red-200 transition-colors",title:"Mostrar alertas","aria-label":"Mostrar alertas",children:[e.jsx(s0,{className:"h-4 w-4"}),e.jsxs("span",{children:[f.length," alertas"]})]})]}),Array.from(R.entries()).filter(([H,V])=>V.length>1).length>0&&e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-orange-800 mb-2",children:"⚠️ Mesas com Múltiplos Pedidos:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from(R.entries()).filter(([H,V])=>V.length>1).map(([H,V])=>e.jsxs("span",{className:"bg-orange-200 text-orange-800 px-3 py-1 rounded-full text-sm font-medium",children:["Mesa ",H,": ",V.length," itens"]},H))})]}),e.jsx("div",{className:"space-y-4",children:_.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ht,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Nenhum pedido na fila"})]}):_.map((H,V)=>{var re,pe,$,D,P,B;const Q=u(H),X=c(H);return e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:V*.1},className:`bg-white rounded-lg shadow-md p-6 border-l-4 ${X!=null&&X.isManuallyPrioritized?"border-red-500":(X==null?void 0:X.level)==="high"?"border-orange-500":(X==null?void 0:X.level)==="medium"?"border-yellow-500":"border-green-500"} ${S(((pe=(re=H.comandas)==null?void 0:re.bar_tables)==null?void 0:pe.number)||"Balcão")?"ring-2 ring-orange-300 ring-offset-2":""}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"bg-gray-100 text-gray-800 px-2 py-1 rounded text-sm font-medium",children:["#",V+1]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:(($=H.menu_items)==null?void 0:$.name)||"Item sem nome"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["x",H.quantity]}),e.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium",children:["#",k(H)]})]}),(X==null?void 0:X.isManuallyPrioritized)&&e.jsx(tf,{className:"h-5 w-5 text-red-500"})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mb-3",children:[((P=(D=H.comandas)==null?void 0:D.bar_tables)==null?void 0:P.number)&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{children:["Mesa ",H.comandas.bar_tables.number]}),e.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium",children:["#",k(H)]}),S(H.comandas.bar_tables.number)&&e.jsxs("span",{className:"bg-orange-500 text-white px-2 py-1 rounded-full text-xs font-bold",children:[(R.get(H.comandas.bar_tables.number)||[]).length," itens"]})]}),((B=H.comandas)==null?void 0:B.customer_name)&&e.jsxs("span",{children:["Cliente: ",H.comandas.customer_name]}),e.jsxs("span",{children:["Pedido às ",Zt(new Date(H.added_at||""),"HH:mm",{locale:cs})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium border ${g((X==null?void 0:X.level)||"low")}`,children:p((X==null?void 0:X.level)||"low")}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Tempo estimado: ",(X==null?void 0:X.estimatedTime)||0,"min"]}),e.jsxs("div",{className:`flex items-center space-x-1 px-2 py-1 rounded text-sm ${Q==="overdue"?"bg-red-100 text-red-800":Q==="warning"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:[e.jsx(sv,{className:"h-3 w-3"}),e.jsx("span",{children:h(H)}),Q==="overdue"&&e.jsx(Ws,{className:"h-3 w-3"})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("span",{className:`flex items-center space-x-1 px-3 py-1 rounded-full text-sm font-medium ${z(H.status||"pending")}`,children:[M(H.status||"pending"),e.jsx("span",{children:U(H.status||"pending")})]})})]}),e.jsxs("div",{className:"flex flex-col space-y-2 ml-4",children:[e.jsxs("button",{onClick:()=>N(H.id),className:"flex items-center space-x-1 px-3 py-1 bg-orange-100 text-orange-800 rounded hover:bg-orange-200 transition-colors",title:"Marcar como prioritário","aria-label":"Marcar como prioritário",children:[e.jsx(fA,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs",children:"Priorizar"})]}),H.status==="pending"&&e.jsx("button",{onClick:()=>E(H.id,"preparing"),className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 transition-colors",children:"Iniciar"}),H.status==="preparing"&&e.jsx("button",{onClick:()=>E(H.id,"ready"),className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700 transition-colors",children:"Pronto"})]})]})},H.id)})}),j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-96",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Definir Prioridade"}),e.jsx("div",{className:"space-y-3",children:["urgent","high","medium","low"].map(H=>e.jsxs("button",{onClick:()=>w(j||"",!0),className:`w-full p-3 rounded border-2 text-left transition-colors ${g(H)} hover:opacity-80`,children:[e.jsx("div",{className:"font-medium",children:p(H)}),e.jsxs("div",{className:"text-sm opacity-75",children:[H==="urgent"&&"Para pedidos que precisam ser feitos imediatamente",H==="high"&&"Para pedidos importantes com prazo apertado",H==="medium"&&"Para pedidos com prioridade normal",H==="low"&&"Para pedidos que podem aguardar"]})]},H))}),e.jsx("div",{className:"mt-4 flex space-x-3",children:e.jsx("button",{onClick:()=>N(null),className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded hover:bg-gray-400 transition-colors",children:"Cancelar"})})]})})]})},BD=({orders:t,menuItems:s})=>{const{updateOrderStatus:n}=_t(),[i,l]=b.useState(new Set),u=(()=>{const _=new Map;return t.forEach(C=>{const R=C.tableNumber||"Balcão";_.has(R)||_.set(R,[]),_.get(R).push(C)}),_})(),h=_=>_.items.reduce((C,R)=>{const S=s.find(E=>E.id===R.menuItemId)||R.menuItem,k=(S==null?void 0:S.preparation_time)||(S==null?void 0:S.preparationTime)||0;return C+k},0),f=_=>{const C=(new Date().getTime()-_.createdAt.getTime())/6e4;return C>20?"high":C>10?"medium":"low"},p=_=>{switch(_){case"high":return"border-red-400 bg-red-50";case"medium":return"border-yellow-400 bg-yellow-50";case"low":return"border-green-400 bg-green-50";default:return"border-gray-200 bg-white"}},g=_=>_.id.slice(-4).toUpperCase(),y=_=>_.id.startsWith("balcao-"),v=_=>_.id.startsWith("comanda-"),j=async(_,C)=>{l(R=>new Set([...R,_]));try{await n(_,C),console.log(`✅ Status do pedido ${_} atualizado para ${C}`)}catch(R){console.error("Erro ao atualizar status:",R)}finally{setTimeout(()=>{l(R=>{const S=new Set(R);return S.delete(_),S})},1e3)}},N=_=>(u.get(_)||[]).length>1;return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Pedidos do Bar"}),e.jsx("div",{className:"text-sm text-gray-600",children:Array.from(u.entries()).filter(([_,C])=>C.length>1).length>0&&e.jsxs("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs font-medium",children:[Array.from(u.entries()).filter(([_,C])=>C.length>1).length," mesa(s) com múltiplos pedidos"]})})]}),Array.from(u.entries()).filter(([_,C])=>C.length>1).length>0&&e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"text-sm font-semibold text-orange-800 mb-2",children:"⚠️ Mesas com Múltiplos Pedidos:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from(u.entries()).filter(([_,C])=>C.length>1).map(([_,C])=>e.jsxs("span",{className:"bg-orange-200 text-orange-800 px-3 py-1 rounded-full text-sm font-medium",children:["Mesa ",_,": ",C.length," pedidos"]},_))})]}),t.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Nenhum pedido pendente no bar"})}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:t.map(_=>{const C=f(_),R=h(_),S=_.items,k=N(_.tableNumber||"Balcão");return e.jsxs(Ne.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:`border-2 rounded-lg p-4 ${p(C)} ${k?"ring-2 ring-orange-300 ring-offset-2":""} ${y(_)?"border-green-400 bg-green-50 shadow-lg":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(cl,{size:16,className:"text-gray-500"}),e.jsx("span",{className:"font-bold text-lg",children:u0(_.tableNumber)}),e.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium",children:["#",g(_)]}),y(_)&&e.jsx("span",{className:"bg-green-600 text-white px-2 py-1 rounded-full text-xs font-bold animate-pulse",children:"✓ PAGO"}),v(_)&&e.jsx("span",{className:"bg-yellow-500 text-white px-2 py-1 rounded-full text-xs font-medium",children:"AGUARDA PAGTO"}),N(_.tableNumber||"Balcão")&&e.jsxs("span",{className:"bg-orange-500 text-white px-2 py-1 rounded-full text-xs font-bold",children:[(u.get(_.tableNumber||"Balcão")||[]).length," pedidos"]})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[e.jsx(Ht,{size:14}),e.jsx("span",{children:Zt(_.createdAt,"HH:mm",{locale:cs})})]})]}),e.jsx("div",{className:"space-y-2 mb-4",children:S.map(E=>{const w=s.find(M=>M.id===E.menuItemId)||E.menuItem;return e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"font-medium",children:[E.quantity,"x ",(w==null?void 0:w.name)||"Item não encontrado"]}),e.jsxs("span",{className:"text-sm text-gray-600",children:[(w==null?void 0:w.preparation_time)||(w==null?void 0:w.preparationTime)||0,"min"]})]},E.id)})}),_.notes&&e.jsx("div",{className:"mb-4 p-2 bg-yellow-100 rounded border",children:e.jsx("p",{className:"text-sm text-yellow-800",children:_.notes})}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["Tempo estimado: ",R,"min"]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${C==="high"?"bg-red-200 text-red-800":C==="medium"?"bg-yellow-200 text-yellow-800":"bg-green-200 text-green-800"}`,children:C==="high"?"Urgente":C==="medium"?"Médio":"Normal"})]}),e.jsxs("div",{className:"space-y-2",children:[_.status==="pending"&&e.jsx("button",{onClick:()=>j(_.id,"preparing"),disabled:i.has(_.id),className:`w-full py-2 rounded-lg font-medium transition-all duration-300 ${i.has(_.id)?"bg-blue-300 text-blue-700 cursor-not-allowed animate-pulse scale-95":"bg-blue-600 text-white hover:bg-blue-700 hover:shadow-lg transform hover:scale-105 active:scale-95"}`,children:i.has(_.id)?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-blue-700 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Iniciando..."})]}):"Iniciar Preparo"}),_.status==="preparing"&&e.jsx("button",{onClick:()=>j(_.id,"ready"),disabled:i.has(_.id),className:`w-full py-2 rounded-lg font-medium transition-all duration-300 ${i.has(_.id)?"bg-green-300 text-green-700 cursor-not-allowed animate-pulse scale-95":"bg-green-600 text-white hover:bg-green-700 hover:shadow-lg transform hover:scale-105 active:scale-95"}`,children:i.has(_.id)?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-green-700 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Finalizando..."})]}):"Marcar como Pronto"}),_.status==="ready"&&e.jsx("div",{className:"w-full py-2 rounded-lg font-medium bg-green-100 text-green-800 border-2 border-green-300 text-center animate-pulse",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"w-5 h-5 bg-green-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"✓"})}),e.jsx("span",{children:"Pronto para Entrega"})]})})]})]},_.id)})})]})},$D=()=>null,VD=()=>{const{user:t}=as(),{updateItemStatus:s}=hl(),{barOrders:n,menuItems:i}=_t(),[l,c]=b.useState("balcao"),[u,h]=b.useState(!1),f=y=>{c(y)},p=async(y,v)=>{try{await s(y,v)}catch(j){throw console.error("Erro ao atualizar status do item:",j),j}},g=()=>{switch(l){case"balcao":return u?e.jsx(ED,{}):e.jsx(_v,{});case"mesas":return e.jsx(DD,{});case"comandas":return e.jsx(PD,{});case"fila":return e.jsx(LD,{onUpdateItemStatus:p});case"pedidos":return e.jsx(BD,{orders:n,menuItems:i});default:return e.jsx(_v,{})}};return e.jsxs("div",{className:"bar-attendance-container min-h-screen bg-gray-50 flex flex-col",children:[e.jsx(nD,{mode:l,onModeChange:f,user:t}),l==="balcao"&&e.jsx("div",{className:"bg-white border-b border-gray-200 px-4 py-2",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("button",{onClick:()=>h(!1),className:`px-4 py-2 rounded-lg font-medium transition-colors ${u?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-blue-600 text-white"}`,children:"🛒 Criar Pedido"}),e.jsx("button",{onClick:()=>h(!0),className:`px-4 py-2 rounded-lg font-medium transition-colors ${u?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"📋 Gerenciar Pedidos"})]})}),e.jsx("main",{className:"bar-content flex-1 p-4 md:p-6 overflow-auto",children:g()}),e.jsx($D,{})]})},f0=()=>{const{user:t}=as(),{fecharComanda:s,recarregarDados:n}=m0(),{refreshKitchenOrders:i,refreshBarOrders:l}=_t(),[c,u]=b.useState({currentSession:null,pendingComandas:[],todaysTransactions:[],todaysSessions:[],todaysSummary:{session_date:new Date().toISOString().split("T")[0],total_sessions:0,total_sales:0,total_transactions:0,total_cash_withdrawals:0,total_treasury_transfers:0,cash_balance:0,by_payment_method:[],by_employee:[],discrepancies:[],avg_ticket:0,peak_hours:[]},loading:!0,error:null}),h=b.useCallback($=>{u(D=>({...D,...$}))},[]),f=b.useCallback(($,D)=>{console.error(`Erro em ${D}:`,$),h({error:`Erro em ${D}: ${$.message||"Erro desconhecido"}`,loading:!1})},[h]),p=b.useCallback(async()=>{if(!t){console.log("useCashManagement: Usuário não encontrado, pulando carregamento");return}try{console.log("useCashManagement: Iniciando carregamento para usuário:",t),h({loading:!0,error:null});const $=new Date().toISOString().split("T")[0];console.log("useCashManagement: Data atual:",$),console.log("useCashManagement: Buscando sessão para usuário ID:",t.id);const{data:D,error:P}=await ae.from("cash_sessions").select("*").eq("employee_id",t.id).eq("status","open").maybeSingle();if(console.log("useCashManagement: Resultado da busca de sessão:",{currentSessionData:D,sessionError:P}),P&&P.code!=="PGRST116")throw console.error("Erro ao carregar sessão:",P),P;const{data:B,error:K}=await ae.from("comandas").select("*").eq("status","pending_payment").order("opened_at",{ascending:!1});if(K)throw K;console.log("🔍 Buscando TODAS as transações...");const{data:A,error:q}=await ae.from("cash_transactions").select("id, transaction_type, payment_method, amount, created_at").order("created_at",{ascending:!1}).limit(10);console.log("📊 Últimas 10 transações no banco:",(A==null?void 0:A.length)||0),A&&A.length>0&&console.table(A.map(De=>({id:De.id.slice(-8),tipo:De.transaction_type,metodo:De.payment_method,valor:De.amount,data:new Date(De.created_at).toLocaleDateString("pt-BR")}))),console.log("🔍 Buscando transações para o dia:",$);let L=[],W=null;const{data:oe,error:me}=await ae.from("cash_transactions").select(`
          *,
          comandas(id, customer_name, table_id, total),
          profiles!cash_transactions_processed_by_fkey(id, name),
          cash_sessions(id, session_date, employee_id)
        `).gte("created_at",`${$}T00:00:00.000Z`).lt("created_at",`${$}T23:59:59.999Z`).order("created_at",{ascending:!1});if(!me&&oe&&(L=oe,console.log("📊 Transações encontradas por created_at:",L.length)),L.length===0){const{data:De,error:Je}=await ae.from("cash_transactions").select(`
            *,
            comandas(id, customer_name, table_id, total),
            profiles!cash_transactions_processed_by_fkey(id, name),
            cash_sessions(id, session_date, employee_id)
          `).gte("processed_at",`${$}T00:00:00.000Z`).lt("processed_at",`${$}T23:59:59.999Z`).order("processed_at",{ascending:!1});!Je&&De?(L=De,console.log("📊 Transações encontradas por processed_at:",L.length)):W=Je}if(console.log("📊 Transações de hoje encontradas:",(L==null?void 0:L.length)||0),L&&L.length>0&&(console.log("📋 Primeira transação de hoje:",L[0]),console.log("💰 Métodos de pagamento de hoje:",[...new Set(L.map(De=>De.payment_method))])),W)throw console.error("❌ Erro ao buscar transações:",W),W;const{data:fe,error:ie}=await ae.from("cash_sessions").select("*").eq("session_date",$).order("opened_at",{ascending:!1});if(ie)throw ie;console.log("Dados da sessão atual:",D),console.log("Usuário atual:",t);const de=D?{...D,employee:{id:t.id,name:t.name||t.email||"Usuário",role:t.role||"employee"},supervisor:void 0}:null;console.log("Sessão processada:",de);const Ee=(B==null?void 0:B.map(De=>({...De,items:[],table:void 0,customer:void 0})))||[],Ue=(L==null?void 0:L.map(De=>({...De,comanda:De.comandas||void 0,processed_by_employee:De.profiles||{id:t.id,name:t.email||"Usuário"},session:De.cash_sessions||void 0})))||[],je=(fe==null?void 0:fe.map(De=>({...De,employee:{id:t.id,name:t.email||"Usuário",role:"employee"}})))||[],Be=await E(new Date);h({currentSession:de,pendingComandas:Ee,todaysTransactions:Ue,todaysSessions:je,todaysSummary:Be,loading:!1})}catch($){f($,"carregamento inicial")}},[t,h,f]),g=b.useCallback(async $=>{try{const D=$||(t==null?void 0:t.id);if(!D)return 0;const{data:P,error:B}=await ae.from("cash_sessions").select("closing_amount, session_date").eq("employee_id",D).eq("status","closed").order("session_date",{ascending:!1}).order("closed_at",{ascending:!1}).limit(1).maybeSingle();return B&&B.code!=="PGRST116"?(console.error("Erro ao buscar última sessão fechada:",B),0):(P==null?void 0:P.closing_amount)||0}catch(D){return console.error("Erro ao obter saldo da última sessão:",D),0}},[t]),y=b.useCallback(async $=>{try{const{data:D,error:P}=await ae.from("cash_sessions").select(`
          *,
          profiles!cash_sessions_employee_id_fkey(id, name, role)
        `).eq("session_date",$).order("opened_at",{ascending:!0});if(P)throw P;console.log("🔍 Buscando transações para movimento do dia:",$);const{data:B,error:K}=await ae.from("cash_transactions").select(`
          *,
          comandas(id, customer_name, table_id, total),
          profiles!cash_transactions_processed_by_fkey(id, name),
          cash_sessions(id, session_date, employee_id)
        `).gte("created_at",`${$}T00:00:00.000Z`).lt("created_at",`${$}T23:59:59.999Z`).order("created_at",{ascending:!0});if(console.log("📊 Transações encontradas para movimento:",(B==null?void 0:B.length)||0),K)throw K;const A=(D==null?void 0:D.map(je=>({...je,employee:je.profiles||{id:je.employee_id,name:"Usuário",role:"employee"}})))||[],q=(B==null?void 0:B.map(je=>({...je,comanda:je.comandas||void 0,processed_by_employee:je.profiles||{id:je.processed_by,name:"Usuário"},session:je.cash_sessions||void 0})))||[],L=A.reduce((je,Be)=>je+(Be.opening_amount||0),0),W=A.reduce((je,Be)=>je+(Be.closing_amount||0),0),oe=A.reduce((je,Be)=>je+(Be.cash_discrepancy||0),0),me=q.filter(je=>je.transaction_type==="sale"),fe=me.reduce((je,Be)=>je+Be.amount,0),ie=me.filter(je=>je.payment_method==="dinheiro").reduce((je,Be)=>je+Be.amount,0),de=me.filter(je=>["cartao_debito","cartao_credito"].includes(je.payment_method)).reduce((je,Be)=>je+Be.amount,0),Ee=me.filter(je=>je.payment_method==="pix").reduce((je,Be)=>je+Be.amount,0),Ue=q.filter(je=>je.transaction_type==="adjustment").reduce((je,Be)=>je+Be.amount,0);return{sessions:A,transactions:q,summary:{opening_total:L,closing_total:W,sales_total:fe,cash_sales:ie,card_sales:de,pix_sales:Ee,adjustments:Ue,discrepancy_total:oe,transaction_count:q.length}}}catch(D){return console.error("Erro ao obter movimento diário:",D),{sessions:[],transactions:[],summary:{opening_total:0,closing_total:0,sales_total:0,cash_sales:0,card_sales:0,pix_sales:0,adjustments:0,discrepancy_total:0,transaction_count:0}}}},[]),v=b.useCallback(async $=>{if(!t)throw new Error("Usuário não autenticado");try{console.log("Iniciando abertura de caixa para usuário:",t.id),h({loading:!0,error:null});const D={employee_id:t.id,opening_amount:$.opening_amount,opening_notes:$.opening_notes,supervisor_approval_id:$.supervisor_approval_id,status:"open"};console.log("Dados da sessão:",D);const{data:P,error:B}=await ae.from("cash_sessions").insert(D).select("*").single();if(B)throw console.error("Erro ao inserir sessão:",B),B;console.log("Sessão criada com sucesso:",P),await p()}catch(D){throw f(D,"abertura de caixa"),D}},[t,h,f,p]),j=b.useCallback(async $=>{if(!c.currentSession)throw new Error("Nenhuma sessão aberta");try{h({loading:!0,error:null});const D=$.closing_amount-c.currentSession.expected_amount,{error:P}=await ae.from("cash_sessions").update({status:"closed",closed_at:new Date().toISOString(),closing_amount:$.closing_amount,cash_discrepancy:D,closing_notes:$.closing_notes}).eq("id",c.currentSession.id);if(P)throw P;const B=$.reconciliation.map(A=>({cash_session_id:c.currentSession.id,payment_method:A.payment_method,expected_amount:A.expected_amount,actual_amount:A.actual_amount,transaction_count:A.transaction_count,reconciled_by:t.id,notes:A.notes})),{error:K}=await ae.from("payment_reconciliation").insert(B);if(K)throw K;await p()}catch(D){throw f(D,"fechamento de caixa"),D}},[c.currentSession,t,h,f,p]),N=b.useCallback(()=>c.currentSession,[c.currentSession]),_=b.useCallback(async $=>{if(console.log("🏦 Processando pagamento de comanda..."),console.log("📊 Sessão atual:",c.currentSession),console.log("💳 Dados do pagamento:",$),!c.currentSession)throw console.error("❌ Nenhuma sessão de caixa aberta!"),new Error("Nenhuma sessão de caixa aberta");try{h({loading:!0,error:null}),await s($.comanda_id,$.payment_method,$.notes),console.log("💰 Criando transação de pagamento...");const D={cash_session_id:c.currentSession.id,comanda_id:$.comanda_id,transaction_type:"sale",payment_method:$.payment_method,amount:$.amount,processed_by:t.id,reference_number:$.reference_number,customer_name:$.customer_name,notes:$.notes};console.log("📋 Dados da transação:",D);const{data:P,error:B}=await ae.from("cash_transactions").insert(D).select().single();if(B)throw console.error("❌ Erro ao inserir transação:",B),B;console.log("✅ Transação criada com sucesso:",P),await pe($.amount),await p(),await n(),$.notes&&$.notes.includes("balcão")&&(console.log("🔄 Forçando atualização dos monitores após pagamento de balcão..."),setTimeout(async()=>{await Promise.all([i(),l()]),console.log("🚀 Monitores atualizados imediatamente!")},500),setTimeout(async()=>{await Promise.all([i(),l()]),console.log("🎉 Atualização backup dos monitores concluída!")},2e3))}catch(D){throw f(D,"processamento de pagamento"),D}},[c.currentSession,t,s,h,f,p,n]),C=b.useCallback(async $=>{if(!c.currentSession)throw new Error("Nenhuma sessão de caixa aberta");try{h({loading:!0,error:null});const D={cash_session_id:c.currentSession.id,transaction_type:"refund",payment_method:$.refund_method,amount:-Math.abs($.amount),processed_by:t.id,notes:`Estorno: ${$.reason}. Transação original: ${$.original_transaction_id}`},{error:P}=await ae.from("cash_transactions").insert(D);if(P)throw P;await p()}catch(D){throw f(D,"processamento de estorno"),D}},[c.currentSession,t,h,f,p]),R=b.useCallback(async $=>{if(!c.currentSession)throw new Error("Nenhuma sessão de caixa aberta");try{h({loading:!0,error:null});const D=$.adjustment_type==="add"?$.amount:-$.amount,P={cash_session_id:c.currentSession.id,transaction_type:"adjustment",payment_method:$.payment_method||"dinheiro",amount:D,processed_by:t.id,notes:`Ajuste ${$.adjustment_type==="add"?"positivo":"negativo"}: ${$.reason}`},{error:B}=await ae.from("cash_transactions").insert(P);if(B)throw B;await p()}catch(D){throw f(D,"processamento de ajuste"),D}},[c.currentSession,t,h,f,p]),S=b.useCallback(async $=>{if(!c.currentSession)throw new Error("Nenhuma sessão de caixa aberta");try{h({loading:!0,error:null});const D={cash_session_id:c.currentSession.id,transaction_type:"adjustment",payment_method:"dinheiro",amount:-Math.abs($.amount),processed_by:t.id,notes:`[SAÍDA] ${$.purpose}: ${$.reason}. Autorizado por: ${$.authorized_by}${$.recipient?`. Destinatário: ${$.recipient}`:""}`},{data:P,error:B}=await ae.from("cash_transactions").insert(D).select("*").single();if(B)throw B;const K=c.currentSession.expected_amount-$.amount,{error:A}=await ae.from("cash_sessions").update({expected_amount:K}).eq("id",c.currentSession.id);if(A)throw A;return await p(),P.id}catch(D){throw f(D,"processamento de saída de dinheiro"),D}},[c.currentSession,t,h,f,p]),k=b.useCallback(async $=>{if(!c.currentSession)throw new Error("Nenhuma sessão de caixa aberta");try{h({loading:!0,error:null});const D={cash_session_id:c.currentSession.id,transaction_type:"adjustment",payment_method:"dinheiro",amount:-Math.abs($.amount),processed_by:t.id,notes:`[TRANSFERÊNCIA TESOURARIA] Autorizado por: ${$.authorized_by}${$.treasury_receipt_number?`. Comprovante: ${$.treasury_receipt_number}`:""}${$.notes?`. Obs: ${$.notes}`:""}`},{data:P,error:B}=await ae.from("cash_transactions").insert(D).select("*").single();if(B)throw B;const K=c.currentSession.expected_amount-$.amount,{error:A}=await ae.from("cash_sessions").update({expected_amount:K}).eq("id",c.currentSession.id);if(A)throw A;return await p(),P.id}catch(D){throw f(D,"processamento de transferência para tesouraria"),D}},[c.currentSession,t,h,f,p]),E=b.useCallback(async $=>{const P=($||new Date).toISOString().split("T")[0];try{console.log("🔍 Gerando resumo para o dia:",P);let B=[];const{data:K,error:A}=await ae.from("cash_transactions").select(`
          *,
          comandas(id, customer_name, table_id, total),
          profiles!cash_transactions_processed_by_fkey(id, name),
          cash_sessions(id, session_date, employee_id)
        `).gte("created_at",`${P}T00:00:00.000Z`).lt("created_at",`${P}T23:59:59.999Z`);if(!A&&K&&(B=K,console.log("📊 Resumo: transações por created_at:",B.length)),B.length===0){const{data:ke,error:$e}=await ae.from("cash_transactions").select(`
            *,
            comandas(id, customer_name, table_id, total),
            profiles!cash_transactions_processed_by_fkey(id, name),
            cash_sessions(id, session_date, employee_id)
          `).gte("processed_at",`${P}T00:00:00.000Z`).lt("processed_at",`${P}T23:59:59.999Z`);!$e&&ke&&(B=ke,console.log("📊 Resumo: transações por processed_at:",B.length))}const q=null;console.log("📊 TODAS as transações encontradas:",(B==null?void 0:B.length)||0);const L=(B==null?void 0:B.filter(ke=>ke.transaction_type==="sale"))||[];console.log("💰 Transações de venda:",L.length),B&&B.length>0&&(console.log("📋 Tipos de transação encontrados:",[...new Set(B.map(ke=>ke.transaction_type))]),console.log("💳 Métodos de pagamento encontrados:",[...new Set(B.map(ke=>ke.payment_method))]),console.log("🔍 Primeira transação:",B[0]));const{data:W,error:oe}=await ae.from("cash_sessions").select(`
          *,
          profiles!cash_sessions_employee_id_fkey(id, name, role)
        `).eq("session_date",P);if(oe)throw console.error("Erro ao buscar sessões para resumo:",oe),oe;const me=L||[],fe=W||[];console.log("🧮 Iniciando cálculo de totais..."),console.log("📊 Transações para calcular:",me.length);const ie={};me.forEach((ke,$e)=>{const Nt=ke.payment_method||"desconhecido",ds=Number(ke.amount)||0;console.log(`💳 [${$e+1}] ${Nt}: R$ ${ds}`),ie[Nt]||(ie[Nt]={amount:0,count:0}),ie[Nt].amount+=ds,ie[Nt].count+=1}),console.log("📊 Totais finais por método:",ie);const de=me.reduce((ke,$e)=>ke+$e.amount,0),Ee=me.length;console.log("🏗️ Criando array de métodos de pagamento...");const je=["dinheiro","cartao_debito","cartao_credito","pix","transferencia"].map(ke=>{const $e=ie[ke]||{amount:0,count:0},Nt=de>0?$e.amount/de*100:0;return console.log(`📋 ${ke}: R$ ${$e.amount} (${$e.count} transações) - ${Nt.toFixed(1)}%`),{payment_method:ke,amount:$e.amount,transaction_count:$e.count,percentage:Nt,expected_amount:$e.amount,actual_amount:$e.amount,discrepancy:0}});console.log("✅ Array de métodos criado:",je);const Be=me.reduce((ke,$e)=>{var I;const Nt=$e.processed_by,ds=((I=$e.profiles)==null?void 0:I.name)||"Funcionário";return ke[Nt]||(ke[Nt]={employee_id:Nt,employee_name:ds,session_count:0,total_sales:0,transaction_count:0,avg_ticket:0,cash_discrepancy:0,session_duration:"8:00"}),ke[Nt].total_sales+=$e.amount,ke[Nt].transaction_count+=1,ke},{});Object.values(Be).forEach(ke=>{ke.avg_ticket=ke.transaction_count>0?ke.total_sales/ke.transaction_count:0});const{data:De}=await ae.from("cash_transactions").select("amount, notes, transaction_type").gte("created_at",`${P}T00:00:00.000Z`).lt("created_at",`${P}T23:59:59.999Z`).in("transaction_type",["adjustment","refund"]),Je=(De||[]).filter(ke=>{var $e;return($e=ke.notes)==null?void 0:$e.includes("[SAÍDA]")}).reduce((ke,$e)=>ke+Math.abs($e.amount),0),$t=(De||[]).filter(ke=>{var $e;return($e=ke.notes)==null?void 0:$e.includes("[TRANSFERÊNCIA TESOURARIA]")}).reduce((ke,$e)=>ke+Math.abs($e.amount),0);return{session_date:P,total_sessions:fe.length,total_sales:de,total_transactions:Ee,total_cash_withdrawals:Je,total_treasury_transfers:$t,cash_balance:de-Je-$t,by_payment_method:je,by_employee:Object.values(Be),discrepancies:fe.filter(ke=>Math.abs(ke.cash_discrepancy||0)>0).map(ke=>{var $e;return{employee_id:ke.employee_id,employee_name:(($e=ke.profiles)==null?void 0:$e.name)||"Funcionário",session_id:ke.id,cash_discrepancy:ke.cash_discrepancy||0,payment_discrepancies:[],total_discrepancy:ke.cash_discrepancy||0}}),avg_ticket:Ee>0?de/Ee:0,peak_hours:[]}}catch(B){throw console.error("Erro ao gerar resumo diário:",B),B}},[]),w=b.useCallback(async $=>E($),[E]),M=b.useCallback(async $=>{throw new Error("Relatório mensal ainda não implementado")},[]),z=b.useCallback(async($,D)=>{throw new Error("Relatório de performance ainda não implementado")},[]),U=b.useCallback(async $=>{if(!c.currentSession)return{isValid:!1,warnings:[],errors:[{type:"invalid_state",message:"Nenhuma sessão ativa"}],suggestions:["Abra uma sessão de caixa primeiro"]};const D=$-c.currentSession.expected_amount,P=Math.abs(D/c.currentSession.expected_amount)*100,B=[],K=[],A=[];return Math.abs(D)>10&&(B.push({type:"discrepancy",message:`Discrepância alta: R$ ${D.toFixed(2)}`,severity:"high",data:{discrepancy:D,percentage:P}}),A.push("Recontagem recomendada")),{isValid:Math.abs(D)<=5,warnings:B,errors:K,suggestions:A}},[c.currentSession]),H=b.useCallback(async $=>({isValid:!0,warnings:[],errors:[],suggestions:[]}),[]),V=b.useCallback(async()=>{await p()},[p]),Q=b.useCallback(async($,D)=>{throw new Error("Exportação de relatórios ainda não implementada")},[]),X=b.useCallback(async $=>{try{let D=ae.from("cash_transactions").select(`
          *,
          comandas(id, customer_name, table_id, total),
          profiles!cash_transactions_processed_by_fkey(id, name),
          cash_sessions(id, session_date, employee_id)
        `);$.start_date&&(D=D.gte("processed_at",$.start_date)),$.end_date&&(D=D.lte("processed_at",$.end_date)),$.payment_method&&(D=D.eq("payment_method",$.payment_method)),$.transaction_type&&(D=D.eq("transaction_type",$.transaction_type)),$.employee_id&&(D=D.eq("processed_by",$.employee_id)),$.session_id&&(D=D.eq("cash_session_id",$.session_id)),$.min_amount&&(D=D.gte("amount",$.min_amount)),$.max_amount&&(D=D.lte("amount",$.max_amount));const{data:P,error:B}=await D.order("processed_at",{ascending:!1});if(B)throw B;return(P==null?void 0:P.map(K=>({...K,comanda:K.comandas||void 0,processed_by_employee:K.profiles||void 0,session:K.cash_sessions||void 0})))||[]}catch(D){throw console.error("Erro na busca de transações:",D),D}},[]),re=b.useCallback(async $=>{try{let D=ae.from("cash_sessions").select(`
          *,
          profiles!cash_sessions_employee_id_fkey(id, name, role)
        `);$.start_date&&(D=D.gte("session_date",$.start_date)),$.end_date&&(D=D.lte("session_date",$.end_date)),$.employee_id&&(D=D.eq("employee_id",$.employee_id)),$.status&&(D=D.eq("status",$.status)),$.has_discrepancy&&(D=D.neq("cash_discrepancy",0));const{data:P,error:B}=await D.order("session_date",{ascending:!1});if(B)throw B;return(P==null?void 0:P.map(K=>({...K,employee:K.profiles||void 0})))||[]}catch(D){throw console.error("Erro na busca de sessões:",D),D}},[]),pe=b.useCallback(async $=>{if(t)try{const D=new Date().toISOString().split("T")[0],{error:P}=await ae.rpc("atualizar_metricas_venda",{p_employee_id:t.id,p_date:D,p_sale_amount:$});P&&console.warn("Erro ao atualizar métricas:",P)}catch(D){console.warn("Erro ao atualizar métricas:",D)}},[t]);return b.useEffect(()=>{p()},[p]),b.useEffect(()=>{if(!t)return;const $=[],D=ae.channel("cash-sessions-changes").on("postgres_changes",{event:"*",schema:"public",table:"cash_sessions"},K=>{console.log("Mudança em sessões de caixa:",K),p()}).subscribe();$.push(D);const P=ae.channel("cash-transactions-changes").on("postgres_changes",{event:"*",schema:"public",table:"cash_transactions"},K=>{console.log("Mudança em transações:",K),p()}).subscribe();$.push(P);const B=ae.channel("comandas-changes").on("postgres_changes",{event:"*",schema:"public",table:"comandas"},K=>{console.log("Mudança em comandas:",K),p()}).subscribe();return $.push(B),()=>{$.forEach(K=>{ae.removeChannel(K)})}},[t,p]),{...c,openCashSession:v,closeCashSession:j,getCurrentSession:N,processComandaPayment:_,processRefund:C,processAdjustment:R,processCashWithdrawal:S,processTreasuryTransfer:k,getDailySummary:w,getMonthlyCashReport:M,getEmployeePerformance:z,validateCashCount:U,validateSession:H,refreshData:V,exportReport:Q,searchTransactions:X,searchSessions:re,getLastClosedSessionBalance:g,getDailyCashMovement:y}},UD=({isOpen:t,onClose:s,onOpenCash:n,getLastClosedSessionBalance:i})=>{const[l,c]=b.useState({opening_amount:0,opening_notes:""}),[u,h]=b.useState(!1),[f,p]=b.useState(null),[g,y]=b.useState(!1);b.useEffect(()=>{(async()=>{if(t&&i){y(!0);try{const _=await i();p(_),_>0&&l.opening_amount===0&&c(C=>({...C,opening_amount:_}))}catch(_){console.error("Erro ao carregar saldo da última sessão:",_)}finally{y(!1)}}})()},[t,i,l.opening_amount]);const v=()=>{f!==null&&c(N=>({...N,opening_amount:f}))},j=async N=>{N.preventDefault(),h(!0);try{await n(l),s(),c({opening_amount:0,opening_notes:""})}catch(_){console.error("Erro ao abrir caixa:",_)}finally{h(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:e.jsx(Gt,{className:"h-6 w-6 text-green-600"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Abrir Caixa"})]}),e.jsx("button",{onClick:s,disabled:u,className:"text-gray-400 hover:text-gray-600","aria-label":"Fechar modal",children:e.jsx(dt,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[f!==null&&f>0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ht,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Saldo da última sessão fechada"}),e.jsxs("p",{className:"text-lg font-bold text-blue-700",children:["R$ ",f.toFixed(2)]}),e.jsx("button",{type:"button",onClick:v,className:"mt-2 text-sm text-blue-600 hover:text-blue-800 underline",disabled:u,children:"Usar este valor como abertura"})]})]})}),g&&e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 text-center",children:e.jsxs("div",{className:"inline-flex items-center space-x-2 text-gray-600",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600"}),e.jsx("span",{className:"text-sm",children:"Carregando histórico..."})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor Inicial (R$) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:l.opening_amount,onChange:N=>c(_=>({..._,opening_amount:parseFloat(N.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-green-500",required:!0,disabled:u,"aria-label":"Valor inicial em reais"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observações"}),e.jsx("textarea",{value:l.opening_notes||"",onChange:N=>c(_=>({..._,opening_notes:N.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Observações sobre a abertura do caixa...",disabled:u})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:s,disabled:u,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:u,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50",children:u?"Abrindo...":"Abrir Caixa"})]})]})]})}):null},qD=({isOpen:t,onClose:s,session:n,onCloseCash:i})=>{var w;const{preparingOrders:l,readyOrders:c}=wd(),[u,h]=b.useState({closing_amount:n.expected_amount,closing_notes:"",reconciliation:[{payment_method:"dinheiro",expected_amount:0,actual_amount:0,transaction_count:0},{payment_method:"cartao_debito",expected_amount:0,actual_amount:0,transaction_count:0},{payment_method:"cartao_credito",expected_amount:0,actual_amount:0,transaction_count:0},{payment_method:"pix",expected_amount:0,actual_amount:0,transaction_count:0},{payment_method:"transferencia",expected_amount:0,actual_amount:0,transaction_count:0}]}),[f,p]=b.useState(!1),[g,y]=b.useState([]),[v,j]=b.useState(!1);b.useEffect(()=>{t&&n&&(h(M=>({...M,closing_amount:n.expected_amount})),N())},[t,n]);const N=async()=>{j(!0);try{const{data:M,error:z}=await ae.from("comanda_items").select(`
          *,
          comanda:comandas!inner(
            id,
            customer_name,
            table_id,
            bar_tables(number)
          ),
          menu_item:menu_items(name)
        `).in("status",["pending","preparing","ready"]).eq("comanda.status","open").order("added_at",{ascending:!0});z?(console.error("Erro ao carregar itens pendentes:",z),y([])):y(M||[])}catch(M){console.error("Erro ao validar pedidos pendentes:",M),y([])}finally{j(!1)}},_=async M=>{M.preventDefault();const z=l.length+c.length+g.length;if(z>0){const U=`ATENÇÃO: Existem ${z} pedidos pendentes de entrega:

• ${l.length} pedidos de balcão em preparo
• ${c.length} pedidos de balcão prontos para entrega
• ${g.length} itens de comandas não entregues

Tem certeza que deseja fechar o caixa mesmo com pedidos pendentes?`;if(!window.confirm(U))return}p(!0);try{await i(u),s()}catch(U){console.error("Erro ao fechar caixa:",U)}finally{p(!1)}},C=(M,z,U)=>{h(H=>({...H,reconciliation:H.reconciliation.map(V=>V.payment_method===M?{...V,[z]:U}:V)}))},R=u.reconciliation.reduce((M,z)=>M+z.actual_amount,0),S=R-n.expected_amount,E=l.length+c.length+g.length>0;return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-red-100 p-2 rounded-lg",children:e.jsx(Gt,{className:"h-6 w-6 text-red-600"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Fechar Caixa"})]}),e.jsx("button",{onClick:s,disabled:f,className:"text-gray-400 hover:text-gray-600",children:e.jsx(dt,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:_,className:"space-y-6",children:[E&&e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ws,{className:"h-6 w-6 text-yellow-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-800 mb-2",children:"⚠️ Atenção: Pedidos Pendentes de Entrega"}),e.jsxs("div",{className:"text-sm text-yellow-700 space-y-1",children:[l.length>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ht,{className:"h-4 w-4"}),e.jsxs("span",{children:[l.length," pedidos de balcão em preparo"]})]}),c.length>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ef,{className:"h-4 w-4"}),e.jsxs("span",{children:[c.length," pedidos de balcão prontos para entrega"]})]}),g.length>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ht,{className:"h-4 w-4"}),e.jsxs("span",{children:[g.length," itens de comandas não entregues"]})]})]}),e.jsx("p",{className:"text-xs text-yellow-600 mt-2",children:"Recomenda-se entregar todos os pedidos antes de fechar o caixa."})]})]})}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Resumo da Sessão"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Valor inicial:"}),e.jsx("span",{className:"font-medium",children:Te(n.opening_amount)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Valor esperado total:"}),e.jsx("span",{className:"font-medium",children:Te(n.expected_amount)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Aberta em:"}),e.jsx("span",{className:"font-medium",children:new Date(n.opened_at).toLocaleString("pt-BR")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Funcionário:"}),e.jsx("span",{className:"font-medium",children:(w=n.employee)==null?void 0:w.name})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Reconciliação por Método de Pagamento"}),e.jsx("div",{className:"space-y-4",children:u.reconciliation.map((M,z)=>{const U=H=>{switch(H){case"dinheiro":return e.jsx(Gt,{className:"h-5 w-5"});case"cartao_debito":case"cartao_credito":return e.jsx(ir,{className:"h-5 w-5"});case"pix":return e.jsx(Qw,{className:"h-5 w-5"});case"transferencia":return e.jsx(jA,{className:"h-5 w-5"});default:return e.jsx(Gt,{className:"h-5 w-5"})}};return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[U(M.payment_method),e.jsx("h4",{className:"font-medium text-gray-900",children:_d[M.payment_method]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Valor Esperado"}),e.jsx("div",{className:"px-3 py-2 bg-gray-50 rounded text-sm font-medium",children:Te(M.expected_amount)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Valor Real *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:M.actual_amount,onChange:H=>C(M.payment_method,"actual_amount",parseFloat(H.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-red-500 focus:border-red-500",disabled:f})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Transações"}),e.jsx("input",{type:"number",min:"0",value:M.transaction_count,onChange:H=>C(M.payment_method,"transaction_count",parseInt(H.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-red-500 focus:border-red-500",disabled:f})]})]}),Math.abs(M.actual_amount-M.expected_amount)>.01&&e.jsxs("div",{className:`mt-2 p-2 rounded text-xs ${M.actual_amount>M.expected_amount?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:[M.actual_amount>M.expected_amount?"Sobra":"Falta",":",Te(Math.abs(M.actual_amount-M.expected_amount))]})]},M.payment_method)})})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-3",children:"Resumo Final"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total esperado:"}),e.jsx("span",{className:"font-medium",children:Te(n.expected_amount)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total contado:"}),e.jsx("span",{className:"font-medium",children:Te(R)})]}),e.jsxs("div",{className:"flex justify-between col-span-2 pt-2 border-t border-blue-200",children:[e.jsx("span",{className:"font-medium",children:"Diferença:"}),e.jsxs("span",{className:`font-bold ${Math.abs(S)<.01||S>0?"text-green-600":"text-red-600"}`,children:[S===0?"Exato":Te(S),S>0&&" (Sobra)",S<0&&" (Falta)"]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observações do Fechamento"}),e.jsx("textarea",{value:u.closing_notes||"",onChange:M=>h(z=>({...z,closing_notes:M.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500 focus:border-red-500",placeholder:"Observações sobre o fechamento...",disabled:f})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:s,disabled:f,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 disabled:opacity-50",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:f||v,className:`flex-1 px-4 py-2 text-white rounded-md disabled:opacity-50 transition-colors ${E?"bg-yellow-600 hover:bg-yellow-700":"bg-red-600 hover:bg-red-700"}`,children:f?"Fechando...":v?"Validando...":E?"Fechar Mesmo Assim":"Fechar Caixa"})]})]})]})}):null},FD=({isOpen:t,onClose:s,onProcessWithdrawal:n,currentCashBalance:i,loading:l=!1})=>{const[c,u]=b.useState({amount:0,reason:"",authorized_by:"",recipient:"",purpose:"other"}),[h,f]=b.useState({}),[p,g]=b.useState(!1),y=(C,R)=>{u(S=>({...S,[C]:R})),h[C]&&f(S=>({...S,[C]:""}))},v=()=>{var R;const C={};return(!c.amount||c.amount<=0)&&(C.amount="Valor deve ser maior que zero"),c.amount>i&&(C.amount="Valor não pode ser maior que o saldo em caixa"),c.reason.trim()||(C.reason="Motivo é obrigatório"),c.authorized_by.trim()||(C.authorized_by="Nome do autorizador é obrigatório"),c.purpose==="transfer"&&!((R=c.recipient)!=null&&R.trim())&&(C.recipient="Destinatário é obrigatório para transferências"),f(C),Object.keys(C).length===0},j=async C=>{if(C.preventDefault(),!!v()){g(!0);try{await n(c),N()}catch(R){console.error("Erro ao processar saída:",R)}finally{g(!1)}}},N=()=>{u({amount:0,reason:"",authorized_by:"",recipient:"",purpose:"other"}),f({}),g(!1),s()},_=[{value:"change",label:"Troco"},{value:"expense",label:"Despesa"},{value:"transfer",label:"Transferência"},{value:"other",label:"Outros"}];return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(Ne.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 sticky top-0 bg-white",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-orange-100 p-2 rounded-full",children:e.jsx(ji,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Saída de Dinheiro"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Saldo disponível: ",Te(i)]})]})]}),e.jsx("button",{onClick:N,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:p,title:"Fechar modal","aria-label":"Fechar modal",children:e.jsx(dt,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"p-6 pb-0",children:e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex items-start space-x-3",children:[e.jsx(Ws,{className:"h-5 w-5 text-yellow-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-yellow-800",children:"Atenção"}),e.jsx("p",{className:"text-yellow-700 mt-1",children:"Esta operação reduzirá o saldo em caixa e deve ser autorizada por um supervisor."})]})]})}),e.jsxs("form",{onSubmit:j,className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor da Saída *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"R$"}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:i,value:c.amount||"",onChange:C=>y("amount",parseFloat(C.target.value)||0),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${h.amount?"border-red-300":"border-gray-300"}`,placeholder:"0,00",disabled:p})]}),h.amount&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:h.amount})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Finalidade *"}),e.jsx("select",{value:c.purpose,onChange:C=>y("purpose",C.target.value),className:"w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",disabled:p,title:"Selecione a finalidade da saída","aria-label":"Finalidade da saída de dinheiro",children:_.map(C=>e.jsx("option",{value:C.value,children:C.label},C.value))})]}),c.purpose==="transfer"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Destinatário *"}),e.jsx("input",{type:"text",value:c.recipient||"",onChange:C=>y("recipient",C.target.value),className:`w-full px-3 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${h.recipient?"border-red-300":"border-gray-300"}`,placeholder:"Nome do destinatário",disabled:p}),h.recipient&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:h.recipient})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Motivo/Descrição *"}),e.jsx("textarea",{value:c.reason,onChange:C=>y("reason",C.target.value),rows:3,className:`w-full px-3 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none ${h.reason?"border-red-300":"border-gray-300"}`,placeholder:"Descreva o motivo da saída de dinheiro...",disabled:p}),h.reason&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:h.reason})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Autorizado por *"}),e.jsxs("div",{className:"relative",children:[e.jsx(tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx("input",{type:"text",value:c.authorized_by,onChange:C=>y("authorized_by",C.target.value),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${h.authorized_by?"border-red-300":"border-gray-300"}`,placeholder:"Nome do supervisor/gerente",disabled:p})]}),h.authorized_by&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:h.authorized_by})]})]}),c.amount>0&&e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Resumo da Operação"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Saldo atual:"}),e.jsx("span",{className:"font-medium",children:Te(i)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Valor da saída:"}),e.jsxs("span",{className:"font-medium text-red-600",children:["-",Te(c.amount)]})]}),e.jsx("div",{className:"border-t pt-1 mt-2",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-900 font-medium",children:"Saldo após saída:"}),e.jsx("span",{className:"font-bold",children:Te(i-c.amount)})]})})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:N,className:"flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-400 transition-colors font-medium",disabled:p,children:"Cancelar"}),e.jsx("button",{type:"submit",className:"flex-1 bg-orange-600 text-white py-3 rounded-lg hover:bg-orange-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",disabled:p||l||!c.amount||!c.reason.trim()||!c.authorized_by.trim(),children:p?"Processando...":"Processar Saída"})]})]})]})}):null},ID=({isOpen:t,onClose:s,onProcessTransfer:n,currentCashBalance:i,loading:l=!1})=>{const[c,u]=b.useState({amount:i,transfer_date:new Date().toISOString().split("T")[0],authorized_by:"",treasury_receipt_number:"",notes:""}),[h,f]=b.useState({}),[p,g]=b.useState(!1),y=(C,R)=>{u(S=>({...S,[C]:R})),h[C]&&f(S=>({...S,[C]:""}))},v=()=>{const C={};(!c.amount||c.amount<=0)&&(C.amount="Valor deve ser maior que zero"),c.amount>i&&(C.amount="Valor não pode ser maior que o saldo em caixa"),c.transfer_date||(C.transfer_date="Data da transferência é obrigatória"),c.authorized_by.trim()||(C.authorized_by="Nome do autorizador é obrigatório");const R=new Date(c.transfer_date),S=new Date;return S.setHours(23,59,59,999),R>S&&(C.transfer_date="Data não pode ser futura"),f(C),Object.keys(C).length===0},j=async C=>{if(C.preventDefault(),!!v()){g(!0);try{await n(c),N()}catch(R){console.error("Erro ao processar transferência:",R)}finally{g(!1)}}},N=()=>{u({amount:i,transfer_date:new Date().toISOString().split("T")[0],authorized_by:"",treasury_receipt_number:"",notes:""}),f({}),g(!1),s()},_=()=>{y("amount",i)};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(Ne.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 sticky top-0 bg-white",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-purple-100 p-2 rounded-full",children:e.jsx(Jc,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Transferência para Tesouraria"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Saldo disponível: ",Te(i)]})]})]}),e.jsx("button",{onClick:N,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:p,title:"Fechar modal","aria-label":"Fechar modal",children:e.jsx(dt,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"p-6 pb-0",children:e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start space-x-3",children:[e.jsx(_A,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-blue-800",children:"Transferência para Tesouraria"}),e.jsx("p",{className:"text-blue-700 mt-1",children:"Esta operação transfere o dinheiro em caixa para a tesouraria central. Um comprovante será gerado para assinatura do conferente."})]})]})}),e.jsxs("form",{onSubmit:j,className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Valor da Transferência *"}),e.jsx("button",{type:"button",onClick:_,className:"text-xs text-purple-600 hover:text-purple-700 underline",disabled:p,children:"Transferir todo o saldo"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"R$"}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:i,value:c.amount||"",onChange:C=>y("amount",parseFloat(C.target.value)||0),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ${h.amount?"border-red-300":"border-gray-300"}`,placeholder:"0,00",disabled:p})]}),h.amount&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:h.amount})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data da Transferência *"}),e.jsxs("div",{className:"relative",children:[e.jsx(rr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx("input",{type:"date",value:c.transfer_date,onChange:C=>y("transfer_date",C.target.value),max:new Date().toISOString().split("T")[0],className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ${h.transfer_date?"border-red-300":"border-gray-300"}`,disabled:p,title:"Selecione a data da transferência","aria-label":"Data da transferência"})]}),h.transfer_date&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:h.transfer_date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Autorizado por *"}),e.jsxs("div",{className:"relative",children:[e.jsx(tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx("input",{type:"text",value:c.authorized_by,onChange:C=>y("authorized_by",C.target.value),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ${h.authorized_by?"border-red-300":"border-gray-300"}`,placeholder:"Nome do supervisor/gerente",disabled:p})]}),h.authorized_by&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:h.authorized_by})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Número do Comprovante da Tesouraria"}),e.jsxs("div",{className:"relative",children:[e.jsx(Gw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx("input",{type:"text",value:c.treasury_receipt_number||"",onChange:C=>y("treasury_receipt_number",C.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Ex: TSR-2024-001234",disabled:p})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Número de referência do comprovante da tesouraria (opcional)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observações"}),e.jsx("textarea",{value:c.notes||"",onChange:C=>y("notes",C.target.value),rows:3,className:"w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none",placeholder:"Observações adicionais sobre a transferência...",disabled:p})]})]}),c.amount>0&&e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Resumo da Transferência"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Saldo atual em caixa:"}),e.jsx("span",{className:"font-medium",children:Te(i)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Valor a transferir:"}),e.jsx("span",{className:"font-medium text-purple-600",children:Te(c.amount)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Data da transferência:"}),e.jsx("span",{className:"font-medium",children:Zt(new Date(c.transfer_date),"dd 'de' MMMM 'de' yyyy",{locale:cs})})]}),e.jsx("div",{className:"border-t pt-2 mt-2",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-900 font-medium",children:"Saldo restante em caixa:"}),e.jsx("span",{className:"font-bold",children:Te(i-c.amount)})]})})]})]}),c.amount===i&&c.amount>0&&e.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg flex items-start space-x-2",children:[e.jsx(Ws,{className:"h-4 w-4 text-yellow-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-yellow-800",children:"Transferência Total"}),e.jsx("p",{className:"text-yellow-700",children:"Você está transferindo todo o saldo em caixa. O caixa ficará zerado após esta operação."})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:N,className:"flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-400 transition-colors font-medium",disabled:p,children:"Cancelar"}),e.jsx("button",{type:"submit",className:"flex-1 bg-purple-600 text-white py-3 rounded-lg hover:bg-purple-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",disabled:p||l||!c.amount||!c.authorized_by.trim(),children:p?"Processando...":"Transferir e Imprimir Comprovante"})]})]})]})}):null},HD=({receiptData:t,onPrint:s})=>{const n=()=>{const i=document.getElementById("treasury-transfer-receipt");if(!i)return;const l=window.open("","_blank");l&&(l.document.write(`
      <html>
        <head>
          <title>Comprovante de Transferência - Tesouraria</title>
          <style>
            body {
              font-family: 'Courier New', monospace;
              font-size: 12px;
              line-height: 1.4;
              margin: 0;
              padding: 20px;
              background: white;
            }
            .receipt {
              max-width: 300px;
              margin: 0 auto;
            }
            .header {
              text-align: center;
              border-bottom: 2px solid #000;
              padding-bottom: 10px;
              margin-bottom: 15px;
            }
            .company-name {
              font-size: 16px;
              font-weight: bold;
              margin-bottom: 5px;
            }
            .receipt-title {
              font-size: 14px;
              font-weight: bold;
              margin-top: 10px;
            }
            .section {
              margin-bottom: 15px;
            }
            .section-title {
              font-weight: bold;
              border-bottom: 1px solid #000;
              margin-bottom: 5px;
              text-transform: uppercase;
            }
            .row {
              display: flex;
              justify-content: space-between;
              margin-bottom: 3px;
            }
            .row-full {
              margin-bottom: 3px;
            }
            .total {
              border-top: 2px solid #000;
              border-bottom: 2px solid #000;
              padding: 8px 0;
              margin: 15px 0;
              font-weight: bold;
              font-size: 14px;
            }
            .signatures {
              margin-top: 30px;
              border-top: 1px solid #000;
              padding-top: 20px;
            }
            .signature-line {
              border-bottom: 1px solid #000;
              margin: 30px 0 10px 0;
              height: 1px;
            }
            .signature-label {
              text-align: center;
              font-size: 10px;
              margin-top: 5px;
            }
            .footer {
              text-align: center;
              margin-top: 30px;
              font-size: 10px;
              border-top: 1px solid #000;
              padding-top: 10px;
            }
            @media print {
              body { margin: 0; padding: 10px; }
              .no-print { display: none; }
            }
          </style>
        </head>
        <body>
          ${i.innerHTML}
        </body>
      </html>
    `),l.document.close(),l.focus(),l.print(),s&&s())};return e.jsxs("div",{className:"bg-white p-6 rounded-lg",children:[e.jsxs("div",{id:"treasury-transfer-receipt",className:"receipt",children:[e.jsxs("div",{className:"header",children:[e.jsx("div",{className:"company-name",children:"AABB - SISTEMA DE GESTÃO"}),e.jsx("div",{children:"Associação Atlética Banco do Brasil"}),e.jsx("div",{className:"receipt-title",children:"COMPROVANTE DE TRANSFERÊNCIA"}),e.jsx("div",{className:"receipt-title",children:"TESOURARIA"})]}),e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-title",children:"Dados da Transferência"}),e.jsxs("div",{className:"row",children:[e.jsx("span",{children:"ID Transferência:"}),e.jsxs("span",{children:["#",t.transferId.slice(-8).toUpperCase()]})]}),e.jsxs("div",{className:"row",children:[e.jsx("span",{children:"Data/Hora:"}),e.jsx("span",{children:Zt(t.timestamp,"dd/MM/yyyy HH:mm",{locale:cs})})]}),e.jsxs("div",{className:"row",children:[e.jsx("span",{children:"Data Transferência:"}),e.jsx("span",{children:Zt(new Date(t.transferDate),"dd/MM/yyyy",{locale:cs})})]}),e.jsxs("div",{className:"row",children:[e.jsx("span",{children:"Sessão Caixa:"}),e.jsxs("span",{children:["#",t.sessionId.slice(-6).toUpperCase()]})]})]}),e.jsx("div",{className:"total",children:e.jsxs("div",{className:"row",children:[e.jsx("span",{children:"VALOR TRANSFERIDO:"}),e.jsx("span",{children:Te(t.amount)})]})}),e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-title",children:"Autorização"}),e.jsxs("div",{className:"row-full",children:[e.jsx("strong",{children:"Autorizado por:"})," ",t.authorizedBy]}),e.jsxs("div",{className:"row-full",children:[e.jsx("strong",{children:"Operador:"})," ",t.cashierName]}),t.treasuryReceiptNumber&&e.jsxs("div",{className:"row-full",children:[e.jsx("strong",{children:"Comprovante Tesouraria:"})," ",t.treasuryReceiptNumber]})]}),t.notes&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-title",children:"Observações"}),e.jsx("div",{className:"row-full",children:t.notes})]}),e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-title",children:"Informações"}),e.jsx("div",{className:"row-full",style:{fontSize:"10px"},children:"Este comprovante confirma a transferência de valores em dinheiro do caixa operacional para a tesouraria central."}),e.jsx("div",{className:"row-full",style:{fontSize:"10px",marginTop:"5px"},children:"Confira os dados e guarde este comprovante."})]}),e.jsxs("div",{className:"signatures",children:[e.jsx("div",{className:"section-title",children:"Assinaturas"}),e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsx("div",{className:"signature-line"}),e.jsx("div",{className:"signature-label",children:"OPERADOR DE CAIXA"}),e.jsx("div",{className:"signature-label",children:t.cashierName})]}),e.jsxs("div",{style:{marginTop:"25px"},children:[e.jsx("div",{className:"signature-line"}),e.jsx("div",{className:"signature-label",children:"SUPERVISOR/AUTORIZAÇÃO"}),e.jsx("div",{className:"signature-label",children:t.authorizedBy})]}),e.jsxs("div",{style:{marginTop:"25px"},children:[e.jsx("div",{className:"signature-line"}),e.jsx("div",{className:"signature-label",children:"CONFERENTE TESOURARIA"}),e.jsx("div",{className:"signature-label",children:"Nome: ___________________________"})]})]}),e.jsxs("div",{className:"footer",children:[e.jsx("div",{children:"AABB - Sistema de Gestão v1.0"}),e.jsx("div",{children:"Documento gerado automaticamente"}),e.jsx("div",{children:Zt(new Date,"dd/MM/yyyy HH:mm:ss",{locale:cs})})]})]}),e.jsx("div",{className:"flex justify-center mt-6 no-print",children:e.jsxs("button",{onClick:n,className:"bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition-colors flex items-center space-x-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5 4v3H4a2 2 0 00-2 2v3a2 2 0 002 2h1v2a2 2 0 002 2h6a2 2 0 002-2v-2h1a2 2 0 002-2V9a2 2 0 00-2-2h-1V4a2 2 0 00-2-2H7a2 2 0 00-2 2zm8 0H7v3h6V4zm0 8H7v4h6v-4z",clipRule:"evenodd"})}),e.jsx("span",{children:"Imprimir Comprovante"})]})})]})},GD={change:"Troco",expense:"Despesa",transfer:"Transferência",other:"Outros"},YD=({receiptData:t,onPrint:s})=>{const n=()=>{const i=document.getElementById("cash-withdrawal-receipt");if(!i)return;const l=window.open("","_blank");l&&(l.document.write(`
      <html>
        <head>
          <title>Comprovante de Saída de Dinheiro</title>
          <style>
            body {
              font-family: 'Courier New', monospace;
              font-size: 12px;
              line-height: 1.4;
              margin: 0;
              padding: 20px;
              background: white;
            }
            .receipt {
              max-width: 300px;
              margin: 0 auto;
            }
            .header {
              text-align: center;
              border-bottom: 2px solid #000;
              padding-bottom: 10px;
              margin-bottom: 15px;
            }
            .company-name {
              font-size: 16px;
              font-weight: bold;
              margin-bottom: 5px;
            }
            .receipt-title {
              font-size: 14px;
              font-weight: bold;
              margin-top: 10px;
            }
            .section {
              margin-bottom: 15px;
            }
            .section-title {
              font-weight: bold;
              border-bottom: 1px solid #000;
              margin-bottom: 5px;
              text-transform: uppercase;
            }
            .row {
              display: flex;
              justify-content: space-between;
              margin-bottom: 3px;
            }
            .row-full {
              margin-bottom: 3px;
            }
            .total {
              border-top: 2px solid #000;
              border-bottom: 2px solid #000;
              padding: 8px 0;
              margin: 15px 0;
              font-weight: bold;
              font-size: 14px;
            }
            .signatures {
              margin-top: 30px;
              border-top: 1px solid #000;
              padding-top: 20px;
            }
            .signature-line {
              border-bottom: 1px solid #000;
              margin: 30px 0 10px 0;
              height: 1px;
            }
            .signature-label {
              text-align: center;
              font-size: 10px;
              margin-top: 5px;
            }
            .footer {
              text-align: center;
              margin-top: 30px;
              font-size: 10px;
              border-top: 1px solid #000;
              padding-top: 10px;
            }
            .highlight {
              background-color: #f0f0f0;
              padding: 5px;
              border: 1px solid #000;
              margin: 10px 0;
            }
            @media print {
              body { margin: 0; padding: 10px; }
              .no-print { display: none; }
            }
          </style>
        </head>
        <body>
          ${i.innerHTML}
        </body>
      </html>
    `),l.document.close(),l.focus(),l.print(),s&&s())};return e.jsxs("div",{className:"bg-white p-6 rounded-lg",children:[e.jsxs("div",{id:"cash-withdrawal-receipt",className:"receipt",children:[e.jsxs("div",{className:"header",children:[e.jsx("div",{className:"company-name",children:"AABB - SISTEMA DE GESTÃO"}),e.jsx("div",{children:"Associação Atlética Banco do Brasil"}),e.jsx("div",{className:"receipt-title",children:"COMPROVANTE DE SAÍDA"}),e.jsx("div",{className:"receipt-title",children:"DE DINHEIRO"})]}),e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-title",children:"Dados da Operação"}),e.jsxs("div",{className:"row",children:[e.jsx("span",{children:"ID Operação:"}),e.jsxs("span",{children:["#",t.withdrawalId.slice(-8).toUpperCase()]})]}),e.jsxs("div",{className:"row",children:[e.jsx("span",{children:"Data/Hora:"}),e.jsx("span",{children:Zt(t.timestamp,"dd/MM/yyyy HH:mm",{locale:cs})})]}),e.jsxs("div",{className:"row",children:[e.jsx("span",{children:"Sessão Caixa:"}),e.jsxs("span",{children:["#",t.sessionId.slice(-6).toUpperCase()]})]}),e.jsxs("div",{className:"row",children:[e.jsx("span",{children:"Finalidade:"}),e.jsx("span",{children:GD[t.purpose]})]})]}),e.jsx("div",{className:"total",children:e.jsxs("div",{className:"row",children:[e.jsx("span",{children:"VALOR DA SAÍDA:"}),e.jsx("span",{children:Te(t.amount)})]})}),e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-title",children:"Justificativa"}),e.jsx("div",{className:"highlight",children:e.jsx("div",{className:"row-full",children:t.reason})})]}),e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-title",children:"Autorização"}),e.jsxs("div",{className:"row-full",children:[e.jsx("strong",{children:"Autorizado por:"})," ",t.authorizedBy]}),e.jsxs("div",{className:"row-full",children:[e.jsx("strong",{children:"Operador de Caixa:"})," ",t.cashierName]}),t.recipient&&e.jsxs("div",{className:"row-full",children:[e.jsx("strong",{children:"Beneficiário:"})," ",t.recipient]})]}),e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-title",children:"Informações"}),e.jsx("div",{className:"row-full",style:{fontSize:"10px"},children:"Este comprovante documenta a saída de dinheiro do caixa operacional."}),e.jsx("div",{className:"row-full",style:{fontSize:"10px",marginTop:"5px"},children:"Operação devidamente autorizada e registrada no sistema."}),e.jsx("div",{className:"row-full",style:{fontSize:"10px",marginTop:"5px"},children:"Confira os dados e mantenha este comprovante arquivado."})]}),e.jsxs("div",{className:"signatures",children:[e.jsx("div",{className:"section-title",children:"Assinaturas e Confirmações"}),e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsx("div",{className:"signature-line"}),e.jsx("div",{className:"signature-label",children:"OPERADOR DE CAIXA"}),e.jsx("div",{className:"signature-label",children:t.cashierName})]}),e.jsxs("div",{style:{marginTop:"25px"},children:[e.jsx("div",{className:"signature-line"}),e.jsx("div",{className:"signature-label",children:"SUPERVISOR/AUTORIZAÇÃO"}),e.jsx("div",{className:"signature-label",children:t.authorizedBy})]}),t.recipient&&e.jsxs("div",{style:{marginTop:"25px"},children:[e.jsx("div",{className:"signature-line"}),e.jsx("div",{className:"signature-label",children:"BENEFICIÁRIO/RECEBEDOR"}),e.jsx("div",{className:"signature-label",children:t.recipient})]}),e.jsxs("div",{style:{marginTop:"25px"},children:[e.jsx("div",{className:"signature-line"}),e.jsx("div",{className:"signature-label",children:"TESTEMUNHA (se necessário)"}),e.jsx("div",{className:"signature-label",children:"Nome: ___________________________"})]})]}),e.jsxs("div",{className:"footer",children:[e.jsx("div",{children:"AABB - Sistema de Gestão v1.0"}),e.jsx("div",{children:"Documento gerado automaticamente"}),e.jsx("div",{children:Zt(new Date,"dd/MM/yyyy HH:mm:ss",{locale:cs})}),e.jsx("div",{style:{marginTop:"10px",fontSize:"8px"},children:"⚠️ Este documento possui valor legal e deve ser arquivado"})]})]}),e.jsx("div",{className:"flex justify-center mt-6 no-print",children:e.jsxs("button",{onClick:n,className:"bg-orange-600 text-white px-6 py-2 rounded-lg hover:bg-orange-700 transition-colors flex items-center space-x-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5 4v3H4a2 2 0 00-2 2v3a2 2 0 002 2h1v2a2 2 0 002 2h6a2 2 0 002-2v-2h1a2 2 0 002-2V9a2 2 0 00-2-2h-1V4a2 2 0 00-2-2H7a2 2 0 00-2 2zm8 0H7v3h6V4zm0 8H7v4h6v-4z",clipRule:"evenodd"})}),e.jsx("span",{children:"Imprimir Comprovante"})]})})]})},XD=({transactions:t,onAddWithdrawal:s,onExportReport:n,isCashSessionOpen:i=!1})=>{const[l,c]=b.useState("all"),[u,h]=b.useState("all"),f=j=>{var N,_;return(N=j.notes)!=null&&N.includes("[SAÍDA]")?"cash_withdrawal":(_=j.notes)!=null&&_.includes("[TRANSFERÊNCIA TESOURARIA]")?"treasury_transfer":j.transaction_type},p=t.filter(j=>{const N=f(j),_=l==="all"||N===l,C=u==="all"||j.payment_method===u;return _&&C}),g={entradas:t.filter(j=>{const N=f(j);return["sale","adjustment"].includes(N)&&j.amount>0}).reduce((j,N)=>j+N.amount,0),saidas:t.filter(j=>{const N=f(j);return["refund","cash_withdrawal","treasury_transfer"].includes(N)||N==="adjustment"&&j.amount<0}).reduce((j,N)=>j+Math.abs(N.amount),0),saldo:0};g.saldo=g.entradas-g.saidas;const y=j=>{switch(j){case"sale":return e.jsx(wi,{className:"h-4 w-4 text-green-600"});case"refund":return e.jsx(av,{className:"h-4 w-4 text-red-600"});case"adjustment":return e.jsx(Jc,{className:"h-4 w-4 text-blue-600"});case"cash_withdrawal":return e.jsx(ji,{className:"h-4 w-4 text-orange-600"});case"treasury_transfer":return e.jsx(Jc,{className:"h-4 w-4 text-purple-600"});default:return e.jsx(Gt,{className:"h-4 w-4 text-gray-600"})}},v=(j,N)=>j==="sale"||j==="adjustment"&&N>0?"text-green-600":["refund","cash_withdrawal","treasury_transfer"].includes(j)||j==="adjustment"&&N<0?"text-red-600":"text-gray-600";return e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Movimentação do Dia"}),e.jsx("p",{className:"text-sm text-gray-600",children:Zt(new Date,"dd 'de' MMMM 'de' yyyy",{locale:cs})})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:s,disabled:!i,className:`px-4 py-2 rounded-lg flex items-center space-x-2 text-sm transition-colors ${i?"bg-orange-600 text-white hover:bg-orange-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,title:i?"Registrar saída de dinheiro":"Caixa deve estar aberto para realizar saídas de dinheiro",children:[e.jsx(ji,{className:"h-4 w-4"}),e.jsx("span",{children:"Saída de Dinheiro"})]}),e.jsxs("button",{onClick:n,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2 text-sm",children:[e.jsx(Iw,{className:"h-4 w-4"}),e.jsx("span",{children:"Exportar"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-800",children:"Entradas"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:Te(g.entradas)})]}),e.jsx(wi,{className:"h-8 w-8 text-green-600"})]})}),e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-800",children:"Saídas"}),e.jsx("p",{className:"text-2xl font-bold text-red-900",children:Te(g.saidas)})]}),e.jsx(av,{className:"h-8 w-8 text-red-600"})]})}),e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:`border rounded-lg p-4 ${g.saldo>=0?"bg-blue-50 border-blue-200":"bg-orange-50 border-orange-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${g.saldo>=0?"text-blue-800":"text-orange-800"}`,children:"Saldo"}),e.jsx("p",{className:`text-2xl font-bold ${g.saldo>=0?"text-blue-900":"text-orange-900"}`,children:Te(Math.abs(g.saldo))})]}),e.jsx(Gt,{className:`h-8 w-8 ${g.saldo>=0?"text-blue-600":"text-orange-600"}`})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 space-y-3 sm:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("select",{value:l,onChange:j=>c(j.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",title:"Filtrar por tipo de transação","aria-label":"Filtro por tipo de transação",children:[e.jsx("option",{value:"all",children:"Todos os Tipos"}),e.jsx("option",{value:"sale",children:"Vendas"}),e.jsx("option",{value:"refund",children:"Estornos"}),e.jsx("option",{value:"adjustment",children:"Ajustes"}),e.jsx("option",{value:"cash_withdrawal",children:"Saídas de Dinheiro"}),e.jsx("option",{value:"treasury_transfer",children:"Transferências"})]}),e.jsxs("select",{value:u,onChange:j=>h(j.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",title:"Filtrar por método de pagamento","aria-label":"Filtro por método de pagamento",children:[e.jsx("option",{value:"all",children:"Todos os Métodos"}),e.jsx("option",{value:"dinheiro",children:"Dinheiro"}),e.jsx("option",{value:"cartao_debito",children:"Cartão de Débito"}),e.jsx("option",{value:"cartao_credito",children:"Cartão de Crédito"}),e.jsx("option",{value:"pix",children:"PIX"}),e.jsx("option",{value:"transferencia",children:"Transferência"})]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[p.length," de ",t.length," transações"]})]}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:p.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Nenhuma transação encontrada"})}):p.map(j=>{var _,C;const N=f(j);return e.jsxs(Ne.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[y(N),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[j1[N]||"Transação",j.comanda&&e.jsxs("span",{className:"ml-2 text-blue-600",children:["- Comanda #",jd(j.comanda.id)]}),!j.comanda&&j.notes&&(j.notes.includes("Pedido Balcão")||j.notes.includes("Pedido de balcão"))&&e.jsxs("span",{className:"ml-2 text-green-600",children:["- Pedido Balcão ",x1(j.notes)]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-600",children:[e.jsx(Ht,{className:"h-3 w-3"}),e.jsx("span",{children:Zt(new Date(j.processed_at),"HH:mm",{locale:cs})}),e.jsx("span",{children:"•"}),e.jsx("span",{children:_d[j.payment_method]}),((_=j.comanda)==null?void 0:_.customer_name)&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx("span",{children:j.comanda.customer_name})]}),((C=j.comanda)==null?void 0:C.table_number)&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Mesa ",j.comanda.table_number]})]}),j.processed_by_employee&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx(tr,{className:"h-3 w-3"}),e.jsx("span",{children:j.processed_by_employee.name})]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`text-sm font-bold ${v(N,j.amount)}`,children:[["refund","cash_withdrawal","treasury_transfer"].includes(N)||N==="adjustment"&&j.amount<0?"-":"+",Te(Math.abs(j.amount))]}),j.reference_number&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Ref: ",j.reference_number]})]})]},j.id)})})]})},KD=({receiptData:t,onPrint:s})=>{var y;const{order:n,paymentMethod:i,amountPaid:l,cashierName:c,referenceNumber:u,timestamp:h}=t,f=v=>({dinheiro:"Dinheiro",cartao_debito:"Cartão Débito",cartao_credito:"Cartão Crédito",pix:"PIX",transferencia:"Transferência"})[v]||v,p=()=>{s&&s();const v=window.open("","_blank");v&&(v.document.write(g()),v.document.close(),v.print(),v.close())},g=()=>{var v;return`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Comprovante - ${n.order_number.toString().padStart(4,"0")}</title>
        <style>
          body {
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.4;
            margin: 0;
            padding: 20px;
            width: 300px;
          }
          .header {
            text-align: center;
            border-bottom: 2px solid #000;
            padding-bottom: 10px;
            margin-bottom: 15px;
          }
          .title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 5px;
          }
          .subtitle {
            font-size: 10px;
            color: #666;
          }
          .section {
            margin-bottom: 15px;
          }
          .section-title {
            font-weight: bold;
            border-bottom: 1px solid #ccc;
            padding-bottom: 2px;
            margin-bottom: 5px;
          }
          .item-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 3px;
          }
          .item-name {
            flex: 1;
          }
          .item-qty {
            width: 30px;
            text-align: center;
          }
          .item-price {
            width: 60px;
            text-align: right;
          }
          .total-row {
            display: flex;
            justify-content: space-between;
            font-weight: bold;
            border-top: 1px solid #000;
            padding-top: 5px;
            margin-top: 10px;
          }
          .footer {
            text-align: center;
            border-top: 2px solid #000;
            padding-top: 10px;
            margin-top: 15px;
            font-size: 10px;
          }
          .dashed-line {
            border-top: 1px dashed #666;
            margin: 10px 0;
          }
          .payment-status {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 10px;
            text-align: center;
            font-weight: bold;
            margin: 15px 0;
          }
          @media print {
            body { margin: 0; padding: 10px; }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <div class="title">CLUBE SOCIAL</div>
          <div class="subtitle">Bar & Restaurante</div>
          <div class="subtitle">CNPJ: 12.345.678/0001-90</div>
        </div>

        <div class="section">
          <div class="section-title">COMPROVANTE DE PAGAMENTO</div>
          <div>Pedido: #${n.order_number.toString().padStart(4,"0")}</div>
          <div>Data Pedido: ${new Date(n.created_at).toLocaleDateString("pt-BR")}</div>
          <div>Hora Pedido: ${new Date(n.created_at).toLocaleTimeString("pt-BR")}</div>
          <div>Data Pagto: ${h.toLocaleDateString("pt-BR")}</div>
          <div>Hora Pagto: ${h.toLocaleTimeString("pt-BR")}</div>
          <div>Atendente: ${n.employee_name||"N/A"}</div>
          <div>Caixa: ${c}</div>
          ${n.customer_name?`<div>Cliente: ${n.customer_name}</div>`:""}
          ${n.customer_phone?`<div>Telefone: ${n.customer_phone}</div>`:""}
        </div>

        <div class="dashed-line"></div>

        <div class="section">
          <div class="section-title">ITENS VENDIDOS</div>
          ${((v=n.items)==null?void 0:v.map(j=>{var N;return`
            <div class="item-row">
              <div class="item-name">${((N=j.menu_item)==null?void 0:N.name)||"Item"}</div>
              <div class="item-qty">${j.quantity}x</div>
              <div class="item-price">R$ ${(j.unit_price*j.quantity).toFixed(2)}</div>
            </div>
            ${j.notes?`<div style="font-size: 10px; color: #666; margin-left: 10px;">Obs: ${j.notes}</div>`:""}
          `}).join(""))||"<div>Nenhum item encontrado</div>"}
        </div>

        <div class="dashed-line"></div>

        <div class="section">
          <div class="item-row">
            <div>Subtotal:</div>
            <div>R$ ${n.total_amount.toFixed(2)}</div>
          </div>
          ${n.discount_amount&&n.discount_amount>0?`
            <div class="item-row" style="color: #666;">
              <div>Desconto:</div>
              <div>-R$ ${n.discount_amount.toFixed(2)}</div>
            </div>
          `:""}
          <div class="total-row">
            <div>TOTAL PAGO:</div>
            <div>R$ ${l.toFixed(2)}</div>
          </div>
        </div>

        <div class="dashed-line"></div>

        <div class="section">
          <div class="section-title">INFORMAÇÕES DE PAGAMENTO</div>
          <div>Forma de Pagamento: ${f(i)}</div>
          <div>Valor Pago: R$ ${l.toFixed(2)}</div>
          ${u?`<div>Ref. Transação: ${u}</div>`:""}
          <div>Status: PAGO ✓</div>
        </div>

        ${n.notes?`
          <div class="dashed-line"></div>
          <div class="section">
            <div class="section-title">OBSERVAÇÕES DO PEDIDO</div>
            <div>${n.notes}</div>
          </div>
        `:""}

        ${n.customer_notes?`
          <div class="dashed-line"></div>
          <div class="section">
            <div class="section-title">OBSERVAÇÕES DO CLIENTE</div>
            <div>${n.customer_notes}</div>
          </div>
        `:""}

        <div class="payment-status">
          <div>✅ PAGAMENTO APROVADO ✅</div>
          <div style="margin-top: 5px; font-size: 10px;">
            Transação processada com sucesso
          </div>
        </div>

        <div class="footer">
          <div>Obrigado pela preferência!</div>
          <div>Volte sempre!</div>
          <div style="margin-top: 10px;">
            ${n.customer_name?`Pontos acumulados: +${Math.floor(n.final_amount/10)}`:"Cadastre-se e ganhe pontos!"}
          </div>
          <div style="margin-top: 10px;">
            ID: ${n.id.substring(0,8).toUpperCase()}
          </div>
        </div>
      </body>
      </html>
    `};return e.jsxs("div",{className:"payment-receipt",children:[e.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6 max-w-sm mx-auto font-mono text-sm",children:[e.jsxs("div",{className:"text-center border-b-2 border-black pb-3 mb-4",children:[e.jsx("div",{className:"font-bold text-lg",children:"CLUBE SOCIAL"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Bar & Restaurante"}),e.jsx("div",{className:"text-xs text-gray-600",children:"CNPJ: 12.345.678/0001-90"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"font-bold border-b border-gray-400 pb-1 mb-2",children:"COMPROVANTE DE PAGAMENTO"}),e.jsxs("div",{children:["Pedido: #",n.order_number.toString().padStart(4,"0")]}),e.jsxs("div",{children:["Data Pedido: ",new Date(n.created_at).toLocaleDateString("pt-BR")]}),e.jsxs("div",{children:["Hora Pedido: ",new Date(n.created_at).toLocaleTimeString("pt-BR")]}),e.jsxs("div",{children:["Data Pagto: ",h.toLocaleDateString("pt-BR")]}),e.jsxs("div",{children:["Hora Pagto: ",h.toLocaleTimeString("pt-BR")]}),e.jsxs("div",{children:["Atendente: ",n.employee_name||"N/A"]}),e.jsxs("div",{children:["Caixa: ",c]}),n.customer_name&&e.jsxs("div",{children:["Cliente: ",n.customer_name]}),n.customer_phone&&e.jsxs("div",{children:["Telefone: ",n.customer_phone]})]}),e.jsxs("div",{className:"border-t border-dashed border-gray-400 pt-3 mb-4",children:[e.jsx("div",{className:"font-bold border-b border-gray-400 pb-1 mb-2",children:"ITENS VENDIDOS"}),((y=n.items)==null?void 0:y.map((v,j)=>{var N;return e.jsxs("div",{className:"mb-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"flex-1",children:((N=v.menu_item)==null?void 0:N.name)||"Item"}),e.jsxs("span",{className:"w-8 text-center",children:[v.quantity,"x"]}),e.jsxs("span",{className:"w-16 text-right",children:["R$ ",(v.unit_price*v.quantity).toFixed(2)]})]}),v.notes&&e.jsxs("div",{className:"text-xs text-gray-600 ml-2",children:["Obs: ",v.notes]})]},j)}))||e.jsx("div",{className:"text-gray-500 text-center py-2",children:"Nenhum item encontrado"})]}),e.jsxs("div",{className:"border-t border-dashed border-gray-400 pt-3 mb-4",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{children:["R$ ",n.total_amount.toFixed(2)]})]}),n.discount_amount&&n.discount_amount>0&&e.jsxs("div",{className:"flex justify-between mb-1 text-gray-600",children:[e.jsx("span",{children:"Desconto:"}),e.jsxs("span",{children:["-R$ ",n.discount_amount.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between font-bold border-t border-black pt-2",children:[e.jsx("span",{children:"TOTAL PAGO:"}),e.jsxs("span",{children:["R$ ",l.toFixed(2)]})]})]}),e.jsxs("div",{className:"border-t border-dashed border-gray-400 pt-3 mb-4",children:[e.jsx("div",{className:"font-bold border-b border-gray-400 pb-1 mb-2",children:"INFORMAÇÕES DE PAGAMENTO"}),e.jsxs("div",{children:["Forma: ",f(i)]}),e.jsxs("div",{children:["Valor Pago: ",Te(l)]}),u&&e.jsxs("div",{children:["Ref.: ",u]}),e.jsx("div",{children:"Status: PAGO ✓"})]}),n.notes&&e.jsxs("div",{className:"border-t border-dashed border-gray-400 pt-3 mb-4",children:[e.jsx("div",{className:"font-bold border-b border-gray-400 pb-1 mb-2",children:"OBSERVAÇÕES DO PEDIDO"}),e.jsx("div",{children:n.notes})]}),n.customer_notes&&e.jsxs("div",{className:"border-t border-dashed border-gray-400 pt-3 mb-4",children:[e.jsx("div",{className:"font-bold border-b border-gray-400 pb-1 mb-2",children:"OBSERVAÇÕES DO CLIENTE"}),e.jsx("div",{children:n.customer_notes})]}),e.jsxs("div",{className:"bg-green-100 border border-green-300 text-green-800 p-3 text-center font-bold mb-4",children:[e.jsx("div",{children:"✅ PAGAMENTO APROVADO ✅"}),e.jsx("div",{className:"text-xs mt-1",children:"Transação processada com sucesso"})]}),e.jsxs("div",{className:"text-center border-t-2 border-black pt-3 text-xs",children:[e.jsx("div",{children:"Obrigado pela preferência!"}),e.jsx("div",{children:"Volte sempre!"}),e.jsx("div",{className:"mt-2",children:n.customer_name?`Pontos acumulados: +${Math.floor(n.final_amount/10)}`:"Cadastre-se e ganhe pontos!"}),e.jsxs("div",{className:"mt-2",children:["ID: ",n.id.substring(0,8).toUpperCase()]})]})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("button",{onClick:p,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Imprimir Comprovante"})})]})},WD=({comandas:t,onPayComanda:s,disabled:n=!1})=>{const i=c=>{const u=new Date,h=new Date(c),f=Math.floor((u.getTime()-h.getTime())/(1e3*60));if(f<60)return`${f}min`;const p=Math.floor(f/60),g=f%60;return`${p}h ${g}min`},l=c=>{const u=Math.floor((new Date().getTime()-new Date(c).getTime())/6e4);return u>120?"text-red-600 bg-red-50":u>60?"text-orange-600 bg-orange-50":"text-green-600 bg-green-50"};return t.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(td,{className:"h-6 w-6 text-green-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Comandas Pendentes de Pagamento"})]}),e.jsxs("div",{className:"text-center py-8",children:[e.jsx(td,{className:"h-12 w-12 text-green-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg font-medium",children:"Todas as comandas foram pagas!"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Não há comandas aguardando pagamento no momento."})]})]}):e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ht,{className:"h-6 w-6 text-orange-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Comandas Pendentes de Pagamento"}),e.jsx("span",{className:"bg-orange-100 text-orange-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:t.length})]}),n&&e.jsxs("div",{className:"flex items-center space-x-2 text-amber-600",children:[e.jsx(ed,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Abra o caixa para processar pagamentos"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(c=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"flex items-center space-x-2",children:c.table?e.jsxs(e.Fragment,{children:[e.jsx(cl,{className:"h-4 w-4 text-gray-600"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["Mesa ",c.table.number]})]}):e.jsxs(e.Fragment,{children:[e.jsx(ir,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Balcão"})]})}),e.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${l(c.opened_at)}`,children:i(c.opened_at)})]}),c.customer_name&&e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(ha,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:c.customer_name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",c.people_count," pessoas)"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(rr,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:new Date(c.opened_at).toLocaleString("pt-BR")})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:[c.items.length," ",c.items.length===1?"item":"itens"]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-gray-900",children:Te(c.total)}),e.jsx("p",{className:"text-xs text-gray-600",children:"Total da comanda"})]}),e.jsx("button",{onClick:()=>s(c),disabled:n,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:"Receber"})]})]},c.id))})]})},QD=[{value:"dinheiro",label:"Dinheiro",icon:"💵"},{value:"cartao_debito",label:"Cartão Débito",icon:"💳"},{value:"cartao_credito",label:"Cartão Crédito",icon:"💳"},{value:"pix",label:"PIX",icon:"📱"},{value:"vale_refeicao",label:"Vale Refeição",icon:"🎫"},{value:"credito_conta",label:"Crédito em Conta",icon:"👤"}],ZD=({isOpen:t,comanda:s,onClose:n,onConfirm:i,loading:l=!1})=>{const[c,u]=b.useState("dinheiro"),[h,f]=b.useState("");if(!t||!s)return null;const p=async()=>{await i(c,h.trim()||void 0)},g=y=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(y);return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ir,{className:"w-6 h-6 text-green-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Processar Pagamento"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Comanda #",jd(s.id),s.table&&` - Mesa ${s.table.number}`]})]})]}),e.jsx("button",{onClick:n,disabled:l,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(dt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Detalhes da Comanda"}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Cliente"}),e.jsx("p",{className:"font-medium",children:s.customer_name||"Cliente"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Mesa"}),e.jsx("p",{className:"font-medium",children:s.table?`Mesa ${s.table.number}`:"Balcão"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pessoas"}),e.jsx("p",{className:"font-medium",children:s.people_count||1})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Aberta em"}),e.jsx("p",{className:"font-medium",children:new Date(s.opened_at||s.created_at||"").toLocaleString("pt-BR")})]})]}),s.items&&s.items.length>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Itens (",s.items.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:s.items.map((y,v)=>e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("span",{children:[y.quantity,"x ",y.product_name]}),e.jsx("span",{className:"font-medium",children:g(y.total_price)})]},y.id))})]}),e.jsx("div",{className:"border-t pt-3 mt-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Total"}),e.jsx("span",{className:"text-2xl font-bold text-green-600",children:g(s.total||0)})]})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Método de Pagamento"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:QD.map(y=>e.jsx("button",{onClick:()=>u(y.value),disabled:l,className:`p-4 rounded-lg border-2 transition-all ${c===y.value?"border-green-500 bg-green-50 text-green-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:y.icon}),e.jsx("span",{className:"text-sm font-medium text-center",children:y.label})]})},y.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observações (opcional)"}),e.jsx("textarea",{value:h,onChange:y=>f(y.target.value),disabled:l,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Adicione observações sobre o pagamento..."})]})]}),e.jsx("div",{className:"border-t bg-gray-50 p-6",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:n,disabled:l,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancelar"}),e.jsx("button",{onClick:p,disabled:l,className:"flex-1 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Gt,{className:"w-4 h-4"}),"Confirmar Pagamento"]})})]})})]})})},JD=()=>{const{user:t}=as(),s=sr(),{currentSession:n,pendingComandas:i,todaysSummary:l,todaysTransactions:c,loading:u,error:h,openCashSession:f,closeCashSession:p,processComandaPayment:g,processCashWithdrawal:y,processTreasuryTransfer:v}=f0(),{pendingOrders:j,processPayment:N}=wd(),[_,C]=b.useState(!1),[R,S]=b.useState(!1),[k,E]=b.useState(!1),[w,M]=b.useState(!1),[z,U]=b.useState(!1),[H,V]=b.useState(!1),[Q,X]=b.useState(!1),[re,pe]=b.useState(!1),[$,D]=b.useState(null),[P,B]=b.useState(null),[K,A]=b.useState(!1),[q,L]=b.useState("dinheiro"),[W,oe]=b.useState(!1),[me,fe]=b.useState(null),[ie,de]=b.useState(null),[Ee,Ue]=b.useState(null),[je,Be]=b.useState(!0),[De,Je]=b.useState(!1),[$t,ke]=b.useState(0),$e=async xe=>{if(!n){alert("É necessário ter uma sessão de caixa aberta para processar pagamentos.");return}D(xe),E(!0)},Nt=xe=>{if(!n){alert("É necessário ter uma sessão de caixa aberta para processar pagamentos.");return}B(xe),A(!0)},ds=async(xe,We)=>{if(!(!P||!n))try{oe(!0),await g({comanda_id:P.id,payment_method:xe,amount:P.total||0,notes:We}),console.log("✅ Pagamento da comanda processado com sucesso"),A(!1),B(null)}catch(Z){console.error("❌ Erro ao processar pagamento da comanda:",Z),alert("Erro ao processar pagamento da comanda")}finally{oe(!1)}},I=async()=>{if(!(!$||!n)){oe(!0);try{await N({order_id:$.id,payment_method:q,cash_session_id:n.id,amount_paid:$.final_amount}),fe({order:$,paymentMethod:q,amountPaid:$.final_amount,cashierName:(t==null?void 0:t.name)||(t==null?void 0:t.email)||"Operador de Caixa",timestamp:new Date}),E(!1),M(!0),D(null)}catch(xe){console.error("Erro ao processar pagamento:",xe),alert("Erro ao processar pagamento. Tente novamente.")}finally{oe(!1)}}},ee=()=>{M(!1),fe(null)},le=async xe=>{try{const We=await y(xe);Ue({withdrawalId:We,amount:xe.amount,reason:xe.reason,authorizedBy:xe.authorized_by,recipient:xe.recipient,purpose:xe.purpose,cashierName:(t==null?void 0:t.name)||(t==null?void 0:t.email)||"Operador de Caixa",timestamp:new Date,sessionId:(n==null?void 0:n.id)||""}),U(!1),pe(!0)}catch(We){console.error("Erro ao processar saída de dinheiro:",We),alert("Erro ao processar saída de dinheiro. Tente novamente.")}},be=async xe=>{try{const We=await v(xe);de({transferId:We,amount:xe.amount,transferDate:xe.transfer_date,authorizedBy:xe.authorized_by,treasuryReceiptNumber:xe.treasury_receipt_number,notes:xe.notes,cashierName:(t==null?void 0:t.name)||(t==null?void 0:t.email)||"Operador de Caixa",timestamp:new Date,sessionId:(n==null?void 0:n.id)||""}),V(!1),X(!0)}catch(We){console.error("Erro ao processar transferência:",We),alert("Erro ao processar transferência. Tente novamente.")}},ye=()=>{U(!0)},ge=()=>{console.log("Exportando relatório...")},we=()=>{X(!1),de(null)},Re=()=>{pe(!1),Ue(null)};b.useEffect(()=>{const xe=j.length;if(xe>$t&&$t>0){Je(!0),Be(!0);const We=setTimeout(()=>{Je(!1)},1e4);return()=>clearTimeout(We)}ke(xe)},[j.length,$t]);const qe=()=>{Be(!1),Je(!1);const xe=document.getElementById("pending-orders-section");xe&&xe.scrollIntoView({behavior:"smooth"})},tt=()=>{Be(!1),Je(!1)};return u?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):h?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ws,{className:"h-6 w-6 text-red-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-red-800",children:"Erro no Sistema"}),e.jsx("p",{className:"text-red-600",children:h})]})]})})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestão de Caixa"}),e.jsx("p",{className:"text-gray-600 mt-1",children:new Date().toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>s("/cash/movement"),className:"bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 flex items-center space-x-2 transition-colors",children:[e.jsx(Gw,{className:"h-5 w-5"}),e.jsx("span",{children:"Movimento"})]}),n?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>V(!0),className:"bg-purple-600 text-white px-4 py-3 rounded-lg hover:bg-purple-700 flex items-center space-x-2 transition-colors",children:[e.jsx(Jc,{className:"h-5 w-5"}),e.jsx("span",{children:"Transferência"})]}),e.jsxs("button",{onClick:()=>S(!0),className:"bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 flex items-center space-x-2 transition-colors",children:[e.jsx(Gt,{className:"h-5 w-5"}),e.jsx("span",{children:"Fechar Caixa"})]})]}):e.jsxs("button",{onClick:()=>C(!0),className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 flex items-center space-x-2 transition-colors",children:[e.jsx(Es,{className:"h-5 w-5"}),e.jsx("span",{children:"Abrir Caixa"})]})]})]}),n?e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:e.jsx(Gt,{className:"h-8 w-8 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-green-800",children:"Caixa Aberto"}),e.jsxs("p",{className:"text-green-600",children:["Aberto às ",new Date(n.opened_at).toLocaleTimeString("pt-BR")]}),e.jsxs("p",{className:"text-sm text-green-600",children:["Valor inicial: ",Te(n.opening_amount)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-green-800",children:Te(n.expected_amount)}),e.jsx("p",{className:"text-sm text-green-600",children:"Valor esperado"})]})]})}):e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-8",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-yellow-100 p-3 rounded-full",children:e.jsx(Ws,{className:"h-8 w-8 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-yellow-800",children:"Caixa Fechado"}),e.jsx("p",{className:"text-yellow-600",children:"É necessário abrir o caixa para processar pagamentos"})]})]})}),j.length>0&&je&&e.jsx("div",{className:`mb-8 transition-all duration-300 ${De?"animate-pulse":""}`,children:e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 border-2 border-orange-300 rounded-lg p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`p-3 rounded-full ${De?"bg-red-200 animate-bounce":"bg-orange-100"}`,children:e.jsxs("div",{className:"relative",children:[e.jsx(ef,{className:`h-8 w-8 ${De?"text-red-600":"text-orange-600"}`}),j.length>0&&e.jsx("div",{className:`absolute -top-2 -right-2 h-6 w-6 rounded-full flex items-center justify-center text-xs font-bold text-white ${De?"bg-red-500 animate-ping":"bg-orange-500"}`,children:j.length})]})}),e.jsxs("div",{children:[e.jsxs("h3",{className:`text-xl font-bold flex items-center space-x-2 ${De?"text-red-800":"text-orange-800"}`,children:[e.jsx("span",{children:"Pedidos Aguardando Pagamento"}),De&&e.jsx(s0,{className:"h-5 w-5 text-red-600 animate-bounce"})]}),e.jsxs("p",{className:`${De?"text-red-600":"text-orange-600"} font-medium`,children:[j.length," ",j.length===1?"pedido pendente":"pedidos pendentes"]}),e.jsx("div",{className:"mt-2 text-sm text-gray-700",children:e.jsxs("p",{children:["Valor total: ",e.jsx("span",{className:"font-semibold text-green-600",children:Te(j.reduce((xe,We)=>xe+We.final_amount,0))})]})})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:qe,className:`px-6 py-3 rounded-lg font-medium flex items-center space-x-2 transition-all duration-200 ${De?"bg-red-600 hover:bg-red-700 text-white shadow-lg transform hover:scale-105":"bg-orange-600 hover:bg-orange-700 text-white"}`,children:[e.jsx(ki,{className:"h-5 w-5"}),e.jsx("span",{children:"Ver Pedidos"})]}),e.jsx("button",{onClick:tt,className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 transition-colors",title:"Dispensar alerta","aria-label":"Dispensar alerta",children:e.jsx(dt,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-orange-200",children:[e.jsx("h4",{className:"text-sm font-medium text-orange-800 mb-3",children:"Pedidos mais recentes:"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:j.slice(0,3).map(xe=>e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-orange-200 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("span",{className:"font-bold text-gray-900",children:["#",xe.order_number.toString().padStart(4,"0")]}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(xe.created_at).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]}),xe.customer_name&&e.jsx("p",{className:"text-sm text-gray-700 mb-1 truncate",children:xe.customer_name}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[(xe.items||[]).length," ",(xe.items||[]).length===1?"item":"itens"]}),e.jsx("span",{className:"font-bold text-green-600",children:Te(xe.final_amount)})]})]},xe.id))}),j.length>3&&e.jsxs("p",{className:"text-sm text-orange-600 mt-3 text-center",children:["+",j.length-3," pedidos adicionais aguardando pagamento"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:e.jsx(wi,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Vendas Hoje"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Te(l.total_sales)})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-purple-100 p-3 rounded-full",children:e.jsx(nk,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Transações"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.total_transactions})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:e.jsx(Fw,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Ticket Médio"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Te(l.avg_ticket)})]})]})}),e.jsx("div",{className:`bg-white rounded-lg shadow p-6 relative ${i.length>0?"ring-2 ring-orange-300":""}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-3 rounded-full ${i.length>0,"bg-orange-100"}`,children:e.jsx(Ht,{className:`h-6 w-6 ${i.length>0,"text-orange-600"}`})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Comandas Pendentes"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.length})]}),i.length>0&&e.jsx("div",{className:"absolute -top-2 -right-2 h-6 w-6 bg-orange-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold animate-pulse",children:"!"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Vendas por Método de Pagamento"}),e.jsx("div",{className:"space-y-4",children:l.by_payment_method.map(xe=>{const We=xe.payment_method==="dinheiro"?gA:xe.payment_method==="pix"?Qw:ir;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(We,{className:"h-5 w-5 text-gray-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:_d[xe.payment_method]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:Te(xe.amount)}),e.jsxs("p",{className:"text-xs text-gray-600",children:[xe.percentage.toFixed(1),"%"]})]})]},xe.payment_method)})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance por Funcionário"}),e.jsx("div",{className:"space-y-4",children:l.by_employee.map(xe=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gray-100 p-2 rounded-full",children:e.jsx(ha,{className:"h-4 w-4 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:xe.employee_name}),e.jsxs("p",{className:"text-xs text-gray-600",children:[xe.transaction_count," transações"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:Te(xe.total_sales)}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Média: ",Te(xe.avg_ticket)]})]})]},xe.employee_id))})]})]}),e.jsx(XD,{transactions:c,onAddWithdrawal:ye,onExportReport:ge,isCashSessionOpen:(n==null?void 0:n.status)==="open"}),e.jsx("div",{className:"mb-8",children:e.jsx(WD,{comandas:i,onPayComanda:Nt,disabled:!n||W})}),e.jsxs("div",{id:"pending-orders-section",className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(el,{className:"h-6 w-6 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pedidos de Balcão Aguardando Pagamento"}),e.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:j.length})]}),j.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(el,{className:"h-12 w-12 text-green-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg font-medium",children:"Todos os pedidos foram pagos!"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Não há pedidos de balcão aguardando pagamento."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:j.map(xe=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["#",xe.order_number.toString().padStart(4,"0")]}),e.jsx("span",{className:"bg-yellow-100 text-yellow-800 text-xs font-medium px-2 py-1 rounded-full",children:"Aguardando Pagamento"})]}),e.jsx("span",{className:"text-sm text-gray-500",children:new Date(xe.created_at).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]}),xe.customer_name&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:xe.customer_name}),xe.customer_phone&&e.jsx("p",{className:"text-xs text-gray-600",children:xe.customer_phone})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-700 mb-1",children:[(xe.items||[]).length," ",(xe.items||[]).length===1?"item":"itens"]}),e.jsxs("div",{className:"space-y-1",children:[(xe.items||[]).slice(0,3).map((We,Z)=>{var Ae;return e.jsxs("p",{className:"text-xs text-gray-600",children:[We.quantity,"x ",((Ae=We.menu_item)==null?void 0:Ae.name)||"Item"]},Z)}),(xe.items||[]).length>3&&e.jsxs("p",{className:"text-xs text-gray-500 italic",children:["+",(xe.items||[]).length-3," mais..."]})]})]}),xe.customer_notes&&e.jsx("div",{className:"mb-3 p-2 bg-yellow-50 rounded border",children:e.jsx("p",{className:"text-xs text-yellow-800",children:xe.customer_notes})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-lg font-bold text-green-600",children:Te(xe.final_amount)}),e.jsx("button",{onClick:()=>$e(xe),disabled:!n,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:"Receber Pagamento"})]})]},xe.id))})]}),e.jsx(UD,{isOpen:_,onClose:()=>C(!1),onOpenCash:f}),n&&e.jsx(qD,{isOpen:R,onClose:()=>S(!1),session:n,onCloseCash:p}),k&&$&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-96 max-h-screen overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Receber Pagamento - #",$.order_number.toString().padStart(4,"0")]}),e.jsx("button",{onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-600","aria-label":"Fechar modal",children:e.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Resumo do Pedido"}),$.customer_name&&e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Cliente: ",$.customer_name]}),e.jsxs("div",{className:"space-y-1 text-sm",children:[($.items||[]).map((xe,We)=>{var Z;return e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[xe.quantity,"x ",(Z=xe.menu_item)==null?void 0:Z.name]}),e.jsx("span",{children:Te(xe.unit_price*xe.quantity)})]},We)}),($.discount_amount||0)>0&&e.jsxs("div",{className:"flex justify-between text-green-600 border-t pt-1",children:[e.jsx("span",{children:"Desconto:"}),e.jsxs("span",{children:["-",Te($.discount_amount||0)]})]}),e.jsxs("div",{className:"border-t pt-2 flex justify-between font-medium",children:[e.jsx("span",{children:"Total:"}),e.jsx("span",{children:Te($.final_amount)})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Método de Pagamento"}),e.jsxs("select",{value:q,onChange:xe=>L(xe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Método de pagamento",children:[e.jsx("option",{value:"dinheiro",children:"Dinheiro"}),e.jsx("option",{value:"cartao_debito",children:"Cartão de Débito"}),e.jsx("option",{value:"cartao_credito",children:"Cartão de Crédito"}),e.jsx("option",{value:"pix",children:"PIX"}),e.jsx("option",{value:"transferencia",children:"Transferência"})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>E(!1),className:"flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:I,disabled:W||!n,className:"flex-1 bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:W?"Processando...":"Processar e Imprimir"})]})]})}),e.jsx(ZD,{isOpen:K,comanda:P,onClose:()=>{A(!1),B(null)},onConfirm:ds,loading:W}),w&&me&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 sticky top-0 bg-white pb-4 border-b",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pagamento Processado!"})]}),e.jsx("button",{onClick:ee,className:"text-gray-400 hover:text-gray-600",title:"Fechar modal de comprovante","aria-label":"Fechar modal de comprovante",children:e.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),e.jsxs("div",{className:"mb-6 text-center",children:[e.jsxs("p",{className:"text-gray-600 mb-2",children:["Pagamento de #",me.order.order_number.toString().padStart(4,"0")," processado com sucesso!"]}),e.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Comprovante de pagamento gerado"})]}),e.jsx("div",{className:"mb-6",children:e.jsx(KD,{receiptData:me,onPrint:ee})}),e.jsxs("div",{className:"flex space-x-3 sticky bottom-0 bg-white pt-4 border-t",children:[e.jsx("button",{onClick:ee,className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Fechar"}),e.jsxs("button",{onClick:()=>{console.log("Reimprimindo comprovante de pagamento...")},className:"flex-1 bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5 4v3H4a2 2 0 00-2 2v3a2 2 0 002 2h1v2a2 2 0 002 2h6a2 2 0 002-2v-2h1a2 2 0 002-2V9a2 2 0 00-2-2H7a2 2 0 00-2 2zm8 0H7v3h6V4zm0 8H7v4h6v-4z",clipRule:"evenodd"})}),e.jsx("span",{children:"Reimprimir"})]})]})]})}),e.jsx(FD,{isOpen:z,onClose:()=>U(!1),onProcessWithdrawal:le,currentCashBalance:(n==null?void 0:n.expected_amount)||0,loading:W}),e.jsx(ID,{isOpen:H,onClose:()=>V(!1),onProcessTransfer:be,currentCashBalance:(n==null?void 0:n.expected_amount)||0,loading:W}),Q&&ie&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 sticky top-0 bg-white",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Transferência Processada!"})]}),e.jsx("button",{onClick:we,className:"text-gray-400 hover:text-gray-600 transition-colors",title:"Fechar modal de comprovante","aria-label":"Fechar modal de comprovante",children:e.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-600 mb-4 text-center",children:"Transferência para tesouraria processada com sucesso!"}),e.jsx("p",{className:"text-sm text-green-600 font-medium text-center mb-4",children:"Comprovante de transferência gerado"}),e.jsx(HD,{receiptData:ie,onPrint:we})]}),e.jsx("div",{className:"flex space-x-3 p-6 pt-0 border-t border-gray-200",children:e.jsx("button",{onClick:we,className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Fechar"})})]})}),re&&Ee&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 sticky top-0 bg-white",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Saída de Dinheiro Processada!"})]}),e.jsx("button",{onClick:Re,className:"text-gray-400 hover:text-gray-600 transition-colors",title:"Fechar modal de comprovante","aria-label":"Fechar modal de comprovante",children:e.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-600 mb-4 text-center",children:"Saída de dinheiro processada com sucesso!"}),e.jsx("p",{className:"text-sm text-orange-600 font-medium text-center mb-4",children:"Comprovante gerado para assinatura"}),e.jsx(YD,{receiptData:Ee,onPrint:Re})]}),e.jsx("div",{className:"flex space-x-3 p-6 pt-0 border-t border-gray-200",children:e.jsx("button",{onClick:Re,className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Fechar"})})]})}),j.length>0&&!je&&e.jsx("div",{className:"fixed bottom-6 right-6 z-40",children:e.jsxs("button",{onClick:qe,className:"bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-full p-4 shadow-lg hover:shadow-xl transform hover:scale-110 transition-all duration-200 flex items-center space-x-2 animate-bounce",title:`${j.length} pedidos aguardando pagamento`,children:[e.jsxs("div",{className:"relative",children:[e.jsx(ef,{className:"h-6 w-6"}),e.jsx("div",{className:"absolute -top-2 -right-2 h-5 w-5 bg-white rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-orange-600 text-xs font-bold",children:j.length})})]}),e.jsx("span",{className:"hidden sm:block font-medium",children:"Pedidos Pendentes"})]})})]})},eO=()=>e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Relatórios de Caixa"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Análise detalhada das operações financeiras"})]}),e.jsxs("button",{className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[e.jsx(Iw,{className:"h-5 w-5"}),e.jsx("span",{children:"Exportar"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Filtros"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Período"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{children:"Hoje"}),e.jsx("option",{children:"Esta Semana"}),e.jsx("option",{children:"Este Mês"}),e.jsx("option",{children:"Personalizado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Funcionário"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{children:"Todos"}),e.jsx("option",{children:"João Silva"}),e.jsx("option",{children:"Maria Santos"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Método de Pagamento"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{children:"Todos"}),e.jsx("option",{children:"Dinheiro"}),e.jsx("option",{children:"Cartão"}),e.jsx("option",{children:"PIX"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{className:"w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Aplicar Filtros"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:e.jsx(wi,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Vendas Totais"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"R$ 12.450,00"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:e.jsx(Fw,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Transações"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"247"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-purple-100 p-3 rounded-full",children:e.jsx(rr,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Sessões"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"8"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-orange-100 p-3 rounded-full",children:e.jsx(wi,{className:"h-6 w-6 text-orange-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Ticket Médio"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"R$ 50,40"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Vendas por Dia"}),e.jsx("div",{className:"h-64 bg-gray-100 rounded flex items-center justify-center",children:e.jsx("p",{className:"text-gray-500",children:"Gráfico de vendas diárias (a implementar)"})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Métodos de Pagamento"}),e.jsx("div",{className:"h-64 bg-gray-100 rounded flex items-center justify-center",children:e.jsx("p",{className:"text-gray-500",children:"Gráfico de pizza (a implementar)"})})]})]})]}),tO=()=>e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsx("div",{className:"flex justify-between items-center mb-8",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Histórico de Transações"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Todas as transações registradas no sistema"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0 md:space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(La,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx("input",{type:"text",placeholder:"Buscar por cliente, valor, método...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[e.jsx(Yw,{className:"h-4 w-4"}),e.jsx("span",{children:"Filtros"})]}),e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[e.jsx(rr,{className:"h-4 w-4"}),e.jsx("span",{children:"Período"})]}),e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[e.jsx(hA,{className:"h-4 w-4"}),e.jsx("span",{children:"Ordenar"})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data/Hora"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Método"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Funcionário"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"08/09/2025 14:30"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Venda"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"Maria Silva"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"PIX"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"R$ 45,80"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"João Santos"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Concluída"})})]}),e.jsx("tr",{children:e.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500",children:[e.jsx("p",{children:"Carregando transações..."}),e.jsx("p",{className:"text-sm mt-1",children:"A integração com dados reais será implementada"})]})})]})]})}),e.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Anterior"}),e.jsx("button",{className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Próximo"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Mostrando ",e.jsx("span",{className:"font-medium",children:"1"})," até ",e.jsx("span",{className:"font-medium",children:"10"})," de"," ",e.jsx("span",{className:"font-medium",children:"247"})," resultados"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsx("button",{className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:"Anterior"}),e.jsx("button",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50",children:"1"}),e.jsx("button",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-blue-600 text-sm font-medium text-white",children:"2"}),e.jsx("button",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50",children:"3"}),e.jsx("button",{className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:"Próximo"})]})})]})]})]})]}),sO=()=>{const{user:t}=as(),{currentSession:s,loading:n,error:i}=f0();return b.useEffect(()=>{console.log("CashTest: Usuário:",t),console.log("CashTest: Sessão atual:",s),console.log("CashTest: Loading:",n),console.log("CashTest: Error:",i)},[t,s,n,i]),e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Teste de Cash Management"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-100 rounded",children:[e.jsx("h3",{className:"font-semibold",children:"Usuário:"}),e.jsx("pre",{children:JSON.stringify(t,null,2)})]}),e.jsxs("div",{className:"p-4 bg-gray-100 rounded",children:[e.jsx("h3",{className:"font-semibold",children:"Sessão Atual:"}),e.jsx("pre",{children:JSON.stringify(s,null,2)})]}),e.jsxs("div",{className:"p-4 bg-gray-100 rounded",children:[e.jsx("h3",{className:"font-semibold",children:"Status:"}),e.jsxs("p",{children:["Loading: ",n.toString()]}),e.jsxs("p",{children:["Error: ",i||"Nenhum erro"]})]}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Recarregar Página"})]})]})},aO=()=>{const{getDailyCashMovement:t}=f0(),[s,n]=b.useState(new Date().toISOString().split("T")[0]),[i,l]=b.useState(null),[c,u]=b.useState(!1),[h,f]=b.useState(null),[p,g]=b.useState(!0),[y,v]=b.useState(!0),[j,N]=b.useState(!0),_=async E=>{u(!0),f(null);try{const w=await t(E);l(w)}catch(w){const M=w.message||"Erro ao carregar dados do movimento";f(M),console.error("Erro ao carregar movimento diário:",w),l({sessions:[],transactions:[],summary:{opening_total:0,closing_total:0,sales_total:0,cash_sales:0,card_sales:0,pix_sales:0,adjustments:0,discrepancy_total:0,transaction_count:0}})}finally{u(!1)}};b.useEffect(()=>{_(s)},[s]);const C=E=>new Date(E).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),R=E=>{const w={open:{bg:"bg-green-100",text:"text-green-800",label:"Aberto"},closed:{bg:"bg-gray-100",text:"text-gray-800",label:"Fechado"},reconciled:{bg:"bg-blue-100",text:"text-blue-800",label:"Reconciliado"}},M=w[E]||w.closed;return e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${M.bg} ${M.text}`,children:M.label})},S=E=>({sale:"text-green-600",refund:"text-red-600",adjustment:"text-blue-600",tip:"text-purple-600"})[E]||"text-gray-600",k=({isVisible:E,onClick:w,title:M})=>e.jsxs("button",{onClick:w,className:"flex items-center space-x-1 text-sm text-gray-600 hover:text-gray-800",title:E?`Ocultar ${M}`:`Mostrar ${M}`,children:[E?e.jsx(Hw,{className:"h-4 w-4"}):e.jsx(ki,{className:"h-4 w-4"}),e.jsx("span",{children:E?"Ocultar":"Mostrar"})]});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:e.jsx(rr,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Movimento do Caixa"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Consulte o movimento detalhado por data"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"date",value:s,onChange:E=>n(E.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:c,"aria-label":"Selecione a data"}),e.jsx("button",{onClick:()=>_(s),disabled:c,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:c?"Carregando...":"Consultar"})]})]}),h&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ed,{className:"h-5 w-5 text-red-600"}),e.jsx("p",{className:"text-red-800",children:h})]})}),c&&e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"inline-flex items-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e.jsx("span",{className:"text-gray-600",children:"Carregando movimento..."})]})}),i&&!c&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Resumo do Dia"}),e.jsx(k,{isVisible:j,onClick:()=>N(!j),title:"resumo"})]}),j&&e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-lg inline-flex",children:e.jsx(Gt,{className:"h-6 w-6 text-green-600"})}),e.jsx("p",{className:"mt-2 text-sm font-medium text-gray-600",children:"Vendas Totais"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Te(i.summary.sales_total)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg inline-flex",children:e.jsx(ha,{className:"h-6 w-6 text-blue-600"})}),e.jsx("p",{className:"mt-2 text-sm font-medium text-gray-600",children:"Sessões"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.sessions.length})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-purple-100 p-3 rounded-lg inline-flex",children:e.jsx(wi,{className:"h-6 w-6 text-purple-600"})}),e.jsx("p",{className:"mt-2 text-sm font-medium text-gray-600",children:"Transações"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.summary.transaction_count})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-yellow-100 p-3 rounded-lg inline-flex",children:e.jsx(ed,{className:"h-6 w-6 text-yellow-600"})}),e.jsx("p",{className:"mt-2 text-sm font-medium text-gray-600",children:"Discrepâncias"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Te(Math.abs(i.summary.discrepancy_total))})]})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Por Método de Pagamento"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Dinheiro"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:Te(i.summary.cash_sales)})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Cartões"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:Te(i.summary.card_sales)})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"PIX"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:Te(i.summary.pix_sales)})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Ajustes"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:Te(i.summary.adjustments)})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Sessões do Dia (",i.sessions.length,")"]}),e.jsx(k,{isVisible:p,onClick:()=>g(!p),title:"sessões"})]}),p&&e.jsx("div",{className:"p-6",children:i.sessions.length===0?e.jsx("p",{className:"text-center text-gray-500 py-8",children:"Nenhuma sessão encontrada para esta data"}):e.jsx("div",{className:"space-y-4",children:i.sessions.map(E=>{var w;return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:e.jsx(ha,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:((w=E.employee)==null?void 0:w.name)||"Funcionário"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Sessão #",E.id.slice(-8)]})]})]}),R(E.status)]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Abertura"}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:Te(E.opening_amount)}),e.jsx("p",{className:"text-xs text-gray-500",children:C(E.opened_at)})]}),E.closed_at&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Fechamento"}),e.jsx("p",{className:"text-lg font-bold text-red-600",children:Te(E.closing_amount||0)}),e.jsx("p",{className:"text-xs text-gray-500",children:C(E.closed_at)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Esperado"}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:Te(E.expected_amount)})]}),E.cash_discrepancy!==null&&E.cash_discrepancy!==void 0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Discrepância"}),e.jsx("p",{className:`text-lg font-bold ${E.cash_discrepancy>=0?"text-green-600":"text-red-600"}`,children:Te(E.cash_discrepancy)})]})]}),(E.opening_notes||E.closing_notes)&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[E.opening_notes&&e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Obs. Abertura:"})," ",E.opening_notes]}),E.closing_notes&&e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Obs. Fechamento:"})," ",E.closing_notes]})]})]},E.id)})})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Transações do Dia (",i.transactions.length,")"]}),e.jsx(k,{isVisible:y,onClick:()=>v(!y),title:"transações"})]}),y&&e.jsx("div",{className:"p-6",children:i.transactions.length===0?e.jsx("p",{className:"text-center text-gray-500 py-8",children:"Nenhuma transação encontrada para esta data"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Horário"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Tipo"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Método"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-600",children:"Valor"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Cliente/Obs"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Funcionário"})]})}),e.jsx("tbody",{children:i.transactions.map(E=>{var w;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 text-sm text-gray-900",children:C(E.processed_at)}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`text-sm font-medium ${S(E.transaction_type)}`,children:j1[E.transaction_type]||E.transaction_type})}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:_d[E.payment_method]||E.payment_method}),e.jsx("td",{className:`py-3 px-4 text-right text-sm font-medium ${E.amount>=0?"text-green-600":"text-red-600"}`,children:Te(E.amount)}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:E.comanda?e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium text-blue-600",children:["Comanda #",jd(E.comanda.id)]}),E.comanda.customer_name&&e.jsx("div",{className:"text-xs text-gray-500",children:E.comanda.customer_name}),E.comanda.table_number&&e.jsxs("div",{className:"text-xs text-gray-500",children:["Mesa ",E.comanda.table_number]})]}):E.notes&&(E.notes.includes("Pedido Balcão")||E.notes.includes("Pedido de balcão"))?e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium text-green-600",children:["Pedido Balcão ",x1(E.notes)]}),E.customer_name&&e.jsx("div",{className:"text-xs text-gray-500",children:E.customer_name}),e.jsx("div",{className:"text-xs text-gray-500",children:"Balcão"})]}):E.customer_name||E.notes||"-"}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:((w=E.processed_by_employee)==null?void 0:w.name)||"Funcionário"})]},E.id)})})]})})})]})]})]})},nO=()=>e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs(zv,{children:[e.jsx(yt,{path:"/",element:e.jsx(JD,{})}),e.jsx(yt,{path:"/reports",element:e.jsx(eO,{})}),e.jsx(yt,{path:"/transactions",element:e.jsx(tO,{})}),e.jsx(yt,{path:"/movement",element:e.jsx(aO,{})}),e.jsx(yt,{path:"/test",element:e.jsx(sO,{})})]})}),rO={id:"CMD-TEST-001",mesa_id:"MESA-05",cliente_id:"CLI-123",nome_cliente:"João Silva",funcionario_id:"FUNC-001",status:"aberta",total:87.5,quantidade_pessoas:4,aberta_em:new Date().toISOString(),created_at:new Date().toISOString(),updated_at:new Date().toISOString(),data_abertura:new Date().toISOString(),mesa:{id:"MESA-05",numero:5,capacidade:6},itens:[{id:"ITEM-001",comanda_id:"CMD-TEST-001",produto_id:"PROD-001",nome_produto:"Bolinho de Bacalhau",quantidade:2,preco_unitario:16.9,preco_total:33.8,status:"entregue",adicionado_em:new Date().toISOString(),entregue_em:new Date().toISOString(),created_at:new Date().toISOString(),observacoes:"Sem cebola"},{id:"ITEM-002",comanda_id:"CMD-TEST-001",produto_id:"PROD-002",nome_produto:"Cerveja Heineken 350ml",quantidade:3,preco_unitario:10.3,preco_total:30.9,status:"entregue",adicionado_em:new Date().toISOString(),entregue_em:new Date().toISOString(),created_at:new Date().toISOString()}]},iO=()=>{const{isOpen:t,selectedComanda:s,loading:n,error:i,openModal:l,closeModal:c,handleConfirm:u,clearError:h}=S1({onSuccess:f=>{console.log("✅ Teste - Modal funcionou:",f),alert("Modal funcionou! Verifique o console.")},onError:f=>{console.error("❌ Teste - Erro no modal:",f),alert(`Erro no modal: ${f.message}`)}});return e.jsxs("div",{className:"p-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Teste do Novo Modal"}),e.jsx("button",{onClick:()=>l(rO),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Abrir Modal de Teste"}),i&&e.jsx("div",{className:"mt-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{children:["Erro: ",i]}),e.jsx("button",{onClick:h,className:"text-red-600 hover:text-red-800",children:"✕"})]})}),s&&e.jsx(N1,{isOpen:t,comanda:s,onClose:c,onConfirm:u,loading:n})]})};_1.ABERTA,Fc.ENTREGUE,Fc.ENTREGUE,Fc.ENTREGUE;new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString();const oO=()=>{const t=[{tableNumber:5,expected:"Mesa 5"},{tableNumber:"10",expected:"Mesa 10"},{tableNumber:null,expected:"Balcão"},{tableNumber:void 0,expected:"Balcão"},{tableNumber:"",expected:"Balcão"}];return e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Teste de Formatação Mesa/Balcão"}),e.jsx("div",{className:"space-y-3",children:t.map((s,n)=>{const i=u0(s.tableNumber),l=i===s.expected;return e.jsx("div",{className:`p-3 rounded border ${l?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Input:"})," ",JSON.stringify(s.tableNumber)]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Resultado:"}),e.jsx("span",{className:`ml-2 px-2 py-1 rounded text-sm ${l?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:i})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Esperado:"})," ",s.expected]}),e.jsx("div",{children:l?e.jsx("span",{className:"text-green-600 font-bold",children:"✓"}):e.jsx("span",{className:"text-red-600 font-bold",children:"✗"})})]})},n)})}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded",children:[e.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"Exemplos de Uso:"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("code",{children:"formatTableDisplay(5)"})," → ",e.jsx("strong",{children:"Mesa 5"})]}),e.jsxs("div",{children:[e.jsx("code",{children:"formatTableDisplay('10')"})," → ",e.jsx("strong",{children:"Mesa 10"})]}),e.jsxs("div",{children:[e.jsx("code",{children:"formatTableDisplay(null)"})," → ",e.jsx("strong",{children:"Balcão"})]}),e.jsxs("div",{children:[e.jsx("code",{children:"formatTableDisplay(undefined)"})," → ",e.jsx("strong",{children:"Balcão"})]})]})]})]})},lO=async()=>{console.log("🔍 INICIANDO DEBUG DE TRANSAÇÕES"),console.log("================================");try{const{data:t,error:s}=await ae.from("cash_transactions").select("*").order("created_at",{ascending:!1}).limit(10);console.log("📊 Últimas 10 transações no banco:",(t==null?void 0:t.length)||0),t&&t.length>0&&console.table(t.map(p=>({id:p.id.slice(-8),tipo:p.transaction_type,metodo:p.payment_method,valor:p.amount,data:new Date(p.created_at).toLocaleString("pt-BR")})));const n=new Date().toISOString().split("T")[0],{data:i,error:l}=await ae.from("cash_transactions").select("*").gte("created_at",`${n}T00:00:00.000Z`).lt("created_at",`${n}T23:59:59.999Z`).order("created_at",{ascending:!1});if(console.log(`📅 Transações de hoje (${n}):`,(i==null?void 0:i.length)||0),i&&i.length>0){console.table(i.map(g=>({id:g.id.slice(-8),tipo:g.transaction_type,metodo:g.payment_method,valor:g.amount,hora:new Date(g.created_at).toLocaleTimeString("pt-BR")})));const p=i.reduce((g,y)=>(y.transaction_type==="sale"&&(g[y.payment_method]||(g[y.payment_method]={valor:0,quantidade:0}),g[y.payment_method].valor+=y.amount,g[y.payment_method].quantidade+=1),g),{});console.log("💰 Totais por método de pagamento:",p)}const{data:c,error:u}=await ae.from("cash_sessions").select("*").eq("session_date",n).order("opened_at",{ascending:!1});console.log("🏦 Sessões de caixa de hoje:",(c==null?void 0:c.length)||0),c&&c.length>0&&console.table(c.map(p=>({id:p.id.slice(-8),funcionario:p.employee_id.slice(-8),status:p.status,abertura:p.opening_amount,esperado:p.expected_amount,aberto_em:new Date(p.opened_at).toLocaleTimeString("pt-BR")})));const{data:h,error:f}=await ae.from("comandas").select("*").eq("status","pending_payment").limit(5);return console.log("📋 Comandas pendentes de pagamento:",(h==null?void 0:h.length)||0),console.log("✅ DEBUG CONCLUÍDO"),console.log("=================="),{allTransactions:(t==null?void 0:t.length)||0,todayTransactions:(i==null?void 0:i.length)||0,sessions:(c==null?void 0:c.length)||0,comandas:(h==null?void 0:h.length)||0}}catch(t){return console.error("❌ Erro no debug:",t),null}},cO=async()=>{console.log("🧪 Criando transação de teste...");try{const t={transaction_type:"sale",payment_method:"dinheiro",amount:50,processed_by:"test-user-id",notes:"Transação de teste para debug"},{data:s,error:n}=await ae.from("cash_transactions").insert(t).select().single();if(n)throw n;return console.log("✅ Transação de teste criada:",s),s}catch(t){return console.error("❌ Erro ao criar transação de teste:",t),null}},dO=async()=>{console.log("🔍 Verificando notas das transações...");try{const{data:t,error:s}=await ae.from("cash_transactions").select("id, notes, created_at, amount, payment_method").order("created_at",{ascending:!1}).limit(10);if(s)throw s;return console.log("📋 Últimas transações com notas:"),t==null||t.forEach((n,i)=>{console.log(`${i+1}. ${n.notes} (R$ ${n.amount} - ${n.payment_method})`)}),t}catch(t){return console.error("❌ Erro ao verificar notas:",t),null}},uO=async()=>{console.log("🧪 Testando inserção direta de transação...");try{const t={transaction_type:"sale",payment_method:"dinheiro",amount:25.5,processed_by:"test-user-123",notes:"Teste direto de inserção"};console.log("📋 Dados para inserir:",t);const{data:s,error:n}=await ae.from("cash_transactions").insert(t).select().single();return n?(console.error("❌ Erro na inserção:",n),{success:!1,error:n}):(console.log("✅ Transação inserida com sucesso:",s),{success:!0,data:s})}catch(t){return console.error("❌ Erro geral:",t),{success:!1,error:t}}};typeof window<"u"&&(window.debugTransactions=lO,window.createTestTransaction=cO,window.testDirectInsert=uO,window.checkTransactionNotes=dO);const hO=()=>{const{user:t}=as();return t?e.jsxs(NT,{children:[e.jsx(Rk,{})," "]}):e.jsx(mf,{to:"/login",replace:!0})},mO=()=>{const{user:t}=as();return t?e.jsx(mf,{to:"/",replace:!0}):e.jsx(Mk,{})};function fO(){return e.jsx(lS,{children:e.jsx(wT,{children:e.jsxs(zv,{children:[e.jsx(yt,{path:"/login",element:e.jsx(mO,{})}),e.jsxs(yt,{element:e.jsx(hO,{}),children:[e.jsx(yt,{index:!0,element:e.jsx(yM,{})}),e.jsx(yt,{path:"bar",element:e.jsx(jM,{})}),e.jsx(yt,{path:"bar-customers",element:e.jsx(wM,{})}),e.jsx(yt,{path:"bar-employees",element:e.jsx(NM,{})}),e.jsx(yt,{path:"cash/*",element:e.jsx(nO,{})}),e.jsx(yt,{path:"kitchen",element:e.jsx(YM,{})}),e.jsx(yt,{path:"inventory",element:e.jsx(WM,{})}),e.jsx(yt,{path:"inventory/estoque-baixo",element:e.jsx(ZM,{})}),e.jsx(yt,{path:"inventory/atualizacao-massiva",element:e.jsx(JM,{})}),e.jsx(yt,{path:"members",element:e.jsx(sD,{})}),e.jsx(yt,{path:"bar/attendance",element:e.jsx(VD,{})}),e.jsx(yt,{path:"settings",element:e.jsx("div",{className:"p-6",children:e.jsx("h1",{className:"text-2xl font-bold",children:"Configurações (Em Desenvolvimento)"})})}),e.jsx(yt,{path:"test-modal",element:e.jsx(iO,{})}),e.jsx(yt,{path:"test-table-display",element:e.jsx(oO,{})})]}),e.jsx(yt,{path:"*",element:e.jsx(mf,{to:"/",replace:!0})})]})})})}YN.createRoot(document.getElementById("root")).render(e.jsx(b.StrictMode,{children:e.jsx(fO,{})}));export{_1 as C,Fc as I,ae as s};
